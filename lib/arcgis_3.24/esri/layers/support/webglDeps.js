// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.24/esri/copyright.txt for details.
//>>built
/*

 Copyright 2000, Silicon Graphics, Inc. All Rights Reserved.
 Copyright 2015, Google Inc. All Rights Reserved.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to
 deal in the Software without restriction, including without limitation the
 rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 sell copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice including the dates of first publication and
 either this permission notice or a reference to http://oss.sgi.com/projects/FreeB/
 shall be included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 SILICON GRAPHICS, INC. BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR
 IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

 Original Code. The Original Code is: OpenGL Sample Implementation,
 Version 1.2.1, released January 26, 2000, developed by Silicon Graphics,
 Inc. The Original Code is Copyright (c) 1991-2000 Silicon Graphics, Inc.
 Copyright in any portions created by third parties is as indicated
 elsewhere herein. All Rights Reserved.
*/
require({cache:{"esri/layers/support/WebGLRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/dom-style dojox/gfx/matrix ../../kernel ../../lang ../../geometry/scaleUtils ../vectorTiles/core/promiseUtils ../vectorTiles/views/2d/engine/StageGL ../vectorTiles/views/2d/engine/webgl/WGLFeatureView ../vectorTiles/views/2d/engine/webgl/rendererInfoUtils ../vectorTiles/views/2d/layers/features/processors/SymbolProcessor ../vectorTiles/views/2d/support/HighlightOptions ../vectorTiles/geometry/SpatialReference ../vectorTiles/geometry/support/spatialReferenceUtils ../vectorTiles/renderers/SimpleRenderer ../vectorTiles/renderers/ClassBreaksRenderer ../vectorTiles/renderers/UniqueValueRenderer".split(" "),
function(b,d,a,c,e,g,h,f,l,k,m,t,q,r,w,v,u,x,y,n){function p(a){Object.defineProperty(a,"width",{get:function(){return this.size[0]}});Object.defineProperty(a,"height",{get:function(){return this.size[1]}});Object.defineProperty(a,"center",{get:function(){var a=this.viewpoint.targetGeometry;return[a.x,a.y]}})}var z=r.SymbolProcessor,A=c("esri-will-change"),B=function(){var a,c=window.performance||{},e=c.now||c.webkitNow||c.msNow||c.oNow||c.mozNow;if(void 0!==e)return function(){return e.call(c)};
a=window.performance&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:(new Date).getTime();return function(){return(new Date).getTime()-a}}();r=c("ff");var D=c("ie"),C=c("webkit"),J=c("opera"),E=(new Date).getTime(),H=window.requestAnimationFrame;H||(H=window[(C&&"webkit"||r&&"moz"||J&&"o"||D&&"ms")+"RequestAnimationFrame"])||(H=function(a){var c=B(),e=Math.max(0,16-(c-E)),f=window.setTimeout(function(){a(B())},e);E=c+e;return f});b=b(null,
{surfaceType:"webgl",surface:null,map:null,layer:null,updateOnPan:!1,renderOnNav:!1,_canvas:null,_mapSR4:null,_dprWatchDelay:2E3,_dprTimer:null,_rendererEvalTimer:null,_redrawPromises:null,_wglContainer:null,_wglView:null,_parentLayerView:null,_layerListenerHandles:null,_mapListenerHandles:null,_symbolProcessor:null,_rendererInfo:null,_returnCentroid:null,_hasVV:!1,_started:!1,_renderRequested:!1,_updateRequested:!1,_frameRequested:!1,_frameHandle:null,_viewState:null,_renderParameters:null,_updateParameters:null,
_zooming:!1,_panning:!1,_scaleMatrix:null,_defaultTransition:"transform 500ms ease",constructor:function(a){this._frame=this._frame.bind(this);this._evalRendererChange=this._evalRendererChange.bind(this);this._redrawPromises=new Map;f.mixin(this,a);this._setup()},destroy:function(){this._teardown()},getNode:function(){return this._canvas},getEventSource:function(){return this.getNode()},setClip:function(a){},start:function(){this._started=!0;this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=
window.devicePixelRatio;this._watchDPR();this._updateMapView(this.map.extent)},stop:function(){this._started=!1;this._unwatchDPR();this._stopFrame()},redraw:function(){this._handleRendererChange()},hitTest:function(a,c){return this.layer.suspended?k.resolve(null):this._wglView.hitTest(a,c).then(function(a){return 0===a.length?null:this.layer._mode._featureMap[a[0]]}.bind(this))},syncHitTest:function(a,c){var e=this._wglView._hitTest(this._wglContainer.prepareChildrenRenderParameters(this._renderParameters),
a,c);this._scheduleRender();return this.layer._mode._featureMap[e[0]]},_setup:function(){this._mapSR4=new v(this.map.spatialReference.toJson());this._initState();this._createWGLContainer();this._createWGLView();this._applyLayerSettings();this._createMapListeners();this._setViewState();this._initRendering()},_teardown:function(){this._destroyRendering();this._destroyMapListeners();this._destroyLayerListeners();this._destroyWGLView();this._destroyWGLContainer();this.stop();this.surface.getEventSource().removeChild(this.getNode())},
_createWGLContainer:function(){this._wglContainer=new m;this._canvas=this._wglContainer.createElement();A&&e.set(this._canvas,"will-change","transform");this._wglContainer.setElement(this._canvas);this.surface.getEventSource().appendChild(this._canvas);this._wglContainer.parent={requestChildRender:this._scheduleRender.bind(this)};this._wglContainer.attach(this._renderParameters)},_destroyWGLContainer:function(){this._wglContainer.detach(this._renderParameters);this._wglContainer=null},_createWGLView:function(){this._parentLayerView=
{view:{spatialReference:this._mapSR4,highlightOptions:new w,renderContext:"webgl"},tileInfoView:null,layer:{objectIdField:this.layer.objectIdField,geometryType:this._getNormalizedGeometryType(this.layer),renderer:null,spatialReference:new v(this.layer.spatialReference.toJson()),fields:this.layer.fields,typeIdField:this.layer.typeIdField,types:a.map(this.layer.types,function(a){return a.toJson()})},requestUpdate:function(){this._scheduleUpdate()}.bind(this)};this._wglView=new t(this._parentLayerView);
this._wglContainer.addChild(this._wglView);this._wglView._domContainer=this._wglContainer},_getNormalizedGeometryType:function(a){return a.hasXYFootprint()?"esriGeometryPolygon":a.geometryType},_destroyWGLView:function(){this._wglContainer.removeChild(this._wglView)},_applyLayerSettings:function(){this._wglContainer.opacity=this.layer.opacity;this._wglContainer.visible=!this.layer.suspended;this._createLayerListeners()},_createLayerListeners:function(){this._destroyLayerListeners();var a=this.layer;
this._layerListenerHandles=[a.on("opacity-change",function(){this._wglContainer.opacity=this.layer.opacity}.bind(this)),a.on("suspend",function(){this._wglContainer.visible=!1}.bind(this)),a.on("resume",function(){this._wglContainer.visible=!0}.bind(this)),a.on("renderer-change",function(){this._handleRendererChange()}.bind(this))]},_destroyLayerListeners:function(){a.forEach(this._layerListenerHandles,function(a){a.remove()});this._layerListenerHandles=null},_createMapListeners:function(){this._destroyMapListeners();
var a=this.map;this._mapListenerHandles=[a.on("pan-start",function(a){this._panning=!0;this.updateOnPan||this.renderOnNav||this._stopFrame()}.bind(this)),a.on("pan",function(a){this._applyPanEvent(a)}.bind(this)),a.on("pan-end",function(a){this._panning=!1;this._applyPanEvent(a)}.bind(this)),a.on("extent-change",function(a){e.set(this.getNode(),h._css.names.transition,"none");this._updateMapView(a.extent)}.bind(this)),a.on("zoom-start",function(a){this._zooming=!0;this._stopFrame()}.bind(this)),a.on("zoom-end",
function(a){this._zooming=!1}.bind(this)),a.on("scale",function(a){if(!this.renderOnNav){e.set(this.getNode(),h._css.names.transition,a.immediate?"none":this._defaultTransition);var c=this.map.__visibleDelta,c=g.translate(-c.x,-c.y);this._scaleMatrix=a=g.multiply(g.invert(c),a.matrix,c);this._applyTransform(a)}}.bind(this))]},_destroyMapListeners:function(){a.forEach(this._mapListenerHandles,function(a){a.remove()});this._mapListenerHandles=null},_getRenderer4:function(a){if(a=a||this.layer._getRenderer()){a=
this._fixImageUrl(a.toJson());var c;"simple"===a.type?c=x.fromJSON(a):"classBreaks"===a.type?c=y.fromJSON(a):"uniqueValue"===a.type?c=n.fromJSON(a):console.error("WebGLRenderer: unsupported layer.renderer!");return c}},_fixImageUrl:function(c){var e=[];switch(c.type){case "simple":e.push(c.symbol);break;case "uniqueValue":e.push(c.defaultSymbol);e=e.concat(a.map(c.uniqueValueInfos,function(a){return a.symbol}));break;case "classBreaks":e.push(c.defaultSymbol),e=e.concat(a.map(c.classBreakInfos,function(a){return a.symbol}))}var e=
a.filter(e,function(a){return!!a}),f=this.layer._url.path+"/images/",b=this.layer._getToken();a.forEach(e,function(a){var c=a.url;c&&(-1===c.search(/https?\:/)&&-1===c.indexOf("data:")&&(a.url=f+c),b&&-1!==a.url.search(/https?\:/)&&(a.url+="?token\x3d"+b))});return c},_setRenderer:function(a){this._rendererInfo=this._createRendererInfo(a);this._parentLayerView.layer.renderer=a},_createRendererInfo:function(c){if(c){var e=this._parentLayerView.layer;c=q.createRendererInfo(c,this._mapSR4,{fields:a.map(e.fields,
function(a){return a.toJson()}),typeIdField:e.typeIdField,types:e.types});this._returnCentroid=this._getReturnCentroid(c.renderer);this._hasVV=this._getHasVV(c);"heatmap"===c.renderer.type&&this._wglView.updateHeatmapParameters(c.renderer);return c}this._returnCentroid=this._hasVV=!1},_getReturnCentroid:function(a){if("esriGeometryPolygon"!==this._getNormalizedGeometryType(this.layer))return!1;switch(a.type){case "simple":return this._isMarkerSymbol(a.symbol);case "unique-value":return this._isMarkerSymbol(a.defaultSymbol)||
a.uniqueValueInfos.some(function(a){return this._isMarkerSymbol(a.symbol)}.bind(this));case "class-breaks":return this._isMarkerSymbol(a.defaultSymbol)||a.classBreakInfos.some(function(a){return this._isMarkerSymbol(a.symbol)}.bind(this));default:return!1}},_getHasVV:function(a){a=a.vvFields;return null!=a&&(null!=a.size||null!=a.rotation||null!=a.color||null!=a.opacity)},_isMarkerSymbol:function(a){if(!a)return!1;a=a.type;return"simple-marker"===a||"picture-marker"===a||"text"===a},_handleRendererChange:function(){this._rendererEvalTimer||
(this._rendererEvalTimer=setTimeout(this._evalRendererChange,0))},_cancelRendererEval:function(){clearTimeout(this._rendererEvalTimer);this._rendererEvalTimer=null},_evalRendererChange:function(){this._cancelRendererEval();var a=this._returnCentroid;this._setRenderer(this._getRenderer4());this._rendererInfo&&(this._cancelRedraw(),this._wglView.renderSwitchFrom()?(this._symbolProcessor._rendererInfo=this._rendererInfo,a!==this._returnCentroid&&this._returnCentroid?this.layer._mode.refresh():this._redrawView()):
this._scheduleUpdate())},_redrawView:function(){this._wglView.children.slice(0).forEach(function(a,c){var e=a.key.id,f=this.layer._mode._tileRequests.get(e);f&&(f=this._redrawTile(a,f.featureSet),f.isFulfilled()||this._redrawPromises.set(e,f))}.bind(this))},_redrawTile:function(a,c){return this._symbolProcessor.getTileData(a.key,c).then(function(c){var e=a.key.id;this._redrawPromises["delete"](e);this.layer._mode._tileRequests.get(e)&&this._repaintTile(a,c.data)}.bind(this)).otherwise(function(c){this._redrawPromises["delete"](a.key.id)}.bind(this))},
_repaintTile:function(a,c){this._wglView.removeChild(a);a.attached=!1;a.setData(c,this._hasVV,!1);this._wglView.addChild(a)},_cancelRedraw:function(a){a?(a=this._redrawPromises.get(a))&&a.cancel():this._redrawPromises.forEach(function(a,c){a.cancel()})},_initState:function(){var a={};p(a);this._viewState=f.mixin(a,{scale:0,size:[0,0],rotation:0,resolution:1,worldScreenWidth:0,spatialReference:this._mapSR4,viewpoint:{rotation:0,scale:0,targetGeometry:{x:0,y:0},camera:null,clone:function(){var a=f.mixin({},
this);a.targetGeometry&&(a.targetGeometry=f.mixin({},a.targetGeometry));return a}},toScreen:function(a,c){var e=this.center[1]+this.resolution*this.height*.5;a[0]=(c[0]-(this.center[0]-this.resolution*this.width*.5))/this.resolution;a[1]=(e-c[1])/this.resolution;return a},toMap:function(a,c){var e=this.center[1]+this.resolution*this.height*.5;a[0]=this.center[0]-this.resolution*this.width*.5+c[0]*this.resolution;a[1]=e-c[1]*this.resolution;return a},clone:function(){var a=f.mixin({},this);p(a);a.size&&
(a.size=a.size.slice(0));a.viewpoint&&(a.viewpoint=a.viewpoint.clone());return a}});this._renderParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this._updateParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0}},_initRendering:function(){this._setRenderer(this._getRenderer4());this._symbolProcessor=new z({objectIdField:this.layer.objectIdField,geometryType:this._getNormalizedGeometryType(this.layer),rendererInfo:this._rendererInfo,devicePixelRatio:this._renderParameters.pixelRatio,
textureManager:this._wglView.textureManager});this._wglView.renderInit()},_destroyRendering:function(){this._symbolProcessor&&this._symbolProcessor.destroy();this._cancelRendererEval();this._cancelRedraw()},_updateMapView:function(a){this._setViewState(a);this._scheduleUpdate();this._scheduleRender()},_setViewState:function(a){var c=this.map;if(c.loaded){a=a?a.getCenter():c.extent.getCenter();var e=this._viewState;e.viewpoint.targetGeometry=a.toJson();e.scale=e.viewpoint.scale=c.getScale();e.size=
[c.width,c.height]}},_updateViewState:function(){var a=this._viewState;a.resolution=a.scale/(39.37*l.getUnitValueForSR(this.map.spatialReference)*96);var c=0;a.spatialReference.isWrappable&&(c=u.getInfo(a.spatialReference),c=c.valid[1]-c.valid[0]);a.worldScreenWidth=Math.round(c/a.resolution)},_stopFrame:function(){this._frameRequested=this._updateRequested=this._renderRequested=!1;cancelAnimationFrame(this._frameHandle);this._frameHandle=null},_canRender:function(){return this.renderOnNav||!this._zooming&&
!this._panning},_canUpdate:function(){return this.updateOnPan||!this._zooming&&!this._panning},_watchDPR:function(){this._unwatchDPR();this._dprTimer=setTimeout(function(){this._renderParameters.pixelRatio!==window.devicePixelRatio&&this._scheduleRender();this._watchDPR()}.bind(this),this._dprWatchDelay)},_unwatchDPR:function(){clearTimeout(this._dprTimer);this._dprTimer=null},_scheduleRender:function(){this._started&&this._canRender()&&(this._renderRequested=!0,this._scheduleFrame())},_scheduleUpdate:function(){this._started&&
this._canUpdate()&&(this._updateRequested=!0,this._scheduleFrame())},_scheduleFrame:function(){this._frameRequested||(this._frameRequested=!0,this._frameHandle=H(this._frame))},_frame:function(){this._frameRequested&&(this._frameRequested=!1,this._renderParameters.pixelRatio!==window.devicePixelRatio&&(this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=this._symbolProcessor._devicePixelRatio=window.devicePixelRatio),this._updateParameters.stationary=this._renderParameters.stationary=
!0,this._updateViewState(),this._renderRequested&&this._canRender()&&(this._renderRequested=!1,e.set(this._canvas,h._css.names.transition,"none"),this._applyTransform(),this._scaleMatrix=null,this._wglContainer.doRender(this._renderParameters)),this._updateRequested&&this._canUpdate()&&(this._updateRequested=!1,this.layer._mode.update(this._updateParameters)))},_applyPanEvent:function(a){if(!this.renderOnNav){var c=g.translate(a.delta.x,a.delta.y),c=this._scaleMatrix?g.multiply(c,this._scaleMatrix):
c;this._applyTransform(c)}(this.updateOnPan||this.renderOnNav)&&this._updateMapView(a.extent)},_applyTransform:function(a){a=a?h._css.matrix(a):"";e.set(this._canvas,h._css.names.transform,a)}});c("extend-esri")&&d.setObject("layers.support.WebGLRenderer",b,h);return b})},"esri/layers/vectorTiles/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),function(b,d,a,c,e,g){function h(c){if(c){if("function"!==typeof c.forEach){var e=Object.keys(c),
f=e.map(function(a){return c[a]});return h(f).then(function(a){var c={};e.forEach(function(e,f){return c[e]=a[f]});return c})}var b=new a,g=[],d=c.length;0===d&&b.resolve(g);c.forEach(function(a){var c={promise:a};g.push(c);a.then(function(a){c.value=a}).catch(function(a){c.error=a}).then(function(){--d;0===d&&b.resolve(g)})});return b.promise}}Object.defineProperty(d,"__esModule",{value:!0});d.all=function(a){return e(a)};d.filter=function(a,c){var f=a.slice();return e(a.map(function(a,e){return c(a,
e)})).then(function(a){return f.filter(function(c,e){return a[e]})})};d.eachAlways=h;d.create=function(e,b){var f=new a(b);e(function(a){void 0===a&&(a=null);return c(a).then(f.resolve)},f.reject);return f.promise};d.reject=function(c){var e=new a;e.reject(c);return e.promise};d.resolve=function(c){void 0===c&&(c=null);var e=new a;e.resolve(c);return e.promise};d.after=function(c,e){void 0===e&&(e=null);var f=0,b=new a(function(){f&&(clearTimeout(f),f=0)}),f=setTimeout(function(){b.resolve(e)},c);
return b.promise};d.timeout=function(c,e,b){var f=0,h=new a(c.cancel);c.then(function(a){h.isFulfilled()||(h.resolve(a),f&&(clearTimeout(f),f=0))});c.catch(function(a){h.isFulfilled()||(h.reject(a),f&&(clearTimeout(f),f=0))});f=setTimeout(function(){var a=b||new g("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");h.reject(a)},e);return h.promise};d.wrapCallback=function(c){var e=!1,f=new a(function(){return e=!0});c(function(a){e||f.resolve(a)});return f.promise};d.isThenable=
function(a){return a&&"function"===typeof a.then};d.when=function(a){return c(a)}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./lang","./Message"],function(b,d,a,c,e){b=function(e){function b(a,c,h){var f=e.call(this,a,c,h)||this;return f instanceof b?f:new b(a,c,h)}a(b,e);b.prototype.toJSON=function(){return{name:this.name,message:this.message,details:c.clone(this.details),dojoType:this.dojoType}};b.fromJSON=function(a){var c=new b(a.name,
a.message,a.details);null!=a.dojoType&&(c.dojoType=a.dojoType);return c};return b}(e);b.prototype.type="error";return b})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])};return function(d,a){function c(){this.constructor=d}b(d,a);d.prototype=null===a?Object.create(a):(c.prototype=a.prototype,
new c)}}()})},"esri/layers/vectorTiles/core/lang":function(){define("dojo/_base/array dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),function(b,d,a,c,e,g,h){function f(a){return void 0!==a&&null!==a}function l(a){return f(a)?a:""}function k(h,d,k){var m=k.match(/([^\(]+)(\([^\)]+\))?/i),t=a.trim(m[1]);k=d[h];var m=JSON.parse((m[2]?a.trim(m[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z\_]+)\s*:/gi,'$1"$2":').replace(/\"\s*:\s*\'/gi,
'":"').replace(/\'\s*(,|\})/gi,'"$1')),n=m.utcOffset;if(-1===b.indexOf(q,t))t=a.getObject(t),a.isFunction(t)&&(k=t(k,h,d,m));else if("number"===typeof k||"string"===typeof k&&k&&!isNaN(Number(k)))switch(k=Number(k),t){case "NumberFormat":h=a.mixin({},m);d=parseFloat(h.places);if(isNaN(d)||0>d)h.places=Infinity;return e.format(k,h);case "DateString":k=new Date(k);if(m.local||m.systemLocale)return m.systemLocale?k.toLocaleDateString()+(m.hideTime?"":" "+k.toLocaleTimeString()):k.toDateString()+(m.hideTime?
"":" "+k.toTimeString());k=k.toUTCString();m.hideTime&&(k=k.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,""));return k;case "DateFormat":return k=new Date(k),f(n)&&(k=c.add(k,"minute",k.getTimezoneOffset()-n)),g.format(k,m)}return l(k)}function m(a,c){var e;if(c)for(e in a)a.hasOwnProperty(e)&&(void 0===a[e]?delete a[e]:a[e]instanceof Object&&m(a[e],!0));else for(e in a)a.hasOwnProperty(e)&&void 0===a[e]&&delete a[e];return a}function t(c){if(!c||"object"!=typeof c||a.isFunction(c))return c;if(c instanceof
Int8Array||c instanceof Uint8Array||c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Int32Array||c instanceof Uint16Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array||c instanceof Date)return new c.constructor(c);if("function"===typeof c.clone)c=c.clone();else if("function"===typeof c.map&&"function"===typeof c.forEach)c=c.map(t);else{var e={},f,b,h={};for(f in c){b=c[f];var g=!(f in h)||h[f]!==b;if(!(f in e)||e[f]!==b&&g)e[f]=t?t(b):b}c=e}return c}
var q=["NumberFormat","DateString","DateFormat"],r=/<\/?[^>]+>/g;return{equals:function(c,e){return c===e||"number"===typeof c&&isNaN(c)&&"number"===typeof e&&isNaN(e)||a.isFunction((c||{}).getTime)&&a.isFunction((e||{}).getTime)&&c.getTime()==e.getTime()||a.isFunction((c||{}).equals)&&c.equals(e)||a.isFunction((e||{}).equals)&&e.equals(c)||!1},valueOf:function(a,c){for(var e in a)if(a[e]==c)return e;return null},stripTags:function(a){if(a){var c=typeof a;if("string"===c)a=a.replace(r,"");else if("object"===
c)for(var e in a)(c=a[e])&&"string"===typeof c&&(c=c.replace(r,"")),a[e]=c}return a},substitute:function(c,e,g){var d,m,n;f(g)&&(a.isObject(g)?(d=g.first,m=g.dateFormat,n=g.numberFormat):d=g);if(e&&"{*}"!==e)return a.replace(e,a.hitch({obj:c},function(a,c){var e=c.split(":");return 1<e.length?(c=e[0],e.shift(),k(c,this.obj,e.join(":"))):m&&-1!==b.indexOf(m.properties||"",c)?k(c,this.obj,m.formatter||"DateString"):n&&-1!==b.indexOf(n.properties||"",c)?k(c,this.obj,n.formatter||"NumberFormat"):l(this.obj[c])}));
e=[];var p;e.push('\x3ctable class\x3d"esri-table" summary\x3d"'+h.fieldsSummary+'"\x3e\x3ctbody\x3e');for(p in c)if(g=c[p],m&&-1!==b.indexOf(m.properties||"",p)?g=k(p,c,m.formatter||"DateString"):n&&-1!==b.indexOf(n.properties||"",p)&&(g=k(p,c,n.formatter||"NumberFormat")),e.push("\x3ctr\x3e\x3cth\x3e"+p+"\x3c/th\x3e\x3ctd\x3e"+l(g)+"\x3c/td\x3e\x3c/tr\x3e"),d)break;e.push("\x3c/tbody\x3e\x3c/table\x3e");return e.join("")},filter:function(c,e,f){e=[a.isString(c)?c.split(""):c,f||d.global,a.isString(e)?
new Function("item","index","array",e):e];f={};var b;c=e[0];for(b in c)e[2].call(e[b],c[b],b,c)&&(f[b]=c[b]);return f},startsWith:function(a,c,e){e=e||0;return a.indexOf(c,e)===e},endsWith:function(a,c,e){if("number"!==typeof e||!isFinite(e)||Math.floor(e)!==e||e>a.length)e=a.length;e-=c.length;a=a.indexOf(c,e);return-1!==a&&a===e},isDefined:f,fixJson:m,clone:t}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","dojo/string"],function(b,d,a){return function(){function c(e,
b,h){this instanceof c&&(this.name=e,this.message=b&&a.substitute(b,h,function(a){return null==a?"":a})||"",this.details=h)}c.prototype.toString=function(){return"["+this.name+"]: "+this.message};return c}()})},"esri/layers/vectorTiles/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/promiseUtils ./Container ./webgl/BitBlitRenderer ./webgl/WGLPainter ./webgl/shaders/glShaderSnippets ../libs/gl-matrix/common ../libs/gl-matrix/mat2d ../libs/gl-matrix/vec2 ../../support/screenshotUtils ../../webgl/BufferObject ../../webgl/context-util ../../webgl/FramebufferObject ../../webgl/Program ../../webgl/RenderingContext ../../webgl/VertexArrayObject".split(" "),
function(b,d,a,c,e,g,h,f,l,k,m,t,q,r,w,v,u,x){function y(a){return{state:a.state,pixelRatio:a.pixelRatio,stationary:a.stationary}}var n={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(e){function b(){var a=null!==e&&e.apply(this,arguments)||this;a._clipData=new Float32Array(8);a._upperLeft=m.create();a._upperRight=m.create();a._lowerLeft=m.create();a._lowerRight=m.create();a._mat2=k.create();a._clipRendererInitialized=!1;a._contextVersion=null;return a}a(b,e);Object.defineProperty(b.prototype,
"glPainter",{get:function(){return this._painter},enumerable:!0,configurable:!0});b.prototype.createElement=function(){var a=document.createElement("canvas");a.setAttribute("class","esri-display-object");return a};b.prototype.setElement=function(a){this.element=a};b.prototype.useContextVersion=function(a){this._renderingContext||(this._contextVersion=a)};b.prototype.attach=function(a){if(this.attached)return!0;this._resizeCanvas(a);var c=r.createContextOrErrorHTML(this.element,{alpha:!0,antialias:!1,
depth:!0,stencil:!0},this._contextVersion);this._renderingContext=new u(c);this._contextVersion=this._renderingContext.contextVersion;this.attached=!0;this._cachedRenderParams=y(a);this._painter||(this._painter=new h.default,this._painter.initialize(this._renderingContext));return e.prototype.attach.call(this,a)};b.prototype.detach=function(a){e.prototype.detach.call(this,a);this._renderingContext&&(this._renderingContext.dispose(),this._renderingContext=null);this._cachedRenderParams=null};b.prototype.beforeRenderChildren=
function(a,c){var e=a.state,f=this._painter;if(f){var b=this._renderingContext;b.enforceState();f.update(e,a.pixelRatio);if(e.spatialReference&&(e.spatialReference._isWrappable?e.spatialReference._isWrappable():e.spatialReference.isWrappable)){var h=e.width,f=e.height,g=e.rotation,h=Math.round(h*a.pixelRatio),f=Math.round(f*a.pixelRatio),n=l.toRadian(g),p=Math.abs(Math.cos(n)),d=Math.abs(Math.sin(n)),z=Math.round(e.worldScreenWidth);if(Math.round(h*p+f*d)<=z)this._clipFrame=!1;else{this._clipFBO&&
this._clipFBO.width===h&&this._clipFBO.height===f||(this._clipFBO=new w(b,{colorTarget:0,depthStencilTarget:3,width:h,height:f}));var q=.5*h,t=.5*f,e=1/h,A=1/f,z=.5*z*a.pixelRatio,r=.5*(h*d+f*p),h=this._upperLeft,p=this._upperRight,d=this._lowerLeft,u=this._lowerRight;m.set(h,-z,-r);m.set(p,z,-r);m.set(d,-z,r);m.set(u,z,r);k.identity(this._mat2);k.translate(this._mat2,this._mat2,[q,t]);0!==g&&k.rotate(this._mat2,this._mat2,n);m.transformMat2d(h,h,this._mat2);m.transformMat2d(p,p,this._mat2);m.transformMat2d(d,
d,this._mat2);m.transformMat2d(u,u,this._mat2);g=this._clipData;g.set([2*d[0]*e-1,2*(f-d[1])*A-1,2*u[0]*e-1,2*(f-u[1])*A-1,2*h[0]*e-1,2*(f-h[1])*A-1,2*p[0]*e-1,2*(f-p[1])*A-1]);this._clipRendererInitialized||this._initializeClipRenderer(b);this._clipVBO.setData(g);this._boundFBO=b.getBoundFramebufferObject();b.bindFramebuffer(this._clipFBO);b.setDepthWriteEnabled(!0);b.setStencilWriteMask(255);b.setClearColor(0,0,0,0);b.setClearDepth(1);b.setClearStencil(0);b.clear(b.gl.COLOR_BUFFER_BIT|b.gl.DEPTH_BUFFER_BIT|
b.gl.STENCIL_BUFFER_BIT);b.setDepthWriteEnabled(!1);this._clipFrame=!0}}else this._clipFrame=!1}};b.prototype.afterRenderChildren=function(a,c){if(this._clipFrame&&this._clipRendererInitialized){var e=this._renderingContext;e.bindFramebuffer(this._boundFBO);this._boundFBO=null;e.bindVAO(this._clipVAO);e.bindProgram(this._clipStencilProgram);e.setDepthWriteEnabled(!1);e.setDepthTestEnabled(!1);e.setStencilTestEnabled(!0);e.setBlendingEnabled(!1);e.setColorMask(!1,!1,!1,!1);e.setStencilOp(7680,7680,
7681);e.setStencilWriteMask(255);e.setStencilFunction(519,1,255);e.drawElements(4,6,5123,0);e.bindVAO();e.setColorMask(!0,!0,!0,!0);e.setBlendingEnabled(!0);e.setStencilFunction(514,1,255);this._blitRenderer.render(e,this._clipFBO.colorTexture,9728,1);e.setStencilTestEnabled(!1)}};b.prototype.doRender=function(a){var c=this.element.style;this.visible?(c.display="block",c.opacity=""+this.opacity,this._resizeCanvas(a),e.prototype.doRender.call(this,a),this._cachedRenderParams=y(a)):c.display="none"};
b.prototype.takeScreenshot=function(a){void 0===a&&(a={});var e=a.pixelRatio||1;this._cachedRenderParams.pixelRatio=e;var f=Math.round(e*this._cachedRenderParams.state.width),b=Math.round(e*this._cachedRenderParams.state.height),h=0,g=0,p=f,l=b,d=f,k=b;if(d=a.area)h=Math.round(e*d.x),g=Math.round(e*d.y),p=Math.round(e*d.width),l=Math.round(e*d.height);void 0!==a.width&&void 0!==a.height?(d=a.width/a.height,l*d<p?(d*=l,h+=Math.floor((p-d)/2),p=Math.floor(d)):(d=p/d,g+=Math.floor((l-d)/2),l=Math.floor(d)),
d=a.width,k=a.height):(d=p,k=l);e=document.createElement("canvas");e.width=d;e.height=k;var m=e.getContext("2d"),z=new Uint8Array(p*l*4),q=this._renderingContext,A=w.create(q,{colorTarget:1,depthStencilTarget:3,width:f,height:b});q.bindFramebuffer(A);q.setViewport(0,0,f,b);var r=this._cachedRenderParams,u=this._renderingContext.gl;this._renderingContext.setClearColor(0,0,0,0);this._renderingContext.setClearDepth(1);this._renderingContext.setClearStencil(0);this._renderingContext.clear(u.COLOR_BUFFER_BIT|
u.DEPTH_BUFFER_BIT|u.STENCIL_BUFFER_BIT);r.context=this._renderingContext;this.beforeRenderChildren(r,r);if(void 0!==a.rotation&&null!==a.rotation){var u=r.state,x=u.clone();x.viewpoint.rotation=a.rotation;r.state=x;this.renderChildren(r);r.state=u}else this.renderChildren(r);this.afterRenderChildren(r,r);A.readPixels(h,b-(g+l),p,l,6408,5121,z);q.bindFramebuffer();q=m.getImageData(0,0,d,k);if(0!==h||0!==g||p!==f||l!==b||d!==f||k!==b)t.resampleHermite(z,p,l,q.data,d,k,!0);else{g=l-1;l=0;A=4*p;for(x=
u=h=b=f=p=r=void 0;l<g;){u=l*A;x=g*A;for(r=0;r<A;r+=4)p=z[u+r],f=z[u+r+1],b=z[u+r+2],h=z[u+r+3],z[u+r]=z[x+r],z[u+r+1]=z[x+r+1],z[u+r+2]=z[x+r+2],z[u+r+3]=z[x+r+3],z[x+r]=p,z[x+r+1]=f,z[x+r+2]=b,z[x+r+3]=h;l++;g--}p=q.data;f=z.length;for(g=0;g<f;g++)p[g]=z[g]}z=q.data;l=z.length;for(g=0;g<l;g+=4)h=z[g+3],0<h&&(b=h/255,p=Math.floor(z[g+0]/b),f=Math.floor(z[g+1]/b),b=Math.floor(z[g+2]/b),z[g+0]=255>=p?p:255,z[g+1]=255>=f?f:255,z[g+2]=255>=b?b:255);m.putImageData(q,0,0);m=n[a.format?a.format.toLowerCase():
"png"];z=1;void 0!==a.quality&&(z=a.quality/100);a=e.toDataURL(m,z);return c.resolve({dataURL:a,x:0,y:0,width:d,height:k})};b.prototype.prepareChildrenRenderParameters=function(a){if(!this.attached||!this._renderingContext)return null;a=y(a);var c=this._renderingContext,e=c.gl;c.setDepthWriteEnabled(!0);c.setStencilWriteMask(255);c.setClearColor(0,0,0,0);c.setClearDepth(1);c.setClearStencil(0);c.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT);c.setViewport(0,0,this.element.width,
this.element.height);c.setDepthWriteEnabled(!1);a.context=c;a.painter=this._painter;return a};b.prototype.attachChild=function(a,c){return a.attach(c)};b.prototype.detachChild=function(a,c){return a.detach(c)};b.prototype.renderChild=function(a,c){return a.processRender(c)};b.prototype._resizeCanvas=function(a){var c=this.element,e=c.style,f=a.state,b=a.pixelRatio;a=Math.round(f.width*b);b=Math.round(f.height*b);if(c.width!==a||c.height!==b)c.width=a,c.height=b;e.width=f.width+"px";e.height=f.height+
"px"};b.prototype._initializeClipRenderer=function(a){if(this._clipRendererInitialized)return!0;this._blitRenderer=new g;var c={a_pos:0},e=new v(a,f.stencilVS,f.stencilFS,c);if(!e)return!1;var b=q.createVertex(a,35040,32),h=new Uint16Array([0,1,2,2,1,3]),h=q.createIndex(a,35044,h);a=new x(a,c,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:b},h);this._clipStencilProgram=e;this._clipVBO=b;this._clipVAO=a;return this._clipRendererInitialized=!0};return b}(e)})},
"esri/layers/vectorTiles/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(b,d,a,c){var e;(function(a){a[a.BEFORE=0]="BEFORE";a[a.ATTACHING=1]="ATTACHING";a[a.DETACHING=2]="DETACHING";a[a.RENDERING=3]="RENDERING";a[a.AFTER=4]="AFTER";a[a.DONE=5]="DONE"})(e||(e={}));return function(c){function b(){var a=null!==c&&c.apply(this,arguments)||this;a._childrenSet=new Set;a._childrenToAttach=[];a._childrenToDetach=[];a._renderPhase=
e.DONE;a.children=[];return a}a(b,c);Object.defineProperty(b.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0});b.prototype.detach=function(a){var c=this.children;a=this.prepareChildrenRenderParameters(a);for(var e=c.length,f=0;f<e;f++){var b=c[f];b.attached&&(this.detachChild(b,a),b.attached=!1,b.parent=null)}};b.prototype.doRender=function(a){var c=this.prepareChildrenRenderParameters(a);this._renderPhase=e.BEFORE;this.beforeRenderChildren(a,c);
this._renderPhase=e.ATTACHING;this.attachChildren(c);this._renderPhase=e.DETACHING;for(var f=this._childrenToDetach;0<f.length;){var b=f.shift();this.detachChild(b,c);b.attached=!1;b.parent=null}this._renderPhase=e.RENDERING;this.renderChildren(c);this._renderPhase=e.AFTER;this.afterRenderChildren(a,c);this._renderPhase=e.DONE};b.prototype.addChild=function(a){return this.addChildAt(a,this.children.length)};b.prototype.addChildAt=function(a,c){void 0===c&&(c=this.numChildren);if(!a||this.contains(a))return a;
var f=a.parent;f&&f!==this&&f.removeChild(a);c>=this.numChildren?this.children.push(a):this.children.splice(c,0,a);this._childrenSet.add(a);f=this._childrenToDetach.indexOf(a);-1<f&&this._childrenToDetach.splice(f,1);this._childrenToAttach.push(a);this._renderPhase>=e.RENDERING&&this.requestRender();return a};b.prototype.contains=function(a){return this._childrenSet.has(a)};b.prototype.getChildIndex=function(a){return this.children.indexOf(a)};b.prototype.getChildAt=function(a){return 0>a||a>this.children.length?
null:this.children[a]};b.prototype.removeAllChildren=function(){for(var a=this.numChildren;a--;)this.removeChildAt(0)};b.prototype.removeChild=function(a){return this.contains(a)?this.removeChildAt(this.getChildIndex(a)):a};b.prototype.removeChildAt=function(a){if(0>a||a>=this.children.length)return null;a=this.children.splice(a,1)[0];this._childrenSet["delete"](a);if(a.attached)this._childrenToDetach.push(a),this._renderPhase>=e.RENDERING&&this.requestRender();else{var c=this._childrenToAttach.indexOf(a);
-1<c&&this._childrenToAttach.splice(c,1)}return a};b.prototype.requestChildRender=function(a){a&&a.parent===this&&this._renderPhase>=e.RENDERING&&this.requestRender()};b.prototype.setChildIndex=function(a,c){var f=this.getChildIndex(a);-1<f&&(this.children.splice(f,1),this.children.splice(c,0,a),this._renderPhase>=e.RENDERING&&this.requestRender())};b.prototype.sortChildren=function(a){this._renderPhase>e.RENDERING&&this.requestRender();return this.children.sort(a)};b.prototype.attachChildren=function(a){var c=
this._childrenToAttach;if(0!==c.length)for(var e=0,f=!1;!f;)f=c[e],this.attachChild(f,a)?(f.attached=!0,f.parent=this,c.splice(e,1)):++e,f=c.length===e};b.prototype.renderChildren=function(a){for(var c=this.children,e=c.length,f=0;f<e;f++){var b=c[f];b.attached&&this.renderChild(b,a)}};b.prototype.beforeRenderChildren=function(a,c){};b.prototype.attachChild=function(a,c){return a.attach(c)};b.prototype.detachChild=function(a,c){a.detach(c)};b.prototype.renderChild=function(a,c){a.processRender(c)};
b.prototype.afterRenderChildren=function(a,c){};return b}(c)})},"esri/layers/vectorTiles/views/2d/engine/DisplayObject":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Evented"],function(b,d,a,c){return function(c){function e(){var a=null!==c&&c.apply(this,arguments)||this;a._renderRequestedCalled=!1;a._attached=!1;a._opacity=1;a.renderRequested=!1;a._visible=!0;return a}a(e,c);Object.defineProperty(e.prototype,"attached",{get:function(){return this._attached},set:function(a){this._attached!==
a&&((this._attached=a)?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"opacity",{get:function(){return this._opacity},set:function(a){this._opacity!==a&&(this._opacity=a,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(a){this._visible!==a&&(this._visible=a,this.requestRender())},
enumerable:!0,configurable:!0});e.prototype.attach=function(a){return!0};e.prototype.detach=function(a){};e.prototype.processRender=function(a){this._renderRequestedCalled=!1;this.doRender(a);this._renderRequestedCalled||(this.renderRequested=!1);this.hasEventListener("post-render")&&this.emit("post-render")};e.prototype.requestRender=function(){var a=this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;this.parent&&this.parent.requestChildRender(this);a!==this.renderRequested&&
this.hasEventListener("will-render")&&this.emit("will-render")};e.prototype.dispose=function(){};return e}(c.Evented)})},"esri/layers/vectorTiles/views/2d/engine/Evented":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","dojo/aspect","dojo/on"],function(b,d,a,c,e){Object.defineProperty(d,"__esModule",{value:!0});b=function(){function a(){}a.prototype.on=function(a,e){return c.after(this,"on"+a,e,!0)};a.prototype.once=function(a,c){return e.once(this,a,c)};a.prototype.emit=
function(a){e.emit(this,a,this)};a.prototype.hasEventListener=function(a){a="on"+a;return!(!this[a]||!this[a].after)};return a}();d.Evented=b;d.EventedMixin=function(b){return function(b){function f(){return null!==b&&b.apply(this,arguments)||this}a(f,b);f.prototype.on=function(a,e){return c.after(this,"on"+a,e,!0)};f.prototype.once=function(a,c){return e.once(this,a,c)};f.prototype.emit=function(a,c){e.emit(this,a,c)};f.prototype.hasEventListener=function(a){a="on"+a;return!(!this[a]||!this[a].after)};
return f}(b)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports ./shaders/glShaderSnippets ../../../webgl/BufferObject ../../../webgl/Program ../../../webgl/VertexArrayObject".split(" "),function(b,d,a,c,e,g){return function(){function b(){this._initialized=!1}b.prototype.render=function(a,c,e,b){a&&(this._initialized||this._initialize(a),a.setBlendFunctionSeparate(1,771,1,771),a.bindVAO(this._vertexArrayObject),a.bindProgram(this._program),c.setSamplingMode(e),
a.bindTexture(c,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",b),a.drawArrays(5,0,4),a.bindVAO())};b.prototype._initialize=function(b){if(this._initialized)return!0;var f={a_pos:0,a_tex:1},h=new e(b,a.bitblitVS,a.bitblitFS,f);if(!h)return!1;var d=new Int8Array(16);d[0]=-1;d[1]=-1;d[2]=0;d[3]=0;d[4]=1;d[5]=-1;d[6]=1;d[7]=0;d[8]=-1;d[9]=1;d[10]=0;d[11]=1;d[12]=1;d[13]=1;d[14]=1;d[15]=1;b=new g(b,f,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,
divisor:0},{name:"a_tex",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},{geometry:c.createVertex(b,35044,d)});this._program=h;this._vertexArrayObject=b;return this._initialized=!0};return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/glShaderSnippets":function(){define("require exports dojo/text!./backgroundShaders.xml dojo/text!./bitblitShaders.xml dojo/text!./stencilShaders.xml dojo/text!./tileInfo.xml ../../../../webgl/ShaderSnippets".split(" "),function(b,d,a,
c,e,g,h){b=new h;h.parse(a,b);h.parse(c,b);h.parse(e,b);h.parse(g,b);return b})},"esri/layers/vectorTiles/views/webgl/ShaderSnippets":function(){define(["require","exports","dojox/xml/parser"],function(b,d,a){return function(){function c(a){if(a)for(var c in a)this[c]=a[c]}c.parse=function(c,b){for(var e=a.parse(c).getElementsByTagName("snippet"),f=/\$[a-zA-Z][a-zA-Z0-9]*(?:\([^\(\)]*\))?[ \t]*/,g=/[\$\s]+/g,d=/\(([^\(\)]*)\)/,m=0;m<e.length;m++){for(var t=e[m].getAttribute("name"),q=e[m].textContent;;){var r=
q.match(f);if(null==r)break;var w=r[0].replace(g,""),v=w.match(d),u=void 0;v&&(u=v[1].split(",").map(function(a){return a.trim()}));w=w.replace(d,"");u=b._instantiate(w,u);q=q.replace(r[0],u)}b[t]=q}};c.prototype._instantiate=function(a,c){var e=this[a];for(c||(c=[]);;){var b=e.match(/\$(\d+)/);if(null==b)break;var g=parseInt(b[1],10),e=e.replace(b[0],c[g])}return e};return c}()})},"dojox/xml/parser":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],
function(b){b.getObject("xml.parser",!0,dojox);dojox.xml.parser.parse=function(d,a){var c=b.doc,e;a=a||"text/xml";if(d&&b.trim(d)&&"DOMParser"in b.global){e=(new DOMParser).parseFromString(d,a);c=e.documentElement;if("parsererror"==c.nodeName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"==c.namespaceURI){var g=c.getElementsByTagNameNS("http://www.mozilla.org/newlayout/xml/parsererror.xml","sourcetext")[0];g&&(g=g.firstChild.data);throw Error("Error parsing text "+c.firstChild.data+" \n"+
g);}return e}if("ActiveXObject"in b.global){c=function(a){return"MSXML"+a+".DOMDocument"};c=["Microsoft.XMLDOM",c(6),c(4),c(3),c(2)];b.some(c,function(a){try{e=new ActiveXObject(a)}catch(l){return!1}return!0});if(d&&e&&(e.async=!1,e.loadXML(d),c=e.parseError,0!==c.errorCode))throw Error("Line: "+c.line+"\nCol: "+c.linepos+"\nReason: "+c.reason+"\nError Code: "+c.errorCode+"\nSource: "+c.srcText);if(e)return e}else if(c.implementation&&c.implementation.createDocument){if(d&&b.trim(d)&&c.createElement){g=
c.createElement("xml");g.innerHTML=d;var h=c.implementation.createDocument("foo","",null);b.forEach(g.childNodes,function(a){h.importNode(a,!0)});return h}return c.implementation.createDocument("","",null)}return null};dojox.xml.parser.textContent=function(d,a){if(1<arguments.length)return dojox.xml.parser.replaceChildren(d,(d.ownerDocument||b.doc).createTextNode(a)),a;if(void 0!==d.textContent)return d.textContent;var c="";d&&b.forEach(d.childNodes,function(a){switch(a.nodeType){case 1:case 5:c+=
dojox.xml.parser.textContent(a);break;case 3:case 2:case 4:c+=a.nodeValue}});return c};dojox.xml.parser.replaceChildren=function(d,a){var c=[];b.isIE&&b.forEach(d.childNodes,function(a){c.push(a)});dojox.xml.parser.removeChildren(d);b.forEach(c,b.destroy);b.isArray(a)?b.forEach(a,function(a){d.appendChild(a)}):d.appendChild(a)};dojox.xml.parser.removeChildren=function(b){for(var a=b.childNodes.length;b.hasChildNodes();)b.removeChild(b.firstChild);return a};dojox.xml.parser.innerXML=function(b){return b.innerXML?
b.innerXML:b.xml?b.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(b):null};return dojox.xml.parser})},"esri/layers/vectorTiles/views/webgl/BufferObject":function(){define(["require","exports"],function(b,d){return function(){function a(c,e,b,h,f){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=c;this._bufferType=e;this._usage=b;this._id=a._nextId++;this._glName=this._context.gl.createBuffer();
h&&this.setData(h,f)}a.createIndex=function(c,e,b,h){return new a(c,34963,e,b,h)};a.createVertex=function(c,e,b){return new a(c,34962,e,b)};Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"usage",
{get:function(){return this._usage},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"indexType",{get:function(){return this._indexType},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});a.prototype.dispose=
function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context=null)};a.prototype.setData=function(a,e){if(a){if("number"===typeof a){if(0>a&&console.error("Buffer size cannot be negative!"),34963===this._bufferType&&e)switch(this._indexType=e,this._size=a,e){case 5123:a*=2;break;case 5125:a*=4}}else{var c=a.byteLength;a instanceof Uint16Array&&(c/=2,this._indexType=5123);a instanceof Uint32Array&&(c/=4,this._indexType=5125);this._size=c}c=this._context.getBoundVAO();
this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,a,this._usage);this._context.bindVAO(c)}};a.prototype.setSubData=function(a,e,b,h){void 0===e&&(e=0);void 0===b&&(b=0);if(a){(0>e||e>=this._size)&&console.error("offset is out of range!");var c=e,g=b,d=h,m=a.byteLength;a instanceof Uint16Array&&(m/=2,c*=2,g*=2,d*=2);a instanceof Uint32Array&&(m/=4,c*=4,g*=4,d*=4);void 0===h&&(h=m-1);b>=h&&console.error("end must be bigger than start!");e+b-h>this._size&&
console.error("An attempt to write beyond the end of the buffer!");e=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferSubData(this._bufferType,c,(a instanceof ArrayBuffer?a:a.buffer).slice(g,d));this._context.bindVAO(e)}};a._nextId=0;return a}()})},"esri/layers/vectorTiles/views/webgl/Program":function(){define(["require","exports","dojo/has","./ShaderTranspiler"],function(b,d,a,c){var e=a("dojo-debug-messages");return function(){function a(c,
e,b,g,d){void 0===d&&(d={});this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};c||console.error("RenderingContext isn't initialized!");0===e.length&&console.error("Shaders source should not be empty!");
this._context=c;this._vertexShaderSource=e;this._fragmentShaderSource=b;if(Array.isArray(d))for(c=0;c<d.length;c++)this._defines[d[c]]="1";else this._defines=d;this._id=a._nextId++;this._locations=g}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"locations",{get:function(){return this._locations},
enumerable:!0,configurable:!0});a.prototype.getDefine=function(a){return this._defines[a]};a.prototype.dispose=function(){if(this._context){var a=this._context.gl;this._vShader&&(a.deleteShader(this._vShader),this._vShader=null);this._fShader&&(a.deleteShader(this._fShader),this._fShader=null);this._glName&&(a.deleteProgram(this._glName),this._glName=null);this._context=null}};a.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);
this._vShader&&this._fShader||console.error("Error loading shaders!");var a=this._context.gl,c=a.createProgram();a.attachShader(c,this._vShader);a.attachShader(c,this._fShader);for(var e in this._locations)a.bindAttribLocation(c,this._locations[e],e);a.linkProgram(c);a.getProgramParameter(c,a.LINK_STATUS)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+a.getProgramParameter(c,a.VALIDATE_STATUS)+", gl error ["+a.getError()+"]infoLog: "+a.getProgramInfoLog(c));this._glName=c;this._initialized=
!0}};a.prototype.getUniformLocation=function(a){this.initialize();void 0===this._nameToUniformLocation[a]&&(this._nameToUniformLocation[a]=this._context.gl.getUniformLocation(this._glName,a));return this._nameToUniformLocation[a]};a.prototype.hasUniform=function(a){return null!==this.getUniformLocation(a)};a.prototype.getAttribLocation=function(a){this.initialize();void 0===this._nameToAttribLocation[a]&&(this._nameToAttribLocation[a]=this._context.gl.getAttribLocation(this._glName,a));return this._nameToAttribLocation[a]};
a.prototype.setUniform1i=function(a,c){var e=this._nameToUniform1[a];if(void 0===e||c!==e)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(a),c),this._nameToUniform1[a]=c};a.prototype.setUniform1f=function(a,c){var e=this._nameToUniform1[a];if(void 0===e||c!==e)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(a),c),this._nameToUniform1[a]=c};a.prototype.setUniform1fv=function(c,e){var b=this._nameToUniform2[c];void 0!==b&&a._arraysEqual(e,
b)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(c),e),void 0===b?this._nameToUniform2[c]=new Float32Array(e):b.set(e))};a.prototype.setUniform2f=function(a,c,e){var b=this._nameToUniform2[a];if(void 0===b||c!==b[0]||e!==b[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(a),c,e),void 0===b?this._nameToUniform2[a]=new Float32Array([c,e]):(b[0]=c,b[1]=e)};a.prototype.setUniform2fv=function(c,b){e&&0!==b.length%2&&console.error("Value array must have even number of elements!");
var f=this._nameToUniform2[c];void 0!==f&&a._arraysEqual(b,f)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(c),b),void 0===f?this._nameToUniform2[c]=new Float32Array(b):f.set(b))};a.prototype.setUniform3f=function(a,c,e,b){var f=this._nameToUniform3[a];if(void 0===f||c!==f[0]||e!==f[1]||b!==f[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(a),c,e,b),void 0===f?this._nameToUniform3[a]=new Float32Array([c,e,b]):(f[0]=c,f[1]=
e,f[2]=b)};a.prototype.setUniform3fv=function(c,b){e&&0!==b.length%3&&console.error("Value array must contain sets of three values!");var f=this._nameToUniform3[c];void 0!==f&&a._arraysEqual(b,f)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(c),b),void 0===f?this._nameToUniform3[c]=new Float32Array(b):f.set(b))};a.prototype.setUniform4f=function(a,c,e,b,g){var f=this._nameToUniform4[a];if(void 0===f||c!==f[0]||e!==f[1]||b!==f[2]||g!==f[3])this._context.bindProgram(this),
this._context.gl.uniform4f(this.getUniformLocation(a),c,e,b,g),void 0===f?this._nameToUniform4[a]=new Float32Array([c,e,b,g]):(f[0]=c,f[1]=e,f[2]=b,f[3]=g)};a.prototype.setUniform4fv=function(c,b){e&&0!==b.length%4&&console.error("Value array must contain sets of four values!");var f=this._nameToUniform4[c];void 0!==f&&a._arraysEqual(b,f)||(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(c),b),void 0===f?this._nameToUniform4[c]=new Float32Array(b):f.set(b))};a.prototype.setUniformMatrix3fv=
function(c,b,g){void 0===g&&(g=!1);e&&0!==b.length%9&&console.error("Matrix array must contain sets ot 9 elements!");var f=this._nameToUniformMatrix3[c];void 0!==f&&(9===f.length?a._matrix3Equal(f,b):a._arraysEqual(b,f))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(c),g,b),void 0===f?this._nameToUniformMatrix3[c]=new Float32Array(b):f.set(b))};a.prototype.setUniformMatrix4fv=function(c,b,g){void 0===g&&(g=!1);e&&0!==b.length%16&&console.error("Matrix array must contain sets ot 16 elements!");
var f=this._nameToUniformMatrix4[c];void 0!==f&&(16===f.length?a._matrix4Equal(f,b):a._arraysEqual(b,f))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(c),g,b),void 0===f?this._nameToUniformMatrix4[c]=new Float32Array(b):f.set(b))};a._padToThree=function(a){var c=a.toString();1E3>a&&(c=("  "+a).slice(-3));return c};a.prototype._addLineNumbers=function(c){var e=2;return c.replace(/\n/g,function(){return"\n"+a._padToThree(e++)+":"})};a.prototype._loadShader=
function(a){var e=35633===a,b=e?this._vertexShaderSource:this._fragmentShaderSource,h;h="";for(var g in this._defines)h+="#define "+g+" "+this._defines[g]+"\n";h+=b;"webgl2"===this._context.contextVersion&&(h=c.transpileShader(h,e?"vertex":"fragment"));e=this._context.gl;a=e.createShader(a);e.shaderSource(a,h);e.compileShader(a);e.getShaderParameter(a,e.COMPILE_STATUS)||(console.error(e.getShaderInfoLog(a)),console.error(this._addLineNumbers(h)),"webgl2"===this._context.contextVersion&&(console.log("Shader source before transpilation:"),
console.log(b)));return a};a._matrix4Equal=function(a,c){e&&(16===a.length&&16===c.length||console.error("Matrix object must contain 16 elements!"));return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]&&a[9]===c[9]&&a[10]===c[10]&&a[11]===c[11]&&a[12]===c[12]&&a[13]===c[13]&&a[14]===c[14]&&a[15]===c[15]};a._matrix3Equal=function(a,c){e&&(9===a.length&&9===c.length||console.error("Matrix object must contain 16 elements!"));return a[0]===
c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]};a._arraysEqual=function(a,c){if(a.length!==c.length)return!1;for(var e=0;e<a.length;++e)if(a[e]!==c[e])return!1;return!0};a._nextId=0;return a}()})},"esri/layers/vectorTiles/views/webgl/ShaderTranspiler":function(){define(["require","exports","./reservedWordsGLSL3","./lib/glsl-tokenizer/string"],function(b,d,a,c){function e(a){return a.map(function(a){return"eof"!==a.type?a.data:""}).join("")}
function g(a,c,e,b){b=b||e;for(var f=0;f<a.length;f++){var h=a[f];if("ident"===h.type&&h.data===e)return b in c?c[b]++:c[b]=0,g(a,c,b+"_"+c[b],b)}return e}function h(a,c,e){void 0===e&&(e="afterVersion");var b={data:"\n",type:"whitespace"},f=function(c){return c<a.length?/[^\r\n]$/.test(a[c].data):!1},g=function(a){for(var c=-1,b=0,f=-1,p=0;p<a.length;p++){var g=a[p];"preprocessor"===g.type&&(g.data.match(/\#(if|ifdef|ifndef)\s+.+/)?++b:g.data.match(/\#endif\s*.*/)&&--b);("afterVersion"===e||"afterPrecision"===
e)&&"preprocessor"===g.type&&/^#version/.test(g.data)&&(f=Math.max(f,p));if("afterPrecision"===e&&"keyword"===g.type&&"precision"===g.data){a:{for(g=p;g<a.length;g++){var h=a[g];if("operator"===h.type&&";"===h.data)break a}g=null}if(null===g)throw Error("precision statement not followed by any semicolons!");f=Math.max(f,g)}c<f&&0===b&&(c=p)}return c+1}(a);f(g-1)&&a.splice(g++,0,b);for(var h=0;h<c.length;h++){var d=c[h];a.splice(g++,0,d)}f(g-1)&&f(g)&&a.splice(g,0,b)}Object.defineProperty(d,"__esModule",
{value:!0});var f=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];d.transpileShader=function(b,d){var l=c(b),k;a:{k="100";var q="300 es";void 0===k&&(k="100");void 0===q&&(q="300 es");for(var r=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,w=0;w<l.length;w++){var v=l[w];if("preprocessor"===v.type){var u=r.exec(v.data);if(u)if(r=u[1].replace(/\s\s+/g," "),r===q){k=r;break a}else if(r===k){v.data="#version "+q;break a}else throw Error("unknown glsl version: "+
r);}}l.splice(0,0,{type:"preprocessor",data:"#version "+q},{type:"whitespace",data:"\n"});k=null}if("300 es"===k)throw Error("shader is already glsl 300 es");r=v=null;w={};u={};for(k=0;k<l.length;++k)switch(q=l[k],q.type){case "keyword":"vertex"===d&&"attribute"===q.data?q.data="in":"varying"===q.data&&(q.data="vertex"===d?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(q.data.trim())&&(q.data=q.data.replace(/(2D|Cube|EXT)/g,""));if("fragment"===d&&"gl_FragColor"===
q.data){if(!v){var v=g(l,w,"fragColor"),x=void 0;void 0===x&&(x="lowp");h(l,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:x},{type:"whitespace",data:" "},{type:"keyword",data:"vec4"},{type:"whitespace",data:" "},{type:"ident",data:v},{type:"operator",data:";"}],"afterPrecision")}q.data=v}else"fragment"===d&&"gl_FragDepthEXT"===q.data&&(r||(r=g(l,w,"gl_FragDepth")),q.data=r);break;case "ident":if(0<=a.indexOf(q.data)){if(x="vertex"===d)a:{for(x=k-1;0<=x;x--){var y=
l[x];if("whitespace"!==y.type&&"block-comment"!==y.type)if("keyword"===y.type){if("attribute"===y.data||"in"===y.data){x=!0;break a}}else break}x=!1}if(x)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");q.data in u||(u[q.data]=g(l,w,q.data));q.data=u[q.data]}}for(k=l.length-1;0<=k;--k)q=l[k],"preprocessor"===q.type&&((v=q.data.match(/\#extension\s+(.*)\:/))&&v[1]&&0<=f.indexOf(v[1].trim())&&(v=l[k+1],l.splice(k,v&&"whitespace"===v.type?2:1)),(v=q.data.match(/\#ifdef\s+(.*)/))&&
v[1]&&0<=f.indexOf(v[1].trim())&&(q.data="#if 1"),(v=q.data.match(/\#ifndef\s+(.*)/))&&v[1]&&0<=f.indexOf(v[1].trim())&&(q.data="#if 0"));return e(l)}})},"esri/layers/vectorTiles/views/webgl/reservedWordsGLSL3":function(){define(["require","exports"],function(b,d){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/string":function(){define(["./index"],function(b){"use strict;";return function(d){var a=b(),c=[],c=c.concat(a(d));return c=c.concat(a(null))}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/index":function(){define(["./lib/literals","./lib/operators","./lib/builtins"],function(b,d,a){"use strict;";var c="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");return function(){function e(a){a.length&&
x.push({type:c[r],data:a,position:p,line:y,column:n})}function g(){u=u.length?[]:u;if("/"===v&&"*"===w)return p=q+t-1,r=0,v=w,t+1;if("/"===v&&"/"===w)return p=q+t-1,r=1,v=w,t+1;if("#"===w)return r=2,p=q+t,t;if(/\s/.test(w))return r=9,p=q+t,t;z=/\d/.test(w);A=/[^\w_]/.test(w);p=q+t;r=z?4:A?3:9999;return t}function h(){if(("\r"===w||"\n"===w)&&"\\"!==v)return e(u.join("")),r=999,t;u.push(w);v=w;return t+1}function f(){if("."===v&&/\d/.test(w))return r=5,t;if("/"===v&&"*"===w)return r=0,t;if("/"===v&&
"/"===w)return r=1,t;if("."===w&&u.length){for(;l(u););r=5;return t}if(";"===w||")"===w||"("===w){if(u.length)for(;l(u););e(w);r=999;return t+1}var a=2===u.length&&"\x3d"!==w;if(/[\w_\d\s]/.test(w)||a){for(;l(u););r=999;return t}u.push(w);v=w;return t+1}function l(a){var c=0,b,f;do{b=d.indexOf(a.slice(0,a.length+c).join(""));f=d[b];if(-1===b){if(0<c--+a.length)continue;f=a.slice(0,1).join("")}e(f);p+=f.length;u=u.slice(f.length);return u.length}while(1)}function k(){if("."===w||/[eE]/.test(w))return u.push(w),
r=5,v=w,t+1;if("x"===w&&1===u.length&&"0"===u[0])return r=11,u.push(w),v=w,t+1;if(/[^\d]/.test(w))return e(u.join("")),r=999,t;u.push(w);v=w;return t+1}function m(){"f"===w&&(u.push(w),v=w,t+=1);if(/[eE]/.test(w)||"-"===w&&/[eE]/.test(v))return u.push(w),v=w,t+1;if(/[^\d]/.test(w))return e(u.join("")),r=999,t;u.push(w);v=w;return t+1}var t=0,q=0,r=999,w,v,u=[],x=[],y=1,n=0,p=0,z=!1,A=!1,B="",D;return function(c){x=[];if(null!==c){c=c.replace?c.replace(/\r\n/g,"\n"):c;t=0;B+=c;for(D=B.length;w=B[t],
t<D;){c=t;switch(r){case 0:"/"===w&&"*"===v?(u.push(w),e(u.join("")),r=999):(u.push(w),v=w);t+=1;break;case 1:t=h();break;case 2:t=h();break;case 3:t=f();break;case 4:t=k();break;case 11:/[^a-fA-F0-9]/.test(w)?(e(u.join("")),r=999):(u.push(w),v=w,t+=1);break;case 5:t=m();break;case 9999:if(/[^\d\w_]/.test(w)){var p=u.join("");r=-1<b.indexOf(p)?8:-1<a.indexOf(p)?7:6;e(u.join(""));r=999}else u.push(w),v=w,t+=1;break;case 9:/[^\s]/g.test(w)?(e(u.join("")),r=999):(u.push(w),v=w,t+=1);break;case 999:t=
g()}if(c!==t)switch(B[c]){case "\n":n=0;++y;break;default:++n}}q+=t;B=B.slice(t);return x}u.length&&e(u.join(""));r=10;e("(eof)");return x}}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/literals":function(){define([],function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/operators":function(){define([],function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/builtins":function(){define([],function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})},
"esri/layers/vectorTiles/views/webgl/VertexArrayObject":function(){define(["require","exports"],function(b,d){return function(){function a(c,e,b,h,f){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=c;this._layout=b;this._buffers=h;this._locations=e;f&&(this._indexBuffer=f);this._id=a._nextId++}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){var a=this;return Object.keys(this._buffers).reduce(function(c,b){return c+a._buffers[b].size},this._indexBuffer?this._indexBuffer.size:
0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});a.prototype.dispose=function(a){void 0===a&&(a=!0);if(this._context){var c=this._context.capabilities.vao;c&&this._glName&&(c.deleteVertexArray(this._glName),this._glName=null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);
if(a){for(var b in this._buffers)this._buffers[b].dispose(),delete this._buffers[b];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}this._context=null}};a.prototype.initialize=function(){if(!this._initialized){var a=this._context.capabilities.vao;if(a){var e=a.createVertexArray();a.bindVertexArray(e);this._bindLayout();a.bindVertexArray(null);this._glName=e}this._initialized=!0}};a.prototype.bind=function(){this.initialize();var a=this._context.capabilities.vao;a?a.bindVertexArray(this.glName):
(this._context.bindVAO(null),this._bindLayout())};a.prototype._bindLayout=function(){var a=this._buffers,e=!!this._context.capabilities.vao,b=this._layout,h=this._indexBuffer;a||console.error("Vertex buffer dictionary is empty!");var f=this._context.gl,d,k,m=0,t;for(t in a)for((d=a[t])||console.error("Vertex buffer is uninitialized!"),(k=b[t])||console.error("Vertex element descriptor is empty!"),this._context.bindBuffer(d),m=0;m<k.length;++m){d=k[m];var q=this._locations[d.name],r=d.baseInstance?
d.baseInstance*d.stride:0;void 0===q&&console.error("There is no location for vertex attribute '"+d.name+"' defined.");d.baseInstance&&!d.divisor&&console.error("Vertex attribute '"+d.name+"' uses baseInstanceOffset without divisor.");if(4>=d.count){if(f.enableVertexAttribArray(q),f.vertexAttribPointer(q,d.count,d.type,d.normalized,d.stride,d.offset+r),d.divisor&&0<d.divisor){var w=this._context.capabilities.instancing;w&&w.vertexAttribDivisor(q,d.divisor)}}else if(16===d.count&&5126===d.type)for(var v=
0;4>v;v++)f.enableVertexAttribArray(q+v),f.vertexAttribPointer(q+v,4,d.type,d.normalized,d.stride,d.offset+16*v+r),d.divisor&&0<d.divisor&&(w=this._context.capabilities.instancing)&&w.vertexAttribDivisor(q+v,d.divisor);else console.error("Unsupported vertex attribute element count: "+d.count)}h&&(e?f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,h.glName):this._context.bindBuffer(h))};a.prototype.unbind=function(){this.initialize();var a=this._context.capabilities.vao;a?a.bindVertexArray(null):this._unbindLayout()};
a.prototype._unbindLayout=function(){var a=this._buffers,e=this._layout,b=this._locations,h=this._context;a||console.error("Vertex buffer dictionary is empty!");var f=h.gl,d,k,m,t=0,q=0,r;for(r in a){(d=a[r])||console.error("Vertex buffer is uninitialized!");k=e[r];t=0;for(q=k.length;t<q;++t)m=k[t],f.disableVertexAttribArray(b[m.name]);h.unbindBuffer(d.bufferType)}(a=this._indexBuffer)&&h.unbindBuffer(a.bufferType)};a._nextId=0;return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLPainter":function(){define("require exports ../../../../core/tsSupport/assignHelper dojo/has ../../../../core/libs/gl-matrix/mat4 ./enums ./GeometryUtils ./MaterialManager ./Utils ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil ./brushes/WGLGeometryBrushFill ./brushes/WGLGeometryBrushLine ./brushes/WGLGeometryBrushMarker ./brushes/WGLGeometryBrushText ./painter/WGLHighlightPainter ./../../../webgl/FramebufferObject".split(" "),
function(b,d,a,c,e,g,h,f,l,k,m,t,q,r,w,v,u){Object.defineProperty(d,"__esModule",{value:!0});b=function(){function a(){this._initialized=!1}a.prototype.registerPass=function(a,c){this._initialize();for(var e=0;e<c.length;e++)this._passMap.set(c[e],a);return this};a.prototype.getPaintPassTs=function(a){this._initialize();return this._passMap.has(a)?[this._passMap.get(a)]:[]};a.prototype._initialize=function(){this._initialized||(this._passMap=new Map,this._initialized=!0)};return a}();d.WGLPainterOptions=
b;var x=new Uint8Array(4*l.C_HITTEST_SEARCH_SIZE*l.C_HITTEST_SEARCH_SIZE),y=new Uint32Array(x.buffer);b=function(){function b(){this._hlPainter=new v;this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=new Float32Array(16);this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0;this.materialManager=new f}b.allGeometryPhases=function(){return[g.WGLDrawPhase.FILL,
g.WGLDrawPhase.LINE,g.WGLDrawPhase.MARKER,g.WGLDrawPhase.TEXT]};Object.defineProperty(b.prototype,"extrudeMatrix",{get:function(){return this._extrudeMatrix},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"extrudeNoRotationMatrix",{get:function(){return this._extrudeNoRotationMatrix},enumerable:!0,configurable:!0});b.prototype.initialize=function(a){this.materialManager.initialize(a)};b.prototype.update=function(a,c){this._state=a;if(this._state.width!==this._cachedWidth||this._state.height!==
this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/a.width,this._extrudeScaleVector[1]=-2/a.height,e.identity(this._extrudeMatrix),e.rotate(this._extrudeMatrix,this._extrudeMatrix,-a.rotation*h.C_DEG_TO_RAD,this._extrudeRotateVector),e.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),e.transpose(this._extrudeMatrix,this._extrudeMatrix),e.identity(this._extrudeNoRotationMatrix),e.scale(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix,
this._extrudeScaleVector),e.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=this._state.rotation};b.prototype.getBrushes=function(a){if(!this._brushes){var c=new t.default,e=new r.default,b=new q.default,f=new w.default,p=new k.default,h=new m.default;this._brushes=new Map;this._brushes.set(g.WGLDrawPhase.FILL,[c]);this._brushes.set(g.WGLDrawPhase.MARKER,[e]);this._brushes.set(g.WGLDrawPhase.LINE,
[b]);this._brushes.set(g.WGLDrawPhase.TEXT,[f]);this._brushes.set(g.WGLDrawPhase.HITTEST,[c,e,b,f]);this._brushes.set(g.WGLDrawPhase.HIGHLIGHT,[c,e,b,f]);this._brushes.set(g.WGLDrawPhase.CLIP,[h]);this._brushes.set(g.WGLDrawPhase.DEBUG,[p])}if(!this._brushes.has(a))throw Error("WGLPainter: Tried to get brush for unknown phase: "+a);return this._brushes.get(a)};b.prototype.bindTextureManager=function(a){this.textureManager=a};b.prototype.draw=function(a,c,e,b){this._drawClippingRects(a,c);var f=a.context;
f.setBlendingEnabled(!0);f.setStencilWriteMask(0);f.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(a,c,e,b);this._debugTiles(a,c)};b.prototype.setHighlightOptions=function(a){this._hlPainter.setHighlightOptions(a)};b.prototype.highlight=function(a,c){var e=a.context,b=e.getViewport();this._hlPainter.setup(e,b.width,b.height);this._hlPainter.startMaskDraw(e);this._drawClippingRects(a,c);e.setBlendingEnabled(!0);e.setStencilWriteMask(0);e.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(a,
c,[g.WGLDrawPhase.HIGHLIGHT]);this._hlPainter.draw(e)};b.prototype.hitTest=function(a,c){var e=l.C_HITTEST_SEARCH_SIZE,b=[0,0],f=[0,0],h=a.state;h.toMap(b,[0,0]);h.toMap(f,[e,e]);if(0===c.filter(function(a){return!(b[0]>a.bounds[2]||f[0]<a.bounds[0]||b[1]<a.bounds[1]||f[1]>a.bounds[3])}).length)return[];h=a.context;this._hittestFBO||(this._hittestFBO=u.create(h,{colorTarget:0,depthStencilTarget:3,width:e,height:e}));var p=h.getViewport(),n=h.getBoundFramebufferObject();h.bindFramebuffer(this._hittestFBO);
h.setViewport(0,0,e,e);this._drawClippingRects(a,c);var d=h.gl;h.setClearColor(1,1,1,1);h.clear(d.COLOR_BUFFER_BIT);h.setBlendingEnabled(!1);h.setStencilWriteMask(0);this._drawPhases(a,c,[g.WGLDrawPhase.HITTEST]);h.setBlendingEnabled(!0);this._hittestFBO.readPixels(0,0,e,e,6408,5121,x);for(var e=e*e,d=new Set,k=0;k<e;k++){var z=y[k];4294967295!==z&&d.add(z)}h.bindFramebuffer(n);h.setViewport(p.x,p.y,p.width,p.height);var m=[];d.forEach(function(a){m.push(a)});return m};b.prototype._getPaintPass=function(a){this._passes||
(this._passes=new Map);if(!this._passes.has(a))try{this._passes.set(a,new a)}catch(z){throw Error("Tried to instantiate WGLPaintPass with unknown constructor: "+a+",\n"+z);}return this._passes.get(a)};b.prototype._getPaintPasses=function(a,c){var e=this;return c.getPaintPassTs(a).map(function(a){return e._getPaintPass(a)})};b.prototype._drawPhases=function(c,e,b,f){c.context.setStencilTestEnabled(!0);for(var g=0;g<b.length;g++){var h=b[g],p=f?this._getPaintPasses(h,f):[],h=a({},c,{drawPhase:h});p.forEach(function(a){return a.preRender(c,
c.rendererInfo)});for(var n=0,d=e;n<d.length;n++)d[n].doRender(h);p.reverse().forEach(function(a){return a.postRender(c,c.rendererInfo)})}c.context.setStencilTestEnabled(!1)};b.prototype._debugTiles=function(a,e){c("esri-feature-tiles-debug")&&this._drawPhases(a,e,[g.WGLDrawPhase.DEBUG])};b.prototype._drawClippingRects=function(a,c){if(0!==c.length){var e=a.context;e.setDepthWriteEnabled(!1);e.setDepthTestEnabled(!1);e.setStencilTestEnabled(!0);e.setBlendingEnabled(!1);e.setColorMask(!1,!1,!1,!1);
e.setStencilOp(7680,7680,7681);e.setClearStencil(0);e.clear(e.gl.STENCIL_BUFFER_BIT);e.setStencilWriteMask(255);for(var e=0,b=c.length;e<c.length;e++,b--)c[e].stencilRef=b;this._drawPhases(a,c,[g.WGLDrawPhase.CLIP]);a.context.setColorMask(!0,!0,!0,!0)}};return b}();d.default=b})},"esri/layers/vectorTiles/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(b){for(var d,a=1,c=arguments.length;a<c;a++){d=arguments[a];for(var e in d)Object.prototype.hasOwnProperty.call(d,
e)&&(b[e]=d[e])}return b}})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat4":function(){define(["./common"],function(b){var d={scalar:{},SIMD:{},create:function(){var a=new b.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var c=new b.ARRAY_TYPE(16);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];
c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a},fromValues:function(a,c,e,g,h,f,d,k,m,t,q,r,w,v,u,x){var l=new b.ARRAY_TYPE(16);l[0]=a;l[1]=c;l[2]=e;l[3]=g;l[4]=h;l[5]=f;l[6]=d;l[7]=k;l[8]=m;l[9]=t;l[10]=q;l[11]=r;l[12]=w;l[13]=v;l[14]=u;l[15]=x;return l},set:function(a,c,e,b,h,f,d,k,m,t,q,r,w,v,u,x,y){a[0]=
c;a[1]=e;a[2]=b;a[3]=h;a[4]=f;a[5]=d;a[6]=k;a[7]=m;a[8]=t;a[9]=q;a[10]=r;a[11]=w;a[12]=v;a[13]=u;a[14]=x;a[15]=y;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}};d.scalar.transpose=function(a,c){if(a===c){var e=c[1],b=c[2],h=c[3],f=c[6],d=c[7],k=c[11];a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=e;a[6]=c[9];a[7]=c[13];a[8]=b;a[9]=f;a[11]=c[14];a[12]=h;a[13]=d;a[14]=k}else a[0]=c[0],a[1]=c[4],a[2]=
c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],a[14]=c[11],a[15]=c[15];return a};d.SIMD.transpose=function(a,c){var e,b,h,f,d,k,m;e=SIMD.Float32x4.load(c,0);b=SIMD.Float32x4.load(c,4);h=SIMD.Float32x4.load(c,8);f=SIMD.Float32x4.load(c,12);d=SIMD.Float32x4.shuffle(e,b,0,1,4,5);k=SIMD.Float32x4.shuffle(h,f,0,1,4,5);m=SIMD.Float32x4.shuffle(d,k,0,2,4,6);d=SIMD.Float32x4.shuffle(d,k,1,3,5,7);SIMD.Float32x4.store(a,0,m);SIMD.Float32x4.store(a,
4,d);d=SIMD.Float32x4.shuffle(e,b,2,3,6,7);k=SIMD.Float32x4.shuffle(h,f,2,3,6,7);e=SIMD.Float32x4.shuffle(d,k,0,2,4,6);b=SIMD.Float32x4.shuffle(d,k,1,3,5,7);SIMD.Float32x4.store(a,8,e);SIMD.Float32x4.store(a,12,b);return a};d.transpose=b.USE_SIMD?d.SIMD.transpose:d.scalar.transpose;d.scalar.invert=function(a,c){var e=c[0],b=c[1],h=c[2],f=c[3],d=c[4],k=c[5],m=c[6],t=c[7],q=c[8],r=c[9],w=c[10],v=c[11],u=c[12],x=c[13],y=c[14],n=c[15],p=e*k-b*d,z=e*m-h*d,A=e*t-f*d,B=b*m-h*k,D=b*t-f*k,C=h*t-f*m,J=q*x-
r*u,E=q*y-w*u,H=q*n-v*u,K=r*y-w*x,aa=r*n-v*x,O=w*n-v*y,R=p*O-z*aa+A*K+B*H-D*E+C*J;if(!R)return null;R=1/R;a[0]=(k*O-m*aa+t*K)*R;a[1]=(h*aa-b*O-f*K)*R;a[2]=(x*C-y*D+n*B)*R;a[3]=(w*D-r*C-v*B)*R;a[4]=(m*H-d*O-t*E)*R;a[5]=(e*O-h*H+f*E)*R;a[6]=(y*A-u*C-n*z)*R;a[7]=(q*C-w*A+v*z)*R;a[8]=(d*aa-k*H+t*J)*R;a[9]=(b*H-e*aa-f*J)*R;a[10]=(u*D-x*A+n*p)*R;a[11]=(r*A-q*D-v*p)*R;a[12]=(k*E-d*K-m*J)*R;a[13]=(e*K-b*E+h*J)*R;a[14]=(x*z-u*B-y*p)*R;a[15]=(q*B-r*z+w*p)*R;return a};d.SIMD.invert=function(a,c){var e,b,h,f,
d,k,m,t,q;k=SIMD.Float32x4.load(c,0);m=SIMD.Float32x4.load(c,4);t=SIMD.Float32x4.load(c,8);q=SIMD.Float32x4.load(c,12);d=SIMD.Float32x4.shuffle(k,m,0,1,4,5);b=SIMD.Float32x4.shuffle(t,q,0,1,4,5);e=SIMD.Float32x4.shuffle(d,b,0,2,4,6);b=SIMD.Float32x4.shuffle(b,d,1,3,5,7);d=SIMD.Float32x4.shuffle(k,m,2,3,6,7);f=SIMD.Float32x4.shuffle(t,q,2,3,6,7);h=SIMD.Float32x4.shuffle(d,f,0,2,4,6);f=SIMD.Float32x4.shuffle(f,d,1,3,5,7);d=SIMD.Float32x4.mul(h,f);d=SIMD.Float32x4.swizzle(d,1,0,3,2);k=SIMD.Float32x4.mul(b,
d);m=SIMD.Float32x4.mul(e,d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,d),k);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,d),m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);d=SIMD.Float32x4.mul(b,h);d=SIMD.Float32x4.swizzle(d,1,0,3,2);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,d),k);q=SIMD.Float32x4.mul(e,d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(f,d));q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,d),q);q=SIMD.Float32x4.swizzle(q,2,3,0,1);
d=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b,2,3,0,1),f);d=SIMD.Float32x4.swizzle(d,1,0,3,2);h=SIMD.Float32x4.swizzle(h,2,3,0,1);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,d),k);t=SIMD.Float32x4.mul(e,d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(h,d));t=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,d),t);t=SIMD.Float32x4.swizzle(t,2,3,0,1);d=SIMD.Float32x4.mul(e,b);d=SIMD.Float32x4.swizzle(d,1,0,3,2);t=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,d),t);q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,
d),q);d=SIMD.Float32x4.swizzle(d,2,3,0,1);t=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,d),t);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(h,d));d=SIMD.Float32x4.mul(e,f);d=SIMD.Float32x4.swizzle(d,1,0,3,2);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(h,d));t=SIMD.Float32x4.add(SIMD.Float32x4.mul(b,d),t);d=SIMD.Float32x4.swizzle(d,2,3,0,1);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,d),m);t=SIMD.Float32x4.sub(t,SIMD.Float32x4.mul(b,d));d=SIMD.Float32x4.mul(e,h);d=SIMD.Float32x4.swizzle(d,1,0,3,2);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,
d),m);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(b,d));d=SIMD.Float32x4.swizzle(d,2,3,0,1);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(f,d));q=SIMD.Float32x4.add(SIMD.Float32x4.mul(b,d),q);e=SIMD.Float32x4.mul(e,k);e=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(e,2,3,0,1),e);e=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(e,1,0,3,2),e);d=SIMD.Float32x4.reciprocalApproximation(e);e=SIMD.Float32x4.sub(SIMD.Float32x4.add(d,d),SIMD.Float32x4.mul(e,SIMD.Float32x4.mul(d,d)));e=SIMD.Float32x4.swizzle(e,0,0,0,0);if(!e)return null;
SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(e,k));SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(e,m));SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(e,t));SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(e,q));return a};d.invert=b.USE_SIMD?d.SIMD.invert:d.scalar.invert;d.scalar.adjoint=function(a,c){var e=c[0],b=c[1],d=c[2],f=c[3],l=c[4],k=c[5],m=c[6],t=c[7],q=c[8],r=c[9],w=c[10],v=c[11],u=c[12],x=c[13],y=c[14],n=c[15];a[0]=k*(w*n-v*y)-r*(m*n-t*y)+x*(m*v-t*w);a[1]=-(b*(w*n-v*y)-r*(d*n-f*y)+x*(d*v-f*w));a[2]=
b*(m*n-t*y)-k*(d*n-f*y)+x*(d*t-f*m);a[3]=-(b*(m*v-t*w)-k*(d*v-f*w)+r*(d*t-f*m));a[4]=-(l*(w*n-v*y)-q*(m*n-t*y)+u*(m*v-t*w));a[5]=e*(w*n-v*y)-q*(d*n-f*y)+u*(d*v-f*w);a[6]=-(e*(m*n-t*y)-l*(d*n-f*y)+u*(d*t-f*m));a[7]=e*(m*v-t*w)-l*(d*v-f*w)+q*(d*t-f*m);a[8]=l*(r*n-v*x)-q*(k*n-t*x)+u*(k*v-t*r);a[9]=-(e*(r*n-v*x)-q*(b*n-f*x)+u*(b*v-f*r));a[10]=e*(k*n-t*x)-l*(b*n-f*x)+u*(b*t-f*k);a[11]=-(e*(k*v-t*r)-l*(b*v-f*r)+q*(b*t-f*k));a[12]=-(l*(r*y-w*x)-q*(k*y-m*x)+u*(k*w-m*r));a[13]=e*(r*y-w*x)-q*(b*y-d*x)+u*(b*
w-d*r);a[14]=-(e*(k*y-m*x)-l*(b*y-d*x)+u*(b*m-d*k));a[15]=e*(k*w-m*r)-l*(b*w-d*r)+q*(b*m-d*k);return a};d.SIMD.adjoint=function(a,c){var e,b,d,f,l,k,m,t,q;e=SIMD.Float32x4.load(c,0);b=SIMD.Float32x4.load(c,4);d=SIMD.Float32x4.load(c,8);f=SIMD.Float32x4.load(c,12);m=SIMD.Float32x4.shuffle(e,b,0,1,4,5);k=SIMD.Float32x4.shuffle(d,f,0,1,4,5);l=SIMD.Float32x4.shuffle(m,k,0,2,4,6);k=SIMD.Float32x4.shuffle(k,m,1,3,5,7);m=SIMD.Float32x4.shuffle(e,b,2,3,6,7);b=SIMD.Float32x4.shuffle(d,f,2,3,6,7);e=SIMD.Float32x4.shuffle(m,
b,0,2,4,6);b=SIMD.Float32x4.shuffle(b,m,1,3,5,7);m=SIMD.Float32x4.mul(e,b);m=SIMD.Float32x4.swizzle(m,1,0,3,2);d=SIMD.Float32x4.mul(k,m);f=SIMD.Float32x4.mul(l,m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,m),d);f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,m),f);f=SIMD.Float32x4.swizzle(f,2,3,0,1);m=SIMD.Float32x4.mul(k,e);m=SIMD.Float32x4.swizzle(m,1,0,3,2);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(b,m),d);q=SIMD.Float32x4.mul(l,m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);
d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(b,m));q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,m),q);q=SIMD.Float32x4.swizzle(q,2,3,0,1);m=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,3,0,1),b);m=SIMD.Float32x4.swizzle(m,1,0,3,2);e=SIMD.Float32x4.swizzle(e,2,3,0,1);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,m),d);t=SIMD.Float32x4.mul(l,m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(e,m));t=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,m),t);t=SIMD.Float32x4.swizzle(t,2,3,0,
1);m=SIMD.Float32x4.mul(l,k);m=SIMD.Float32x4.swizzle(m,1,0,3,2);t=SIMD.Float32x4.add(SIMD.Float32x4.mul(b,m),t);q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,m),q);m=SIMD.Float32x4.swizzle(m,2,3,0,1);t=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,m),t);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(e,m));m=SIMD.Float32x4.mul(l,b);m=SIMD.Float32x4.swizzle(m,1,0,3,2);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(e,m));t=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,m),t);m=SIMD.Float32x4.swizzle(m,2,3,0,1);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,
m),f);t=SIMD.Float32x4.sub(t,SIMD.Float32x4.mul(k,m));m=SIMD.Float32x4.mul(l,e);m=SIMD.Float32x4.swizzle(m,1,0,3,2);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(b,m),f);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(k,m));m=SIMD.Float32x4.swizzle(m,2,3,0,1);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(b,m));q=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,m),q);SIMD.Float32x4.store(a,0,d);SIMD.Float32x4.store(a,4,f);SIMD.Float32x4.store(a,8,t);SIMD.Float32x4.store(a,12,q);return a};d.adjoint=b.USE_SIMD?d.SIMD.adjoint:
d.scalar.adjoint;d.determinant=function(a){var c=a[0],e=a[1],b=a[2],d=a[3],f=a[4],l=a[5],k=a[6],m=a[7],t=a[8],q=a[9],r=a[10],w=a[11],v=a[12],u=a[13],x=a[14];a=a[15];return(c*l-e*f)*(r*a-w*x)-(c*k-b*f)*(q*a-w*u)+(c*m-d*f)*(q*x-r*u)+(e*k-b*l)*(t*a-w*v)-(e*m-d*l)*(t*x-r*v)+(b*m-d*k)*(t*u-q*v)};d.SIMD.multiply=function(a,c,e){var b=SIMD.Float32x4.load(c,0),d=SIMD.Float32x4.load(c,4),f=SIMD.Float32x4.load(c,8);c=SIMD.Float32x4.load(c,12);var l=SIMD.Float32x4.load(e,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,
0,0,0,0),b),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),c))));SIMD.Float32x4.store(a,0,l);l=SIMD.Float32x4.load(e,4);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),b),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),f),
SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),c))));SIMD.Float32x4.store(a,4,l);l=SIMD.Float32x4.load(e,8);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),b),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),c))));SIMD.Float32x4.store(a,8,l);e=SIMD.Float32x4.load(e,12);b=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,
0,0,0,0),b),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,1,1,1,1),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,3,3,3,3),c))));SIMD.Float32x4.store(a,12,b);return a};d.scalar.multiply=function(a,c,e){var b=c[0],d=c[1],f=c[2],l=c[3],k=c[4],m=c[5],t=c[6],q=c[7],r=c[8],w=c[9],v=c[10],u=c[11],x=c[12],y=c[13],n=c[14];c=c[15];var p=e[0],z=e[1],A=e[2],B=e[3];a[0]=p*b+z*k+A*r+B*x;a[1]=p*d+z*m+A*w+B*y;a[2]=p*f+z*
t+A*v+B*n;a[3]=p*l+z*q+A*u+B*c;p=e[4];z=e[5];A=e[6];B=e[7];a[4]=p*b+z*k+A*r+B*x;a[5]=p*d+z*m+A*w+B*y;a[6]=p*f+z*t+A*v+B*n;a[7]=p*l+z*q+A*u+B*c;p=e[8];z=e[9];A=e[10];B=e[11];a[8]=p*b+z*k+A*r+B*x;a[9]=p*d+z*m+A*w+B*y;a[10]=p*f+z*t+A*v+B*n;a[11]=p*l+z*q+A*u+B*c;p=e[12];z=e[13];A=e[14];B=e[15];a[12]=p*b+z*k+A*r+B*x;a[13]=p*d+z*m+A*w+B*y;a[14]=p*f+z*t+A*v+B*n;a[15]=p*l+z*q+A*u+B*c;return a};d.multiply=b.USE_SIMD?d.SIMD.multiply:d.scalar.multiply;d.mul=d.multiply;d.scalar.translate=function(a,c,e){var b=
e[0],d=e[1];e=e[2];var f,l,k,m,t,q,r,w,v,u,x,y;c===a?(a[12]=c[0]*b+c[4]*d+c[8]*e+c[12],a[13]=c[1]*b+c[5]*d+c[9]*e+c[13],a[14]=c[2]*b+c[6]*d+c[10]*e+c[14],a[15]=c[3]*b+c[7]*d+c[11]*e+c[15]):(f=c[0],l=c[1],k=c[2],m=c[3],t=c[4],q=c[5],r=c[6],w=c[7],v=c[8],u=c[9],x=c[10],y=c[11],a[0]=f,a[1]=l,a[2]=k,a[3]=m,a[4]=t,a[5]=q,a[6]=r,a[7]=w,a[8]=v,a[9]=u,a[10]=x,a[11]=y,a[12]=f*b+t*d+v*e+c[12],a[13]=l*b+q*d+u*e+c[13],a[14]=k*b+r*d+x*e+c[14],a[15]=m*b+w*d+y*e+c[15]);return a};d.SIMD.translate=function(a,c,e){var b=
SIMD.Float32x4.load(c,0),d=SIMD.Float32x4.load(c,4),f=SIMD.Float32x4.load(c,8),l=SIMD.Float32x4.load(c,12);e=SIMD.Float32x4(e[0],e[1],e[2],0);c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11]);b=SIMD.Float32x4.mul(b,SIMD.Float32x4.swizzle(e,0,0,0,0));d=SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(e,1,1,1,1));f=SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(e,2,2,2,2));c=SIMD.Float32x4.add(b,SIMD.Float32x4.add(d,SIMD.Float32x4.add(f,
l)));SIMD.Float32x4.store(a,12,c);return a};d.translate=b.USE_SIMD?d.SIMD.translate:d.scalar.translate;d.scalar.scale=function(a,c,e){var b=e[0],d=e[1];e=e[2];a[0]=c[0]*b;a[1]=c[1]*b;a[2]=c[2]*b;a[3]=c[3]*b;a[4]=c[4]*d;a[5]=c[5]*d;a[6]=c[6]*d;a[7]=c[7]*d;a[8]=c[8]*e;a[9]=c[9]*e;a[10]=c[10]*e;a[11]=c[11]*e;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};d.SIMD.scale=function(a,c,e){var b;e=SIMD.Float32x4(e[0],e[1],e[2],0);b=SIMD.Float32x4.load(c,0);SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(b,
SIMD.Float32x4.swizzle(e,0,0,0,0)));b=SIMD.Float32x4.load(c,4);SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(b,SIMD.Float32x4.swizzle(e,1,1,1,1)));b=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(b,SIMD.Float32x4.swizzle(e,2,2,2,2)));a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};d.scale=b.USE_SIMD?d.SIMD.scale:d.scalar.scale;d.rotate=function(a,c,e,d){var h=d[0],f=d[1];d=d[2];var g=Math.sqrt(h*h+f*f+d*d),k,m,t,q,r,w,v,u,x,y,n,p,z,A,B,D,C,J,E,H;if(Math.abs(g)<b.EPSILON)return null;
g=1/g;h*=g;f*=g;d*=g;k=Math.sin(e);m=Math.cos(e);t=1-m;e=c[0];g=c[1];q=c[2];r=c[3];w=c[4];v=c[5];u=c[6];x=c[7];y=c[8];n=c[9];p=c[10];z=c[11];A=h*h*t+m;B=f*h*t+d*k;D=d*h*t-f*k;C=h*f*t-d*k;J=f*f*t+m;E=d*f*t+h*k;H=h*d*t+f*k;h=f*d*t-h*k;f=d*d*t+m;a[0]=e*A+w*B+y*D;a[1]=g*A+v*B+n*D;a[2]=q*A+u*B+p*D;a[3]=r*A+x*B+z*D;a[4]=e*C+w*J+y*E;a[5]=g*C+v*J+n*E;a[6]=q*C+u*J+p*E;a[7]=r*C+x*J+z*E;a[8]=e*H+w*h+y*f;a[9]=g*H+v*h+n*f;a[10]=q*H+u*h+p*f;a[11]=r*H+x*h+z*f;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);
return a};d.scalar.rotateX=function(a,c,e){var b=Math.sin(e);e=Math.cos(e);var d=c[4],f=c[5],l=c[6],k=c[7],m=c[8],t=c[9],q=c[10],r=c[11];c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[4]=d*e+m*b;a[5]=f*e+t*b;a[6]=l*e+q*b;a[7]=k*e+r*b;a[8]=m*e-d*b;a[9]=t*e-f*b;a[10]=q*e-l*b;a[11]=r*e-k*b;return a};d.SIMD.rotateX=function(a,c,e){var b=SIMD.Float32x4.splat(Math.sin(e));e=SIMD.Float32x4.splat(Math.cos(e));c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],
a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);var d=SIMD.Float32x4.load(c,4);c=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(a,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(d,e),SIMD.Float32x4.mul(c,b)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,e),SIMD.Float32x4.mul(d,b)));return a};d.rotateX=b.USE_SIMD?d.SIMD.rotateX:d.scalar.rotateX;d.scalar.rotateY=function(a,c,e){var b=Math.sin(e);e=Math.cos(e);var d=c[0],f=c[1],l=c[2],k=c[3],m=c[8],t=c[9],q=c[10],r=c[11];c!==a&&(a[4]=c[4],
a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=d*e-m*b;a[1]=f*e-t*b;a[2]=l*e-q*b;a[3]=k*e-r*b;a[8]=d*b+m*e;a[9]=f*b+t*e;a[10]=l*b+q*e;a[11]=k*b+r*e;return a};d.SIMD.rotateY=function(a,c,e){var b=SIMD.Float32x4.splat(Math.sin(e));e=SIMD.Float32x4.splat(Math.cos(e));c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);var d=SIMD.Float32x4.load(c,0);c=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,
e),SIMD.Float32x4.mul(c,b)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(d,b),SIMD.Float32x4.mul(c,e)));return a};d.rotateY=b.USE_SIMD?d.SIMD.rotateY:d.scalar.rotateY;d.scalar.rotateZ=function(a,c,e){var b=Math.sin(e);e=Math.cos(e);var d=c[0],f=c[1],l=c[2],k=c[3],m=c[4],t=c[5],q=c[6],r=c[7];c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=d*e+m*b;a[1]=f*e+t*b;a[2]=l*e+q*b;a[3]=k*e+r*b;a[4]=m*e-d*b;a[5]=t*e-f*b;a[6]=q*e-l*
b;a[7]=r*e-k*b;return a};d.SIMD.rotateZ=function(a,c,e){var b=SIMD.Float32x4.splat(Math.sin(e));e=SIMD.Float32x4.splat(Math.cos(e));c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);var d=SIMD.Float32x4.load(c,0);c=SIMD.Float32x4.load(c,4);SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(d,e),SIMD.Float32x4.mul(c,b)));SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,e),SIMD.Float32x4.mul(d,b)));return a};d.rotateZ=b.USE_SIMD?
d.SIMD.rotateZ:d.scalar.rotateZ;d.fromTranslation=function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};d.fromScaling=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=c[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromRotation=function(a,c,e){var d=e[0],h=e[1];e=e[2];var f=Math.sqrt(d*d+h*h+e*e),l;if(Math.abs(f)<b.EPSILON)return null;f=1/f;d*=f;
h*=f;e*=f;f=Math.sin(c);c=Math.cos(c);l=1-c;a[0]=d*d*l+c;a[1]=h*d*l+e*f;a[2]=e*d*l-h*f;a[3]=0;a[4]=d*h*l-e*f;a[5]=h*h*l+c;a[6]=e*h*l+d*f;a[7]=0;a[8]=d*e*l+h*f;a[9]=h*e*l-d*f;a[10]=e*e*l+c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromXRotation=function(a,c){var e=Math.sin(c),b=Math.cos(c);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=e;a[7]=0;a[8]=0;a[9]=-e;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromYRotation=function(a,c){var e=Math.sin(c),b=Math.cos(c);a[0]=b;a[1]=
0;a[2]=-e;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=e;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromZRotation=function(a,c){var e=Math.sin(c),b=Math.cos(c);a[0]=b;a[1]=e;a[2]=0;a[3]=0;a[4]=-e;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromRotationTranslation=function(a,c,e){var b=c[0],d=c[1],f=c[2],l=c[3],k=b+b,m=d+d,t=f+f;c=b*k;var q=b*m,b=b*t,r=d*m,d=d*t,f=f*t,k=l*k,m=l*m,l=l*t;a[0]=1-(r+f);a[1]=q+l;a[2]=b-m;a[3]=0;a[4]=
q-l;a[5]=1-(c+f);a[6]=d+k;a[7]=0;a[8]=b+m;a[9]=d-k;a[10]=1-(c+r);a[11]=0;a[12]=e[0];a[13]=e[1];a[14]=e[2];a[15]=1;return a};d.getTranslation=function(a,c){a[0]=c[12];a[1]=c[13];a[2]=c[14];return a};d.getRotation=function(a,c){var e=c[0]+c[5]+c[10],b=0;0<e?(b=2*Math.sqrt(e+1),a[3]=.25*b,a[0]=(c[6]-c[9])/b,a[1]=(c[8]-c[2])/b,a[2]=(c[1]-c[4])/b):c[0]>c[5]&c[0]>c[10]?(b=2*Math.sqrt(1+c[0]-c[5]-c[10]),a[3]=(c[6]-c[9])/b,a[0]=.25*b,a[1]=(c[1]+c[4])/b,a[2]=(c[8]+c[2])/b):c[5]>c[10]?(b=2*Math.sqrt(1+c[5]-
c[0]-c[10]),a[3]=(c[8]-c[2])/b,a[0]=(c[1]+c[4])/b,a[1]=.25*b,a[2]=(c[6]+c[9])/b):(b=2*Math.sqrt(1+c[10]-c[0]-c[5]),a[3]=(c[1]-c[4])/b,a[0]=(c[8]+c[2])/b,a[1]=(c[6]+c[9])/b,a[2]=.25*b);return a};d.fromRotationTranslationScale=function(a,c,e,b){var d=c[0],f=c[1],g=c[2],k=c[3],m=d+d,t=f+f,q=g+g;c=d*m;var r=d*t,d=d*q,w=f*t,f=f*q,g=g*q,m=k*m,t=k*t,k=k*q,q=b[0],v=b[1];b=b[2];a[0]=(1-(w+g))*q;a[1]=(r+k)*q;a[2]=(d-t)*q;a[3]=0;a[4]=(r-k)*v;a[5]=(1-(c+g))*v;a[6]=(f+m)*v;a[7]=0;a[8]=(d+t)*b;a[9]=(f-m)*b;a[10]=
(1-(c+w))*b;a[11]=0;a[12]=e[0];a[13]=e[1];a[14]=e[2];a[15]=1;return a};d.fromRotationTranslationScaleOrigin=function(a,c,e,b,d){var f=c[0],h=c[1],g=c[2],m=c[3],t=f+f,q=h+h,r=g+g;c=f*t;var w=f*q,f=f*r,v=h*q,h=h*r,g=g*r,t=m*t,q=m*q,m=m*r,r=b[0],u=b[1];b=b[2];var x=d[0],y=d[1];d=d[2];a[0]=(1-(v+g))*r;a[1]=(w+m)*r;a[2]=(f-q)*r;a[3]=0;a[4]=(w-m)*u;a[5]=(1-(c+g))*u;a[6]=(h+t)*u;a[7]=0;a[8]=(f+q)*b;a[9]=(h-t)*b;a[10]=(1-(c+v))*b;a[11]=0;a[12]=e[0]+x-(a[0]*x+a[4]*y+a[8]*d);a[13]=e[1]+y-(a[1]*x+a[5]*y+a[9]*
d);a[14]=e[2]+d-(a[2]*x+a[6]*y+a[10]*d);a[15]=1;return a};d.fromQuat=function(a,c){var e=c[0],b=c[1],d=c[2],f=c[3],l=e+e,k=b+b,m=d+d,e=e*l,t=b*l,b=b*k,q=d*l,r=d*k,d=d*m,l=f*l,k=f*k,f=f*m;a[0]=1-b-d;a[1]=t+f;a[2]=q-k;a[3]=0;a[4]=t-f;a[5]=1-e-d;a[6]=r+l;a[7]=0;a[8]=q+k;a[9]=r-l;a[10]=1-e-b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.frustum=function(a,c,e,b,d,f,l){var h=1/(e-c),g=1/(d-b),t=1/(f-l);a[0]=2*f*h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*f*g;a[6]=0;a[7]=0;a[8]=(e+c)*h;a[9]=(d+b)*g;a[10]=
(l+f)*t;a[11]=-1;a[12]=0;a[13]=0;a[14]=l*f*2*t;a[15]=0;return a};d.perspective=function(a,c,e,b,d){c=1/Math.tan(c/2);var f=1/(b-d);a[0]=c/e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(d+b)*f;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*d*b*f;a[15]=0;return a};d.perspectiveFromFieldOfView=function(a,c,e,b){var d=Math.tan(c.upDegrees*Math.PI/180),f=Math.tan(c.downDegrees*Math.PI/180),g=Math.tan(c.leftDegrees*Math.PI/180);c=Math.tan(c.rightDegrees*Math.PI/180);var k=2/(g+c),m=2/(d+f);a[0]=
k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=m;a[6]=0;a[7]=0;a[8]=-((g-c)*k*.5);a[9]=(d-f)*m*.5;a[10]=b/(e-b);a[11]=-1;a[12]=0;a[13]=0;a[14]=b*e/(e-b);a[15]=0;return a};d.ortho=function(a,c,b,d,h,f,l){var e=1/(c-b),g=1/(d-h),t=1/(f-l);a[0]=-2*e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*g;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*t;a[11]=0;a[12]=(c+b)*e;a[13]=(h+d)*g;a[14]=(l+f)*t;a[15]=1;return a};d.lookAt=function(a,c,e,g){var h,f,l,k,m,t,q,r,w=c[0],v=c[1];c=c[2];l=g[0];k=g[1];f=g[2];q=e[0];g=e[1];h=e[2];if(Math.abs(w-
q)<b.EPSILON&&Math.abs(v-g)<b.EPSILON&&Math.abs(c-h)<b.EPSILON)return d.identity(a);e=w-q;g=v-g;q=c-h;r=1/Math.sqrt(e*e+g*g+q*q);e*=r;g*=r;q*=r;h=k*q-f*g;f=f*e-l*q;l=l*g-k*e;(r=Math.sqrt(h*h+f*f+l*l))?(r=1/r,h*=r,f*=r,l*=r):l=f=h=0;k=g*l-q*f;m=q*h-e*l;t=e*f-g*h;(r=Math.sqrt(k*k+m*m+t*t))?(r=1/r,k*=r,m*=r,t*=r):t=m=k=0;a[0]=h;a[1]=k;a[2]=e;a[3]=0;a[4]=f;a[5]=m;a[6]=g;a[7]=0;a[8]=l;a[9]=t;a[10]=q;a[11]=0;a[12]=-(h*w+f*v+l*c);a[13]=-(k*w+m*v+t*c);a[14]=-(e*w+g*v+q*c);a[15]=1;return a};d.str=function(a){return"mat4("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};d.add=function(a,c,
b){a[0]=c[0]+b[0];a[1]=c[1]+b[1];a[2]=c[2]+b[2];a[3]=c[3]+b[3];a[4]=c[4]+b[4];a[5]=c[5]+b[5];a[6]=c[6]+b[6];a[7]=c[7]+b[7];a[8]=c[8]+b[8];a[9]=c[9]+b[9];a[10]=c[10]+b[10];a[11]=c[11]+b[11];a[12]=c[12]+b[12];a[13]=c[13]+b[13];a[14]=c[14]+b[14];a[15]=c[15]+b[15];return a};d.subtract=function(a,c,b){a[0]=c[0]-b[0];a[1]=c[1]-b[1];a[2]=c[2]-b[2];a[3]=c[3]-b[3];a[4]=c[4]-b[4];a[5]=c[5]-b[5];a[6]=c[6]-b[6];a[7]=c[7]-b[7];a[8]=c[8]-b[8];a[9]=c[9]-b[9];a[10]=c[10]-b[10];a[11]=c[11]-b[11];a[12]=c[12]-b[12];
a[13]=c[13]-b[13];a[14]=c[14]-b[14];a[15]=c[15]-b[15];return a};d.sub=d.subtract;d.multiplyScalar=function(a,c,b){a[0]=c[0]*b;a[1]=c[1]*b;a[2]=c[2]*b;a[3]=c[3]*b;a[4]=c[4]*b;a[5]=c[5]*b;a[6]=c[6]*b;a[7]=c[7]*b;a[8]=c[8]*b;a[9]=c[9]*b;a[10]=c[10]*b;a[11]=c[11]*b;a[12]=c[12]*b;a[13]=c[13]*b;a[14]=c[14]*b;a[15]=c[15]*b;return a};d.multiplyScalarAndAdd=function(a,c,b,d){a[0]=c[0]+b[0]*d;a[1]=c[1]+b[1]*d;a[2]=c[2]+b[2]*d;a[3]=c[3]+b[3]*d;a[4]=c[4]+b[4]*d;a[5]=c[5]+b[5]*d;a[6]=c[6]+b[6]*d;a[7]=c[7]+b[7]*
d;a[8]=c[8]+b[8]*d;a[9]=c[9]+b[9]*d;a[10]=c[10]+b[10]*d;a[11]=c[11]+b[11]*d;a[12]=c[12]+b[12]*d;a[13]=c[13]+b[13]*d;a[14]=c[14]+b[14]*d;a[15]=c[15]+b[15]*d;return a};d.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]&&a[9]===c[9]&&a[10]===c[10]&&a[11]===c[11]&&a[12]===c[12]&&a[13]===c[13]&&a[14]===c[14]&&a[15]===c[15]};d.equals=function(a,c){var e=a[0],d=a[1],h=a[2],f=a[3],l=a[4],k=a[5],m=a[6],t=a[7],
q=a[8],r=a[9],w=a[10],v=a[11],u=a[12],x=a[13],y=a[14],n=a[15],p=c[0],z=c[1],A=c[2],B=c[3],D=c[4],C=c[5],J=c[6],E=c[7],H=c[8],K=c[9],aa=c[10],O=c[11],R=c[12],N=c[13],G=c[14],F=c[15];return Math.abs(e-p)<=b.EPSILON*Math.max(1,Math.abs(e),Math.abs(p))&&Math.abs(d-z)<=b.EPSILON*Math.max(1,Math.abs(d),Math.abs(z))&&Math.abs(h-A)<=b.EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(f-B)<=b.EPSILON*Math.max(1,Math.abs(f),Math.abs(B))&&Math.abs(l-D)<=b.EPSILON*Math.max(1,Math.abs(l),Math.abs(D))&&Math.abs(k-
C)<=b.EPSILON*Math.max(1,Math.abs(k),Math.abs(C))&&Math.abs(m-J)<=b.EPSILON*Math.max(1,Math.abs(m),Math.abs(J))&&Math.abs(t-E)<=b.EPSILON*Math.max(1,Math.abs(t),Math.abs(E))&&Math.abs(q-H)<=b.EPSILON*Math.max(1,Math.abs(q),Math.abs(H))&&Math.abs(r-K)<=b.EPSILON*Math.max(1,Math.abs(r),Math.abs(K))&&Math.abs(w-aa)<=b.EPSILON*Math.max(1,Math.abs(w),Math.abs(aa))&&Math.abs(v-O)<=b.EPSILON*Math.max(1,Math.abs(v),Math.abs(O))&&Math.abs(u-R)<=b.EPSILON*Math.max(1,Math.abs(u),Math.abs(R))&&Math.abs(x-N)<=
b.EPSILON*Math.max(1,Math.abs(x),Math.abs(N))&&Math.abs(y-G)<=b.EPSILON*Math.max(1,Math.abs(y),Math.abs(G))&&Math.abs(n-F)<=b.EPSILON*Math.max(1,Math.abs(n),Math.abs(F))};return d})},"esri/layers/vectorTiles/core/libs/gl-matrix/common":function(){define([],function(){var b={EPSILON:1E-6};b.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;b.RANDOM=Math.random;b.ENABLE_SIMD=!1;b.SIMD_AVAILABLE=b.ARRAY_TYPE===Float32Array&&"SIMD"in this;b.USE_SIMD=b.ENABLE_SIMD&&b.SIMD_AVAILABLE;b.setMatrixArrayType=
function(a){b.ARRAY_TYPE=a};var d=Math.PI/180;b.toRadian=function(a){return a*d};b.equals=function(a,c){return Math.abs(a-c)<=b.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};return b})},"esri/layers/vectorTiles/views/2d/engine/webgl/enums":function(){define(["require","exports"],function(b,d){Object.defineProperty(d,"__esModule",{value:!0});(function(a){a[a.FILL=0]="FILL";a[a.LINE=1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT";a[a.NONE=4]="NONE";a[a.UNKNOWN=5]="UNKNOWN"})(d.WGLGeometryType||(d.WGLGeometryType=
{}));(function(a){a[a.SUCCEEDED=0]="SUCCEEDED";a[a.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(d.WGLGeometryTransactionStatus||(d.WGLGeometryTransactionStatus={}));(function(a){a[a.NONE=0]="NONE";a[a.FILL=1]="FILL";a[a.LINE=2]="LINE";a[a.MARKER=3]="MARKER";a[a.TEXT=4]="TEXT";a[a.HITTEST=5]="HITTEST";a[a.HIGHLIGHT=6]="HIGHLIGHT";a[a.CLIP=7]="CLIP";a[a.DEBUG=8]="DEBUG"})(d.WGLDrawPhase||(d.WGLDrawPhase={}));(function(a){a[a.NONE=0]="NONE";a[a.OPACITY=1]="OPACITY";a[a.COLOR=2]="COLOR";a[a.ROTATION=
4]="ROTATION";a[a.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";a[a.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS";a[a.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";a[a.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(d.WGLVVFlag||(d.WGLVVFlag={}));(function(a){a[a.INITIALIZED=0]="INITIALIZED";a[a.NO_DATA=1]="NO_DATA";a[a.READY=2]="READY";a[a.MODIFIED=3]="MODIFIED";a[a.INVALID=4]="INVALID"})(d.TileStatus||(d.TileStatus={}))})},"esri/layers/vectorTiles/views/2d/engine/webgl/GeometryUtils":function(){define(["require","exports"],
function(b,d){function a(a,c){a%=c;return 0<=a?a:a+c}Object.defineProperty(d,"__esModule",{value:!0});d.C_INFINITY=Number.POSITIVE_INFINITY;d.C_PI=Math.PI;d.C_2PI=2*d.C_PI;d.C_PI_BY_2=d.C_PI/2;d.C_RAD_TO_256=128/d.C_PI;d.C_256_TO_RAD=d.C_PI/128;d.C_DEG_TO_256=256/360;d.C_DEG_TO_RAD=d.C_PI/180;d.C_SQRT2=1.414213562;d.C_SQRT2_INV=1/d.C_SQRT2;var c=1/Math.LN2;d.positiveMod=a;d.radToByte=function(c){return a(c*d.C_RAD_TO_256,256)};d.degToByte=function(c){return a(c*d.C_DEG_TO_256,256)};d.log2=function(a){return Math.log(a)*
c};d.sqr=function(a){return a*a};d.clamp=function(a,c,b){return Math.min(Math.max(a,c),b)};d.interpolate=function(a,c,b){return a*(1-b)+c*b};d.between=function(a,c,b){return a>=c&&a<=b||a>=b&&a<=c}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialManager":function(){define("require exports ./enums ./MaterialInfoUtils ./shaders/fillShaderSnippets ./shaders/iconShaderSnippets ./shaders/lineShaderSnippets ./shaders/textShaderSnippets ../../../webgl/ShaderVariations".split(" "),function(b,d,
a,c,e,g,h,f,l){return function(){function b(){this._programRep=new Map;this.isInitialize=!1}b.prototype.initialize=function(a){if(!this.isInitialize){var c=new l("text",["textVS","textFS"],[],f,a);c.addDefine("ID","ID",[!0,!0],"ID");c.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");c.addDefine("SDF","SDF",[!1,!1],"SDF");c.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");c.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");
c.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");c.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");c.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");c.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");c.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");c.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");c.addDefine("PATTERN","PATTERN",[!1,!1],"PATTERN");c.addDefine("HEATMAP",
"HEATMAP",[!1,!1],"HEATMAP");var b=new l("icon",["iconVS","iconFS"],[],g,a);b.addDefine("ID","ID",[!0,!0],"ID");b.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");b.addDefine("SDF","SDF",[!0,!0],"SDF");b.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");b.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");b.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");b.addDefine("VV_SIZE_UNIT_VALUE",
"VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");b.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");b.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");b.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");b.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");b.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");b.addDefine("HEATMAP","HEATMAP",[!0,!0],"HEATMAP");var d=new l("fill",["fillVS","fillFS"],[],e,a);d.addDefine("ID","ID",[!0,!0],"ID");d.addDefine("HIGHLIGHT",
"HIGHLIGHT",[!0,!0],"HIGHLIGHT");d.addDefine("SDF","SDF",[!1,!1],"SDF");d.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");d.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");d.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");d.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");d.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");d.addDefine("VV_ROTATION",
"VV_ROTATION",[!1,!1],"VV_ROTATION");d.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");d.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");d.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");d.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");a=new l("line",["lineVS","lineFS"],[],h,a);a.addDefine("ID","ID",[!0,!0],"ID");a.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");a.addDefine("SDF","SDF",[!0,!0],"SDF");a.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",
[!0,!1],"VV_SIZE_MIN_MAX_VALUE");a.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");a.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");a.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");a.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");a.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");a.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");a.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",
[!1,!1],"VERTEX_VISIBILITY");a.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");a.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");this._textShaderVariations=c;this._fillShaderVariations=d;this._iconShaderVariations=b;this._lineShaderVariations=a;this.isInitialize=!0}};b.prototype.getProgram=function(b,e,f){b|=e===a.WGLDrawPhase.HITTEST?4:0;b|=e===a.WGLDrawPhase.HIGHLIGHT?8:0;if(this._programRep[b])return this._programRep[b];if(!this._iconShaderVariations||!this._fillShaderVariations||!this._lineShaderVariations)return null;
e=c.getMaterialVariations(b);var d;switch(e.geometryType){case a.WGLGeometryType.MARKER:d=this._iconShaderVariations.getProgram(e.variations,null,null,f);break;case a.WGLGeometryType.TEXT:d=this._textShaderVariations.getProgram(e.variations,null,null,f);break;case a.WGLGeometryType.FILL:d=this._fillShaderVariations.getProgram(e.variations,null,null,f);break;case a.WGLGeometryType.LINE:d=this._lineShaderVariations.getProgram(e.variations,null,null,f)}d&&(this._programRep[b]=d);return d};return b}()})},
"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils":function(){define(["require","exports","./enums","./MaterialInfo","./MaterialKeyInfo"],function(b,d,a,c,e){function g(a){var c=[];c[0]=a.sdf?!0:!1;c[1]=a.vvSizeMinMaxValue?!0:!1;c[2]=a.vvSizeScaleStops?!0:!1;c[3]=a.vvSizeFieldStops?!0:!1;c[4]=a.vvSizeUnitValue?!0:!1;c[5]=a.vvColor?!0:!1;c[6]=a.vvRotation?!0:!1;c[7]=a.vvOpacity?!0:!1;c[8]=a.visibility?!0:!1;c[9]=a.pattern?!0:!1;c[10]=a.heatmap?!0:!1;return c.reduce(function(a,c,b){c&&
(a|=1<<b+2);return a},0)}function h(c){if(c.geometryType===a.WGLGeometryType.UNKNOWN)return-1;var b=g(c)<<2;return c.geometryType+b}Object.defineProperty(d,"__esModule",{value:!0});d.createTextMaterialInfo=function(b,d){var f=new c.default,g=new e;g.geometryType=a.WGLGeometryType.TEXT;g.sdf=!0;g.pattern=!1;g.visibility=!1;g.heatmap=!1;f.texBindingInfo.push(new c.TexBindingInfo(2,b.page,"u_texture"));0===d?g.vvOpacity=g.vvSizeMinMaxValue=g.vvSizeScaleStops=g.vvSizeFieldStops=g.vvSizeUnitValue=g.vvColor=
g.vvRotation=!1:(g.vvOpacity=0!==(d&a.WGLVVFlag.OPACITY),g.vvSizeMinMaxValue=0!==(d&a.WGLVVFlag.SIZE_MINMAX_VALUE),g.vvSizeScaleStops=0!==(d&a.WGLVVFlag.SIZE_SCALE_STOPS),g.vvSizeFieldStops=0!==(d&a.WGLVVFlag.SIZE_FIELD_STOPS),g.vvSizeUnitValue=0!==(d&a.WGLVVFlag.SIZE_UNIT_VALUE),g.vvColor=0!==(d&a.WGLVVFlag.COLOR),g.vvRotation=0!==(d&a.WGLVVFlag.ROTATION));f.materialKey=h(g);f.materialKeyInfo=g;return f};d.createMaterialInfo=function(b,d,g,m){var f=new c.default,k=new e;k.geometryType=g;(d=d.spriteMosaicItem)?
(k.sdf=d.sdf,k.pattern=!0,f.texBindingInfo.push(new c.TexBindingInfo(1,d.page,"u_texture"))):(k.sdf=!1,k.pattern=!1);0===m?k.vvOpacity=k.vvSizeMinMaxValue=k.vvSizeScaleStops=k.vvSizeFieldStops=k.vvSizeUnitValue=k.vvColor=k.vvRotation=!1:(k.vvOpacity=0!==(m&a.WGLVVFlag.OPACITY),k.vvSizeMinMaxValue=0!==(m&a.WGLVVFlag.SIZE_MINMAX_VALUE),k.vvSizeScaleStops=0!==(m&a.WGLVVFlag.SIZE_SCALE_STOPS),k.vvSizeFieldStops=0!==(m&a.WGLVVFlag.SIZE_FIELD_STOPS),k.vvSizeUnitValue=0!==(m&a.WGLVVFlag.SIZE_UNIT_VALUE),
k.vvColor=0!==(m&a.WGLVVFlag.COLOR),k.vvRotation=0!==(m&a.WGLVVFlag.ROTATION));k.visibility=!1;k.heatmap=null!=b.heatmapInfo;f.materialKey=h(k);f.materialKeyInfo=k;return f};d.getMaterialKey=h;d.getMaterialVariations=function(a){var c=a&3;a>>=2;return{geometryType:c,variations:[0!==(a&1),0!==(a&2),0!==(a&4),0!==(a&8),0!==(a&16),0!==(a&32),0!==(a&64),0!==(a&128),0!==(a&256),0!==(a&512),0!==(a&1024),0!==(a&2048),0!==(a&4096)]}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfo":function(){define(["require",
"exports","./MaterialInfoUtils_updateMaterialVariations","./MaterialKeyInfo","./util/serializationUtils"],function(b,d,a,c,e){Object.defineProperty(d,"__esModule",{value:!0});var g=function(){function a(a,c,b){this.unit=a;this.pageId=c;this.semantic=b}a.prototype.clone=function(){return new a(this.unit,this.pageId,this.semantic)};a.prototype.serialize=function(a){a.writeInt32(this.unit);a.writeInt32(this.pageId);return a};a.deserialize=function(c){var b=c.readInt32();c=c.readInt32();return new a(b,
c,"u_texture")};return a}();d.TexBindingInfo=g;var h=function(){function a(a,c){this.name=a;this.value=c}a.prototype.clone=function(){return new a(this.name,this.value)};a.prototype.serialize=function(a){a.writeInt32(this.value);return a};a.deserialize=function(c){c=c.readInt32();return new a("u_my_param",c)};return a}();d.MaterialParam=h;b=function(){function b(){this.texBindingInfo=[];this.materialParams=[]}b.prototype.copy=function(a){this.materialParams=a.materialParams.map(function(a){return a.clone()});
this.texBindingInfo=a.texBindingInfo.map(function(a){return a.clone()});a.materialKeyInfo&&(this.materialKeyInfo=new c,this.materialKeyInfo.copy(a.materialKeyInfo));this.materialKey=a.materialKey};b.prototype.serialize=function(a){a.writeInt32(this.materialKey);e.serializeList(a,this.texBindingInfo);e.serializeList(a,this.materialParams);return a};b.deserialize=function(d){var f=new b;f.materialKey=d.readInt32();f.texBindingInfo=e.deserializeList(d,g);f.materialParams=e.deserializeList(d,h);f.materialKeyInfo=
new c;a(f.materialKeyInfo,f.materialKey);return f};return b}();d.default=b})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils_updateMaterialVariations":function(){define(["require","exports"],function(b,d){return function(a,c){a.geometryType=c&3;c>>=2;a.sdf=0!==(c&4);a.vvSizeMinMaxValue=0!==(c&8);a.vvSizeScaleStops=0!==(c&16);a.vvSizeFieldStops=0!==(c&32);a.vvSizeUnitValue=0!==(c&64);a.vvColor=0!==(c&128);a.vvRotation=0!==(c&256);a.vvOpacity=0!==(c&512);a.visibility=0!==(c&1024);
a.pattern=0!==(c&2048);a.heatmap=0!==(c&4096);return a}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialKeyInfo":function(){define(["require","exports"],function(b,d){return function(){function a(){this.heatmap=this.pattern=this.visibility=this.vvOpacity=this.vvRotation=this.vvColor=this.vvSizeUnitValue=this.vvSizeFieldStops=this.vvSizeScaleStops=this.vvSizeMinMaxValue=this.sdf=!1}a.prototype.copy=function(a){this.geometryType=a.geometryType;this.sdf=a.sdf;this.vvSizeMinMaxValue=a.vvSizeMinMaxValue;
this.vvSizeScaleStops=a.vvSizeScaleStops;this.vvSizeFieldStops=a.vvSizeFieldStops;this.vvSizeUnitValue=a.vvSizeUnitValue;this.vvColor=a.vvColor;this.vvRotation=a.vvRotation;this.vvOpacity=a.vvOpacity;this.visibility=a.visibility;this.pattern=a.pattern;this.heatmap=a.heatmap};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/serializationUtils":function(){define(["require","exports"],function(b,d){Object.defineProperty(d,"__esModule",{value:!0});d.serializeList=function(a,c){if(null===
c)a.writeInt32(0);else{a.writeInt32(c.length);for(var b=0;b<c.length;b++)c[b].serialize(a);return a}};d.deserializeList=function(a,c,b){for(var e=a.readInt32(),e=Array(e),d=0;d<e.length;d++)e[d]=c.deserialize(a,b);return e}})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaderSnippets":function(){define(["require","exports","dojo/text!./fillShaders.xml","../../../../webgl/ShaderSnippets"],function(b,d,a,c){b=new c;c.parse(a,b);return b})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaderSnippets":function(){define(["require",
"exports","dojo/text!./iconShaders.xml","../../../../webgl/ShaderSnippets"],function(b,d,a,c){b=new c;c.parse(a,b);return b})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaderSnippets":function(){define(["require","exports","dojo/text!./lineShaders.xml","../../../../webgl/ShaderSnippets"],function(b,d,a,c){b=new c;c.parse(a,b);return b})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaderSnippets":function(){define(["require","exports","dojo/text!./textShaders.xml",
"../../../../webgl/ShaderSnippets"],function(b,d,a,c){b=new c;c.parse(a,b);return b})},"esri/layers/vectorTiles/views/webgl/ShaderVariations":function(){define(["require","exports","./Program","./ShaderSourceVariator","./Util"],function(b,d,a,c,e){function g(a){return a.reduce(function(a,c,b){c&&(a|=1<<b);return a},0)}return function(){function b(a,c,b,e,d,h){"string"===typeof a?this._initParams(a,c,b,e,d,h):this._initObject({programNamePrefix:a.programNamePrefix,shaderSnippetPrefixes:a.shaderSnippetPrefixes,
baseDefines:a.baseDefines,snippets:a.snippets,rctx:a.rctx,vertexAttribLocs:a.vertexAttribLocs})}b.prototype._initObject=function(a){this._initParams(a.programNamePrefix,a.shaderSnippetPrefixes,a.baseDefines,a.snippets,a.rctx,a.vertexAttribLocs)};b.prototype._initParams=function(a,b,e,d,h,g){this._defaultSnippets=d;this._defaultRctx=h;this._defaultVertexAttribLocs=g;this._programCache=new Map;this._variationInfo=new Map;this._shaderSourceVariator=new c(a,b,e)};b.prototype.addDefine=function(a,c,b,
e){this._shaderSourceVariator.addDefine(a,c,b,e)};b.prototype.addBinaryShaderSnippetSuffix=function(a,c,b){this._shaderSourceVariator.addBinaryShaderSnippetSuffix(a,c,b)};b.prototype.addNaryShaderSnippetSuffix=function(a,c){this._shaderSourceVariator.addNaryShaderSnippetSuffix(a,c)};b.prototype.getProgram=function(c,b,d,h){b=b||this._defaultSnippets;d=d||this._defaultRctx;h=h||this._defaultVertexAttribLocs;if(!b)throw Error("No ShaderSnippets provided to getProgram nor to ShaderVariations constructor.");
if(!d)throw Error("No RenderingContext provided to getProgram nor to ShaderVariations constructor.");if(!h)throw Error("No VertexAttributeLocations provided to getProgram nor to ShaderVariations constructor.");var f=g(c);if(this._programCache[f])return this._programCache[f];c=this._shaderSourceVariator.getShaderVariation(c);var k,l;k=c.shaderSnippetNames[0];l=b[k];e.assert(null!=l,"shader snippet '"+k+"' does not exist");k=c.shaderSnippetNames[1];b=b[k];e.assert(null!=b,"shader snippet '"+k+"' does not exist");
d=new a(d,l,b,h,c.defines);return this._programCache[f]=d};b.prototype.getProgramByKey=function(c){if(this._programCache[c])return this._programCache[c];if(!this._variationInfo[c])return null;var b=this._variationInfo[c],d=this._defaultSnippets,f=this._defaultRctx,h=this._defaultVertexAttribLocs,g,r;g=b.shaderSnippetNames[0];r=d[g];e.assert(null!=r,"shader snippet '"+g+"' does not exist");g=b.shaderSnippetNames[1];d=d[g];e.assert(null!=d,"shader snippet '"+g+"' does not exist");b=new a(f,r,d,h,b.defines);
return this._programCache[c]=b};b.prototype.getProgramInfo=function(a){var c=this._shaderSourceVariator.getShaderVariation(a);a=g(a);this._variationInfo[a]||(this._variationInfo[a]=c);return{name:c.programName,key:a}};return b}()})},"esri/layers/vectorTiles/views/webgl/ShaderSourceVariator":function(){define(["require","exports","dojo/_base/lang","./Util"],function(b,d,a,c){return function(){function b(a,b,e){var d;"string"===typeof a?d=a:(d=a.programNamePrefix,b=a.shaderSnippetPrefixes,e=a.baseDefines);
c.assert(b,"you must specify shader snippet prefixes");c.assert(2===b.length,"you must specify shader snippet prefixes for vertex and fragment shaders");e&&0!==e.length||(e=[]);this.programNamePrefix=d;this.shaderSnippetPrefixes=b;this.baseDefines=e;this.variables=[];this.sealed=!1}b.prototype.addDefine=function(a,b,e,d){c.assert(!this.sealed,"you cannot add another variable after the first program has been generated");c.assert(a,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",
a],shaderNameSuffixes:d||a,defineStr:b,affectsShaderTypes:e||[!0,!0]})};b.prototype.addBinaryShaderSnippetSuffix=function(a,b,e){c.assert(!this.sealed,"you cannot add another variable after the first program has been generated");c.assert(a,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",a],shaderSnippetSuffixes:["",b],affectsShaderTypes:e||[!0,!0]})};b.prototype.addNaryShaderSnippetSuffix=function(a,b){c.assert(!this.sealed,"you cannot add another variable after the first program has been generated");
var e=a.map(function(a){c.assert(null!=a.value,"value must always be specified");return a.value});this.variables.push({values:e,programNameSuffixes:a.map(function(a,c){return null!=a.programNameSuffix?a.programNameSuffix:e[c]}),shaderSnippetSuffixes:a.map(function(a,c){return null!=a.shaderSnippetSuffix?a.shaderSnippetSuffix:e[c]}),affectsShaderTypes:b||[!0,!0]})};b.prototype.getShaderVariation=function(b){c.assert(b.length===this.variables.length,"you must specify a value for each variable");for(var e=
this.programNamePrefix,d=a.clone(this.shaderSnippetPrefixes),g=a.clone(this.shaderSnippetPrefixes),k=a.clone(this.baseDefines),m=0;m<this.variables.length;m++){var t=this.variables[m],q=b[m],r=void 0;t.values?(r=t.values.indexOf(q),c.assert(0<=r,"invalid value "+q+" for variable "+m)):r=q?1:0;e+=t.programNameSuffixes[r];for(q=0;2>q;q++)t.affectsShaderTypes[q]&&(t.shaderSnippetSuffixes&&(d[q]+=t.shaderSnippetSuffixes[r],g[q]+=t.shaderSnippetSuffixes[r]),t.defineStr&&r&&(k.push(t.defineStr),g[q]+=t.shaderNameSuffixes))}return{programName:e,
shaderSnippetNames:d,shaderNames:g,defines:k}};return b}()})},"esri/layers/vectorTiles/views/webgl/Util":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/Error"],function(b,d,a,c){return function(){function b(){}b.vertexCount=function(a,c){return a.vertexBuffers[c].size/b.getStride(a.layout[c])};b.getStride=function(a){return a[0].stride};b.getBytesPerElement=function(a){switch(a){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;
case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}};b.addDescriptor=function(a,c,e,d,k,m){var f=b.getBytesPerElement(d);if(0<a.length){var h=a[0].stride,g=h+f*e;a.forEach(function(a){return a.stride=g});a.push({name:c,count:e,type:d,offset:h,stride:g,normalized:k,divisor:m})}else a.push({name:c,count:e,type:d,offset:0,stride:f*e,normalized:k,divisor:m})};b.assertCompatibleVertexAttributeLocations=function(a,c){var b=a.locations===c.locations;b||console.error("VertexAttributeLocations are incompatible");
return b};b.hasAttribute=function(a,c){for(var b=0;b<a.length;b++)if(a[b].name===c)return!0;return!1};b.findAttribute=function(a,c){for(var b=0;b<a.length;b++)if(a[b].name===c)return a[b];return null};b.copyFramebufferToTexture=function(a,c,b,e,d){void 0===d&&(d=0);var f=a.getBoundFramebufferObject(),h=a.getBoundTexture(0);a.bindFramebuffer(c);a.bindTexture(b,0);a.gl.copyTexImage2D(a.gl.TEXTURE_2D,d,b.descriptor.pixelFormat,e[0],e[1],e[2],e[3],0);a.gl.flush();a.bindFramebuffer(f);a.bindTexture(h,
0)};b.assert=function(a,b){if(!a)throw new c(b);};b.setBaseInstanceOffset=function(c,b){var e={},d;for(d in c)e[d]=c[d].map(function(c){return c.divisor?a({},c,{baseInstance:b}):c});return e};return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Utils":function(){define("require exports ../../../../core/screenUtils ./color ./enums ./SymbolProperties".split(" "),function(b,d,a,c,e,g){function h(a){return a.map(function(a){return a.name})}function f(a){for(var c={},b=0;b<a.length;b++){var e=
a[b];c[e.name]=e.strideInBytes}return c}function l(a){switch(a){case "esriSMS":return"simple-marker";case "esriPMS":return"picture-marker";case "esriSLS":return"simple-line";case "esriPLS":return"picture-line";case "esriSFS":return"simple-fill";case "esriPFS":return"picture-fill";case "esriTS":return"text"}return a}function k(a){if(a=l(a.type)){switch(a){case "simple-marker":case "picture-marker":return!0;case "CIMPointSymbol":return!0}return!1}}function m(a){if(a=l(a.type)){switch(a){case "simple-fill":case "picture-fill":return!0;
case "CIMPolygonSymbol":return!0}return!1}}function t(a){if(a=l(a.type)){switch(a){case "simple-line":case "picture-line":return!0;case "CIMLineSymbol":return!0}return!1}}function q(a){if(a=l(a.type)){switch(a){case "text":return!0;case "CIMTextSymbol":return!0}return!1}}function r(a){return a&&a.length||0}function w(a){return"string"===typeof a}Object.defineProperty(d,"__esModule",{value:!0});d.C_HITTEST_SEARCH_SIZE=4;d.C_VBO_GEOMETRY="geometry";d.C_VBO_PERINSTANCE="per_instance";d.C_VBO_PERINSTANCE_VV=
"per_instance_vv";d.C_VBO_VISIBILITY="visibility";d.C_ICON_VERTEX_DEF=[{name:d.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}];d.C_ICON_VERTEX_DEF_VV=[{name:d.C_VBO_GEOMETRY,strideInBytes:40,divisor:0}];d.C_ICON_HEATMAP=[{name:d.C_VBO_GEOMETRY,strideInBytes:28,divisor:0}];d.C_FILL_VERTEX_DEF=[{name:d.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}];d.C_FILL_VERTEX_DEF_VV=[{name:d.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];d.C_LINE_VERTEX_DEF=[{name:d.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];d.C_LINE_VERTEX_DEF_VV=
[{name:d.C_VBO_GEOMETRY,strideInBytes:44,divisor:0}];d.C_TEXT_VERTEX_DEF=[{name:d.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:d.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];d.C_TEXT_VERTEX_DEF_VV=[{name:d.C_VBO_GEOMETRY,strideInBytes:36,divisor:0},{name:d.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];d.C_ICON_VERTEX_NAMES=h(d.C_ICON_VERTEX_DEF);d.C_ICON_VERTEX_NAMES_VV=h(d.C_ICON_VERTEX_DEF_VV);d.C_FILL_VERTEX_NAMES=h(d.C_FILL_VERTEX_DEF);d.C_FILL_VERTEX_NAMES_VV=h(d.C_FILL_VERTEX_DEF_VV);d.C_LINE_VERTEX_NAMES=
h(d.C_LINE_VERTEX_DEF);d.C_LINE_VERTEX_NAMES_VV=h(d.C_LINE_VERTEX_DEF_VV);d.C_TEXT_VERTEX_NAMES=h(d.C_TEXT_VERTEX_DEF);d.C_TEXT_VERTEX_NAMES_VV=h(d.C_TEXT_VERTEX_DEF_VV);d.C_ICON_STRIDE_SPEC=f(d.C_ICON_VERTEX_DEF);d.C_ICON_STRIDE_SPEC_VV=f(d.C_ICON_VERTEX_DEF_VV);d.C_ICON_STRIDE_SPEC_HEATMAP=f(d.C_ICON_HEATMAP);d.C_FILL_STRIDE_SPEC=f(d.C_FILL_VERTEX_DEF);d.C_FILL_STRIDE_SPEC_VV=f(d.C_FILL_VERTEX_DEF_VV);d.C_LINE_STRIDE_SPEC=f(d.C_LINE_VERTEX_DEF);d.C_LINE_STRIDE_SPEC_VV=f(d.C_LINE_VERTEX_DEF_VV);
d.C_TEXT_STRIDE_SPEC=f(d.C_TEXT_VERTEX_DEF);d.C_TEXT_STRIDE_SPEC_VV=f(d.C_TEXT_VERTEX_DEF_VV);d.getStrides=function(a,c,b){void 0===b&&(b=!1);switch(a){case e.WGLGeometryType.MARKER:return c?d.C_ICON_STRIDE_SPEC_VV:b?d.C_ICON_STRIDE_SPEC_HEATMAP:d.C_ICON_STRIDE_SPEC;case e.WGLGeometryType.FILL:return c?d.C_FILL_STRIDE_SPEC_VV:d.C_FILL_STRIDE_SPEC;case e.WGLGeometryType.LINE:return c?d.C_LINE_STRIDE_SPEC_VV:d.C_LINE_STRIDE_SPEC;case e.WGLGeometryType.TEXT:return c?d.C_TEXT_STRIDE_SPEC_VV:d.C_TEXT_STRIDE_SPEC}return null};
d.getSymbolGeometryType=function(a){return k(a)?e.WGLGeometryType.MARKER:t(a)?e.WGLGeometryType.LINE:m(a)?e.WGLGeometryType.FILL:q(a)?e.WGLGeometryType.TEXT:e.WGLGeometryType.UNKNOWN};d.normalizeSymbolType=l;d.isMarkerSymbol=k;d.isFillSymbol=m;d.isLineSymbol=t;d.isPictureSymbol=function(a){if(a=l(a.type))switch(a){case "picture-marker":case "picture-line":case "picture-fill":return!0}return!1};d.isTextSymbol=q;d.getTextProperties=function(b){return g.TextProperties.pool.acquire(b.color?c.copyAndPremultiply(b.color):
[255,255,255,255],b.haloColor?c.copyAndPremultiply(b.haloColor):[255,255,255,255],a.pt2px(b.haloSize),a.pt2px(b.font.size),b.angle*Math.PI/180,b.xoffset/b.font.size,b.yoffset/b.font.size,"left"===b.horizontalAlignment?0:"right"===b.horizontalAlignment?1:.5,"top"===b.verticalAlignment?0:"bottom"===b.verticalAlignment?1:.5)};d.isSameUniformValue=function(a,c){return!1};d.isSameMaterialInfo=function(a,c){if(a.materialKey!==c.materialKey||r(a.texBindingInfo)!==r(c.texBindingInfo)||r(a.materialParams)!==
r(c.materialParams))return!1;for(var b=a.texBindingInfo.length,e=0;e<b;++e){var d=a.texBindingInfo[e],f=c.texBindingInfo[e];if(d.unit!==f.unit||d.pageId!==f.pageId||d.semantic!==f.semantic)return!1}b=a.materialParams.length;for(e=0;e<b;)return!1;return!0};d.serializeString=function(a,c,b){for(var e=0,d=a.length,f=0;f<d;++f)c&&(c[b+e]=a.charCodeAt(f)),++e;c&&(c[b+e]=0);++e;return e};d.deserializeString=function(a,c,b){var e=0;a.s="";for(var d=!0;d;){var f=c[b+e];++e;0!==f?a.s+=String.fromCharCode(f):
d=!1}return e};d.isDefined=function(a){return null!==a&&void 0!==a};d.isNumber=function(a){return"number"===typeof a};d.isString=w;d.isStringOrNull=function(a){return null==a||w(a)};d.lerp=function(a,c,b){return a+(c-a)*b};b=function(){function a(){this._arr=[];this._addGeometryType=this._addGeometryType.bind(this)}a.prototype._addGeometryType=function(a,c){this._arr.push(c)};a.prototype.getKeys=function(a){this._arr.length=0;a.forEach(this._addGeometryType);return this._arr};return a}();d.KeysGetter=
b;b=function(){function a(){this._arr=[];this._addGeometryType=this._addGeometryType.bind(this)}a.prototype._addGeometryType=function(a,c){this._arr.push(a)};a.prototype.getValues=function(a){this._arr.length=0;a.forEach(this._addGeometryType);return this._arr};return a}();d.ValuesGetter=b})},"esri/layers/vectorTiles/core/screenUtils":function(){define(["require","exports"],function(b,d){function a(a){return a?72*a/d.DPI:0}Object.defineProperty(d,"__esModule",{value:!0});var c=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;
d.DPI=96;d.pt2px=function(a){return a?a/72*d.DPI:0};d.px2pt=a;d.toPt=function(b){if("string"===typeof b){if(c.test(b)){var e=b.match(c),d=Number(e[1]),e=e[3]&&e[3].toLowerCase();b="-"===b.charAt(0);d="px"===e?a(d):d;return b?-d:d}console.warn("screenUtils.toPt: input not recognized!");return null}return b}})},"esri/layers/vectorTiles/views/2d/engine/webgl/color":function(){define(["require","exports","./number"],function(b,d,a){function c(a,c){Array.isArray(c)?(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=
c[3]):(a[0]=c.r,a[1]=c.g,a[2]=c.b,a[3]=c.a);return a}function e(a,c,b){void 0===c&&(c=0);void 0===b&&(b=!1);var e=a[c+3];a[c+0]*=e;a[c+1]*=e;a[c+2]*=e;b||(a[c+3]*=255);return a}Object.defineProperty(d,"__esModule",{value:!0});d.white=[255,255,255,1];var g=[0,0,0,0];d.premultiplyAlpha=e;d.copyAndPremultiply=function(a){return e(c([],a))};d.premultiplyAlphaUint32=function(b){e(c(g,b));return a.i8888to32(g[0],g[1],g[2],g[3])}})},"esri/layers/vectorTiles/views/2d/engine/webgl/number":function(){define(["require",
"exports"],function(b,d){Object.defineProperty(d,"__esModule",{value:!0});var a=new Float32Array(1),c=new Uint32Array(a.buffer);d.nextHighestPowerOfTwo=function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a};d.toUint32=function(b){a[0]=b;return c[0]};d.i1616to32=function(a,c){return 65535&a|c<<16};d.i8888to32=function(a,c,b,d){return a&255|(c&255)<<8|(b&255)<<16|d<<24};d.i8816to32=function(a,c,b){return a&255|(c&255)<<8|b<<16};d.numTo32=function(a){return a|0}})},"esri/layers/vectorTiles/views/2d/engine/webgl/SymbolProperties":function(){define(["require",
"exports","../../../../core/ObjectPool"],function(b,d,a){Object.defineProperty(d,"__esModule",{value:!0});b=function(){function c(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=0}c.prototype.acquire=function(a,c,b,d,l,k,m,t,q){this.color=a;this.haloColor=c;this.haloSize=b;this.size=d;this.angle=l;this.offsetX=k;this.offsetY=m;this.hAnchor=t;this.vAnchor=q};c.prototype.release=function(){this.color[0]=this.color[1]=
this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};c.pool=new a(c);return c}();d.TextProperties=b})},"esri/layers/vectorTiles/core/ObjectPool":function(){define(["require","exports"],function(b,d){var a=function(){return function(){}}();return function(){function c(a,c,b,d,l){void 0===d&&(d=1);void 0===l&&(l=0);this.classConstructor=a;this.acquireFunctionOrWithConstructor=
c;this.releaseFunction=b;this.growthSize=d;!0===c?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof c&&(this.acquireFunction=c);this._pool=Array(l);this._set=new Set;this._initialSize=l;for(a=0;a<l;a++)this._pool[a]=new this.classConstructor;this.growthSize=Math.max(d,1)}c.prototype.acquire=function(){for(var c=[],b=0;b<arguments.length;b++)c[b]=arguments[b];b=this.classConstructor||a;if(0===this._pool.length)for(var d=this.growthSize,f=0;f<d;f++)this._pool[f]=new b;b=this._pool.shift();
this.acquireFunction?this.acquireFunction.apply(this,[b].concat(c)):b&&b.acquire&&"function"===typeof b.acquire&&b.acquire.apply(b,c);this._set.delete(b);return b};c.prototype.release=function(a){a&&!this._set.has(a)&&(this.releaseFunction?this.releaseFunction(a):a&&a.release&&"function"===typeof a.release&&a.release(),this._pool.push(a),this._set.add(a))};c.prototype.prune=function(){if(!(this._pool.length<=this._initialSize))for(var a;this._initialSize>this._pool.length;)a=this._pool.shift(),this._set.delete(a),
a.dispose&&"function"===typeof a.dispose&&a.dispose()};c.prototype._constructorAcquireFunction=function(a){for(var c=[],b=1;b<arguments.length;b++)c[b-1]=arguments[b];(e=this.classConstructor).call.apply(e,[a].concat(c));var e};return c}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushInfo":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../GeometryUtils ./WGLBrush ../shaders/glShaderSnippets ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),
function(b,d,a,c,e,g,h,f,l,k){Object.defineProperty(d,"__esModule",{value:!0});b=function(b){function e(){var a=b.call(this)||this;a._initialized=!1;a._maxWidth=0;a._color=new Float32Array([1,0,0,1]);return a}a(e,b);e.prototype.draw=function(a,c){var b=a.context;this._initialized||this._initialize(b);b.bindVAO(this._outlineVertexArrayObject);b.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",c.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",
c.tileTransform.displayCoord);this._outlineProgram.setUniform1f("u_coord_range",512);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",this._color);b.setLineWidth(2);b.drawArrays(3,0,4);b.bindVAO();var e=this._getTexture(b,c);e&&(b.bindVAO(this._tileInfoVertexArrayObject),b.bindProgram(this._tileInfoProgram),b.bindTexture(e,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",c.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",
c.tileTransform.displayCoord),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",1),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",e.descriptor.width,e.descriptor.height),b.drawArrays(5,0,4),b.bindVAO())};e.prototype._initialize=function(a){if(this._initialized)return!0;var c={a_pos:0},b=new f(a,g.backgroundVS,g.backgroundFS,c),e=new f(a,g.tileInfoVS,g.tileInfoFS,c),d={geometry:[{name:"a_pos",count:2,
type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},l=new Int8Array([0,0,1,0,1,1,0,1]),l=h.createVertex(a,35044,l),l=new k(a,c,d,{geometry:l}),m=new Int8Array([0,0,1,0,0,1,1,1]),m=h.createVertex(a,35044,m);a=new k(a,c,d,{geometry:m});this._outlineProgram=b;this._tileInfoProgram=e;this._outlineVertexArrayObject=l;this._tileInfoVertexArrayObject=a;return this._initialized=!0};e.prototype._getTexture=function(a,b){if(b.texture)return b.texture;this._canvas||(this._canvas=document.createElement("canvas"),
this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var e=b.key.id,d=this._canvas.getContext("2d");d.font="24px sans-serif";d.textAlign="left";d.textBaseline="middle";var f=d.measureText(e),f=Math.pow(2,Math.ceil(c.log2(f.width+2)));f>this._maxWidth&&(this._maxWidth=f);d.clearRect(0,0,this._maxWidth,32);d.fillStyle="blue";d.fillText(e,0,16);b.texture=new l(a,{target:3553,pixelFormat:6408,
dataType:5121,samplingMode:9728},this._canvas);return b.texture};return e}(e.default);d.default=b})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrush":function(){define(["require","exports"],function(b,d){Object.defineProperty(d,"__esModule",{value:!0});var a=function(){return function(){}}();d.default=a})},"esri/layers/vectorTiles/views/webgl/Texture":function(){define(["require","exports"],function(b,d){return function(){function a(c,b,d){this._glName=this._context=null;this._id=
-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=c;this._desc={pixelFormat:b.pixelFormat,internalFormat:b.internalFormat,dataType:b.dataType,target:b.target?b.target:3553,samplingMode:b.samplingMode?b.samplingMode:9729,wrapMode:b.wrapMode?b.wrapMode:10497,maxAnisotropy:b.maxAnisotropy,flipped:void 0!==b.flipped?b.flipped:!1,hasMipmap:void 0!==b.hasMipmap?b.hasMipmap:!1,level:void 0!==b.level?b.level:0,unpackAlignment:b.unpackAlignment?b.unpackAlignment:
4,width:b.width,height:b.height,preMultiplyAlpha:void 0!==b.preMultiplyAlpha?b.preMultiplyAlpha:!1};this._id=++a._nextId;this.setData(d)}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});a.prototype.dispose=function(){var a=
this;if(this._context){if(this._glName){var b=this._context.gl;this._boundToUnits.forEach(function(c){a._context.bindTexture(null,c)});b.deleteTexture(this._glName);this._glName=null}this._context=null}};a.prototype.resize=function(a,b){var c=this._desc;if(c.width!==a||c.height!==b)c.width=a,c.height=b,this.setData(null)};a.prototype.setData=function(c){var b=this._context.gl;this._glName||(this._glName=b.createTexture());void 0===c&&(c=null);null===c&&(this._desc.width=this._desc.width||4,this._desc.height=
this._desc.height||4);var d=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var h=this._desc;a._validateTexture(h);b.pixelStorei(b.UNPACK_ALIGNMENT,h.unpackAlignment);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,h.flipped?1:0);b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h.preMultiplyAlpha);if(c instanceof ImageData||c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement)h.width&&h.height&&console.assert(c.width===h.width&&c.height===h.height),b.texImage2D(b.TEXTURE_2D,
h.level,h.internalFormat?h.internalFormat:h.pixelFormat,h.pixelFormat,h.dataType,c),void 0===this._desc.width&&(this._desc.width=c.width),void 0===this._desc.height&&(this._desc.height=c.height);else{null!=h.width&&null!=h.height||console.error("Width and height must be specified!");var f=h.internalFormat?h.internalFormat:h.pixelFormat,l=h.pixelFormat;b.DEPTH24_STENCIL8&&f===b.DEPTH_STENCIL&&(f=b.DEPTH24_STENCIL8);b.texImage2D(b.TEXTURE_2D,h.level,f,h.width,h.height,0,l,h.dataType,c)}h.hasMipmap&&
this.generateMipmap();a._applySamplingMode(b,this._desc);a._applyWrapMode(b,this._desc);a._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(d,0)};a.prototype.updateData=function(a,b,d,h,f,l){l||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");var c=this._context.gl,e=this._desc,g=this._context.getBoundTexture(0);this._context.bindTexture(this,0);(0>b||0>d||h>e.width||f>e.height||
b+h>e.width||d+f>e.height)&&console.error("An attempt to update out of bounds of the texture!");l instanceof ImageData||l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement?(console.assert(l.width===h&&l.height===f),c.texSubImage2D(c.TEXTURE_2D,a,b,d,e.pixelFormat,e.dataType,l)):c.texSubImage2D(c.TEXTURE_2D,a,b,d,h,f,e.pixelFormat,e.dataType,l);this._context.bindTexture(g,0)};a.prototype.generateMipmap=function(){var c=this._desc;c.hasMipmap||(c.hasMipmap=!0,
a._validateTexture(c));9729===c.samplingMode?(this._samplingModeDirty=!0,c.samplingMode=9985):9728===c.samplingMode&&(this._samplingModeDirty=!0,c.samplingMode=9984);c=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var b=this._context.gl;b.generateMipmap(b.TEXTURE_2D);this._context.bindTexture(c,0)};a.prototype.setSamplingMode=function(c){c!==this._desc.samplingMode&&(this._desc.samplingMode=c,a._validateTexture(this._desc),this._samplingModeDirty=!0)};a.prototype.setWrapMode=
function(c){c!==this._desc.wrapMode&&(this._desc.wrapMode=c,a._validateTexture(this._desc),this._wrapModeDirty=!0)};a.prototype.applyChanges=function(){var c=this._context.gl,b=this._desc;this._samplingModeDirty&&(a._applySamplingMode(c,b),this._samplingModeDirty=!1);this._wrapModeDirty&&(a._applyWrapMode(c,b),this._wrapModeDirty=!1)};a.prototype.setBoundToUnit=function(a,b){b?this._boundToUnits.add(a):this._boundToUnits.delete(a)};a._isPowerOfTwo=function(a){return 0===(a&a-1)};a._validateTexture=
function(c){(0>c.width||0>c.height)&&console.error("Negative dimension parameters are not allowed!");a._isPowerOfTwo(c.width)&&a._isPowerOfTwo(c.height)||(33071!==c.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),c.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};a._applySamplingMode=function(a,b){var c=b.samplingMode;if(9985===c||9987===c)c=9729;else if(9984===c||9986===c)c=9728;a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,
c);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,b.samplingMode)};a._applyWrapMode=function(a,b){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,b.wrapMode);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,b.wrapMode)};a._applyAnisotropicFilteringParameters=function(a,b){if(null!=b.maxAnisotropy){var c=a.capabilities.textureFilterAnisotropic;if(c){var e=a.gl;e.texParameterf(e.TEXTURE_2D,c.TEXTURE_MAX_ANISOTROPY,b.maxAnisotropy)}}};a._nextId=0;return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushStencil":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix/vec4 ./WGLBrush ../shaders/glShaderSnippets ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/VertexArrayObject".split(" "),
function(b,d,a,c,e,g,h,f,l){Object.defineProperty(d,"__esModule",{value:!0});b=function(b){function e(){var a=b.call(this)||this;a._color=c.create();a._initialized=!1;a._color.set([1,0,0,1]);return a}a(e,b);e.prototype.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null);this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)};e.prototype.draw=function(a,c){var b=a.context;this._initialized||this._initialize(b);
b.setStencilFunctionSeparate(1032,519,c.stencilRef,255);b.bindVAO(this._solidVertexArrayObject);b.bindProgram(this._solidProgram);this._solidProgram.setUniformMatrix4fv("u_transformMatrix",c.tileTransform.transform);this._solidProgram.setUniform2fv("u_normalized_origin",c.tileTransform.displayCoord);this._solidProgram.setUniform1f("u_coord_range",512);this._solidProgram.setUniform1f("u_depth",0);this._solidProgram.setUniform4fv("u_color",this._color);b.drawArrays(5,0,4);b.bindVAO()};e.prototype._initialize=
function(a){if(this._initialized)return!0;var c={a_pos:0},b=new f(a,g.backgroundVS,g.backgroundFS,c);if(!b)return!1;var e=new Int8Array([0,0,1,0,0,1,1,1]),e=h.createVertex(a,35044,e);a=new l(a,c,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:e});this._solidProgram=b;this._solidVertexArrayObject=a;return this._initialized=!0};return e}(e.default);d.default=b})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec4":function(){define(["./common"],function(b){var d=
{create:function(){var a=new b.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var c=new b.ARRAY_TYPE(4);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];return c},fromValues:function(a,c,e,d){var h=new b.ARRAY_TYPE(4);h[0]=a;h[1]=c;h[2]=e;h[3]=d;return h},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];return a},set:function(a,c,b,d,h){a[0]=c;a[1]=b;a[2]=d;a[3]=h;return a},add:function(a,c,b){a[0]=c[0]+b[0];a[1]=c[1]+b[1];a[2]=c[2]+b[2];a[3]=c[3]+b[3];return a},subtract:function(a,
b,e){a[0]=b[0]-e[0];a[1]=b[1]-e[1];a[2]=b[2]-e[2];a[3]=b[3]-e[3];return a}};d.sub=d.subtract;d.multiply=function(a,b,e){a[0]=b[0]*e[0];a[1]=b[1]*e[1];a[2]=b[2]*e[2];a[3]=b[3]*e[3];return a};d.mul=d.multiply;d.divide=function(a,b,e){a[0]=b[0]/e[0];a[1]=b[1]/e[1];a[2]=b[2]/e[2];a[3]=b[3]/e[3];return a};d.div=d.divide;d.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);a[3]=Math.ceil(b[3]);return a};d.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=
Math.floor(b[2]);a[3]=Math.floor(b[3]);return a};d.min=function(a,b,e){a[0]=Math.min(b[0],e[0]);a[1]=Math.min(b[1],e[1]);a[2]=Math.min(b[2],e[2]);a[3]=Math.min(b[3],e[3]);return a};d.max=function(a,b,e){a[0]=Math.max(b[0],e[0]);a[1]=Math.max(b[1],e[1]);a[2]=Math.max(b[2],e[2]);a[3]=Math.max(b[3],e[3]);return a};d.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);a[3]=Math.round(b[3]);return a};d.scale=function(a,b,e){a[0]=b[0]*e;a[1]=b[1]*e;a[2]=b[2]*e;a[3]=b[3]*
e;return a};d.scaleAndAdd=function(a,b,e,d){a[0]=b[0]+e[0]*d;a[1]=b[1]+e[1]*d;a[2]=b[2]+e[2]*d;a[3]=b[3]+e[3]*d;return a};d.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],h=b[2]-a[2],f=b[3]-a[3];return Math.sqrt(c*c+d*d+h*h+f*f)};d.dist=d.distance;d.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],h=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+h*h+f*f};d.sqrDist=d.squaredDistance;d.length=function(a){var b=a[0],e=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+e*e+d*d+a*a)};d.len=d.length;d.squaredLength=
function(a){var b=a[0],e=a[1],d=a[2];a=a[3];return b*b+e*e+d*d+a*a};d.sqrLen=d.squaredLength;d.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};d.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];a[3]=1/b[3];return a};d.normalize=function(a,b){var c=b[0],d=b[1],h=b[2],f=b[3],l=c*c+d*d+h*h+f*f;0<l&&(l=1/Math.sqrt(l),a[0]=c*l,a[1]=d*l,a[2]=h*l,a[3]=f*l);return a};d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};d.lerp=function(a,b,e,d){var c=b[0],
f=b[1],g=b[2];b=b[3];a[0]=c+d*(e[0]-c);a[1]=f+d*(e[1]-f);a[2]=g+d*(e[2]-g);a[3]=b+d*(e[3]-b);return a};d.random=function(a,c){c=c||1;a[0]=b.RANDOM();a[1]=b.RANDOM();a[2]=b.RANDOM();a[3]=b.RANDOM();d.normalize(a,a);d.scale(a,a,c);return a};d.transformMat4=function(a,b,e){var c=b[0],d=b[1],f=b[2];b=b[3];a[0]=e[0]*c+e[4]*d+e[8]*f+e[12]*b;a[1]=e[1]*c+e[5]*d+e[9]*f+e[13]*b;a[2]=e[2]*c+e[6]*d+e[10]*f+e[14]*b;a[3]=e[3]*c+e[7]*d+e[11]*f+e[15]*b;return a};d.transformQuat=function(a,b,e){var c=b[0],d=b[1],
f=b[2],l=e[0],k=e[1],m=e[2];e=e[3];var t=e*c+k*f-m*d,q=e*d+m*c-l*f,r=e*f+l*d-k*c,c=-l*c-k*d-m*f;a[0]=t*e+c*-l+q*-m-r*-k;a[1]=q*e+c*-k+r*-l-t*-m;a[2]=r*e+c*-m+t*-k-q*-l;a[3]=b[3];return a};d.forEach=function(){var a=d.create();return function(b,e,d,h,f,l){e||(e=4);d||(d=0);for(h=h?Math.min(h*e+d,b.length):b.length;d<h;d+=e)a[0]=b[d],a[1]=b[d+1],a[2]=b[d+2],a[3]=b[d+3],f(a,a,l),b[d]=a[0],b[d+1]=a[1],b[d+2]=a[2],b[d+3]=a[3];return b}}();d.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+
")"};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};d.equals=function(a,c){var e=a[0],d=a[1],h=a[2],f=a[3],l=c[0],k=c[1],m=c[2],t=c[3];return Math.abs(e-l)<=b.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(d-k)<=b.EPSILON*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(h-m)<=b.EPSILON*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(f-t)<=b.EPSILON*Math.max(1,Math.abs(f),Math.abs(t))};return d})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushFill":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),
function(b,d,a,c,e,g,h){Object.defineProperty(d,"__esModule",{value:!0});b=function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a._isInitialized=!1;a._fillAttributeLocations={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4};a._fillAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4,a_vv:5};a._spritesTextureSize=new Float32Array(2);return a}a(d,b);d.prototype.getGeometryType=function(){return c.WGLGeometryType.FILL};d.prototype.drawGeometry=function(a,b,c,e){e=a.context;var d=
a.painter,f=a.rendererInfo,h=a.requiredLevel,k=a.stationary,g=c.indexCount,l=c.indexFrom;this._initialize();var n=c.materialInfo.materialKeyInfo,p=n.vvColor||n.vvOpacity,z=a.painter.materialManager.getProgram(c.materialInfo.materialKey,a.drawPhase,p?this._fillAttributeLocationsVV:this._fillAttributeLocations);if(z){e.bindProgram(z);p=this._getVAO(e,b,p);e.bindVAO(p);if(0<c.materialInfo.texBindingInfo.length){c=c.materialInfo.texBindingInfo[0];var p=c.pageId,m=a.painter.textureManager.sprites;this._spritesTextureSize[0]=
m.getWidth(p);this._spritesTextureSize[1]=m.getHeight(p);z.setUniform1f("u_zoomFactor",1/Math.pow(2,h-b.key.level)/a.pixelRatio);d.textureManager.bindSpritePage(e,p,c.unit,k?9728:9729);z.setUniform1i(c.semantic,c.unit);z.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}z.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform);z.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord);z.setUniform1f("u_opacity",1);n.vvColor&&(z.setUniform1fv("u_vvColorValues",f.vvColorValues),
z.setUniform4fv("u_vvColors",f.vvColors));n.vvOpacity&&(z.setUniform1fv("u_vvOpacityValues",f.vvOpacityValues),z.setUniform1fv("u_vvOpacities",f.vvOpacities));e.drawElements(4,g,5125,4*l);e.bindVAO(null)}};d.prototype._initialize=function(){if(this._isInitialized)return!0;this._fillVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:24,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,
offset:8,stride:24,normalized:!0,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:24,normalized:!1,divisor:0}]};this._fillVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_tlbr",count:4,type:5123,
offset:12,stride:32,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_vv",count:2,type:5126,offset:24,stride:32,normalized:!1,divisor:0}]};this._isInitialized=!0};d.prototype._getVAO=function(a,b,c){if(b.fillGeometry.vao)return b.fillGeometry.vao;var d=b.fillGeometry.vertexBufferMap[e.C_VBO_GEOMETRY],f=b.fillGeometry.indexBuffer;if(!d||!f)return null;b.fillGeometry.vao=c?new h(a,this._fillAttributeLocationsVV,this._fillVertexAttributeLayoutVV,
{geometry:d},f):new h(a,this._fillAttributeLocations,this._fillVertexAttributeLayout,{geometry:d},f);return b.fillGeometry.vao};return d}(g.default);d.default=b})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrush":function(){define(["require","exports","../../../../../core/tsSupport/extendsHelper","./WGLBrush","../util/iterator"],function(b,d,a,c,e){Object.defineProperty(d,"__esModule",{value:!0});b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}a(c,
b);c.prototype.draw=function(a,b){var c=this;if(b.canDisplay){var d=this.getGeometryType(),f=b.getDisplayList(a.drawPhase),h=b.getGeometry(d);h&&e.forEachIter(f.ofType(d),function(e){return c.drawGeometry(a,b,e,h)})}};return c}(c.default);d.default=b})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/iterator":function(){define(["require","exports"],function(b,d){Object.defineProperty(d,"__esModule",{value:!0});d.forEachIter=function(a,b){for(;;){var c=a.next();if(c.done)break;b(c.value)}}})},
"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLine":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(b,d,a,c,e,g,h){Object.defineProperty(d,"__esModule",{value:!0});b=function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a._lineAttributeLocations={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,
a_segmentDirection:6};a._lineAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6,a_vv:7};a._lineVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:12,stride:32,
normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:32,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:32,normalized:!1,divisor:0}]};a._lineVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:44,normalized:!0,divisor:0},{name:"a_color",
count:4,type:5121,offset:8,stride:44,normalized:!0,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:12,stride:44,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:44,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:44,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:44,normalized:!1,divisor:0},{name:"a_vv",count:3,type:5126,offset:32,stride:44,normalized:!1,divisor:0}]};
a._spritesTextureSize=new Float32Array(2);return a}a(d,b);d.prototype.getGeometryType=function(){return c.WGLGeometryType.LINE};d.prototype.drawGeometry=function(a,b,c,e){e=a.context;var d=a.painter,f=a.rendererInfo,h=a.requiredLevel,k=c.indexFrom,g=c.indexCount,l=c.materialInfo;c=l.materialKeyInfo;var n=c.vvSizeMinMaxValue||c.vvSizeScaleStops||c.vvSizeFieldStops||c.vvSizeUnitValue||c.vvColor||c.vvOpacity,p=d.materialManager.getProgram(l.materialKey,a.drawPhase,n?this._lineAttributeLocationsVV:this._lineAttributeLocations);
if(p){e.bindProgram(p);n=this._getVAO(e,b,n);e.bindVAO(n);n=1/a.pixelRatio;if(0<l.texBindingInfo.length){var l=l.texBindingInfo[0],z=l.pageId,m=d.textureManager.sprites;this._spritesTextureSize[0]=m.getWidth(z);this._spritesTextureSize[1]=m.getHeight(z);d.textureManager.bindSpritePage(e,z,l.unit);p.setUniform1i(l.semantic,l.unit);p.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}a=Math.pow(2,h-b.key.level)/a.pixelRatio;p.setUniform1f("u_zoomFactor",a);p.setUniformMatrix4fv("u_transformMatrix",
b.tileTransform.transform);p.setUniformMatrix4fv("u_extrudeMatrix",d.extrudeMatrix);p.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord);p.setUniform1f("u_opacity",1);p.setUniform1f("u_blur",0+n);p.setUniform1f("u_antialiasing",n);p.setUniform1f("u_zoomFactor",a);c.vvSizeMinMaxValue&&p.setUniform4fv("u_vvSizeMinMaxValue",f.vvSizeMinMaxValue);c.vvSizeScaleStops&&p.setUniform1f("u_vvSizeScaleStopsValue",f.vvSizeScaleStopsValue);c.vvSizeFieldStops&&(p.setUniform1fv("u_vvSizeFieldStopsValues",
f.vvSizeFieldStopsValues),p.setUniform1fv("u_vvSizeFieldStopsSizes",f.vvSizeFieldStopsSizes));c.vvSizeUnitValue&&p.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",f.vvSizeUnitValueToPixelsRatio);c.vvColor&&(p.setUniform1fv("u_vvColorValues",f.vvColorValues),p.setUniform4fv("u_vvColors",f.vvColors));c.vvOpacity&&(p.setUniform1fv("u_vvOpacityValues",f.vvOpacityValues),p.setUniform1fv("u_vvOpacities",f.vvOpacities));e.setFaceCullingEnabled(!0);e.setFrontFace(2305);e.setCullFace(1029);e.drawElements(4,
g,5125,4*k);e.setFaceCullingEnabled(!1);e.bindVAO(null)}};d.prototype._getVAO=function(a,b,c){if(b.lineGeometry.vao)return b.lineGeometry.vao;var d=b.lineGeometry.vertexBufferMap[e.C_VBO_GEOMETRY],f=b.lineGeometry.indexBuffer;if(!d||!f)return null;b.lineGeometry.vao=c?new h(a,this._lineAttributeLocationsVV,this._lineVertexAttributeLayoutVV,{geometry:d},f):new h(a,this._lineAttributeLocations,this._lineVertexAttributeLayout,{geometry:d},f);return b.lineGeometry.vao};return d}(g.default);d.default=
b})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),function(b,d,a,c,e,g,h,f){Object.defineProperty(d,"__esModule",{value:!0});b=function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a._iconAttributeLocations={a_pos:0,a_vertexOffsetAndTex:1,a_id:2,a_color:3,a_outlineColor:4,
a_sizeAndOutlineWidth:5};a._iconAttributeLocationsVV={a_pos:0,a_vertexOffsetAndTex:1,a_id:2,a_color:3,a_outlineColor:4,a_sizeAndOutlineWidth:5,a_vv:6};a._iconAttributeLocationsHeatmap={a_pos:0,a_vertexOffsetAndTex:1,a_id:2,a_color:3,a_outlineColor:4,a_sizeAndOutlineWidth:5,a_weight:6};a._iconVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffsetAndTex",count:4,type:5120,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_id",
count:4,type:5121,offset:8,stride:24,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:24,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:20,stride:24,normalized:!1,divisor:0}]};a._iconVertexAttributesWithVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:40,normalized:!1,divisor:0},{name:"a_vertexOffsetAndTex",count:4,type:5120,offset:4,stride:40,
normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:8,stride:40,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:40,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:16,stride:40,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:20,stride:40,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:24,stride:40,normalized:!1,divisor:0}]};a._iconVertexAttributesWithHeatmap={geometry:[{name:"a_pos",count:2,
type:5122,offset:0,stride:28,normalized:!1,divisor:0},{name:"a_vertexOffsetAndTex",count:4,type:5120,offset:4,stride:28,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:8,stride:28,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:28,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:16,stride:28,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:20,stride:28,normalized:!1,divisor:0},{name:"a_weight",count:1,
type:5126,offset:24,stride:28,normalized:!1,divisor:0}]};a._spritesTextureSize=new Float32Array(2);return a}a(d,b);d.prototype.getGeometryType=function(){return c.WGLGeometryType.MARKER};d.prototype.drawGeometry=function(a,b,c,e){e=a.context;var d=a.painter,f=a.rendererInfo,h=c.indexCount,g=c.indexFrom,k=c.materialInfo;c=k.materialKeyInfo;var n=c.heatmap,p=c.vvSizeMinMaxValue||c.vvSizeScaleStops||c.vvSizeFieldStops||c.vvSizeUnitValue||c.vvColor||c.vvRotation||c.vvOpacity;if(a=d.materialManager.getProgram(k.materialKey,
a.drawPhase,p?this._iconAttributeLocationsVV:this._iconAttributeLocations))e.bindProgram(a),p=this._getVAO(e,b,p,n),e.bindVAO(p),n?(k=this._getIntensityTexture(e,f.heatmapParameters),e.bindTexture(k,1),a.setUniform1i("u_texture",1),this._spritesTextureSize[0]=Math.round(f.heatmapParameters.radius),this._spritesTextureSize[1]=Math.round(f.heatmapParameters.radius)):(n=k.texBindingInfo[0],k=n.pageId,d.textureManager.bindSpritePage(e,k,n.unit),a.setUniform1i(n.semantic,n.unit),n=d.textureManager.sprites,
this._spritesTextureSize[0]=n.getWidth(k)/4,this._spritesTextureSize[1]=n.getHeight(k)/4),d=f.vvMaterialParameters.vvRotationEnabled&&"geographic"===f.vvMaterialParameters.vvRotationType?d.extrudeMatrix:d.extrudeNoRotationMatrix,a.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform),a.setUniformMatrix4fv("u_extrudeMatrix",d),a.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord),a.setUniform2fv("u_mosaicSize",this._spritesTextureSize),a.setUniform1f("u_opacity",1),c.vvSizeMinMaxValue&&
a.setUniform4fv("u_vvSizeMinMaxValue",f.vvSizeMinMaxValue),c.vvSizeScaleStops&&a.setUniform1f("u_vvSizeScaleStopsValue",f.vvSizeScaleStopsValue),c.vvSizeFieldStops&&(a.setUniform1fv("u_vvSizeFieldStopsValues",f.vvSizeFieldStopsValues),a.setUniform1fv("u_vvSizeFieldStopsSizes",f.vvSizeFieldStopsSizes)),c.vvSizeUnitValue&&a.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",f.vvSizeUnitValueToPixelsRatio),c.vvColor&&(a.setUniform1fv("u_vvColorValues",f.vvColorValues),a.setUniform4fv("u_vvColors",f.vvColors)),
c.vvOpacity&&(a.setUniform1fv("u_vvOpacityValues",f.vvOpacityValues),a.setUniform1fv("u_vvOpacities",f.vvOpacities)),c.vvRotation&&a.setUniform1f("u_vvRotationType","geographic"===f.vvMaterialParameters.vvRotationType?0:1),e.drawElements(4,h,5125,4*g),e.bindVAO(null)};d.prototype._getVAO=function(a,b,c,d){if(b.iconGeometry.vao)return b.iconGeometry.vao;var h=b.iconGeometry.vertexBufferMap[e.C_VBO_GEOMETRY],k=b.iconGeometry.indexBuffer;if(!h||!k)return null;b.iconGeometry.vao=c?new f(a,this._iconAttributeLocationsVV,
this._iconVertexAttributesWithVV,{geometry:h},k):d?new f(a,this._iconAttributeLocationsHeatmap,this._iconVertexAttributesWithHeatmap,{geometry:h},k):new f(a,this._iconAttributeLocations,this._iconVertexAttributes,{geometry:h},k);return b.iconGeometry.vao};d.prototype._getIntensityTexture=function(a,b){if(b.intensityKernel&&!b.refreshIntensityKernel)return b.intensityKernel;b.intensityKernel&&(b.intensityKernel.dispose(),b.intensityKernel=null);for(var c=b.radius,e=b.kernelSize,d=b.blurRadius,f=c*
c,k=[],g=-1;++g<e;)k[g]=Math.exp(-Math.pow(g-d,2)/(2*f))/(c/2*Math.sqrt(2*Math.PI));for(var c=[],l,n=0;n<e;n++)for(f=k[n],g=0;g<e;g++)l=n*e+g,d=k[g],c[4*l+0]=f*d,c[4*l+1]=0,c[4*l+2]=0,c[4*l+3]=1;e=new h(a,{target:3553,pixelFormat:6408,internalFormat:a.capabilities.colorBufferFloat.RGBA32F,dataType:5126,samplingMode:a.capabilities.textureFloatLinear?9729:9728,wrapMode:33071,width:e,height:e},new Float32Array(c));b.intensityKernel=e;b.refreshIntensityKernel=!1;return e};return d}(g.default);d.default=
b})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushText":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(b,d,a,c,e,g,h){Object.defineProperty(d,"__esModule",{value:!0});b=function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a._attributeLocations={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_visible:5};a._attributeLocationsVV=
{a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_vv:5,a_visible:6};a._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:20,normalized:!1,
divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};a._vertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:36,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:36,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:36,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:36,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,
stride:36,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:20,stride:36,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};a._glyphsTextureSize=new Float32Array(2);return a}a(d,b);d.prototype.getGeometryType=function(){return c.WGLGeometryType.TEXT};d.prototype.drawGeometry=function(a,b,c,e){e=a.context;var d=a.painter,f=a.rendererInfo,h=c.materialInfo,g=c.indexCount;c=c.indexFrom;var k=h.materialKeyInfo,l=k.vvSizeMinMaxValue||
k.vvSizeScaleStops||k.vvSizeFieldStops||k.vvSizeUnitValue||k.vvColor||k.vvRotation||k.vvOpacity;if(a=d.materialManager.getProgram(h.materialKey,a.drawPhase,l?this._attributeLocationsVV:this._attributeLocations))e.bindProgram(a),l=this._getVAO(e,b,l),e.bindVAO(l),h=h.texBindingInfo[0],d.textureManager.bindGlyphsPage(e,h.pageId,h.unit),a.setUniform1i(h.semantic,h.unit),h=d.textureManager.glyphs,this._glyphsTextureSize[0]=h.width/4,this._glyphsTextureSize[1]=h.height/4,d=f.vvMaterialParameters.vvRotationEnabled&&
"geographic"===f.vvMaterialParameters.vvRotationType?d.extrudeMatrix:d.extrudeNoRotationMatrix,a.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform),a.setUniformMatrix4fv("u_extrudeMatrix",d),a.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord),a.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),a.setUniform1f("u_pixelRatio",1),a.setUniform1f("u_opacity",1),k.vvSizeMinMaxValue&&a.setUniform4fv("u_vvSizeMinMaxValue",f.vvSizeMinMaxValue),k.vvSizeScaleStops&&a.setUniform1f("u_vvSizeScaleStopsValue",
f.vvSizeScaleStopsValue),k.vvSizeFieldStops&&(a.setUniform1fv("u_vvSizeFieldStopsValues",f.vvSizeFieldStopsValues),a.setUniform1fv("u_vvSizeFieldStopsSizes",f.vvSizeFieldStopsSizes)),k.vvSizeUnitValue&&a.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",f.vvSizeUnitValueToPixelsRatio),k.vvColor&&(a.setUniform1fv("u_vvColorValues",f.vvColorValues),a.setUniform4fv("u_vvColors",f.vvColors)),k.vvOpacity&&(a.setUniform1fv("u_vvOpacityValues",f.vvOpacityValues),a.setUniform1fv("u_vvOpacities",f.vvOpacities)),
k.vvRotation&&a.setUniform1f("u_vvRotationType","geographic"===f.vvMaterialParameters.vvRotationType?0:1),e.drawElements(4,g,5125,4*c),e.bindVAO(null)};d.prototype._getVAO=function(a,b,c){if(b.textGeometry.vao)return b.textGeometry.vao;var d=b.textGeometry.vertexBufferMap[e.C_VBO_GEOMETRY],f=b.textGeometry.vertexBufferMap[e.C_VBO_VISIBILITY],g=b.textGeometry.indexBuffer;if(!d||!g)return null;b.textGeometry.vao=c?new h(a,this._attributeLocationsVV,this._vertexAttributeLayoutVV,{geometry:d,visibility:f},
g):new h(a,this._attributeLocations,this._vertexAttributeLayout,{geometry:d,visibility:f},g);return b.textGeometry.vao};return d}(g.default);d.default=b})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/WGLHighlightPainter":function(){define(["require","exports","dojo/has","./highlight/HighlightRenderer","./highlight/HighlightSurfaces"],function(b,d,a,c,e){return function(){function b(){this._hlRenderer=new c;this._hlSurfaces=new e;this._height=this._width=void 0}b.prototype.setup=function(a,
b,c){var e=b%4,d=c%4;b+=2>e?-e:4-e;c+=2>d?-d:4-d;this._width=b;this._height=c;this._boundFBO=a.getBoundFramebufferObject();b=Math.round(.75*b);c=Math.round(.75*c);this._hlRenderer.setup(a,b,c);this._hlSurfaces.setup(a,b,c)};b.prototype.setHighlightOptions=function(a){this._hlRenderer.setHighlightOptions({fillColor:a.fillColor,outlineColor:a.outlineColor,outlineWidth:.75*a.outlineWidth,outerHaloWidth:.75*a.outerHaloWidth,innerHaloWidth:.75*a.innerHaloWidth,outlinePosition:.75*a.outlinePosition})};
b.prototype.startMaskDraw=function(a){a.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo);a.setClearColor(0,0,0,0);a.setClearStencil(0);a.clear(a.gl.COLOR_BUFFER_BIT|a.gl.STENCIL_BUFFER_BIT);a.setViewport(0,0,.75*this._width,.75*this._height)};b.prototype.draw=function(b){b.setStencilTestEnabled(!1);b.setBlendingEnabled(!1);b.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo);b.setClearColor(0,0,0,0);b.clear(b.gl.COLOR_BUFFER_BIT);this._hlRenderer.preBlur(b,this._hlSurfaces.sharedBlur1Tex);a("esri-feature-highlight-debug")?
(b.bindFramebuffer(null),b.clear(b.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(b,this._hlSurfaces.sharedBlur2Tex)):(b.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),b.setClearColor(0,0,0,0),b.clear(b.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(b,this._hlSurfaces.sharedBlur2Tex),b.bindFramebuffer(this._boundFBO),b.setBlendingEnabled(!0),b.setViewport(0,0,this._width,this._height),this._hlRenderer.renderHighlight(b,this._hlSurfaces.sharedBlur1Tex),this._boundFBO=null)};return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightRenderer":function(){define("require exports ../../shaders/hlShaderSnippets ../../../../../webgl/BufferObject ../../../../../webgl/ShaderVariations ../../../../../webgl/Texture ../../../../../webgl/VertexArrayObject".split(" "),
function(b,d,a,c,e,g,h){var f=[void 0,void 0,void 0,1],l=[3,4],k=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return function(){function b(){this._height=this._width=void 0;this._highlightOptions={fillColor:[.2,.6,.9,.75],outlineColor:[.2,.6,.9,.9],outlinePosition:0,outlineWidth:3.4,innerHaloWidth:2,outerHaloWidth:3.3};this._resources=null}b.prototype._initialize=function(b,d,k){this._width=d;this._height=k;d=new c(b,34962,35044,(new Int8Array([-128,-128,0,0,127,-128,255,
0,-128,127,0,255,127,127,255,255])).buffer);k=new h(b,{a_position:0,a_texcoord:1},{geometry:[{name:"a_position",count:2,type:5120,offset:0,stride:4,normalized:!0},{name:"a_texcoord",count:2,type:5121,offset:2,stride:4,normalized:!0}]},{geometry:d});var m=(new e("hl",["texturedVS","highlightFS"],[],a,b,{a_position:0,a_texcoord:1})).getProgram([]),q=(new e("hl",["texturedVS","blurFS"],[],a,b,{a_position:0,a_texcoord:1})).getProgram([]);m.setUniform1i("u_texture",l[0]);m.setUniform1i("u_shade",l[1]);
m.setUniform4fv("u_sigmas",f);q.setUniform1i("u_texture",l[0]);q.setUniform4fv("u_sigmas",f);b=new g(b,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:256,height:1,samplingMode:9728});this._resources={quadGeometry:d,quadVAO:k,highlightProgram:m,blurProgram:q,shadeTex:b}};b.prototype.setHighlightOptions=function(a){function b(a,b,c){p[0]=(1-c)*a[0]+c*b[0];p[1]=(1-c)*a[1]+c*b[1];p[2]=(1-c)*a[2]+c*b[2];p[3]=(1-c)*a[3]+c*b[3]}this._highlightOptions=a;if(this._resources){var c=a.outlinePosition-
a.outlineWidth/2-a.outerHaloWidth,e=a.outlinePosition-a.outlineWidth/2,d=a.outlinePosition+a.outlineWidth/2,h=a.outlinePosition+a.outlineWidth/2+a.innerHaloWidth,g=Math.sqrt(Math.PI/2)*f[3],n=Math.abs(c)>g?Math.round(10*(Math.abs(c)-g))/10:0,g=Math.abs(h)>g?Math.round(10*(Math.abs(h)-g))/10:0;n&&!g?console.warn("The outer rim of the highlight is "+n+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!n&&
g?console.warn("The inner rim of the highlight is "+g+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):n&&g&&console.warn("The highlight is "+Math.max(n,g)+"px away from the edge of the feature; consider reducing some width values.");for(var n=new Uint8Array(1024),p=[void 0,void 0,void 0,void 0],k=0;256>k;++k)g=c+k/255*(h-c),g<c?(n[4*k+0]=0,n[4*k+1]=0,n[4*k+2]=0,n[4*k+3]=0):g<e?b([0,0,0,0],a.outlineColor,
(g-c)/(e-c)):g<d?(p[0]=a.outlineColor[0],p[1]=a.outlineColor[1],p[2]=a.outlineColor[2],p[3]=a.outlineColor[3]):g<h?b(a.outlineColor,a.fillColor,(g-d)/(h-d)):(n[4*k+0]=a.fillColor[0],n[4*k+1]=a.fillColor[1],n[4*k+2]=a.fillColor[2],n[4*k+3]=a.fillColor[3]),n[4*k+0]=255*p[0]*p[3],n[4*k+1]=255*p[1]*p[3],n[4*k+2]=255*p[2]*p[3],n[4*k+3]=255*p[3];this._resources.highlightProgram.setUniform2fv("u_minMaxDistance",[c,h]);this._resources.shadeTex.updateData(0,0,0,256,1,n)}};b.prototype.setup=function(a,b,c){this._resources?
(this._width=b,this._height=c):(this._initialize(a,b,c),this.setHighlightOptions(this._highlightOptions))};b.prototype._teardown=function(){this._resources.quadGeometry.dispose();this._resources.quadVAO.dispose();this._resources.highlightProgram.dispose();this._resources.blurProgram.dispose();this._resources.shadeTex.dispose();this._resources=null};b.prototype.dispose=function(){this._resources&&this._teardown()};b.prototype.preBlur=function(a,b){a.bindTexture(b,l[0]);a.bindProgram(this._resources.blurProgram);
this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",k);a.bindVAO(this._resources.quadVAO);a.drawArrays(5,0,4);a.bindVAO()};b.prototype.finalBlur=function(a,b){a.bindTexture(b,l[0]);a.bindProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",m);a.bindVAO(this._resources.quadVAO);
a.drawArrays(5,0,4);a.bindVAO()};b.prototype.renderHighlight=function(a,b){a.bindTexture(b,l[0]);a.bindTexture(this._resources.shadeTex,l[1]);a.bindProgram(this._resources.highlightProgram);a.bindVAO(this._resources.quadVAO);a.drawArrays(5,0,4);a.bindVAO()};return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaderSnippets":function(){define(["require","exports","dojo/text!./hlShaders.xml","../../../../webgl/ShaderSnippets"],function(b,d,a,c){b=new c;c.parse(a,b);return b})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightSurfaces":function(){define(["require",
"exports","../../../../../webgl/FramebufferObject","../../../../../webgl/Texture"],function(b,d,a,c){function e(b,e,d){e=new c(b,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:e,height:d,samplingMode:9729});b=a.createWithAttachments(b,e,{colorTarget:0,depthStencilTarget:2});return[e,b]}return function(){function a(){this._height=this._width=void 0;this._resources=null}a.prototype._initialize=function(a,b,c){this._width=b;this._height=c;var d=e(a,b,c),f=d[0],d=d[1];a=e(a,b,c);this._resources=
{sharedBlur1Tex:f,sharedBlur1Fbo:d,sharedBlur2Tex:a[0],sharedBlur2Fbo:a[1]}};a.prototype.setup=function(a,b,c){!this._resources||this._width===b&&this._height===c||this._teardown();this._resources||this._initialize(a,b,c)};a.prototype._teardown=function(){this._resources.sharedBlur1Tex.dispose();this._resources.sharedBlur1Fbo.dispose();this._resources.sharedBlur2Tex.dispose();this._resources.sharedBlur2Fbo.dispose();this._resources=null};a.prototype.dispose=function(){this._resources&&this._teardown()};
Object.defineProperty(a.prototype,"sharedBlur1Tex",{get:function(){return this._resources.sharedBlur1Tex},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sharedBlur1Fbo",{get:function(){return this._resources.sharedBlur1Fbo},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sharedBlur2Tex",{get:function(){return this._resources.sharedBlur2Tex},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sharedBlur2Fbo",{get:function(){return this._resources.sharedBlur2Fbo},
enumerable:!0,configurable:!0});return a}()})},"esri/layers/vectorTiles/views/webgl/FramebufferObject":function(){define(["require","exports","./Texture"],function(b,d,a){return function(){function b(c,d,h,f){this._colorAttachment=this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=c;this._desc={colorTarget:d.colorTarget,depthStencilTarget:d.depthStencilTarget,width:d.width,height:d.height,multisampled:d.multisampled};this._id=b._nextId++;
h&&(c=void 0,h instanceof a?(this._colorAttachment=h,c=h.descriptor):(c=h,this._colorAttachment=new a(this._context,c)),0!==this._desc.colorTarget&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),b._validateTextureDimensions(c,this._desc));f&&(this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),
h=void 0,f instanceof a?(this._depthStencilTexture=f,h=this._depthStencilTexture.descriptor):(h=f,this._depthStencilTexture=new a(this._context,h)),b._validateTextureDimensions(h,this._desc))}b.create=function(a,c){return new b(a,c)};b.createWithAttachments=function(a,c,d,f){return new b(a,d,c,f)};Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof a?this._colorAttachment:null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"width",{get:function(){return this._desc.width},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});b.prototype.dispose=function(){this._context&&this._glName&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),this._context.gl.deleteFramebuffer(this._glName),this._glName=null)};b.prototype.attachColorTexture=function(a){if(a){b._validateTextureDimensions(a.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);
var c=this._context.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,a.glName,0)}this._colorAttachment=a}};b.prototype.detachColorTexture=function(){var b=void 0;if(this._colorAttachment instanceof a){b=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;this._context.gl.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)}this._colorAttachment=null}return b};b.prototype.attachDepthStencilTexture=function(a){if(a){var c=
a.descriptor;34041!==c.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");34042!==c.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8_WEBGL!");this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");b._validateTextureDimensions(c,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);
this._disposeDepthStencilAttachments();this._initialized&&(this._context.bindFramebuffer(this),c=this._context.gl,c.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.TEXTURE_2D,a.glName,0));this._depthStencilTexture=a}};b.prototype.detachDepthStencilTexture=function(){var a=this._depthStencilTexture;if(a&&this._initialized){this._context.bindFramebuffer(this);var b=this._context.gl;this._context.gl.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.TEXTURE_2D,null,0)}this._depthStencilTexture=
null;return a};b.prototype.copyToTexture=function(a,b,c,d,l,k,m){(0>a||0>b||0>l||0>k)&&console.error("Offsets cannot be negative!");(0>=c||0>=d)&&console.error("Copy width and height must be greater than zero!");var e=this._desc,f=m.descriptor;3553!==m.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");(a+c>e.width||b+d>e.height||l+c>f.width||k+d>f.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");e=this._context;e.bindTexture(m);
e.bindFramebuffer(this);e.gl.copyTexSubImage2D(3553,0,l,k,a,b,c,d)};b.prototype.readPixels=function(a,b,c,d,l,k,m){(0>=c||0>=d)&&console.error("Copy width and height must be greater than zero!");m||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(a,b,c,d,l,k,m)};b.prototype.resize=function(c,d){var e=this._desc;if(e.width!==c||e.height!==d)if(this._initialized)e.width=c,e.height=d,this._colorAttachment instanceof a?(f=this._colorAttachment,
e=f.descriptor,e.width=c,e.height=d,this._colorAttachment.dispose(),this._colorAttachment=new a(this._context,e),b._validateTextureDimensions(f.descriptor,this._desc)):this._colorAttachment&&this._disposeColorAttachment(),null!=this._depthStencilTexture?(e=this._depthStencilTexture.descriptor,e.width=c,e.height=d,this._depthStencilTexture.dispose(),this._depthStencilTexture=new a(this._context,e)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments(),this._context.getBoundFramebufferObject()===
this&&this._context.bindFramebuffer(null),this._initialized=!1;else{e.width=c;e.height=d;if(this._colorAttachment instanceof a){var f=this._colorAttachment;f.resize(c,d)}this._depthStencilTexture&&this._depthStencilTexture.resize(c,d)}};b.prototype.initialize=function(){if(this._initialized)return!1;var b=this._context.gl;this._glName&&b.deleteFramebuffer(this._glName);var c=b.createFramebuffer(),d=this._desc;b.bindFramebuffer(b.FRAMEBUFFER,c);if(!this._colorAttachment)if(0===d.colorTarget)this._colorAttachment=
new a(this._context,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:d.width,height:d.height});else{var f=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,f);b.renderbufferStorage(b.RENDERBUFFER,b.RGBA4,d.width,d.height);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.RENDERBUFFER,f);this._colorAttachment=f}this._colorAttachment instanceof a&&b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this._colorAttachment.glName,0);
switch(d.depthStencilTarget){case 1:case 3:f=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,f);var l=1===d.depthStencilTarget?b.DEPTH_ATTACHMENT:b.DEPTH_STENCIL_ATTACHMENT;b.renderbufferStorage(b.RENDERBUFFER,1===d.depthStencilTarget?b.DEPTH_COMPONENT16:b.DEPTH_STENCIL,d.width,d.height);b.framebufferRenderbuffer(b.FRAMEBUFFER,l,b.RENDERBUFFER,f);this._depthAttachment=f;break;case 2:f=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,f);b.renderbufferStorage(b.RENDERBUFFER,b.STENCIL_INDEX8,
d.width,d.height);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.STENCIL_ATTACHMENT,b.RENDERBUFFER,f);this._stencilAttachment=f;break;case 4:this._depthStencilTexture||(this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),this._depthStencilTexture=new a(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:d.width,height:d.height})),
b.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.TEXTURE_2D,this._depthStencilTexture.glName,0)}b.checkFramebufferStatus(b.FRAMEBUFFER)!==b.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!");this._glName=c;return this._initialized=!0};b.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof a){var b=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,
c.TEXTURE_2D,null,0)}b.dispose()}else this._colorAttachment instanceof WebGLRenderbuffer&&(b=this._colorAttachment,c=this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(b));this._colorAttachment=null};b.prototype._disposeDepthStencilAttachments=function(){var a=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);
var b=this._context.gl;b.framebufferRenderbuffer(b.FRAMEBUFFER,1===this._desc.depthStencilTarget?b.DEPTH_ATTACHMENT:b.DEPTH_STENCIL_ATTACHMENT,b.RENDERBUFFER,null)}a.deleteRenderbuffer(this._depthAttachment);this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),b=this._context.gl,b.framebufferRenderbuffer(b.FRAMEBUFFER,b.STENCIL_ATTACHMENT,b.RENDERBUFFER,null)),a.deleteRenderbuffer(this._stencilAttachment),this._stencilAttachment=null);this._depthStencilTexture&&
(this._initialized&&(this._context.bindFramebuffer(this),a=this._context.gl,a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)};b._validateTextureDimensions=function(a,b){console.assert(0<=a.width&&0<=a.height);3553!==a.target&&console.error("Texture type must be TEXTURE_2D!");void 0!==b.width&&0<=b.width&&void 0!==b.height&&0<=b.height?b.width===a.width&&b.height===a.height||console.error("Color attachment texture must match the framebuffer's!"):
(b.width=a.width,b.height=a.height)};b._nextId=0;return b}()})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/common":function(){define([],function(){if(!b)var b=1E-6;if(!d)var d="undefined"!==typeof Float32Array?Float32Array:Array;if(!a)var a=Math.random;var c={GLMAT_EPSILON:b,GLMAT_ARRAY_TYPE:d,GLMAT_RANDOM:a,setMatrixArrayType:function(a){c.GLMAT_ARRAY_TYPE=a}},e=Math.PI/180,g=180/Math.PI;c.toRadian=function(a){return a*e};c.toDegree=function(a){return a*g};c.setMatrixArrayType(Array);return c})},
"esri/layers/vectorTiles/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],function(b){var d=b.GLMAT_ARRAY_TYPE;b={create:function(){var a=new d(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new d(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,b){var c=
b[0],d=b[1],h=b[2],f=b[3],l=b[4],k=b[5],m=c*f-d*h;if(!m)return null;m=1/m;a[0]=f*m;a[1]=-d*m;a[2]=-h*m;a[3]=c*m;a[4]=(h*k-f*l)*m;a[5]=(d*l-c*k)*m;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,e){var c=b[0],d=b[1],f=b[2],l=b[3],k=b[4];b=b[5];var m=e[0],t=e[1],q=e[2],r=e[3],w=e[4];e=e[5];a[0]=c*m+f*t;a[1]=d*m+l*t;a[2]=c*q+f*r;a[3]=d*q+l*r;a[4]=c*w+f*e+k;a[5]=d*w+l*e+b;return a}};b.mul=b.multiply;b.rotate=function(a,b,e){var c=b[0],d=b[1],f=b[2],l=b[3],k=b[4];b=
b[5];var m=Math.sin(e);e=Math.cos(e);a[0]=c*e+f*m;a[1]=d*e+l*m;a[2]=c*-m+f*e;a[3]=d*-m+l*e;a[4]=k;a[5]=b;return a};b.scale=function(a,b,e){var c=b[1],d=b[2],f=b[3],l=b[4],k=b[5],m=e[0];e=e[1];a[0]=b[0]*m;a[1]=c*m;a[2]=d*e;a[3]=f*e;a[4]=l;a[5]=k;return a};b.translate=function(a,b,e){var c=b[0],d=b[1],f=b[2],l=b[3],k=b[4];b=b[5];var m=e[0];e=e[1];a[0]=c;a[1]=d;a[2]=f;a[3]=l;a[4]=c*m+f*e+k;a[5]=d*m+l*e+b;return a};b.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);a[0]=d;a[1]=c;a[2]=-c;a[3]=
d;a[4]=0;a[5]=0;return a};b.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];a[4]=0;a[5]=0;return a};b.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=b[0];a[5]=b[1];return a};b.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};b.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};return b})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],
function(b){var d=b.GLMAT_ARRAY_TYPE,a=b.GLMAT_RANDOM,c={create:function(){var a=new d(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new d(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var c=new d(2);c[0]=a;c[1]=b;return c},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,c){a[0]=b;a[1]=c;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a},subtract:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}};c.sub=c.subtract;c.multiply=function(a,b,
c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a};c.mul=c.multiply;c.divide=function(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a};c.div=c.divide;c.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a};c.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a};c.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a};c.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;return a};c.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*
c+d*d)};c.dist=c.distance;c.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d};c.sqrDist=c.squaredDistance;c.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};c.len=c.length;c.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};c.sqrLen=c.squaredLength;c.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};c.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};c.normalize=function(a,b){var c=b[0],d=b[1],c=c*c+d*d;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=
b[1]*c);return a};c.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};c.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a};c.lerp=function(a,b,c,d){var e=b[0];b=b[1];a[0]=e+d*(c[0]-e);a[1]=b+d*(c[1]-b);return a};c.random=function(b,c){c=c||1;var d=2*a()*Math.PI;b[0]=Math.cos(d)*c;b[1]=Math.sin(d)*c;return b};c.transformMat2=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b;a[1]=c[1]*d+c[3]*b;return a};c.transformMat2d=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b+c[4];
a[1]=c[1]*d+c[3]*b+c[5];return a};c.transformMat3=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[3]*b+c[6];a[1]=c[1]*d+c[4]*b+c[7];return a};c.transformMat4=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[4]*b+c[12];a[1]=c[1]*d+c[5]*b+c[13];return a};c.forEach=function(){var a=c.create();return function(b,c,d,e,k,m){c||(c=2);d||(d=0);for(e=e?Math.min(e*c+d,b.length):b.length;d<e;d+=c)a[0]=b[d],a[1]=b[d+1],k(a,a,m),b[d]=a[0],b[d+1]=a[1];return b}}();c.str=function(a){return"vec2("+a[0]+", "+a[1]+
")"};return c})},"esri/layers/vectorTiles/views/support/screenshotUtils":function(){define(["require","exports","dojo/_base/lang"],function(b,d,a){Object.defineProperty(d,"__esModule",{value:!0});d.adjustScreenshotSettings=function(b,d){b=a.mixin({format:"png",quality:100},b||{});var c,e;b.includePadding?(c=d.width,e=d.height):(c=d.width-d.padding.left-d.padding.right,e=d.height-d.padding.top-d.padding.bottom);var f=c/e;void 0!==b.width&&void 0===b.height?b.height=b.width/f:void 0!==b.height&&void 0===
b.width&&(b.width=f*b.height);void 0!==b.height&&(b.height=Math.floor(b.height));void 0!==b.width&&(b.width=Math.floor(b.width));b.area||b.includePadding||(b.area={x:d.padding.left,y:d.padding.top,width:c,height:e});return b};d.resampleHermite=function(a,b,d,h,f,l,k){void 0===k&&(k=!0);var c=b/f;d/=l;for(var e=Math.ceil(c/2),g=Math.ceil(d/2),r=0;r<l;r++)for(var w=0;w<f;w++){for(var v=4*(w+(k?l-r-1:r)*f),u=0,x=0,y=0,n=0,p=0,z=0,A=0,B=(r+.5)*d,D=Math.floor(r*d);D<(r+1)*d;D++)for(var C=Math.abs(B-(D+
.5))/g,J=(w+.5)*c,C=C*C,E=Math.floor(w*c);E<(w+1)*c;E++){var H=Math.abs(J-(E+.5))/e,u=Math.sqrt(C+H*H);-1<=u&&1>=u&&(u=2*u*u*u-3*u*u+1,0<u&&(H=4*(E+D*b),A+=u*a[H+3],y+=u,255>a[H+3]&&(u=u*a[H+3]/250),n+=u*a[H],p+=u*a[H+1],z+=u*a[H+2],x+=u))}h[v]=n/x;h[v+1]=p/x;h[v+2]=z/x;h[v+3]=A/y}}})},"esri/layers/vectorTiles/views/webgl/context-util":function(){define(["require","exports"],function(b,d){function a(a,b,c){void 0===b&&(b={});var d;switch(c){case "webgl":d=["webgl","experimental-webgl","webkit-3d",
"moz-webgl"];break;case "webgl2":d=["webgl2"];break;default:d=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}c=null;for(var e=0;e<d.length;e++){var f=d[e];try{c=a.getContext(f,b)}catch(q){}if(c)break}return c}function c(a,b){var c=a.parentNode;c&&(c.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+b+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}
Object.defineProperty(d,"__esModule",{value:!0});d.createContextOrErrorHTML=function(b,d,l){void 0===d&&(d={});if(!window.WebGLRenderingContext)return c(b,e),null;d=a(b,d,l);return d?d:(c(b,g),null)};d.createContext=a;var e='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',g='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},
"esri/layers/vectorTiles/views/webgl/RenderingContext":function(){define(["require","exports","./enums","./capabilities/isWebGL2Context","./capabilities/load"],function(b,d,a,c,e){return function(){function b(a,b){this.gl=null;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;
this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._lineWidth=
1;this._clearColor={r:0,g:0,b:0,a:0};this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this.contextVersion=c.default(a)?"webgl2":"webgl";this.gl=a;a instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=e.loadCapabilities(a,b);var d=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:d[0],y:d[1],width:d[2],height:d[3]};d=this.capabilities.textureFilterAnisotropic;
this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:d?this.gl.getParameter(d.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)};this.enforceState()}Object.defineProperty(b.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0});b.prototype.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};this.gl=null};b.prototype.setBlendingEnabled=function(a){this._blendEnabled!==a&&(!0===a?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=a)};b.prototype.setBlendColor=function(a,b,c,d){if(a!==this._blendColorState.r||
b!==this._blendColorState.g||c!==this._blendColorState.b||d!==this._blendColorState.a)this.gl.blendColor(a,b,c,d),this._blendColorState.r=a,this._blendColorState.g=b,this._blendColorState.b=c,this._blendColorState.a=d};b.prototype.setBlendFunction=function(a,b){if(a!==this._blendFunctionState.srcRGB||b!==this._blendFunctionState.dstRGB)this.gl.blendFunc(a,b),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=a,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=b};
b.prototype.setBlendFunctionSeparate=function(a,b,c,d){if(this._blendFunctionState.srcRGB!==a||this._blendFunctionState.srcAlpha!==c||this._blendFunctionState.dstRGB!==b||this._blendFunctionState.dstAlpha!==d)this.gl.blendFuncSeparate(a,b,c,d),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=c,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=d};b.prototype.setBlendEquation=function(a){this._blendEquationState.mode!==a&&(this.gl.blendEquation(a),this._blendEquationState.mode=
a,this._blendEquationState.modeAlpha=a)};b.prototype.setBlendEquationSeparate=function(a,b){if(this._blendEquationState.mode!==a||this._blendEquationState.modeAlpha!==b)this.gl.blendEquationSeparate(a,b),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=b};b.prototype.setColorMask=function(a,b,c,d){if(this._colorMaskState.r!==a||this._colorMaskState.g!==b||this._colorMaskState.b!==c||this._colorMaskState.a!==d)this.gl.colorMask(a,b,c,d),this._colorMaskState.r=a,this._colorMaskState.g=
b,this._colorMaskState.b=c,this._colorMaskState.a=d};b.prototype.setClearColor=function(a,b,c,d){if(this._clearColor.r!==a||this._clearColor.g!==b||this._clearColor.b!==c||this._clearColor.a!==d)this.gl.clearColor(a,b,c,d),this._clearColor.r=a,this._clearColor.g=b,this._clearColor.b=c,this._clearColor.a=d};b.prototype.setFaceCullingEnabled=function(a){this._polygonCullingEnabled!==a&&(!0===a?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=a)};b.prototype.setPolygonOffsetFillEnabled=
function(a){this._polygonOffsetFillEnabled!==a&&(!0===a?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=a)};b.prototype.setPolygonOffset=function(a,b){if(this._polygonOffset[0]!==a||this._polygonOffset[1]!==b)this._polygonOffset[0]=a,this._polygonOffset[1]=b,this.gl.polygonOffset(a,b)};b.prototype.setCullFace=function(a){this._cullFace!==a&&(this.gl.cullFace(a),this._cullFace=a)};b.prototype.setFrontFace=function(a){this._frontFace!==
a&&(this.gl.frontFace(a),this._frontFace=a)};b.prototype.setScissorTestEnabled=function(a){this._scissorTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=a)};b.prototype.setScissorRect=function(a,b,c,d){if(this._scissorRect.x!==a||this._scissorRect.y!==b||this._scissorRect.width!==c||this._scissorRect.height!==d)this.gl.scissor(a,b,c,d),this._scissorRect.x=a,this._scissorRect.y=b,this._scissorRect.width=c,this._scissorRect.height=
d};b.prototype.setDepthTestEnabled=function(a){this._depthTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=a)};b.prototype.setClearDepth=function(a){this._clearDepth!==a&&(this.gl.clearDepth(a),this._clearDepth=a)};b.prototype.setDepthFunction=function(a){this._depthFunction!==a&&(this.gl.depthFunc(a),this._depthFunction=a)};b.prototype.setDepthWriteEnabled=function(a){this._depthWriteEnabled!==a&&(this.gl.depthMask(a),this._depthWriteEnabled=
a)};b.prototype.setDepthRange=function(a,b){if(this._depthRange.zNear!==a||this._depthRange.zFar!==b)this.gl.depthRange(a,b),this._depthRange.zNear=a,this._depthRange.zFar=b};b.prototype.setStencilTestEnabled=function(a){this._stencilTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=a)};b.prototype.setClearStencil=function(a){a!==this._clearStencil&&(this.gl.clearStencil(a),this._clearStencil=a)};b.prototype.setStencilFunction=
function(a,b,c){if(this._stencilFunction.func!==a||this._stencilFunction.ref!==b||this._stencilFunction.mask!==c)this.gl.stencilFunc(a,b,c),this._stencilFunction.face=1032,this._stencilFunction.func=a,this._stencilFunction.ref=b,this._stencilFunction.mask=c};b.prototype.setStencilFunctionSeparate=function(a,b,c,d){if(this._stencilFunction.face!==a||this._stencilFunction.func!==b||this._stencilFunction.ref!==c||this._stencilFunction.mask!==d)this.gl.stencilFuncSeparate(a,b,c,d),this._stencilFunction.face=
a,this._stencilFunction.func=b,this._stencilFunction.ref=c,this._stencilFunction.mask=d};b.prototype.setStencilWriteMask=function(a){this._stencilWriteMask!==a&&(this.gl.stencilMask(a),this._stencilWriteMask=a)};b.prototype.setStencilOp=function(a,b,c){if(this._stencilOperation.fail!==a||this._stencilOperation.zFail!==b||this._stencilOperation.zPass!==c)this.gl.stencilOp(a,b,c),this._stencilOperation.face=1032,this._stencilOperation.fail=a,this._stencilOperation.zFail=b,this._stencilOperation.zPass=
c};b.prototype.setStencilOpSeparate=function(a,b,c,d){if(this._stencilOperation.face!==a||this._stencilOperation.fail!==b||this._stencilOperation.zFail!==c||this._stencilOperation.zPass!==d)this.gl.stencilOpSeparate(a,b,c,d),this._stencilOperation.face=a,this._stencilOperation.face=a,this._stencilOperation.fail=b,this._stencilOperation.zFail=c,this._stencilOperation.zPass=d};b.prototype.setLineWidth=function(a){var b=this._lineWidth;this._lineWidth!==a&&(this.gl.lineWidth(a),this._lineWidth=a);return b};
b.prototype.setActiveTexture=function(b){var c=this._activeTextureUnit;0<=b&&b!==this._activeTextureUnit&&(this.gl.activeTexture(a.BASE_TEXTURE_UNIT+b),this._activeTextureUnit=b);return c};b.prototype.clear=function(a){a&&this.gl.clear(a)};b.prototype.drawArrays=function(a,b,c){this.gl.drawArrays(a,b,c)};b.prototype.drawElements=function(a,b,c,d){5123===c?this.gl.drawElements(a,b,c,d):5125===c&&this.gl.drawElements(a,b,c,d)};Object.defineProperty(b.prototype,"capabilities",{get:function(){return this._capabilities},
enumerable:!0,configurable:!0});b.prototype.setViewport=function(a,b,c,d){var e=this._viewport;if(e.x!==a||e.y!==b||e.width!==c||e.height!==d)e.x=a,e.y=b,e.width=c,e.height=d,this.gl.viewport(a,b,c,d)};b.prototype.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};b.prototype.bindProgram=function(a){a?this._activeShaderProgram!==a&&(a.initialize(),this.gl.useProgram(a.glName),this._activeShaderProgram=a):(this.gl.useProgram(null),
this._activeShaderProgram=null)};b.prototype.bindTexture=function(a,c){void 0===c&&(c=0);-1===b._MAX_TEXTURE_IMAGE_UNITS&&(b._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));(c>=b._MAX_TEXTURE_IMAGE_UNITS||0>c)&&console.error("Input texture unit is out of range of available units!");var d=this._textureUnitMap[c];this.setActiveTexture(c);null==a||null==a.glName?(null!=d&&(this.gl.bindTexture(d.descriptor.target,null),d.setBoundToUnit(c,!1)),this._textureUnitMap[c]=null):
d&&d.id===a.id?a.applyChanges():(this.gl.bindTexture(a.descriptor.target,a.glName),a.setBoundToUnit(c,!0),a.applyChanges(),this._textureUnitMap[c]=a)};b.prototype.bindFramebuffer=function(a){a?this._activeFramebuffer!==a&&(a.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a.glName),this._activeFramebuffer=a):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};b.prototype.bindBuffer=function(a){a&&(34962===a.bufferType?this._activeVertexBuffer=b._bindBuffer(this.gl,
a,a.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=b._bindBuffer(this.gl,a,a.bufferType,this._activeIndexBuffer))};b.prototype.unbindBuffer=function(a){34962===a?this._activeVertexBuffer=b._bindBuffer(this.gl,null,a,this._activeVertexBuffer):this._activeIndexBuffer=b._bindBuffer(this.gl,null,a,this._activeIndexBuffer)};b.prototype.bindVAO=function(a){a?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===a.id||(a.bind(),this._activeVertexArrayObject=a):this._activeVertexArrayObject&&
(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)};b.prototype.getBoundTexture=function(a){return this._textureUnitMap[a]};b.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};b.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};b.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var a=0;a<this.parameters.maxTextureImageUnits;a++)this.bindTexture(null,
a);this.setBlendingEnabled(!1);this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,
7680,7680);this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};b.prototype.enforceState=function(){var b=this.gl,c=this._capabilities.vao;c&&c.bindVertexArray(null);for(var d=0;d<this.parameters.maxVertexAttributes;d++)b.disableVertexAttribArray(d);this._activeVertexBuffer?b.bindBuffer(this._activeVertexBuffer.bufferType,
this._activeVertexBuffer.glName):b.bindBuffer(34962,null);this._activeIndexBuffer?b.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):b.bindBuffer(34963,null);if(c&&this._activeVertexArrayObject){if(c=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(c)}b.bindFramebuffer(b.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);b.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:
null);b.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);!0===this._blendEnabled?b.enable(this.gl.BLEND):b.disable(this.gl.BLEND);b.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);b.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);b.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,
this._clearColor.a);b.clearDepth(this._clearDepth);b.clearStencil(this._clearStencil);b.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);b.cullFace(this._cullFace);b.depthFunc(this._depthFunction);b.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST);b.depthMask(this._depthWriteEnabled);b.frontFace(this._frontFace);b.lineWidth(this._lineWidth);!0===this._polygonCullingEnabled?
b.enable(b.CULL_FACE):b.disable(b.CULL_FACE);b.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?b.enable(b.POLYGON_OFFSET_FILL):b.disable(b.POLYGON_OFFSET_FILL);b.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?b.enable(b.SCISSOR_TEST):b.disable(b.SCISSOR_TEST);b.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);b.stencilOpSeparate(this._stencilOperation.face,
this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?b.enable(b.STENCIL_TEST):b.disable(b.STENCIL_TEST);b.stencilMask(this._stencilWriteMask);for(c=0;c<this.parameters.maxTextureImageUnits;c++)b.activeTexture(a.BASE_TEXTURE_UNIT+c),b.bindTexture(3553,null),(d=this._textureUnitMap[c])&&b.bindTexture(d.descriptor.target,d.glName);b.activeTexture(a.BASE_TEXTURE_UNIT+this._activeTextureUnit);b.viewport(this._viewport.x,this._viewport.y,this._viewport.width,
this._viewport.height)};b._bindBuffer=function(a,b,c,d){if(!b)return a.bindBuffer(c,null),null;if(d===b)return d;a.bindBuffer(c,b.glName);return b};b._MAX_TEXTURE_IMAGE_UNITS=-1;return b}()})},"esri/layers/vectorTiles/views/webgl/enums":function(){define(["require","exports"],function(b,d){Object.defineProperty(d,"__esModule",{value:!0});d.BASE_TEXTURE_UNIT=33984})},"esri/layers/vectorTiles/views/webgl/capabilities/isWebGL2Context":function(){define(["require","exports"],function(b,d){Object.defineProperty(d,
"__esModule",{value:!0});d.default=function(a){return window.WebGL2RenderingContext&&a instanceof WebGL2RenderingContext}})},"esri/layers/vectorTiles/views/webgl/capabilities/load":function(){define("require exports ./DisjointTimerQuery ./Instancing ./isWebGL2Context ./VertexArrayObjects".split(" "),function(b,d,a,c,e,g){function h(a,b,c,d,h){if(d&&e.default(a))return!0;if(b[c])return!1;for(b=0;b<h.length;b++)if(a.getExtension(h[b]))return!0;return!1}Object.defineProperty(d,"__esModule",{value:!0});
d.loadCapabilities=function(b,d){var f=d&&d.disabledExtensions||{},l=c.load(b,f),t=g.load(b,f),q;q=f.compressedTextureS3TC?null:(q=b.getExtension("WEBGL_compressed_texture_s3tc"))?{COMPRESSED_RGB_S3TC_DXT1:q.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:q.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:q.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:q.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null;var r;r=f.textureFilterAnisotropic?null:(r=b.getExtension("EXT_texture_filter_anisotropic")||
b.getExtension("MOZ_EXT_texture_filter_anisotropic")||b.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))?{MAX_TEXTURE_MAX_ANISOTROPY:r.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:r.TEXTURE_MAX_ANISOTROPY_EXT}:null;var w=a.load(b,f),v;if(e.default(b))v=f.colorBufferFloat||!b.getExtension("EXT_color_buffer_float")?null:{R16F:b.R16F,RG16F:b.RG16F,RGBA16F:b.RGBA16F,R32F:b.R32F,RG32F:b.RG32F,RGBA32F:b.RGBA32F,R11F_G11F_B10F:b.R11F_G11F_B10F};else if(b instanceof WebGLRenderingContext){v=
!f.colorBufferFloat&&b.getExtension("EXT_color_buffer_half_float");var u=!f.colorBufferFloat&&b.getExtension("WEBGL_color_buffer_float");v=v||u?{RGBA16F:v?v.RGBA16F_EXT:void 0,RGBA32F:u?u.RGBA32F_EXT:void 0}:null}else v=void 0;u=e.default(b)?{MIN:b.MIN,MAX:b.MAX}:f.blendMinMax?null:(u=b.getExtension("EXT_blend_minmax"))?{MIN:u.MIN_EXT,MAX:u.MAX_EXT}:null;return{instancing:l,vao:t,compressedTextureS3TC:q,textureFilterAnisotropic:r,disjointTimerQuery:w,colorBufferFloat:v,blendMinMax:u,depthTexture:h(b,
f,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),standardDerivatives:h(b,f,"standardDerivatives",!0,["OES_standard_derivatives"]),shaderTextureLOD:h(b,f,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]),textureFloatLinear:h(b,f,"textureFloatLinear",!1,["OES_texture_float_linear"]),fragDepth:h(b,f,"fragDepth",!0,["EXT_frag_depth"])}}})},"esri/layers/vectorTiles/views/webgl/capabilities/DisjointTimerQuery":function(){define(["require","exports","./isWebGL2Context"],
function(b,d,a){Object.defineProperty(d,"__esModule",{value:!0});d.load=function(b,d){if(d.disjointTimerQuery)return null;var c=b.getExtension("EXT_disjoint_timer_query")||b.getExtension("EXT_disjoint_timer_query_webgl2");return c?a.default(b)?{createQuery:function(){return b.createQuery()},resultAvailable:function(a){return b.getQueryParameter(a,b.QUERY_RESULT_AVAILABLE)},getResult:function(a){return b.getQueryParameter(a,b.QUERY_RESULT)},disjoint:function(){return b.getParameter(c.GPU_DISJOINT_EXT)},
beginTimeElapsed:function(a){return b.beginQuery(c.TIME_ELAPSED_EXT,a)},endTimeElapsed:function(){return b.endQuery(c.TIME_ELAPSED_EXT)},createTimestamp:function(a){return c.queryCounterEXT(a,c.TIMESTAMP_EXT)},timestampBits:function(){return b.getQuery(c.TIMESTAMP_EXT,c.QUERY_COUNTER_BITS_EXT)}}:{createQuery:function(){return c.createQueryEXT()},resultAvailable:function(a){return c.getQueryObjectEXT(a,c.QUERY_RESULT_AVAILABLE_EXT)},getResult:function(a){return c.getQueryObjectEXT(a,c.QUERY_RESULT_EXT)},
disjoint:function(){return b.getParameter(c.GPU_DISJOINT_EXT)},beginTimeElapsed:function(a){return c.beginQueryEXT(c.TIME_ELAPSED_EXT,a)},endTimeElapsed:function(){return c.endQueryEXT(c.TIME_ELAPSED_EXT)},createTimestamp:function(a){return c.queryCounterEXT(a,c.TIMESTAMP_EXT)},timestampBits:function(){return c.getQueryEXT(c.TIMESTAMP_EXT,c.QUERY_COUNTER_BITS_EXT)}}:null}})},"esri/layers/vectorTiles/views/webgl/capabilities/Instancing":function(){define(["require","exports","./isWebGL2Context"],function(b,
d,a){Object.defineProperty(d,"__esModule",{value:!0});d.load=function(b,d){if(a.default(b))return{drawArraysInstanced:b.drawArraysInstanced.bind(b),drawElementsInstanced:b.drawElementsInstanced.bind(b),vertexAttribDivisor:b.vertexAttribDivisor.bind(b)};if(d.angleInstancedArrays)return null;var c=b.getExtension("ANGLE_instanced_arrays");return c?{drawArraysInstanced:c.drawArraysInstancedANGLE.bind(c),drawElementsInstanced:c.drawElementsInstancedANGLE.bind(c),vertexAttribDivisor:c.vertexAttribDivisorANGLE.bind(c)}:
null}})},"esri/layers/vectorTiles/views/webgl/capabilities/VertexArrayObjects":function(){define(["require","exports","./isWebGL2Context"],function(b,d,a){Object.defineProperty(d,"__esModule",{value:!0});d.load=function(b,d){if(a.default(b))return{createVertexArray:b.createVertexArray.bind(b),deleteVertexArray:b.deleteVertexArray.bind(b),bindVertexArray:b.bindVertexArray.bind(b)};if(d.vao)return null;var c=b.getExtension("OES_vertex_array_object")||b.getExtension("MOZ_OES_vertex_array_object")||b.getExtension("WEBKIT_OES_vertex_array_object");
return c?{createVertexArray:c.createVertexArrayOES.bind(c),deleteVertexArray:c.deleteVertexArrayOES.bind(c),bindVertexArray:c.bindVertexArrayOES.bind(c)}:null}})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLFeatureView":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/promiseUtils ../../../../core/promiseUtils ../../../../core/libs/gl-matrix/mat4 ../../../../core/libs/gl-matrix/vec3 ../../../../geometry/Point ../../../../renderers/support/diffUtils ../Container ../StageGL ../../engine/webgl/TileData ./enums ./GeometryUtils ./rendererInfoUtils ./rendererInfoUtils ./TextureManager ./Utils ./visualVariablesUtils ./WGLPainter ./WGLRendererInfo ./WGLTile ./passes/WGLPaintPassHeatmap".split(" "),
function(b,d,a,c,e,g,h,f,l,k,m,t,q,r,w,v,u,x,y,n,p,z,A,B){function D(a){for(var b in a.diff){var c=a.diff[b];if("collection"===c.type){if(0!==c.changed.length||0!==c.added.length||0!==c.removed.length)return!0}else if("visualVariables"!==b&&"authoringInfo"!==b)return!0}return!1}return function(b){function d(a){var c=b.call(this)||this;c._container=new t;c._displayWidth=0;c._displayHeight=0;c._pointToCallbacks=new Map;c._highlightIDs=new Set;c._highlightOptionsUpToDate=!1;c.textureManager=new x;c._domContainer=
null;c._parentLayerView=a;c._tileCoordinateScale=f.create();c._orientationVec=f.create();c._displayScale=f.create();c._orientationVec.set([0,0,1]);c._defaultTransform=h.create();c._tileInfoView=a.tileInfoView;c.wglRendererInfo=new z(c);c.highlightOptions=a.view.highlightOptions;c._container.useContextVersion(a.view?a.view.renderContext:null);return c}c(d,b);Object.defineProperty(d.prototype,"highlightOptions",{get:function(){return this._highlightOptions},set:function(a){this._highlightOptions=a;
this._highlightOptionsUpToDate=!1},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"displayWidth",{get:function(){return this._displayWidth},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"displayHeight",{get:function(){return this._displayHeight},enumerable:!0,configurable:!0});d.prototype.initialize=function(a){this._tileInfoView=a;this.wglRendererInfo=new z(this);a=new p.WGLPainterOptions;this.wglRendererInfo.heatmapParameters&&a.registerPass(B.default,p.default.allGeometryPhases());
this._painterOptions=a};d.prototype.updateHeatmapParameters=function(a){this.wglRendererInfo.updateHeatmapParameters(a);this.requestRender()};d.prototype.hitTest=function(a,b){var c=this,d=[a,b];return e.create(function(a,b){c._pointToCallbacks.set(d,{resolve:a,reject:b});c.requestRender()},function(){c._pointToCallbacks.has(d)&&c._pointToCallbacks.delete(d)})};d.prototype.setHighlight=function(a){this._highlightIDs.clear();this.addHighlight(a)};d.prototype.setVisibility=function(a){for(var b=0,c=
this.children;b<c.length;b++)c[b].setVisibility(a)};d.prototype.addHighlight=function(a){for(var b=0;b<a.length;b++)this._highlightIDs.add(a[b]);this._buildHLList()};d.prototype.removeHighlight=function(a){for(var b=0;b<a.length;b++)this._highlightIDs.delete(a[b]);this._buildHLList()};d.prototype.addChild=function(a){a=b.prototype.addChild.call(this,a);this._buildHLList();return a};d.prototype.removeChild=function(a){a=b.prototype.removeChild.call(this,a);this._buildHLList();return a};d.prototype.prepareChildrenRenderParameters=
function(b){this.wglRendererInfo.updateVisualVariables(this._visualVariablesInfo.vvRanges,b.state);var c=this._tileInfoView.getClosestInfoForScale(b.state.scale).level;return a({},b,{rendererInfo:this.wglRendererInfo,requiredLevel:c,drawPhase:r.WGLDrawPhase.NONE})};d.prototype.renderChildren=function(a){var b=this,c=a.painter;c.bindTextureManager(this.textureManager);this.wglRendererInfo.updateVisualVariables(this._visualVariablesInfo.vvRanges,a.state);this.sortChildren(function(a,b){return a.key.level-
b.key.level});c.draw(a,this.children,p.default.allGeometryPhases(),this._painterOptions);0<this._highlightIDs.size&&c.highlight(a,this.children);0!==this._pointToCallbacks.size&&(this._pointToCallbacks.forEach(function(c,d){c.resolve(b._hitTest(a,d[0],d[1]))}),this._pointToCallbacks.clear())};d.prototype.attachChild=function(a,b){return a.attach(b)};d.prototype.detachChild=function(a,b){a.detach(b)};d.prototype.renderChild=function(a,b){a.doRender(b)};d.prototype.beforeRenderChildren=function(a,b){this._updateTilesTransform(a.state,
this._tileInfoView.getClosestInfoForScale(a.state.scale).level);this._updateHighlightOptions();this._container.opacity=this._domContainer.opacity};d.prototype._hitTest=function(a,b,c){var d=a.painter,e=this._tileInfoView.getClosestInfoForScale(a.state.scale).level,f=[0,0];a.state.toMap(f,[b,c]);b=a.state.clone();c=b.viewpoint.clone();c.targetGeometry=new l(f[0],f[1],a.state.spatialReference);b.viewpoint=c;b.size=[y.C_HITTEST_SEARCH_SIZE,y.C_HITTEST_SEARCH_SIZE];this._updateTilesTransform(b,e);d.update(b,
a.pixelRatio);return d.hitTest({context:a.context,painter:d,drawPhase:r.WGLDrawPhase.HITTEST,state:b,pixelRatio:a.pixelRatio,stationary:a.stationary,rendererInfo:this.wglRendererInfo,requiredLevel:e},this.children)};d.prototype._updateTilesTransform=function(a,b){var c=1/a.width,d=1/a.height,e=[0,0];this._calculateRelativeViewProjMat(this._tileInfoView.tileInfo.lods[b].resolution,a.resolution,a.rotation,this._tileInfoView.tileInfo.size[0],a.width,a.height,this._defaultTransform);for(var f=0,n=this.children;f<
n.length;f++){var p=n[f];a.toScreen(e,p.coords);e[1]=a.height-e[1];p.tileTransform.displayCoord[0]=2*e[0]*c-1;p.tileTransform.displayCoord[1]=2*e[1]*d-1;p.key.level===b?p.tileTransform.transform.set(this._defaultTransform):this._calculateRelativeViewProjMat(this._tileInfoView.tileInfo.lods[p.key.level].resolution,a.resolution,a.rotation,this._tileInfoView.tileInfo.size[0],a.width,a.height,p.tileTransform.transform)}};d.prototype._calculateRelativeViewProjMat=function(a,b,c,d,e,f,p){a/=b;this._tileCoordinateScale.set([a,
a,1]);if(e!==this._displayWidth||f!==this._displayHeight)this._displayScale.set([2/e,-2/f,1]),this._displayWidth=e,this._displayHeight=f;h.identity(p);h.scale(p,p,this._tileCoordinateScale);h.rotate(p,p,-c*w.C_DEG_TO_RAD,this._orientationVec);h.scale(p,p,this._displayScale);h.transpose(p,p)};d.prototype._updateHighlightOptions=function(){!this._highlightOptionsUpToDate&&this._setHighlightOptions(this._highlightOptions)&&(this._highlightOptionsUpToDate=!0)};d.prototype._setHighlightOptions=function(a){if(!this.parent)return!1;
var b=this.parent.glPainter;if(!b)return!1;var c=a.color.toRgba();c[0]/=255;c[1]/=255;c[2]/=255;var d=c.slice();c[3]*=a.fillOpacity;d[3]*=a.haloOpacity;b.setHighlightOptions({fillColor:c,outlineColor:d,outlineWidth:2,outerHaloWidth:.3,innerHaloWidth:.3,outlinePosition:0});return!0};d.prototype._buildHLList=function(){for(var a=0,b=this.children;a<b.length;a++)b[a].buildHLList(this._highlightIDs);this.requestRender()};d.prototype.highlight=function(a){var b=this;b.addHighlight(a);return{remove:function(){b.removeHighlight(a)}}};
d.prototype.install=function(a){a.addChild(this._container);this._container.addChild(this);this._domContainer=a};d.prototype.uninstall=function(a){a.removeChild(this._container);this._container.removeChild(this);this._domContainer=null};d.prototype.getMaterialItems=function(a){if(a&&0!==a.length){for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push(this.textureManager.rasterizeItem(d.symbol,d.glyphIds))}return g.all(b).then(function(a){return a.map(function(a,b){return{id:b,mosaicItem:a}})})}};d.prototype.getProcessorConfiguration=
function(){return{type:"symbol",renderer:this._parentLayerView.layer.renderer.toJSON(),devicePixelRatio:window.devicePixelRatio||1,definitionExpression:this._parentLayerView.layer.definitionExpression,outFields:this._parentLayerView.layer.outFields,gdbVersion:this._parentLayerView.layer.gdbVersion,historicMoment:this._parentLayerView.layer.historicMoment&&this._parentLayerView.layer.historicMoment.getTime()}};d.prototype.acquireTile=function(a){var b=this,c=[0,0,0,0];this._tileInfoView.getTileBounds(c,
a);a=new A(a,c);a.once("attach",function(){b._parentLayerView.requestUpdate()});return a};d.prototype.releaseTile=function(a){this.removeChild(a);a.once("detach",function(){a.dispose()})};d.prototype.setTileVisuals=function(a,b,c){var d=null;b&&!c&&(d=q.deserialize(b));a.setData(d,null!=this._parentLayerView.layer.renderer.visualVariables,c);a.buildHLList(this._highlightIDs);this.addChild(a);this.requestRender()};d.prototype.patchTileVisuals=function(a,b){var c=b.addOrUpdate?q.deserialize(b.addOrUpdate):
null;a.patchData({remove:b.remove||[],addOrUpdate:c});a.buildHLList(this._highlightIDs);this.requestRender()};d.prototype.renderInit=function(){this._renderer=this._parentLayerView.layer.renderer;var a=this._parentLayerView.layer,a=v.getNormalizedRenderer(a.renderer,a.spatialReference,{fields:a.fields.map(function(a){return a.toJSON()})});this._visualVariablesInfo=n.convertVisualVariables(a.visualVariables);this.requestRender()};d.prototype.renderSwitchFrom=function(a){a=this._parentLayerView.layer.renderer;
var b=k.diff(this._renderer,a);if(b){if("complete"===b.type)return this.renderInit(),!0;if("partial"===b.type){if(D(b))return this.renderInit(),!0;if(b.diff.visualVariables){var b=this._parentLayerView.layer,b=v.getNormalizedRenderer(a,b.spatialReference,{fields:b.fields.map(function(a){return a.toJSON()})}),b=n.convertVisualVariables(b.visualVariables),c=b.vvRanges;if(k.diff(this._visualVariablesInfo.vvFields,b.vvFields))return this.renderInit(),!0;this._visualVariablesInfo.vvRanges=c;this._renderer=
a;this.requestRender();return!1}}}else return!1};d.prototype.supports=function(a){return u.isRendererWebGLCompatible(a)};return d}(m)})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec3":function(){define(["./common"],function(b){var d={create:function(){var a=new b.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var c=new b.ARRAY_TYPE(3);c[0]=a[0];c[1]=a[1];c[2]=a[2];return c},fromValues:function(a,c,d){var e=new b.ARRAY_TYPE(3);e[0]=a;e[1]=c;e[2]=d;return e},copy:function(a,b){a[0]=
b[0];a[1]=b[1];a[2]=b[2];return a},set:function(a,b,d,g){a[0]=b;a[1]=d;a[2]=g;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];return a},subtract:function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];return a}};d.sub=d.subtract;d.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];a[2]=b[2]*d[2];return a};d.mul=d.multiply;d.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];a[2]=b[2]/d[2];return a};d.div=d.divide;d.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=
Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};d.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};d.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=Math.min(b[2],d[2]);return a};d.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);return a};d.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};d.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*
d;a[2]=b[2]*d;return a};d.scaleAndAdd=function(a,b,d,g){a[0]=b[0]+d[0]*g;a[1]=b[1]+d[1]*g;a[2]=b[2]+d[2]*g;return a};d.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],h=b[2]-a[2];return Math.sqrt(c*c+d*d+h*h)};d.dist=d.distance;d.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],h=b[2]-a[2];return c*c+d*d+h*h};d.sqrDist=d.squaredDistance;d.length=function(a){var b=a[0],d=a[1];a=a[2];return Math.sqrt(b*b+d*d+a*a)};d.len=d.length;d.squaredLength=function(a){var b=a[0],d=a[1];a=a[2];return b*
b+d*d+a*a};d.sqrLen=d.squaredLength;d.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};d.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};d.normalize=function(a,b){var c=b[0],d=b[1],h=b[2],c=c*c+d*d+h*h;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c);return a};d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};d.cross=function(a,b,d){var c=b[0],e=b[1];b=b[2];var f=d[0],l=d[1];d=d[2];a[0]=e*d-b*l;a[1]=b*f-c*d;a[2]=c*l-e*f;return a};d.lerp=function(a,
b,d,g){var c=b[0],e=b[1];b=b[2];a[0]=c+g*(d[0]-c);a[1]=e+g*(d[1]-e);a[2]=b+g*(d[2]-b);return a};d.hermite=function(a,b,d,g,h,f){var c=f*f,e=c*(2*f-3)+1,m=c*(f-2)+f,t=c*(f-1);f=c*(3-2*f);a[0]=b[0]*e+d[0]*m+g[0]*t+h[0]*f;a[1]=b[1]*e+d[1]*m+g[1]*t+h[1]*f;a[2]=b[2]*e+d[2]*m+g[2]*t+h[2]*f;return a};d.bezier=function(a,b,d,g,h,f){var c=1-f,e=c*c,m=f*f,t=e*c,e=3*f*e,c=3*m*c;f*=m;a[0]=b[0]*t+d[0]*e+g[0]*c+h[0]*f;a[1]=b[1]*t+d[1]*e+g[1]*c+h[1]*f;a[2]=b[2]*t+d[2]*e+g[2]*c+h[2]*f;return a};d.random=function(a,
c){c=c||1;var d=2*b.RANDOM()*Math.PI,g=2*b.RANDOM()-1,h=Math.sqrt(1-g*g)*c;a[0]=Math.cos(d)*h;a[1]=Math.sin(d)*h;a[2]=g*c;return a};d.transformMat4=function(a,b,d){var c=b[0],e=b[1];b=b[2];var f=d[3]*c+d[7]*e+d[11]*b+d[15],f=f||1;a[0]=(d[0]*c+d[4]*e+d[8]*b+d[12])/f;a[1]=(d[1]*c+d[5]*e+d[9]*b+d[13])/f;a[2]=(d[2]*c+d[6]*e+d[10]*b+d[14])/f;return a};d.transformMat3=function(a,b,d){var c=b[0],e=b[1];b=b[2];a[0]=c*d[0]+e*d[3]+b*d[6];a[1]=c*d[1]+e*d[4]+b*d[7];a[2]=c*d[2]+e*d[5]+b*d[8];return a};d.transformQuat=
function(a,b,d){var c=b[0],e=b[1],f=b[2];b=d[0];var l=d[1],k=d[2];d=d[3];var m=d*c+l*f-k*e,t=d*e+k*c-b*f,q=d*f+b*e-l*c,c=-b*c-l*e-k*f;a[0]=m*d+c*-b+t*-k-q*-l;a[1]=t*d+c*-l+q*-b-m*-k;a[2]=q*d+c*-k+m*-l-t*-b;return a};d.rotateX=function(a,b,d,g){var c=[],e=[];c[0]=b[0]-d[0];c[1]=b[1]-d[1];c[2]=b[2]-d[2];e[0]=c[0];e[1]=c[1]*Math.cos(g)-c[2]*Math.sin(g);e[2]=c[1]*Math.sin(g)+c[2]*Math.cos(g);a[0]=e[0]+d[0];a[1]=e[1]+d[1];a[2]=e[2]+d[2];return a};d.rotateY=function(a,b,d,g){var c=[],e=[];c[0]=b[0]-d[0];
c[1]=b[1]-d[1];c[2]=b[2]-d[2];e[0]=c[2]*Math.sin(g)+c[0]*Math.cos(g);e[1]=c[1];e[2]=c[2]*Math.cos(g)-c[0]*Math.sin(g);a[0]=e[0]+d[0];a[1]=e[1]+d[1];a[2]=e[2]+d[2];return a};d.rotateZ=function(a,b,d,g){var c=[],e=[];c[0]=b[0]-d[0];c[1]=b[1]-d[1];c[2]=b[2]-d[2];e[0]=c[0]*Math.cos(g)-c[1]*Math.sin(g);e[1]=c[0]*Math.sin(g)+c[1]*Math.cos(g);e[2]=c[2];a[0]=e[0]+d[0];a[1]=e[1]+d[1];a[2]=e[2]+d[2];return a};d.forEach=function(){var a=d.create();return function(b,d,g,h,f,l){d||(d=3);g||(g=0);for(h=h?Math.min(h*
d+g,b.length):b.length;g<h;g+=d)a[0]=b[g],a[1]=b[g+1],a[2]=b[g+2],f(a,a,l),b[g]=a[0],b[g+1]=a[1],b[g+2]=a[2];return b}}();d.angle=function(a,b){var c=d.fromValues(a[0],a[1],a[2]),g=d.fromValues(b[0],b[1],b[2]);d.normalize(c,c);d.normalize(g,g);c=d.dot(c,g);return 1<c?0:Math.acos(c)};d.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};d.equals=function(a,c){var d=a[0],g=a[1],h=a[2],f=c[0],l=c[1],k=c[2];return Math.abs(d-
f)<=b.EPSILON*Math.max(1,Math.abs(d),Math.abs(f))&&Math.abs(g-l)<=b.EPSILON*Math.max(1,Math.abs(g),Math.abs(l))&&Math.abs(h-k)<=b.EPSILON*Math.max(1,Math.abs(h),Math.abs(k))};return d})},"esri/layers/vectorTiles/geometry/Point":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/accessorSupport/decorators ./Geometry ./SpatialReference ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),function(b,d,a,
c,e,g,h,f,l,k){function m(a){return a&&("esri.geometry.SpatialReference"===a.declaredClass||null!=a.wkid)}var t=[0,0],q=e.getLogger("esri.geometry.Point");b=function(b){function d(a,c,d,e,f){a=b.call(this)||this;a.x=0;a.y=0;a.z=void 0;a.m=void 0;a.type="point";return a}a(d,b);e=d;d.copy=function(a,b){b.x=a.x;b.y=a.y;b.z=a.z;b.m=a.m;b.spatialReference=Object.isFrozen(a.spatialReference)?a.spatialReference:a.spatialReference.clone()};d.distance=function(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.hasZ&&b.hasZ?
a.z-b.z:0;return Math.sqrt(c*c+d*d+e*e)};d.prototype.normalizeCtorArgs=function(a,b,c,d,e){var p;if(Array.isArray(a))p=a,e=b,a=p[0],b=p[1],c=p[2],d=p[3];else if(a&&"object"===typeof a){if(p=a,a=null!=p.x?p.x:p.longitude,b=null!=p.y?p.y:p.latitude,c=null!=p.z?p.z:p.altitude,d=p.m,(e=p.spatialReference)&&"esri.geometry.SpatialReference"!==e.declaredClass&&(e=new f(e)),null!=p.longitude||null!=p.latitude)null==p.longitude?q.warn(".longitude\x3d","Latitude was defined without longitude"):null==p.latitude?
q.warn(".latitude\x3d","Longitude was defined without latitude"):!p.declaredClass&&e&&e.isWebMercator&&(b=k.lngLatToXY(p.longitude,p.latitude,t),a=b[0],b=b[1])}else m(c)?(e=c,c=null):m(d)&&(e=d,d=null);a={x:a,y:b};null!=e&&(a.spatialReference=e);null!=c&&(a.z=c);null!=d&&(a.m=d);return a};Object.defineProperty(d.prototype,"hasM",{get:function(){return void 0!==this.m},set:function(a){var b=this._get("hasM");a!==b&&(this._set("m",a?0:void 0),this._set("hasM",a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"hasZ",{get:function(){return void 0!==this.z},set:function(a){var b=this._get("hasZ");a!==b&&(this._set("z",a?0:void 0),this._set("hasZ",a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"latitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return k.xyToLngLat(this.x,this.y,t)[1];if(a.isWGS84)return this._get("y")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("y",k.lngLatToXY(this.x,a,t)[1]):b.isWGS84&&
this._set("y",a),this._set("latitude",a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"longitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return k.xyToLngLat(this._get("x"),this._get("y"),t)[0];if(a.isWGS84)return this._get("x")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("x",k.lngLatToXY(a,this._get("y"),t)[0]):b.isWGS84&&this._set("x",a),this._set("longitude",a))},enumerable:!0,configurable:!0});
d.prototype.clone=function(){var a=new e;a.x=this.x;a.y=this.y;a.z=this.z;a.m=this.m;a.spatialReference=this.spatialReference;return a};d.prototype.copy=function(a){e.copy(a,this);return this};d.prototype.equals=function(a){if(!a)return!1;var b=this.x,c=this.y,d=this.z,e=this.m,f=this.spatialReference,l=a.z,h=a.m,m=a.x,g=a.y;a=a.spatialReference;if(!f.equals(a))if(f.isWebMercator&&a.isWGS84)g=k.lngLatToXY(m,g),m=g[0],g=g[1],a=f;else if(f.isWGS84&&a.isWebMercator)g=k.xyToLngLat(m,g),m=g[0],g=g[1],
a=f;else return!1;return b===m&&c===g&&d===l&&e===h&&f.wkid===a.wkid};d.prototype.offset=function(a,b,c){this.x+=a;this.y+=b;null!=c&&this.hasZ&&(this.z+=c);return this};d.prototype.normalize=function(){if(!this.spatialReference)return this;var a=l.getInfo(this.spatialReference);if(!a)return this;var b=this.x,c=a.valid,a=c[0],d=c[1],c=2*d;b>d?(a=Math.ceil(Math.abs(b-d)/c),b-=a*c):b<a&&(a=Math.ceil(Math.abs(b-a)/c),b+=a*c);this._set("x",b);return this};d.prototype.distance=function(a){return e.distance(this,
a)};d.prototype.toArray=function(){var a=this.hasZ,b=this.hasM;return a&&b?[this.x,this.y,this.z,this.m]:a?[this.x,this.y,this.z]:b?[this.x,this.y,this.m]:[this.x,this.y]};d.prototype.toJSON=function(a){return this.write(null,a)};c([g.property({dependsOn:["x","y","z","m","spatialReference"]})],d.prototype,"cache",void 0);c([g.property({type:Boolean,dependsOn:["m"],json:{write:{enabled:!1,overridePolicy:null}}})],d.prototype,"hasM",null);c([g.property({type:Boolean,dependsOn:["z"],json:{write:{enabled:!1,
overridePolicy:null}}})],d.prototype,"hasZ",null);c([g.property({type:Number,dependsOn:["y"]})],d.prototype,"latitude",null);c([g.property({type:Number,dependsOn:["x"]})],d.prototype,"longitude",null);c([g.property({type:Number,json:{write:{isRequired:!0}}})],d.prototype,"x",void 0);c([g.property({type:Number,json:{write:!0}})],d.prototype,"y",void 0);c([g.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],d.prototype,"z",void 0);c([g.property({type:Number,
json:{write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],d.prototype,"m",void 0);return d=e=c([g.subclass("esri.geometry.Point")],d);var e}(g.declared(h));b.prototype.toJSON.isDefaultToJSON=!0;return b})},"esri/layers/vectorTiles/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(b,d){return function(a,b){a.__bases__=b.__bases__}})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(b,d,a,c){var e=
arguments.length,g=3>e?d:null===c?c=Object.getOwnPropertyDescriptor(d,a):c,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(b,d,a,c);else for(var f=b.length-1;0<=f;f--)if(h=b[f])g=(3>e?h(g):3<e?h(d,a,g):h(d,a))||g;return 3<e&&g&&Object.defineProperty(d,a,g),g}})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports","dojo/has"],function(b,d,a){var c={info:0,warn:1,error:2};b=function(){function a(b){void 0===b&&(b={});this.module=b.module||
"";this.writer=b.writer||null;this.level=b.level||null;null!=b.enabled&&(this.enabled=!!b.enabled);a._loggers[this.module]=this;b=this.module.lastIndexOf(".");-1!==b&&(this.parent=a.getLogger(this.module.slice(0,b)))}a.prototype.log=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this._isEnabled()&&this._matchLevel(a)&&(c=this._inheritedWriter())&&c.apply(void 0,[a,this.module].concat(b))};a.prototype.error=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];
this.log.apply(this,["error"].concat(a))};a.prototype.warn=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.log.apply(this,["warn"].concat(a))};a.prototype.info=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.log.apply(this,["info"].concat(a))};a.prototype.getLogger=function(b){return a.getLogger(this.module+"."+b)};a.getLogger=function(b){var c=a._loggers[b];c||(c=new a({module:b}));return c};a.prototype._parentWithMember=function(a,b){for(var c=
this;c&&null==c[a];)c=c.parent;return c?c[a]:b};a.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};a.prototype._consoleWriter=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];console[a].apply(console,["["+b+"]"].concat(c))};a.prototype._matchLevel=function(a){return c[this._parentWithMember("level","error")]<=c[a]};a.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};a._loggers={};return a}();d=b.getLogger("esri");
a("dojo-debug-messages")?d.level="info":d.level="warn";return b})},"esri/layers/vectorTiles/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),function(b,d,a,c,e,g,h,f,l,k,m){function t(a){for(var b in a)d.hasOwnProperty(b)||(d[b]=a[b])}Object.defineProperty(d,"__esModule",{value:!0});
t(a);t(c);t(e);t(g);t(h);t(f);t(l);t(k);t(m)})},"esri/layers/vectorTiles/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(b,d,a){Object.defineProperty(d,"__esModule",{value:!0});d.aliasOf=function(b){return function(c,d){a.getPropertyMetadata(c,d).aliasOf=b}}})},"esri/layers/vectorTiles/core/accessorSupport/metadata":function(){define(["require","exports"],function(b,d){function a(a){return null!=a.__accessorMetadata__}function c(b){return a(b)&&
null!=e(b).properties}function e(a){a.__accessorMetadata__||Object.defineProperty(a,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return a.__accessorMetadata__}function g(a){a=e(a);var b=a.properties;b||(b=a.properties={});return b}function h(a,b){var c=e(a),d=c.parameters;d||(d=c.parameters={});c=d[b];c||(c=[],d[b]=c);return c}Object.defineProperty(d,"__esModule",{value:!0});d.hasMetadata=a;d.hasPropertiesMetadata=c;d.hasPropertyMetadata=function(a,b){return c(a)&&
null!=g(a)[b]};d.hasParametersMetadata=function(b,c){return a(b)&&null!=e(b).parameters&&null!=e(b).parameters[c]};d.getMetadata=e;d.getPropertiesMetadata=g;d.getPropertyMetadata=function(a,b){var c=g(a),d=c[b];d||(d=c[b]={});return d};d.setPropertyMetadata=function(a,b,c){g(a)[b]=c};d.getParametersMetadata=h;d.getParameterMetadata=function(a,b,c){var d=h(a,b)[c];d||(h(a,b)[c]=d={index:c});return d}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/autoDestroy":function(){define(["require",
"exports","../metadata"],function(b,d,a){Object.defineProperty(d,"__esModule",{value:!0});d.autoDestroy=function(){return function(b,d,g){a.getMetadata(b).autoDestroy=!0;return b[d]}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/cast":function(){define(["require","exports","../ensureType","../metadata"],function(b,d,a,c){function e(b){var c="_meta"in b?a.ensureType(b):b;return function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a.push(c);return"number"===typeof a[2]?
h.apply(this,a):g.apply(this,a)}}function g(a,b,d,e){c.getPropertyMetadata(a,b).cast=e}function h(a,b,d,e){c.getParameterMetadata(a,b,d).cast=e}function f(a){return function(b,d,e){c.getPropertyMetadata(b,a).cast=b[d]}}Object.defineProperty(d,"__esModule",{value:!0});var l=Object.prototype.toString;d.autocastMethod=function(a,b,d){if(c.hasParametersMetadata(a,b)){var e=c.getParametersMetadata(a,b).filter(function(a){return null!=a.cast});if(e.length){var f=d.value;d.value=function(){for(var a=[],
b=0;b<arguments.length;b++)a[b]=arguments[b];for(b=0;b<e.length;b++){var c=e[b];a[c.index]=c.cast(a[c.index])}return f.apply(this,a)};return d}console.warn("Method "+a.declaredClass+"::"+b+" is decorated with @cast but no parameters are decorated")}};d.cast=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(3!==a.length||"string"!==typeof a[1]){if(1===a.length&&"[object Function]"===l.call(a[0]))return e(a[0]);if(1===a.length&&"string"===typeof a[0])return f(a[0])}}})},"esri/layers/vectorTiles/core/accessorSupport/ensureType":function(){define(["require",
"exports","../Logger"],function(b,d,a){function c(a,b){return b.isInstanceOf?b.isInstanceOf(a):b instanceof a}function e(a){return null==a?a:new Date(a)}function g(a){return null==a?a:!!a}function h(a){return null==a?a:a.toString()}function f(a){return null==a?a:parseFloat(a)}function l(a){return null==a?a:Math.round(parseFloat(a))}function k(a){return a&&a.constructor&&void 0!==a.constructor._meta}function m(a,b){return null!=b&&a&&!c(a,b)}function t(a,b){m(a,b)&&(k(b)?y.error("Accessor#set","Assigning an instance of '"+
(b.declaredClass||"unknown")+"' which is not a subclass of '"+(a&&a.prototype&&a.prototype.declaredClass||"unknown")+"'"):b=new a(b));return b}function q(a){switch(a){case Number:return f;case n:return l;case Boolean:return g;case String:return h;case Date:return e;default:return t.bind(null,a)}}function r(a,b){var c=q(a);return 1===arguments.length?c:c(b)}function w(a,b){return 1===arguments.length?w.bind(null,a):b?Array.isArray(b)?b.map(a):[a(b)]:b}function v(a,b,c){return 0!==b&&Array.isArray(c)?
c.map(function(c){return v(a,b-1,c)}):a(c)}function u(a,b,c){if(2===arguments.length)return u.bind(null,a,b);if(!c)return c;c=v(a,b,c);for(var d=b,e=c;0<d&&Array.isArray(e);)d--,e=e[0];if(void 0!==e)for(e=0;e<d;e++)c=[c];return c}function x(a,b){if(2===arguments.length)return x(a).call(null,b);var c={},d=[],e=[],f;for(f in a.typeMap){var n=a.typeMap[f];c[f]=r(n);d.push(n&&n.prototype&&n.prototype.declaredClass||"unknown");e.push(f)}var p="string"===typeof a.key?function(b){return b[a.key]}:a.key;
return function(b){if(a.base&&!m(a.base,b))return b;var f=p(b)||a.defaultKeyValue,n=c[f];if(!n)return y.error("Accessor#set","Invalid property value, value needs to be one of "+("'"+d.join("', '")+"'")+", or a plain object that can auto-cast (having .type \x3d "+("'"+e.join("', '")+"'")+")"),null;if(!m(a.typeMap[f],b))return b;if("string"!==typeof a.key||k(b))return n(b);var f={},z;for(z in b)z!==a.key&&(f[z]=b[z]);return n(f)}}Object.defineProperty(d,"__esModule",{value:!0});var y=a.getLogger("esri.core.Accessor");
d.isInstanceOf=c;d.ensureDate=e;d.ensureBoolean=g;d.ensureString=h;d.ensureNumber=f;d.ensureInteger=l;d.isClassedType=k;d.requiresType=m;d.ensureClass=t;d.ensureType=r;d.ensureArrayTyped=w;d.ensureArray=function(a,b){return 1===arguments.length?w(r.bind(null,a)):w(r.bind(null,a),b)};d.ensureNArrayTyped=u;d.ensureNArray=function(a,b,c){return 2===arguments.length?u(r.bind(null,a),b):u(r.bind(null,a),b,c)};d.ensureOneOfType=x;var n=function(){return function(){}}();d.Integer=n;d.default=r})},"esri/layers/vectorTiles/core/accessorSupport/decorators/declared":function(){define(["require",
"exports"],function(b,d){Object.defineProperty(d,"__esModule",{value:!0});d.declared=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];d=function(){return this||{}};d.__bases__=[a].concat(b);return d}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/property":function(){define("require exports dojo/has ../../lang ../../Logger ../metadata".split(" "),function(b,d,a,c,e,g){Object.defineProperty(d,"__esModule",{value:!0});var h=e.getLogger("esri.core.accessorSupport.decorators.property");
d.property=function(b){void 0===b&&(b={});return function(d,e){var f=d.constructor.prototype;if(f===Function.prototype)a("dojo-debug-messages")&&h.error("Inappropriate use of @property() on a static field: "+d.name+"."+e+". Accessor does not support static properties.");else{var k=Object.getOwnPropertyDescriptor(d,e);k&&(k.get||k.set)?(b=c.clone(b),k.set&&(b.set=k.set),k.get&&(b.get=k.get)):k&&k.hasOwnProperty("value")&&(b=c.clone(b),a("dojo-debug-messages")&&b.hasOwnProperty("value")&&h.warn('@property() will redefine the value of "'+
e+'" on "'+d.constructor.name+'" already defined in the metadata',b),b.value=k.value);var f=g.getPropertyMetadata(f,e),l;for(l in b)k=b[l],Array.isArray(k)?f[l]=(f[l]||[]).concat(k):f[l]=k}}};d.propertyJSONMeta=function(a,b,c){a=g.getPropertyMetadata(a.constructor.prototype,c);a.json||(a.json={});a=a.json;void 0!==b&&(a.origins||(a.origins={}),a.origins[b]||(a.origins[b]={}),a=a.origins[b]);return a}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/reader":function(){define(["require",
"exports","dojo/_base/lang","./property"],function(b,d,a,c){Object.defineProperty(d,"__esModule",{value:!0});d.reader=function(b,d,h){var e,l;void 0===d||Array.isArray(d)?(l=b,h=d,e=[void 0]):(l=d,e=Array.isArray(b)?b:[b]);return function(b,d,f){var k=b.constructor.prototype;e.forEach(function(e){e=c.propertyJSONMeta(b,e,l);e.read&&"object"!==typeof e.read&&(e.read={});a.setObject("read.reader",k[d],e);h&&(e.read.source=(e.read.source||[]).concat(h))})}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/shared":function(){define(["require",
"exports"],function(b,d){Object.defineProperty(d,"__esModule",{value:!0});d.shared=function(a){return function(b,d){b[d]=a}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(b,d,a,c){function e(a,b){a.read&&("function"===typeof a.read?b.push(a.read):"object"===typeof a.read&&a.read.reader&&b.push(a.read.reader))}function g(a,b){a.write&&("function"===typeof a.write?b.push(a.write):"object"===typeof a.write&&
a.write.writer&&b.push(a.write.writer))}function h(a){var b=[];a=c.getPropertiesMetadata(a.prototype);if(!a)return b;for(var d in a){var f=a[d];f.cast&&b.push(f.cast);f.copy&&b.push(f.copy);if(f=f.json)if(e(f,b),g(f,b),f=f.origins)for(var k in f){var l=f[k];e(l,b);g(l,b)}}return b}function f(a){var b={values:{},descriptors:{}},d=["__bases__"],e=c.getPropertiesMetadata(a.prototype),f=h(a);Object.getOwnPropertyNames(a.prototype).filter(function(b){return-1!==d.indexOf(b)||e&&e.hasOwnProperty(b)||!k(Object.getOwnPropertyDescriptor(a.prototype,
b))&&-1!==f.indexOf(a.prototype[b])?!1:!0}).forEach(function(c){var d=Object.getOwnPropertyDescriptor(a.prototype,c);k(d)?b.descriptors[c]=d:b.values[c]=a.prototype[c]});return b}function l(a){var b=Object.getOwnPropertyNames(a),c=Object.getPrototypeOf(a.prototype).constructor,d=Object.getOwnPropertyNames(Function);d.push("__bases__");var e=Object.getOwnPropertyNames(c),f={values:{},descriptors:{}};b.filter(function(b){return-1!==d.indexOf(b)?!1:-1===e.indexOf(b)||c[b]!==a[b]?!0:!1}).forEach(function(b){var c=
Object.getOwnPropertyDescriptor(a,b);k(c)?f.descriptors[b]=c:f.values[b]=a[b]});return f}function k(a){return a&&!(!a.get&&!a.set)}Object.defineProperty(d,"__esModule",{value:!0});d.subclass=function(b){return function(c){var d=f(c),e=l(c);null!=b&&(d.values.declaredClass=b);c=a(c.__bases__,d.values);Object.defineProperties(c.prototype,d.descriptors);for(var k in e.values)c[k]=e.values[k];Object.defineProperties(c,e.descriptors);return c}}})},"esri/layers/vectorTiles/core/declare":function(){define(["require",
"exports","dojo/_base/declare"],function(b,d,a){function c(a,b){a&&!Array.isArray(a)&&"function"!==typeof a&&(b=a,a=null);a=a||[];b=b||{};return e([this].concat(a),b)}function e(b,d){b&&!Array.isArray(b)&&"function"!==typeof b&&(d=b,b=null);"function"===typeof b?b=[b]:b||(b=[]);d=d||{};var e,f;e=0;for(f=g.length;e<f;e++)g[e](b,d);var l=a(b,d);l.createSubclass=c;e=0;for(f=h.length;e<f;e++)h[e](l);return l}var g=[],h=[];(function(b){b.hasMixin=function(a,b){var c;c=Array.isArray(a)?a.reduce(function(a,
b){return b._meta?a.concat(b._meta.bases):a},[]):a._meta?a._meta.bases:a;if(!c)return!1;if("string"===typeof b)for(var d=c.length-1;0<=d;d--)if(c[d].prototype.declaredClass===b)return!0;return-1!==c.indexOf(b)};b.safeMixin=function(b,c){return a.safeMixin(b,c)};b.before=function(a){g.push(a)};b.after=function(a){h.push(a)}})(e||(e={}));return e})},"esri/layers/vectorTiles/core/accessorSupport/decorators/writer":function(){define(["require","exports","dojo/_base/lang","./property"],function(b,d,a,
c){Object.defineProperty(d,"__esModule",{value:!0});d.writer=function(b,d,h){var e,l;void 0===d?(l=b,e=[void 0]):"string"!==typeof d?(l=b,e=[void 0],h=d):(l=d,e=Array.isArray(b)?b:[b]);return function(b,d,f){var k=b.constructor.prototype;e.forEach(function(e){e=c.propertyJSONMeta(b,e,l);e.write&&"object"!==typeof e.write&&(e.write={});h&&a.setObject("write.target",h,e);a.setObject("write.writer",k[d],e)})}}})},"esri/layers/vectorTiles/geometry/Geometry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./SpatialReference".split(" "),
function(b,d,a,c,e,g,h){return function(b){function d(){var a=b.call(this)||this;a.type=null;a.extent=null;a.hasM=!1;a.hasZ=!1;a.spatialReference=h.WGS84;return a}a(d,b);Object.defineProperty(d.prototype,"cache",{get:function(){return{}},enumerable:!0,configurable:!0});d.prototype.clone=function(){console.warn(".clone() is not implemented for "+this.declaredClass);return null};d.prototype.clearCache=function(){this.notifyChange("cache")};d.prototype.getCacheValue=function(a){return this.cache[a]};
d.prototype.setCacheValue=function(a,b){this.cache[a]=b};c([g.property()],d.prototype,"type",void 0);c([g.property({readOnly:!0,dependsOn:["spatialReference"]})],d.prototype,"cache",null);c([g.property({readOnly:!0,dependsOn:["spatialReference"]})],d.prototype,"extent",void 0);c([g.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],d.prototype,"hasM",void 0);c([g.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],d.prototype,
"hasZ",void 0);c([g.property({type:h,json:{write:!0}})],d.prototype,"spatialReference",void 0);return d=c([g.subclass("esri.geometry.Geometry")],d)}(g.declared(e))})},"esri/layers/vectorTiles/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/decorators ./accessorSupport/read ./accessorSupport/write".split(" "),function(b,d,a,c,e,g,h,f,l){function k(a,b){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");
var c=new this;c.read(a,b);return c}var m=function(b){function d(){return null!==b&&b.apply(this,arguments)||this}a(d,b);d.prototype.read=function(a,b){f.default(this,a,b);return this};d.prototype.write=function(a,b){return l.default(this,a||{},b)};d.prototype.toJSON=function(a){return this.write(null,a)};d.fromJSON=function(a,b){return k.call(this,a,b)};return d=c([h.subclass("esri.core.JSONSupport")],d)}(h.declared(e));m.prototype.toJSON.isDefaultToJSON=!0;g.after(function(a){g.hasMixin(a,m)&&(a.fromJSON=
k.bind(a))});return m})},"esri/layers/vectorTiles/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(b,d,a,c,e,g){d=d.default;b.before(function(a,d){b.hasMixin(a,h)&&c.processPrototype(d)});b.after(function(a){b.hasMixin(a,h)&&(c.processClass(a),Object.defineProperties(a.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||
!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var h=b(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===h)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{value:new d(this)});if(0<arguments.length&&this.normalizeCtorArgs){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);
this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,a)}},__accessor__:null,postscript:function(a){var b=this.__accessor__;a=b.ctorArgs||a;var c;null!=this.getDefaults&&(c=this.getDefaults(a||{}),this.set(c));b.initialize();a&&(this.set(a),b.ctorArgs=null);b.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");}catch(f){console.warn(f.stack)}else g.removeTarget(this),this.__accessor__.destroy()},get:function(b){return a.get(this,
b)},hasOwnProperty:function(a){return this.__accessor__?this.__accessor__.has(a):Object.prototype.hasOwnProperty.call(this,a)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(a,b){e.set(this,a,b);return this},watch:function(a,b,c){return g.watch(this,a,b,c)},_clearOverride:function(a){return this.__accessor__.clearOverride(a)},_override:function(a,b){return this.__accessor__.override(a,b)},_isOverridden:function(a){return this.__accessor__.isOverridden(a)},notifyChange:function(a){this.__accessor__.propertyInvalidated(a)},
_get:function(a){return this.__accessor__.internalGet(a)},_set:function(a,b){return this.__accessor__.internalSet(a,b)}});return h})},"esri/layers/vectorTiles/core/accessorSupport/Properties":function(){define("require exports dojo/has ../Logger ./extensions ./PropertyOrigin ./Store".split(" "),function(b,d,a,c,e,g,h){function f(b,c){return c.metadatas[b]?!0:(a("dojo-debug-messages")&&k.warn("cannot access unknown property '"+b+"' on instance of "+c.host.declaredClass+"."),!1)}function l(b,c,d,e){return b.nonNullable&&
null==d?(a("dojo-debug-messages")&&k.warn("cannot set non-nullable property '"+c+"' to null on "+e.host.declaredClass+"."),!1):!0}Object.defineProperty(d,"__esModule",{value:!0});var k=c.getLogger("esri.core.accessorSupport.Properties");b=function(){function a(a){this.host=a;this._origin=g.OriginId.USER;this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new h.default;a=this.host.constructor.__accessorMetadata__;this.metadatas=a.properties;
this.autoDestroy=a.autoDestroy}a.prototype.initialize=function(){this.lifecycle=1;e.instanceCreated(this.host,this.metadatas)};a.prototype.constructed=function(){this.lifecycle=2};a.prototype.destroy=function(){this.destroyed=!0;var a=this.cursors;if(this.cursors)for(var b=0,c=Object.getOwnPropertyNames(a);b<c.length;b++){var d=c[b],e=a[d];if(e){for(;0<e.length;)e.pop().propertyDestroyed(this,d);a[d]=null}}if(this.autoDestroy)for(d in this.metadatas)(a=this.internalGet(d))&&a&&"function"===typeof a.destroy&&
(a.destroy(),this.metadatas[d].nonNullable||this.internalSet(d,null))};Object.defineProperty(a.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,configurable:!0});a.prototype.clearOverride=function(a){this.isOverridden(a)&&(this.overridden[a]=!1,this.propertyInvalidated(a))};a.prototype.get=function(a){f(a,this);var b=this.metadatas[a];if(this.store.has(a)&&!this.dirties[a])return this.store.get(a);var c=b.get;return c?(b=c.call(this.host),this.store.set(a,b,g.OriginId.COMPUTED),
this.propertyCommitted(a),b):b.value};a.prototype.originOf=function(a){var b=this.store.originOf(a);return void 0===b&&(a=this.metadatas[a])&&a.hasOwnProperty("value")?"defaults":g.idToName(b)};a.prototype.has=function(a){return this.metadatas[a]?this.store.has(a):!1};a.prototype.internalGet=function(a){if(f(a,this)){var b=this.store;return b.has(a)?b.get(a):this.metadatas[a].value}};a.prototype.internalSet=function(a,b){f(a,this)&&(this.propertyInvalidated(a),this.initialized?this.store.set(a,b,
this._origin):this.store.set(a,b,g.OriginId.DEFAULTS),this.propertyCommitted(a))};a.prototype.isOverridden=function(a){return null!=this.overridden&&!0===this.overridden[a]};a.prototype.keys=function(){return this.store.keys()};a.prototype.override=function(a,b){if(f(a,this)){this.overridden||(this.overridden={});var c=this.metadatas[a];l(c,a,b,this)&&((c=c.cast)&&(b=c.call(this.host,b)),this.overridden[a]=!0,this.internalSet(a,b))}};a.prototype.set=function(a,b){if(f(a,this)){var c=this.metadatas[a];
if(l(c,a,b,this)){var d=c.set;(c=c.cast)&&(b=c.call(this.host,b));d?d.call(this.host,b):this.internalSet(a,b)}}};a.prototype.setDefaultOrigin=function(a){this._origin=g.nameToId(a)};a.prototype.propertyInvalidated=function(a){var b=this.dirties,c=this.isOverridden(a),d=this.cursors&&this.cursors[a],e=this.metadatas[a].computes;if(d)for(var f=0;f<d.length;f++)d[f].propertyInvalidated(this,a);c||(b[a]=!0);if(e)for(a=0;a<e.length;a++)this.propertyInvalidated(e[a])};a.prototype.propertyCommitted=function(a){var b=
this.cursors&&this.cursors[a];this.dirties[a]=!1;if(b)for(var c=0;c<b.length;c++)b[c].propertyCommitted(this,a)};a.prototype.addCursor=function(a,b){this.cursors||(this.cursors={});var c=this.cursors[a];c||(this.cursors[a]=c=[]);c.push(b)};a.prototype.removeCursor=function(a,b){var c=this.cursors[a];this.cursors[a]&&(c.splice(c.indexOf(b),1),0===c.length&&(this.cursors[a]=null))};return a}();d.default=b})},"esri/layers/vectorTiles/core/accessorSupport/extensions":function(){define(["require","exports",
"./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],function(b,d,a,c,e){Object.defineProperty(d,"__esModule",{value:!0});var g=[a.default,c.default,e.default];d.processPrototypeMetadatas=function(a,b){for(var c=Object.getOwnPropertyNames(a),d=0;d<g.length;d++){var e=g[d];if(e.processPrototypePropertyMetadata)for(var f=0,h=c;f<h.length;f++){var r=h[f];e.processPrototypePropertyMetadata(r,a[r],a,b)}}};d.processClassMetadatas=function(a,b){for(var c=Object.getOwnPropertyNames(a),
d=0;d<g.length;d++){var e=g[d];if(e.processClassPropertyMetadata)for(var f=0,h=c;f<h.length;f++){var r=h[f];e.processClassPropertyMetadata(r,a[r],a,b)}}};d.instanceCreated=function(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<g.length;d++){var e=g[d];e.instanceCreated&&e.instanceCreated(a,b,c)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../get ../set ../utils ../wire".split(" "),function(b,d,a,c,e,g,h){function f(a,
b,c){var d=g.getProperties(a);return h.wire(a,c.aliasOf,function(){d.propertyInvalidated(b)})}Object.defineProperty(d,"__esModule",{value:!0});var l=a("dojo-debug-messages");d.AliasedPropertyExtension={processClassPropertyMetadata:function(a,b,d,f){var k=b.aliasOf;if(k){var h=k.split(".")[0];if(null==d[h])l&&console.error("[accessor] class '"+f+"' - property '"+a+"' is alias of aliased of '"+k+"', but '"+h+"' isn't declared as property. This can be fix by adding '"+h+"' to the metadata for example.");
else if(b.set)l&&console.error("[accessor] class '"+f+"' - property '"+a+"' is alias of aliased of '"+k+"', so it cannot have a setter defined");else if(b.get)l&&console.error("[accessor] class '"+f+"' - property '"+a+"' is alias of aliased of '"+k+"', so it cannot have a getter defined");else{var g;b.get=function(){var a=c.default(this,k);if("function"===typeof a){g||(g=k.split(".").slice(0,-1).join("."));var b=c.default(this,g);b&&(a=a.bind(b))}return a};b.readOnly||(b.set=function(a){return e.default(this,
k,a)})}}},instanceCreated:function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d],k=b[e];k.aliasOf&&f(a,e,k)}}};d.default=d.AliasedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(b,d,a){function c(b,c,d){if(null!=d.getItemAt||Array.isArray(d)){var e=parseInt(b,10);if(!isNaN(e))return Array.isArray(d)?d[e]:d.getItemAt(e)}e=a.getProperties(d);return c?a.isPropertyDeclared(e,b)?e.get(b):d[b]:a.isPropertyDeclared(e,b)?e.internalGet(b):
d[b]}function e(a,b,d,h){if(null==a)return a;if((a=c(b[h],d,a))||!(h<b.length-1))return h===b.length-1?a:e(a,b,d,h+1)}function g(b,d,k,h){void 0===k&&(k=!1);void 0===h&&(h=0);return"string"===typeof d&&-1===d.indexOf(".")?c(d,k,b):e(b,a.pathToArray(d),k,h)}function h(a,b){return g(a,b,!0)}Object.defineProperty(d,"__esModule",{value:!0});d.valueOf=g;d.get=h;d.exists=function(a,b){return void 0!==g(b,a,!0)};d.default=h})},"esri/layers/vectorTiles/core/accessorSupport/utils":function(){define(["require",
"exports","../lang"],function(b,d,a){function c(b,d){return d?Object.keys(d).reduce(function(b,e){if("value"===e)return b[e]=d[e],b;if(void 0===b[e])return b[e]=a.clone(d[e]),b;var f=b[e],k=d[e];if(f===k)return b;if(Array.isArray(k)||Array.isArray(b))f=f?Array.isArray(f)?b[e]=f.concat():b[e]=[f]:b[e]=[],k&&(Array.isArray(k)||(k=[k]),k.forEach(function(a){-1===f.indexOf(a)&&f.push(a)}));else if(k&&"object"===typeof k)b[e]=c(f,k);else if(!b.hasOwnProperty(e)||d.hasOwnProperty(e))b[e]=k;return b},b||
{}):b}function e(a){return Array.isArray(a)?a:a.split(".")}function g(a){if(Array.isArray(a)||-1<a.indexOf(",")){a=Array.isArray(a)?a:a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return 1===a.length?a[0]:a}return a.trim()}function h(a){var b=!1;return function(){b||(b=!0,a())}}Object.defineProperty(d,"__esModule",{value:!0});d.getProperties=function(a){return a?a.__accessor__?a.__accessor__:a.propertyInvalidated?a:null:null};d.isPropertyDeclared=function(a,b){return a&&a.metadatas&&null!=
a.metadatas[b]};d.merge=c;d.pathToStringOrArray=function(a){return a?"string"===typeof a&&-1===a.indexOf(".")?a:e(a):a};d.pathToArray=e;d.splitPath=g;d.parse=function(a,b,c,d){b=g(b);if(Array.isArray(b)){var e=b.map(function(b){return d(a,b.trim(),c)});return{remove:h(function(){return e.forEach(function(a){return a.remove()})})}}return d(a,b.trim(),c)};d.once=h})},"esri/layers/vectorTiles/core/accessorSupport/set":function(){define(["require","exports","dojo/has","../Logger","./get"],function(b,
d,a,c,e){function g(b,c,d){if(b&&c)if("object"===typeof c){d=0;for(var f=Object.getOwnPropertyNames(c);d<f.length;d++){var k=f[d];g(b,k,c[k])}}else"_"!==c[0]&&(-1!==c.indexOf(".")?(c=c.split("."),k=c.splice(c.length-1,1)[0],g(e.default(b,c),k,d)):(a("dojo-debug-messages")&&(k=b.__accessor__,null==k||k.metadatas[c]||h.warn("setting unknown property '"+c+"' on instance of "+k.host.declaredClass)),b[c]=d))}Object.defineProperty(d,"__esModule",{value:!0});var h=c.getLogger("esri.core.accessorSupport.set");
d.set=g;d.default=g})},"esri/layers/vectorTiles/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(b,d,a){function c(b,c,d){c=a.splitPath(c);if(Array.isArray(c)){for(var k=[],h=0;h<c.length;h++)k.push((new e(c[h],d)).install(b));return new f(k)}b=(new e(c,d)).install(b);return new l(b)}Object.defineProperty(d,"__esModule",{value:!0});var e=function(){function b(b,c){this.path=b;this.callback=c;this.chain=null;this.path=b;-1<b.indexOf(".")&&(this.chain=a.pathToArray(b));
this.callback=c;return this}b.prototype.install=function(a){a=this.chain?new h(this,a):new g(this,a);return a};b.prototype.notify=function(a){this.callback(a,this.path)};return b}(),g=function(){function b(b,c){this.binding=b;this.target=c;a.getProperties(c).addCursor(this.binding.path,this)}b.prototype.destroy=function(){this.target&&(a.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)};b.prototype.propertyDestroyed=function(b,c){a.getProperties(this.target).removeCursor(c,
this)};b.prototype.propertyInvalidated=function(a,b){this.binding&&this.binding.notify(this.target)};b.prototype.propertyCommitted=function(a,b){this.binding&&this.binding.notify(this.target)};return b}(),h=function(){function b(b,c){this.binding=b;this.target=c;this.stack=[];this.properties=a.getProperties(c);this.stack.push({properties:this.properties,propertyName:b.chain[0]});this.properties.addCursor(b.chain[0],this);this.moveForward();return this}b.prototype.destroy=function(){for(;;){var a=
this.stack.pop();if(null==a)break;a.properties.removeCursor(a.propertyName,this)}this.target=this.binding=null};b.prototype.propertyDestroyed=function(a,b){this.moveBackward(a,b)};b.prototype.propertyInvalidated=function(a,b){this.binding&&this.binding.notify(this.target)};b.prototype.propertyCommitted=function(a,b){this.binding&&(this.moveBackward(a,b),this.moveForward(),this.binding.notify(this.target))};b.prototype.moveBackward=function(a,b){for(var c=this.stack,d=c[c.length-1];d.properties!==
a&&d.propertyName!==b;)d.properties.removeCursor(d.propertyName,this),c.pop(),d=c[c.length-1]};b.prototype.moveForward=function(){var b=this.stack,c=b[b.length-1],c=c.properties.internalGet(c.propertyName);(c=a.getProperties(c))&&b.length<this.binding.chain.length&&(b=this.binding.chain[b.length],this.stack.push({properties:c,propertyName:b}),c.addCursor(b,this),this.moveForward())};return b}(),f=function(){function a(a){this.cursors=a}a.prototype.remove=function(){for(var a=this.cursors;0<a.length;)a.pop().destroy();
this.cursors=null};return a}(),l=function(){function a(a){this.cursor=a}a.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return a}();d.create=function(b,c){var d=a.splitPath(b);if(Array.isArray(d)){for(var k=[],h=0;h<d.length;h++)k.push(new e(d[h],c));return function(a){for(var b=[],c=0;c<k.length;c++)b[c]=k[c].install(a);return new f(b)}}var g=new e(d,c);return function(a){return new l(g.install(a))}};d.wire=c;d.default=c})},"esri/layers/vectorTiles/core/accessorSupport/extensions/computedProperty":function(){define("require exports dojo/has ../../Logger ../utils ../wire".split(" "),
function(b,d,a,c,e,g){Object.defineProperty(d,"__esModule",{value:!0});var h=a("dojo-debug-messages"),f=c.getLogger("esri.core.accessorSupport.extensions.computedProperty");d.ComputedPropertyExtension={processClassPropertyMetadata:function(a,b,c,d){if(h){var k=b.dependsOn;k&&k.length&&k.map(function(a){return a.split(".")[0]}).forEach(function(b){null==c[b]&&f.error("[accessor] class '"+d+"' - property '"+a+"' depends on unknown property '"+b+"' which hasn't been found during introspection. This can be fix by adding '"+
b+"' to the metadata for example.")})}b.dependsOn&&(k=void 0,k=b.dependsOn.slice())&&(b.wire=g.create(k,function(b){return e.getProperties(b).propertyInvalidated(a)}))},instanceCreated:function(a,b,c){for(var d=0;d<c.length;d++){var e=b[c[d]];e.wire&&e.wire(a)}}};d.default=d.ComputedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),
function(b,d,a,c,e,g){function h(a,b,c){var d=a&&a.json;a&&a.json&&a.json.origins&&c&&(a=a.json.origins[c.origin])&&b in a&&(d=a);return d}Object.defineProperty(d,"__esModule",{value:!0});d.originSpecificReadPropertyDefinition=function(a,b){return h(a,"read",b)};d.originSpecificWritePropertyDefinition=function(a,b){return h(a,"write",b)};d.SerializablePropertyExtension={processPrototypePropertyMetadata:function(b,d,k,h){if(e.process(d)){a.process(d);k=d.type;for(h=0;Array.isArray(k);)k=k[0],h++;if(d.json.origins)for(var f in d.json.origins){var l=
d.json.origins[f];c.create(k,h,b,l);g.create(k,h,b,l)}c.create(k,h,b,d.json);g.create(k,h,b,d.json)}}};d.default=d.SerializablePropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(b,d){Object.defineProperty(d,"__esModule",{value:!0});d.process=function(a){if(a.json&&a.json.origins){var b=a.json.origins,d={"web-document":["web-scene","web-map"]};a=function(a){if(b[a]){var c=b[a];d[a].forEach(function(a){b[a]=
c});delete b[a]}};for(var g in d)a(g)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","dojo/_base/lang","./type"],function(b,d,a,c){function e(a,b,c,d){if(1<b)return f(a,b);if(1===b)return l(a);if(k(a)){var e=l(a.prototype.itemType.Type);return function(b,c,d){return(b=e(b,c,d))?new a(b):b}}return g(a)}function g(a){return a.prototype.read?function(b,c,d){return null==b?b:(new a).read(b,d)}:a.fromJSON}function h(a,b,
c,d){return 0!==d&&Array.isArray(b)?b.map(function(b){return h(a,b,c,d-1)}):a(b,null,c)}function f(a,b){var c=g(a),d=h.bind(null,c);return function(a,c,e){if(null==a)return a;a=d(a,e,b);c=b;for(e=a;0<c&&Array.isArray(e);)c--,e=e[0];if(void 0!==e)for(e=0;e<c;e++)a=[a];return a}}function l(a){var b=g(a);return function(a,c,d){return null==a?a:Array.isArray(a)?a.map(function(a){return b(a,null,d)}):[b(a,null,d)]}}function k(a){return c.isCollection(a)?(a=a.prototype.itemType)&&a.Type&&"function"===typeof a.Type?
m(a.Type):!1:!1}function m(a){return!!a&&(!!a.prototype.read||!!a.fromJSON||k(a))}Object.defineProperty(d,"__esModule",{value:!0});d.create=function(b,c,d,f){(!f.read||!f.read.reader&&!1!==f.read.enabled)&&m(b)&&a.setObject("read.reader",e(b,c,d,f),f)}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(b,d){Object.defineProperty(d,"__esModule",{value:!0});d.isCollection=function(a){return!!a&&!!a.prototype.declaredClass&&
0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require","exports"],function(b,d){function a(a){"boolean"===typeof a.read?a.read={enabled:a.read}:"function"===typeof a.read?a.read={enabled:!0,reader:a.read}:a.read&&"object"===typeof a.read&&void 0===a.read.enabled&&(a.read.enabled=!0)}function c(a){"boolean"===typeof a.write?a.write={enabled:a.write}:"function"===typeof a.write?
a.write={enabled:!0,writer:a.write}:a.write&&"object"===typeof a.write&&void 0===a.write.enabled&&(a.write.enabled=!0)}Object.defineProperty(d,"__esModule",{value:!0});d.process=function(b){b.json||(b.json={});a(b.json);c(b.json);if(b.json.origins)for(var d in b.json.origins)a(b.json.origins[d]),c(b.json.origins[d]);return!0}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","dojo/_base/lang","./type"],function(b,d,a,c){function e(b,
c,d,e){a.setObject(d,g(b,e),c)}function g(a,b){return a&&"function"===typeof a.write?a.write({},b):a&&"function"===typeof a.toJSON?a.toJSON():"number"===typeof a?-Infinity===a?-Number.MAX_VALUE:Infinity===a?Number.MAX_VALUE:isNaN(a)?null:a:a}function h(b,c,d,e){null===b?b=null:b&&"function"===typeof b.map?(b=b.map(function(a){return g(a,e)}),"function"===typeof b.toArray&&(b=b.toArray())):b=[g(b,e)];a.setObject(d,b,c)}function f(a,b,c){return 0!==c&&Array.isArray(a)?a.map(function(a){return f(a,b,
c-1)}):g(a,b)}function l(b){return function(c,d,e,k){if(null===c)c=null;else{c=f(c,k,b);k=b;for(var h=c;0<k&&Array.isArray(h);)k--,h=h[0];if(void 0!==h)for(h=0;h<k;h++)c=[c]}a.setObject(e,c,d)}}Object.defineProperty(d,"__esModule",{value:!0});d.create=function(a,b,d,f){f.write&&!f.write.writer&&!1!==f.write.enabled&&(1===b||c.isCollection(a)?f.write.writer=h:f.write.writer=1<b?l(b):e)}})},"esri/layers/vectorTiles/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(b,
d){function a(a){switch(a){case "defaults":return e.DEFAULTS;case "service":return e.SERVICE;case "portal-item":return e.PORTAL_ITEM;case "web-scene":return e.WEB_SCENE;case "web-map":return e.WEB_MAP;case "user":return e.USER}}function c(a){switch(a){case e.DEFAULTS:return"defaults";case e.SERVICE:return"service";case e.PORTAL_ITEM:return"portal-item";case e.WEB_SCENE:return"web-scene";case e.WEB_MAP:return"web-map";case e.USER:return"user"}}Object.defineProperty(d,"__esModule",{value:!0});var e;
(function(a){a[a.DEFAULTS=0]="DEFAULTS";a[a.COMPUTED=1]="COMPUTED";a[a.SERVICE=2]="SERVICE";a[a.PORTAL_ITEM=3]="PORTAL_ITEM";a[a.WEB_SCENE=4]="WEB_SCENE";a[a.WEB_MAP=5]="WEB_MAP";a[a.USER=6]="USER";a[a.NUM=7]="NUM"})(e=d.OriginId||(d.OriginId={}));d.nameToId=a;d.idToName=c;d.readableNameToId=function(b){return a(b)};d.idToReadableName=function(a){return c(a)};d.writableNameToId=function(b){return a(b)};d.idToWritableName=function(a){return c(a)}})},"esri/layers/vectorTiles/core/accessorSupport/Store":function(){define(["require",
"exports","./PropertyOrigin"],function(b,d,a){Object.defineProperty(d,"__esModule",{value:!0});b=function(){function b(){this._values={}}b.prototype.get=function(a){return this._values[a]};b.prototype.originOf=function(b){return a.OriginId.USER};b.prototype.keys=function(){return Object.keys(this._values)};b.prototype.set=function(a,b){this._values[a]=b};b.prototype.clear=function(a){delete this._values[a]};b.prototype.has=function(a){return a in this._values};return b}();d.default=b})},"esri/layers/vectorTiles/core/accessorSupport/introspection":function(){define("require exports dojo/_base/lang ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),
function(b,d,a,c,e,g,h,f){Object.defineProperty(d,"__esModule",{value:!0});var l=Object.prototype.hasOwnProperty,k=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,m={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},t=/^_(set|get)([a-zA-Z0-9]+)Attr$/;d.processPrototype=function(b){for(var d=b.declaredClass,f=b.properties||{},q=0,u=Object.getOwnPropertyNames(f);q<u.length;q++){var x=u[q],y=f[x],n=typeof y;null==y?g.setPropertyMetadata(b,x,{value:y}):
Array.isArray(y)?g.setPropertyMetadata(b,x,{type:[y[0]],value:null}):"object"===n?h.getProperties(y)||y instanceof Date?g.setPropertyMetadata(b,x,{type:y.constructor,value:y}):g.setPropertyMetadata(b,x,y):"boolean"===n?g.setPropertyMetadata(b,x,{type:Boolean,value:y}):"string"===n?g.setPropertyMetadata(b,x,{type:String,value:y}):"number"===n?g.setPropertyMetadata(b,x,{type:Number,value:y}):"function"===n&&g.setPropertyMetadata(b,x,{type:y,value:null})}q=0;for(u=Object.getOwnPropertyNames(b);q<u.length;q++){var n=
u[q],y=b[n],f=x=void 0,p=k.exec(n);if(p)x=p[1],f=m[p[2]];else if(p=t.exec(n))x=p[2][0].toLowerCase()+p[2].substr(1),f=p[1].toLowerCase();x&&f&&(x=g.getPropertyMetadata(b,x),a.setObject(f,y,x))}q=0;for(u=Object.getOwnPropertyNames(g.getPropertiesMetadata(b));q<u.length;q++)if(x=u[q],y=g.getPropertyMetadata(b,x),f=y.type,n=y.types,void 0===y.value&&l.call(b,x)&&(y.value=b[x]),!y.cast&&f){x=y;y=0;for(n=f;Array.isArray(n);)n=n[0],y++;f=1===y?c.ensureArray(n):1<y?c.ensureNArray(n,y):c.ensureType(f);x.cast=
f}else!y.cast&&n&&(Array.isArray(n)?y.cast=c.ensureArrayTyped(c.ensureOneOfType(n[0])):y.cast=c.ensureOneOfType(n));e.processPrototypeMetadatas(g.getPropertiesMetadata(b),d);return g.getPropertiesMetadata(b)};d.processClass=function(a){for(var b=a.prototype,c=b.declaredClass,d=a._meta.bases,k={},l=d.length-1;0<=l;l--)h.merge(k,g.getMetadata(d[l].prototype));var m=k.properties;e.processClassMetadatas(m,c);Object.defineProperty(a,"__accessorMetadata__",{value:{properties:m,autoDestroy:!!k.autoDestroy}});
for(var n={},c=function(a){var b=m[a];n[a]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(a):b.value},set:function(c){var d=this.__accessor__;if(!d)Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:c});else if(!Object.isFrozen(this)){if(d.initialized&&b.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+a+"' of "+this.declaredClass);if(2===d.lifecycle&&b.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+
a+"' of "+this.declaredClass);d.set(a,c)}}}},d=0,l=Object.getOwnPropertyNames(m);d<l.length;d++)c(l[d]);Object.defineProperties(a.prototype,n);if(k.parameters)for(a=0,c=Object.getOwnPropertyNames(k.parameters);a<c.length;a++)d=c[a],l=Object.getOwnPropertyDescriptor(b,d)||{value:b[d]},(l=f.autocastMethod(b,d,l))&&Object.defineProperty(b,d,l);return k}})},"esri/layers/vectorTiles/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ObjectPool ../scheduling ./get ./utils ./wire".split(" "),
function(b,d,a,c,e,g,h,f,l){function k(a){x.has(a)?y.splice(y.indexOf(a),1):x.add(a);y.push(a);n||(n=g.schedule(t))}function m(a){if(!a.removed){var b=a.callback,d=a.path,e=a.oldValue,n=a.target,p=h.valueOf(n,a.propertyPath,!0);c.equals(e,p)||(a.oldValue=p,b.call(n,p,e,d,n))}}function t(){if(n){n=null;var a=y;y=u.acquire();x.clear();for(var b=u.acquire(),c=0;c<a.length;c++){var d=a[c];m(d);d.removed&&b.push(d)}for(c=0;c<y.length;c++)d=y[c],d.removed&&(b.push(d),x.delete(d),y.splice(c,1),--c);for(c=
0;c<b.length;c++)v.pool.release(b[c]);u.release(a);u.release(b);p.forEach(function(a){return a()})}}function q(a,b,c){var d=f.parse(a,b,c,function(a,b,c){var e=h.valueOf(a,b,!0),n,p=l.wire(a,b,function(a,b){a.__accessor__.destroyed?d.remove():(n||(n=v.pool.acquire(a,b,e,c),e=null),k(n))});return{remove:f.once(function(){p.remove();n&&(n.removed=!0,k(n),n=null);d=p=e=null})}});return d}function r(a,b,d){var e=f.parse(a,b,d,function(a,b,d){var n=h.valueOf(a,b,!0),p=!1;return l.wire(a,b,function(a,b){if(a.__accessor__.destroyed)e.remove();
else if(!p){p=!0;var f=h.valueOf(a,b,!0);c.equals(n,f)||d.call(a,f,n,b,a);n=h.valueOf(a,b,!0);p=!1}})});return e}function w(a,b,c,d){void 0===d&&(d=!1);return!a.__accessor__||a.__accessor__.destroyed?{remove:function(){}}:d?r(a,b,c):q(a,b,c)}Object.defineProperty(d,"__esModule",{value:!0});var v=function(){function a(a,b,c,d){this.target=a;this.path=b;this.oldValue=c;this.callback=d;this.removed=!1;this.propertyPath=f.pathToStringOrArray(b)}a.prototype.release=function(){this.target=this.path=this.propertyPath=
this.callback=this.oldValue=null;this.removed=!0};a.pool=new e(a,!0);return a}(),u=new a,x=new Set,y=u.acquire(),n;d.dispatchTarget=function(a){for(var b=u.copy(y),c=0;c<b.length;c++){var d=b[c];d.target===a&&(m(d),x.delete(d),y.splice(y.indexOf(d),1))}};d.removeTarget=function(a){for(var b=0;b<y.length;b++){var c=y[b];c.target===a&&(c.removed=!0)}};d.dispatch=t;var p=new Set;d.afterDispatch=function(a){p.add(a);return{remove:function(){p.delete(a)}}};d.watch=w;d.isValueInUse=function(a){return y.some(function(b){return b.oldValue===
a})};d.default=w})},"esri/layers/vectorTiles/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(b,d,a){function c(a){a.length=0}var e=Array.prototype.splice;b=function(){function b(b,d){void 0===b&&(b=50);void 0===d&&(d=50);this._pool=new a(Array,!1,c,d,b)}b.prototype.acquire=function(){return this._pool.acquire()};b.prototype.copy=function(a){var b=this.acquire();a.unshift(0,0);e.apply(b,a);a.splice(0,2);return b};b.prototype.release=function(a){this._pool.release(a)};
b.acquire=function(){return g.acquire()};b.copy=function(a){return g.copy(a)};b.release=function(a){return g.release(a)};return b}();var g=new b(100);return b})},"esri/layers/vectorTiles/core/scheduling":function(){define(["require","exports","./nextTick","./now","./requestAnimationFrame"],function(b,d,a,c,e){function g(a){void 0===a&&(a=d.now());d.debug.rafId=null;0<u.length&&(d.debug.rafId=h());a=d.now();0>q&&(q=a);var b=a-q;q=a;for(var c=0;c<u.length;c++){var e=u[c];-1!==e.epoch&&(e.dt=b)}for(c=
0;c<w.length;c++)for(var b=w[c],n=x[b],k=0;k<n.length;k++)e=n[k],e.paused||e.removed||(0===c&&e.ticks++,-1===e.epoch&&(e.epoch=a),r.time=a,r.deltaTime=e.dt,r.elapsedFrameTime=d.now()-a,r.spendInTask=a-e.epoch,e.phases[b].call(e,r));f()}function h(){return d.debug.requestNextFrame?d.debug.requestNextFrame(k):k()}function f(){for(var a=0;a<u.length;){var b=u[a];a++;if(b.removed){u.splice(a-1,1);for(var c=0;c<w.length;c++){var d=w[c];if(b.phases[d]){var d=x[d],e=d.indexOf(b);-1!==e&&d.splice(e,1)}}}}}
function l(){for(;v.length;){var a=v.shift();a.isActive&&(a.isActive=!1,a.callback())}d.debug.willDispatch=!1}function k(){return e(g)}Object.defineProperty(d,"__esModule",{value:!0});d.now=c;var m=function(){return function(a){this.phases=a;this.paused=!1;this.pausedAt=0;this.epoch=-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),t=function(){function a(a){this.callback=a;this.isActive=!0}a.prototype.remove=function(){this.isActive=!1};return a}(),q=-1,r={time:0,deltaTime:0,elapsedFrameTime:0,spendInTask:0},
w=["prepare","preRender","render","postRender","update"],v=[],u=[],x={prepare:[],preRender:[],render:[],postRender:[],update:[]},y=function(){function a(a){this._task=a}a.prototype.remove=function(){this._task.removed=!0};a.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=d.now())};a.prototype.resume=function(){this._task.paused&&(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=d.now()-this._task.pausedAt))};return a}();d.FrameTaskHandle=y;d.debug=
{frameTasks:u,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(a){void 0===a&&(a=!1);for(var b=0;b<u.length;b++)u[b].removed=!0;a&&f()},dispatch:l,frame:g};d.schedule=function(b){b=new t(b);v.push(b);d.debug.willDispatch||(d.debug.willDispatch=!0,a(l));return b};d.addFrameTask=function(a){var b=new m(a);u.push(b);for(var c=0,e=w;c<e.length;c++){var n=e[c];a[n]&&x[n].push(b)}d.debug.rafId||(q=-1,d.debug.rafId=h());return new y(b)};d.requestNextFrame=h})},"esri/layers/vectorTiles/core/nextTick":function(){define(["require",
"exports","./global"],function(b,d,a){function c(){if(a.postMessage&&!a.importScripts){var b=a.onmessage,c=!0;a.onmessage=function(){c=!1};a.postMessage("","*");a.onmessage=b;return c}return!1}var e=a.MutationObserver||a.WebKitMutationObserver;return function(){var b;if(a.process&&a.process.nextTick)b=function(b){a.process.nextTick(b)};else if(a.Promise)b=function(b){a.Promise.resolve().then(b)};else if(e){var d=[],f=document.createElement("div");(new e(function(){for(;0<d.length;)d.shift()()})).observe(f,
{attributes:!0});b=function(a){d.push(a);f.setAttribute("queueStatus","1")}}else if(c()){var l=[];a.addEventListener("message",function(b){if(b.source===a&&"esri-nexttick-message"===b.data)for(b.stopPropagation();l.length;)l.shift()()},!0);b=function(b){l.push(b);a.postMessage("esri-nexttick-message","*")}}else b=a.setImmediate?function(b){return a.setImmediate(b)}:function(b){return a.setTimeout(b,0)};return b}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(b,
d){return function(){if("undefined"!==typeof global)return global;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self}()})},"esri/layers/vectorTiles/core/now":function(){define(["require","exports","./global"],function(b,d,a){return function(){var b=a.performance||{};if(b.now)return function(){return b.now()};if(b.webkitNow)return function(){return b.webkitNow()};if(b.mozNow)return function(){return b.mozNow()};if(b.msNow)return function(){return b.msNow()};if(b.oNow)return function(){return b.oNow()};
var d;d=b.timing&&b.timing.navigationStart?b.timing.navigationStart:Date.now();return function(){return Date.now()-d}}()})},"esri/layers/vectorTiles/core/requestAnimationFrame":function(){define(["require","exports","./global","./now"],function(b,d,a,c){var e=c();b=a.requestAnimationFrame;if(!b){d=["ms","moz","webkit","o"];for(var g=0;g<d.length&&!b;++g)b=a[d[g]+"RequestAnimationFrame"];b||(b=function(b){var d=c(),h=Math.max(0,16-(d-e)),k=a.setTimeout(function(){b(c())},h);e=d+h;return k})}return b})},
"esri/layers/vectorTiles/core/accessorSupport/read":function(){define("require exports dojo/_base/lang ./get ./utils ./extensions/serializableProperty".split(" "),function(b,d,a,c,e,g){function h(a,b,d){void 0===d&&(d=f);for(var k=e.getProperties(a),h=k.metadatas,l={},m=0,v=Object.getOwnPropertyNames(b);m<v.length;m++){var u=l,x=h,y=v[m],n=b,p=d,z=g.originSpecificReadPropertyDefinition(x[y],p);z&&(!z.read||!1!==z.read.enabled&&!z.read.source)&&(u[y]=!0);for(var A=0,B=Object.getOwnPropertyNames(x);A<
B.length;A++){var D=B[A],z=g.originSpecificReadPropertyDefinition(x[D],p),C;a:{C=y;var J=n;if(z&&z.read&&!1!==z.read.enabled&&z.read.source)if(z=z.read.source,"string"===typeof z){if(z===C||-1<z.indexOf(".")&&0===z.indexOf(C)&&c.exists(z,J)){C=!0;break a}}else for(var E=0;E<z.length;E++){var H=z[E];if(H===C||-1<H.indexOf(".")&&0===H.indexOf(C)&&c.exists(H,J)){C=!0;break a}}C=!1}C&&(u[D]=!0)}}k.setDefaultOrigin(d.origin);v=0;for(u=Object.getOwnPropertyNames(l);v<u.length;v++)m=u[v],y=(x=g.originSpecificReadPropertyDefinition(h[m],
d).read)&&x.source,n=void 0,n=y&&"string"===typeof y?c.valueOf(b,y):b[m],x&&x.reader&&(n=x.reader.call(a,n,b,d)),void 0!==n&&k.set(m,n);b=0;for(h=Object.getOwnPropertyNames(h);b<h.length;b++)m=h[b],l[m]||(v=a,u=k,x=d,y=(y=g.originSpecificReadPropertyDefinition(u.metadatas[m],x))&&y.read&&y.read.default,void 0!==y&&(v="function"===typeof y?y.call(v,m,x):y,void 0!==v&&u.set(m,v)));k.setDefaultOrigin("user")}Object.defineProperty(d,"__esModule",{value:!0});var f={origin:"service"};d.read=h;d.readLoadable=
function(b,c,d,e){void 0===e&&(e=f);c=a.mixin({},e,{messages:[]});d(c);c.messages.forEach(function(a){"warning"!==a.type||b.loaded?e&&e.messages.push(a):b.loadWarnings.push(a)})};d.default=h})},"esri/layers/vectorTiles/core/accessorSupport/write":function(){define("require exports ../Error ../Logger ./PropertyOrigin ./utils ./extensions/serializableProperty".split(" "),function(b,d,a,c,e,g,h){function f(b,c,d,f,h,g){if(!f||!f.write)return!1;var l=b.get(d);if(void 0===l)return!1;if(!h&&f.write.overridePolicy){var m=
f.write.overridePolicy.call(b,l,d,g);void 0!==m&&(h=m)}h||(h=f.write);if(!h||!1===h.enabled)return!1;if(null===l){if(h.allowNull)return!0;h.isRequired&&((b=new a("web-document-write:property-required","Missing value for required property '"+d+"' on '"+b.declaredClass+"'",{propertyName:d,target:b}),g)&&g.messages?g.messages.push(b):b&&!g&&k.error(b.name,b.message));return!1}return!h.ignoreOrigin&&g&&g.origin&&c.store.originOf(d)<e.nameToId(g.origin)?!1:!0}function l(a,b,c){if(a&&"function"===typeof a.toJSON&&
(!a.toJSON.isDefaultToJSON||!a.write))return g.merge(b,a.toJSON());var d=g.getProperties(a),k=d.metadatas,l;for(l in k){var m=h.originSpecificWritePropertyDefinition(k[l],c);if(f(a,d,l,m,null,c)){var q=a.get(l),t={};m.write.writer.call(a,q,t,"string"===typeof m.write.target?m.write.target:l,c);m=t;0<Object.keys(m).length&&(b=g.merge(b,m),c&&c.writtenProperties&&c.writtenProperties.push({target:a,propName:l,oldOrigin:e.idToReadableName(d.store.originOf(l)),newOrigin:c.origin}))}}return b}Object.defineProperty(d,
"__esModule",{value:!0});var k=c.getLogger("esri.core.accessorSupport.write");d.willPropertyWrite=function(a,b,c,d){var e=g.getProperties(a),k=h.originSpecificWritePropertyDefinition(e.metadatas[b],d);return k?f(a,e,b,k,c,d):!1};d.write=l;d.default=l})},"esri/layers/vectorTiles/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),
function(b,d,a,c,e,g,h,f){b=function(b){function d(a){a=b.call(this)||this;a.latestWkid=null;a.wkid=null;a.wkt=null;return a}a(d,b);e=d;d.fromJSON=function(a){if(!a)return null;if(a.wkid){if(102100===a.wkid)return e.WebMercator;if(4326===a.wkid)return e.WGS84}var b=new e;b.read(a);return b};d.prototype.normalizeCtorArgs=function(a){return a&&"object"===typeof a?a:(b={},b["string"===typeof a?"wkt":"wkid"]=a,b);var b};Object.defineProperty(d.prototype,"isWGS84",{get:function(){return f.isWGS84(this)},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isWebMercator",{get:function(){return f.isWebMercator(this)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isGeographic",{get:function(){return f.isGeographic(this)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isWrappable",{get:function(){return f.isWrappable(this)},enumerable:!0,configurable:!0});d.prototype.writeWkt=function(a,b){this.wkid||(b.wkt=a)};d.prototype.clone=function(){if(this===
e.WGS84)return e.WGS84;if(this===e.WebMercator)return e.WebMercator;var a=new e;null!=this.wkid?(a.wkid=this.wkid,null!=this.latestWkid&&(a.latestWkid=this.latestWkid),null!=this.vcsWkid&&(a.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(a.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(a.wkt=this.wkt);return a};d.prototype.equals=function(a){return f.equals(this,a)};d.prototype.toJSON=function(a){return this.write(null,a)};d.GCS_NAD_1927=null;d.WGS84=null;d.WebMercator=null;c([h.property({dependsOn:["wkid"],
readOnly:!0})],d.prototype,"isWGS84",null);c([h.property({dependsOn:["wkid"],readOnly:!0})],d.prototype,"isWebMercator",null);c([h.property({dependsOn:["wkid","wkt"],readOnly:!0})],d.prototype,"isGeographic",null);c([h.property({dependsOn:["wkid"],readOnly:!0})],d.prototype,"isWrappable",null);c([h.property({type:Number,json:{write:!0}})],d.prototype,"latestWkid",void 0);c([h.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkt?
!0:!1}}}}}}})],d.prototype,"wkid",void 0);c([h.property({type:String,json:{origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkid?!0:!1}}}}}}})],d.prototype,"wkt",void 0);c([h.writer("wkt"),h.writer("web-scene","wkt")],d.prototype,"writeWkt",null);c([h.property({type:Number,json:{write:!0}})],d.prototype,"vcsWkid",void 0);c([h.property({type:Number,json:{write:!0}})],d.prototype,"latestVcsWkid",void 0);return d=e=c([h.subclass("esri.geometry.SpatialReference")],
d);var e}(h.declared(e));b.prototype.toJSON.isDefaultToJSON=!0;b.GCS_NAD_1927=new b({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'});b.WGS84=new b(4326);b.WGS84.wkt=g.substitute({Central_Meridian:"0.0"},f.getInfo(b.WGS84).wkTemplate);b.WebMercator=new b({wkid:102100,latestWkid:3857});Object.freeze&&(Object.freeze(b.GCS_NAD_1927),Object.freeze(b.WGS84),Object.freeze(b.WebMercator));
return b})},"esri/layers/vectorTiles/geometry/support/spatialReferenceUtils":function(){define(["require","exports","./WKIDUnitConversion"],function(b,d,a){function c(a){return a.wkid&&!0===e[a.wkid]}Object.defineProperty(d,"__esModule",{value:!0});var e={102113:!0,102100:!0,3857:!0,3785:!0},g={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};b=[-2.0037508342788905E7,2.0037508342788905E7];var h=[-2.0037508342787E7,2.0037508342787E7],f={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:b,origin:h,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:b,origin:h,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:b,origin:h,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:b,origin:h,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};d.equals=function(a,b){if(b){if(a===b)return!0;if(null!=a.wkid||null!=b.wkid)return a.wkid===b.wkid||c(a)&&c(b)||null!=b.latestWkid&&a.wkid===b.latestWkid||null!=a.latestWkid&&b.wkid===a.latestWkid;if(a.wkt&&b.wkt)return a.wkt.toUpperCase()===b.wkt.toUpperCase()}return!1};d.getInfo=function(a){return a.wkid?f[a.wkid]:null};d.isGeographic=function(b){return b.wkid?null==a[b.wkid]:b.wkt?!!/^\s*GEOGCS/i.test(b.wkt):!1};d.isWGS84=function(a){return 4326===
a.wkid};d.isWebMercator=c;d.isWrappable=function(a){return a.wkid&&!0===g[a.wkid]}})},"esri/layers/vectorTiles/geometry/support/WKIDUnitConversion":function(){define([],function(){var b,d={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8058:0,8059:0,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,
8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,
26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53034:0,53048:0,53049:0,
54034:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,
103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,
103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,
103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,
103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(b=2E3;2045>=b;b++)d[b]=0;for(b=2056;2065>=b;b++)d[b]=0;for(b=2067;2135>=b;b++)d[b]=0;for(b=2137;2154>=b;b++)d[b]=0;for(b=2161;2170>=b;b++)d[b]=0;for(b=2172;2193>=b;b++)d[b]=0;for(b=2195;2198>=b;b++)d[b]=0;for(b=2200;2203>=b;b++)d[b]=0;for(b=2205;2217>=b;b++)d[b]=0;for(b=2222;2224>=b;b++)d[b]=1;for(b=2225;2250>=b;b++)d[b]=2;
for(b=2251;2253>=b;b++)d[b]=1;for(b=2257;2264>=b;b++)d[b]=2;for(b=2274;2279>=b;b++)d[b]=2;for(b=2280;2282>=b;b++)d[b]=1;for(b=2283;2289>=b;b++)d[b]=2;for(b=2290;2292>=b;b++)d[b]=0;for(b=2308;2313>=b;b++)d[b]=0;for(b=2315;2491>=b;b++)d[b]=0;for(b=2494;2866>=b;b++)d[b]=0;for(b=2867;2869>=b;b++)d[b]=1;for(b=2870;2888>=b;b++)d[b]=2;for(b=2891;2895>=b;b++)d[b]=2;for(b=2896;2898>=b;b++)d[b]=1;for(b=2902;2908>=b;b++)d[b]=2;for(b=2915;2920>=b;b++)d[b]=2;for(b=2921;2923>=b;b++)d[b]=1;for(b=2924;2930>=b;b++)d[b]=
2;for(b=2931;2962>=b;b++)d[b]=0;for(b=2964;2968>=b;b++)d[b]=2;for(b=2969;2973>=b;b++)d[b]=0;for(b=2975;2991>=b;b++)d[b]=0;for(b=2995;3051>=b;b++)d[b]=0;for(b=3054;3079>=b;b++)d[b]=0;for(b=3081;3088>=b;b++)d[b]=0;for(b=3092;3101>=b;b++)d[b]=0;for(b=3106;3138>=b;b++)d[b]=0;for(b=3146;3151>=b;b++)d[b]=0;for(b=3153;3166>=b;b++)d[b]=0;for(b=3168;3172>=b;b++)d[b]=0;for(b=3174;3203>=b;b++)d[b]=0;for(b=3294;3358>=b;b++)d[b]=0;for(b=3367;3403>=b;b++)d[b]=0;for(b=3408;3416>=b;b++)d[b]=0;for(b=3417;3438>=b;b++)d[b]=
2;for(b=3441;3446>=b;b++)d[b]=2;for(b=3447;3450>=b;b++)d[b]=0;for(b=3451;3459>=b;b++)d[b]=2;for(b=3460;3478>=b;b++)d[b]=0;for(b=3554;3559>=b;b++)d[b]=0;for(b=3560;3570>=b;b++)d[b]=2;for(b=3571;3581>=b;b++)d[b]=0;for(b=3594;3597>=b;b++)d[b]=0;for(b=3601;3604>=b;b++)d[b]=0;for(b=3637;3639>=b;b++)d[b]=0;for(b=3665;3667>=b;b++)d[b]=0;for(b=3693;3695>=b;b++)d[b]=0;for(b=3701;3727>=b;b++)d[b]=0;for(b=3728;3739>=b;b++)d[b]=2;for(b=3740;3751>=b;b++)d[b]=0;for(b=3753;3760>=b;b++)d[b]=2;for(b=3761;3773>=b;b++)d[b]=
0;for(b=3775;3777>=b;b++)d[b]=0;for(b=3779;3781>=b;b++)d[b]=0;for(b=3783;3785>=b;b++)d[b]=0;for(b=3788;3791>=b;b++)d[b]=0;for(b=3797;3802>=b;b++)d[b]=0;for(b=3814;3816>=b;b++)d[b]=0;for(b=3825;3829>=b;b++)d[b]=0;for(b=3832;3841>=b;b++)d[b]=0;for(b=3844;3852>=b;b++)d[b]=0;for(b=3873;3885>=b;b++)d[b]=0;for(b=3890;3893>=b;b++)d[b]=0;for(b=3907;3912>=b;b++)d[b]=0;for(b=3942;3950>=b;b++)d[b]=0;for(b=3968;3970>=b;b++)d[b]=0;for(b=3973;3976>=b;b++)d[b]=0;for(b=3986;3989>=b;b++)d[b]=0;for(b=3994;3997>=b;b++)d[b]=
0;for(b=4048;4051>=b;b++)d[b]=0;for(b=4056;4063>=b;b++)d[b]=0;for(b=4093;4096>=b;b++)d[b]=0;for(b=4390;4398>=b;b++)d[b]=0;for(b=4399;4413>=b;b++)d[b]=2;for(b=4418;4433>=b;b++)d[b]=2;for(b=4455;4457>=b;b++)d[b]=2;for(b=4484;4489>=b;b++)d[b]=0;for(b=4491;4554>=b;b++)d[b]=0;for(b=4568;4589>=b;b++)d[b]=0;for(b=4652;4656>=b;b++)d[b]=0;for(b=4766;4800>=b;b++)d[b]=0;for(b=5014;5016>=b;b++)d[b]=0;for(b=5069;5072>=b;b++)d[b]=0;for(b=5105;5130>=b;b++)d[b]=0;for(b=5173;5188>=b;b++)d[b]=0;for(b=5253;5259>=b;b++)d[b]=
0;for(b=5269;5275>=b;b++)d[b]=0;for(b=5292;5311>=b;b++)d[b]=0;for(b=5329;5331>=b;b++)d[b]=0;for(b=5343;5349>=b;b++)d[b]=0;for(b=5355;5357>=b;b++)d[b]=0;for(b=5387;5389>=b;b++)d[b]=0;for(b=5459;5463>=b;b++)d[b]=0;for(b=5479;5482>=b;b++)d[b]=0;for(b=5518;5520>=b;b++)d[b]=0;for(b=5530;5539>=b;b++)d[b]=0;for(b=5550;5552>=b;b++)d[b]=0;for(b=5562;5583>=b;b++)d[b]=0;for(b=5623;5625>=b;b++)d[b]=2;for(b=5631;5639>=b;b++)d[b]=0;for(b=5649;5653>=b;b++)d[b]=0;for(b=5663;5680>=b;b++)d[b]=0;for(b=5682;5685>=b;b++)d[b]=
0;for(b=5875;5877>=b;b++)d[b]=0;for(b=5921;5940>=b;b++)d[b]=0;for(b=6050;6125>=b;b++)d[b]=0;for(b=6244;6275>=b;b++)d[b]=0;for(b=6328;6348>=b;b++)d[b]=0;for(b=6350;6356>=b;b++)d[b]=0;for(b=6366;6372>=b;b++)d[b]=0;for(b=6381;6387>=b;b++)d[b]=0;for(b=6393;6404>=b;b++)d[b]=0;for(b=6480;6483>=b;b++)d[b]=0;for(b=6511;6514>=b;b++)d[b]=0;for(b=6579;6581>=b;b++)d[b]=0;for(b=6619;6624>=b;b++)d[b]=0;for(b=6625;6627>=b;b++)d[b]=2;for(b=6628;6632>=b;b++)d[b]=0;for(b=6634;6637>=b;b++)d[b]=0;for(b=6669;6692>=b;b++)d[b]=
0;for(b=6707;6709>=b;b++)d[b]=0;for(b=6720;6723>=b;b++)d[b]=0;for(b=6732;6738>=b;b++)d[b]=0;for(b=6931;6933>=b;b++)d[b]=0;for(b=6956;6959>=b;b++)d[b]=0;for(b=7005;7007>=b;b++)d[b]=0;for(b=7057;7070>=b;b++)d[b]=2;for(b=7074;7082>=b;b++)d[b]=0;for(b=7109;7118>=b;b++)d[b]=0;for(b=7119;7127>=b;b++)d[b]=1;for(b=7374;7376>=b;b++)d[b]=0;for(b=7528;7586>=b;b++)d[b]=0;for(b=7587;7645>=b;b++)d[b]=2;for(b=7755;7787>=b;b++)d[b]=0;for(b=7791;7795>=b;b++)d[b]=0;for(b=7799;7801>=b;b++)d[b]=0;for(b=7803;7805>=b;b++)d[b]=
0;for(b=7825;7831>=b;b++)d[b]=0;for(b=7845;7859>=b;b++)d[b]=0;for(b=8013;8032>=b;b++)d[b]=0;for(b=20002;20032>=b;b++)d[b]=0;for(b=20062;20092>=b;b++)d[b]=0;for(b=20135;20138>=b;b++)d[b]=0;for(b=20248;20258>=b;b++)d[b]=0;for(b=20348;20358>=b;b++)d[b]=0;for(b=20436;20440>=b;b++)d[b]=0;for(b=20822;20824>=b;b++)d[b]=0;for(b=20934;20936>=b;b++)d[b]=0;for(b=21035;21037>=b;b++)d[b]=0;for(b=21095;21097>=b;b++)d[b]=0;for(b=21148;21150>=b;b++)d[b]=0;for(b=21413;21423>=b;b++)d[b]=0;for(b=21473;21483>=b;b++)d[b]=
0;for(b=21780;21782>=b;b++)d[b]=0;for(b=21891;21894>=b;b++)d[b]=0;for(b=21896;21899>=b;b++)d[b]=0;for(b=22171;22177>=b;b++)d[b]=0;for(b=22181;22187>=b;b++)d[b]=0;for(b=22191;22197>=b;b++)d[b]=0;for(b=22234;22236>=b;b++)d[b]=0;for(b=22521;22525>=b;b++)d[b]=0;for(b=22991;22994>=b;b++)d[b]=0;for(b=23028;23038>=b;b++)d[b]=0;for(b=23830;23853>=b;b++)d[b]=0;for(b=23866;23872>=b;b++)d[b]=0;for(b=23877;23884>=b;b++)d[b]=0;for(b=23886;23894>=b;b++)d[b]=0;for(b=23946;23948>=b;b++)d[b]=0;for(b=24311;24313>=
b;b++)d[b]=0;for(b=24342;24347>=b;b++)d[b]=0;for(b=24370;24374>=b;b++)d[b]=10;for(b=24375;24381>=b;b++)d[b]=0;for(b=24718;24721>=b;b++)d[b]=0;for(b=24817;24821>=b;b++)d[b]=0;for(b=24877;24882>=b;b++)d[b]=0;for(b=24891;24893>=b;b++)d[b]=0;for(b=25391;25395>=b;b++)d[b]=0;for(b=25828;25838>=b;b++)d[b]=0;for(b=26191;26195>=b;b++)d[b]=0;for(b=26391;26393>=b;b++)d[b]=0;for(b=26701;26722>=b;b++)d[b]=0;for(b=26729;26799>=b;b++)d[b]=2;for(b=26801;26803>=b;b++)d[b]=2;for(b=26811;26813>=b;b++)d[b]=2;for(b=26847;26870>=
b;b++)d[b]=2;for(b=26891;26899>=b;b++)d[b]=0;for(b=26901;26923>=b;b++)d[b]=0;for(b=26929;26946>=b;b++)d[b]=0;for(b=26948;26998>=b;b++)d[b]=0;for(b=27037;27040>=b;b++)d[b]=0;for(b=27205;27232>=b;b++)d[b]=0;for(b=27258;27260>=b;b++)d[b]=0;for(b=27391;27398>=b;b++)d[b]=0;for(b=27561;27564>=b;b++)d[b]=0;for(b=27571;27574>=b;b++)d[b]=0;for(b=27581;27584>=b;b++)d[b]=0;for(b=27591;27594>=b;b++)d[b]=0;for(b=28191;28193>=b;b++)d[b]=0;for(b=28348;28358>=b;b++)d[b]=0;for(b=28402;28432>=b;b++)d[b]=0;for(b=28462;28492>=
b;b++)d[b]=0;for(b=29118;29122>=b;b++)d[b]=0;for(b=29168;29172>=b;b++)d[b]=0;for(b=29177;29185>=b;b++)d[b]=0;for(b=29187;29195>=b;b++)d[b]=0;for(b=29900;29903>=b;b++)d[b]=0;for(b=30161;30179>=b;b++)d[b]=0;for(b=30491;30494>=b;b++)d[b]=0;for(b=30729;30732>=b;b++)d[b]=0;for(b=31251;31259>=b;b++)d[b]=0;for(b=31265;31268>=b;b++)d[b]=0;for(b=31275;31279>=b;b++)d[b]=0;for(b=31281;31297>=b;b++)d[b]=0;for(b=31461;31469>=b;b++)d[b]=0;for(b=31491;31495>=b;b++)d[b]=0;for(b=31917;31922>=b;b++)d[b]=0;for(b=31965;32E3>=
b;b++)d[b]=0;for(b=32001;32003>=b;b++)d[b]=2;for(b=32005;32031>=b;b++)d[b]=2;for(b=32033;32060>=b;b++)d[b]=2;for(b=32064;32067>=b;b++)d[b]=2;for(b=32074;32077>=b;b++)d[b]=2;for(b=32081;32086>=b;b++)d[b]=0;for(b=32107;32130>=b;b++)d[b]=0;for(b=32133;32158>=b;b++)d[b]=0;for(b=32164;32167>=b;b++)d[b]=2;for(b=32180;32199>=b;b++)d[b]=0;for(b=32201;32260>=b;b++)d[b]=0;for(b=32301;32360>=b;b++)d[b]=0;for(b=32601;32662>=b;b++)d[b]=0;for(b=32664;32667>=b;b++)d[b]=2;for(b=32701;32761>=b;b++)d[b]=0;for(b=53001;53004>=
b;b++)d[b]=0;for(b=53008;53019>=b;b++)d[b]=0;for(b=53021;53032>=b;b++)d[b]=0;for(b=53042;53046>=b;b++)d[b]=0;for(b=53074;53080>=b;b++)d[b]=0;for(b=54001;54004>=b;b++)d[b]=0;for(b=54008;54019>=b;b++)d[b]=0;for(b=54021;54032>=b;b++)d[b]=0;for(b=54042;54046>=b;b++)d[b]=0;for(b=54048;54053>=b;b++)d[b]=0;for(b=54074;54080>=b;b++)d[b]=0;for(b=102001;102040>=b;b++)d[b]=0;for(b=102042;102063>=b;b++)d[b]=0;for(b=102065;102067>=b;b++)d[b]=0;for(b=102070;102117>=b;b++)d[b]=0;for(b=102122;102216>=b;b++)d[b]=
0;for(b=102221;102377>=b;b++)d[b]=0;for(b=102382;102388>=b;b++)d[b]=0;for(b=102389;102398>=b;b++)d[b]=2;for(b=102399;102444>=b;b++)d[b]=0;for(b=102445;102447>=b;b++)d[b]=2;for(b=102448;102458>=b;b++)d[b]=0;for(b=102459;102468>=b;b++)d[b]=2;for(b=102469;102496>=b;b++)d[b]=0;for(b=102500;102519>=b;b++)d[b]=1;for(b=102520;102524>=b;b++)d[b]=0;for(b=102525;102529>=b;b++)d[b]=2;for(b=102530;102568>=b;b++)d[b]=0;for(b=102570;102588>=b;b++)d[b]=0;for(b=102590;102598>=b;b++)d[b]=0;for(b=102601;102603>=b;b++)d[b]=
0;for(b=102605;102628>=b;b++)d[b]=0;for(b=102629;102646>=b;b++)d[b]=2;for(b=102648;102700>=b;b++)d[b]=2;for(b=102701;102703>=b;b++)d[b]=0;for(b=102707;102730>=b;b++)d[b]=2;for(b=102733;102758>=b;b++)d[b]=2;for(b=102767;102900>=b;b++)d[b]=0;for(b=102965;102969>=b;b++)d[b]=0;for(b=102971;102973>=b;b++)d[b]=0;for(b=102975;102989>=b;b++)d[b]=0;for(b=102990;102992>=b;b++)d[b]=1;for(b=102997;103002>=b;b++)d[b]=0;for(b=103003;103008>=b;b++)d[b]=2;for(b=103009;103011>=b;b++)d[b]=0;for(b=103012;103014>=b;b++)d[b]=
2;for(b=103019;103021>=b;b++)d[b]=0;for(b=103022;103024>=b;b++)d[b]=2;for(b=103029;103031>=b;b++)d[b]=0;for(b=103032;103034>=b;b++)d[b]=2;for(b=103065;103068>=b;b++)d[b]=0;for(b=103074;103076>=b;b++)d[b]=0;for(b=103077;103079>=b;b++)d[b]=1;for(b=103080;103082>=b;b++)d[b]=0;for(b=103083;103085>=b;b++)d[b]=2;for(b=103090;103093>=b;b++)d[b]=0;for(b=103097;103099>=b;b++)d[b]=0;for(b=103100;103102>=b;b++)d[b]=2;for(b=103107;103109>=b;b++)d[b]=0;for(b=103110;103112>=b;b++)d[b]=2;for(b=103113;103116>=b;b++)d[b]=
0;for(b=103117;103120>=b;b++)d[b]=2;for(b=103153;103157>=b;b++)d[b]=0;for(b=103158;103162>=b;b++)d[b]=2;for(b=103163;103165>=b;b++)d[b]=0;for(b=103166;103168>=b;b++)d[b]=1;for(b=103169;103171>=b;b++)d[b]=2;for(b=103186;103188>=b;b++)d[b]=0;for(b=103189;103191>=b;b++)d[b]=2;for(b=103192;103195>=b;b++)d[b]=0;for(b=103196;103199>=b;b++)d[b]=2;for(b=103200;103224>=b;b++)d[b]=0;for(b=103225;103227>=b;b++)d[b]=1;for(b=103232;103237>=b;b++)d[b]=0;for(b=103238;103243>=b;b++)d[b]=2;for(b=103244;103246>=b;b++)d[b]=
0;for(b=103247;103249>=b;b++)d[b]=2;for(b=103254;103256>=b;b++)d[b]=0;for(b=103257;103259>=b;b++)d[b]=2;for(b=103264;103266>=b;b++)d[b]=0;for(b=103267;103269>=b;b++)d[b]=2;for(b=103300;103375>=b;b++)d[b]=0;for(b=103381;103383>=b;b++)d[b]=0;for(b=103384;103386>=b;b++)d[b]=1;for(b=103387;103389>=b;b++)d[b]=0;for(b=103390;103392>=b;b++)d[b]=2;for(b=103397;103399>=b;b++)d[b]=0;for(b=103400;103471>=b;b++)d[b]=2;for(b=103476;103478>=b;b++)d[b]=0;for(b=103479;103481>=b;b++)d[b]=2;for(b=103486;103488>=b;b++)d[b]=
0;for(b=103489;103491>=b;b++)d[b]=2;for(b=103492;103495>=b;b++)d[b]=0;for(b=103496;103499>=b;b++)d[b]=2;for(b=103528;103543>=b;b++)d[b]=0;for(b=103544;103548>=b;b++)d[b]=2;for(b=103549;103551>=b;b++)d[b]=0;for(b=103552;103554>=b;b++)d[b]=1;for(b=103555;103557>=b;b++)d[b]=2;for(b=103558;103560>=b;b++)d[b]=0;for(b=103571;103573>=b;b++)d[b]=0;for(b=103574;103576>=b;b++)d[b]=2;for(b=103577;103580>=b;b++)d[b]=0;for(b=103581;103583>=b;b++)d[b]=2;for(b=103600;103694>=b;b++)d[b]=0;for(b=103700;103793>=b;b++)d[b]=
2;for(b=103794;103871>=b;b++)d[b]=0;for(b=103900;103971>=b;b++)d[b]=2;return d})},"esri/layers/vectorTiles/geometry/support/webMercatorUtils":function(){define(["require","exports","../SpatialReference","./spatialReferenceUtils"],function(b,d,a,c){function e(a,b,c,d,e){if("point"===a.type&&"point"===e.type)b=b(a.x,a.y,l,0,d),e.x=b[0],e.y=b[1];else if("extent"===a.type&&"extent"===e.type)f=b(a.xmin,a.ymin,l,0,d),e.xmin=f[0],e.ymin=f[1],b=b(a.xmax,a.ymax,l,0,d),e.xmax=b[0],e.ymax=b[1];else if("polyline"===
a.type&&"polyline"===e.type||"polygon"===a.type&&"polygon"===e.type){var f="polyline"===a.type?a.paths:a.rings,k=[],h=void 0;for(a=0;a<f.length;a++){var g=f[a],h=[];k.push(h);for(var m=0;m<g.length;m++)h.push(b(g[m][0],g[m][1],[0,0],0,d)),2<g[m].length&&h[m].push(g[m][2]),3<g[m].length&&h[m].push(g[m][3])}"polyline"===e.type?e.paths=k:e.rings=k}else if("multipoint"===a.type&&"multipoint"===e.type){f=a.points;k=[];for(a=0;a<f.length;a++)k[a]=b(f[a][0],f[a][1],[0,0],0,d),2<f[a].length&&k[a].push(f[a][2]),
3<f[a].length&&k[a].push(f[a][3]);e.points=k}else if("mesh"===a.type&&"mesh"===e.type&&(f=a.vertexAttributes&&a.vertexAttributes.position,k=e.vertexAttributes&&e.vertexAttributes.position,f))for(h=[0,0],a=0;a<f.length;a+=3)b(f[a],f[a+1],h,0,d),k[a]=h[0],k[a+1]=h[1];e.spatialReference=c;return e;var f}function g(a,b){var d=a&&(null!=a.wkid||null!=a.wkt?a:a.spatialReference),e=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return d&&e?c.equals(e,d)?!0:c.isWebMercator(e)&&c.isWGS84(d)||c.isWebMercator(d)&&
c.isWGS84(e):!1}function h(a,b,c,d){void 0===c&&(c=[0,0]);void 0===d&&(d=0);89.99999<b?b=89.99999:-89.99999>b&&(b=-89.99999);b*=.017453292519943;c[d]=111319.49079327169*a;c[d+1]=3189068.5*Math.log((1+Math.sin(b))/(1-Math.sin(b)));return c}function f(a,b,c,d,e){void 0===c&&(c=[0,0]);void 0===d&&(d=0);void 0===e&&(e=!1);a=a/6378137*57.29577951308232;c[d]=e?a:a-360*Math.floor((a+180)/360);c[d+1]=57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*b/6378137)));return c}Object.defineProperty(d,
"__esModule",{value:!0});var l=[0,0];d.canProject=g;d.project=function(b,d){var k=b&&b.spatialReference,l=d&&(null!=d.wkid||null!=d.wkt?d:d.spatialReference);return g(k,l)?c.equals(k,l)?b.clone():c.isWebMercator(l)?e(b,h,a.WebMercator,!1,b.clone()):c.isWGS84(l)?e(b,f,a.WGS84,!1,b.clone()):null:null};d.lngLatToXY=h;d.xyToLngLat=f;d.geographicToWebMercator=function(b,c,d){void 0===c&&(c=!1);void 0===d&&(d=b.clone());return e(b,h,a.WebMercator,c,d)};d.webMercatorToGeographic=function(b,c,d){void 0===
c&&(c=!1);void 0===d&&(d=b.clone());return e(b,f,a.WGS84,c,d)}})},"esri/layers/vectorTiles/renderers/support/diffUtils":function(){define("require exports dojo/_base/lang ../../core/Accessor ../../core/Collection ../../core/accessorSupport/utils".split(" "),function(b,d,a,c,e,g){function h(a){return a instanceof e?Object.keys(a.items):a instanceof c?g.getProperties(a).keys():a?Object.keys(a):[]}function f(a,b){return a instanceof e?a.items[b]:a[b]}function l(a,b){return Array.isArray(a)&&Array.isArray(b)?
a.length!==b.length:!1}function k(a){return a?a.declaredClass:null}function m(b,d){var e=b.diff;if(e&&a.isFunction(e))return e(b,d);var g=h(b),q=h(d);if(0!==g.length||0!==q.length){if(!g.length||!q.length||l(b,d))return{type:"complete",oldValue:b,newValue:d};var x=q.filter(function(a){return-1===g.indexOf(a)}),r=g.filter(function(a){return-1===q.indexOf(a)}),x=g.filter(function(a){return-1<q.indexOf(a)&&f(b,a)!==f(d,a)}).concat(x,r).sort();if((r=k(b))&&-1<t.indexOf(r)&&x.length)return{type:"complete",
oldValue:b,newValue:d};var n,r=b instanceof c&&d instanceof c,p;for(p in x){var z=x[p],A=f(b,z),B=f(d,z),D=void 0;!r&&(a.isFunction(A)||a.isFunction(B))||A===B||null==A&&null==B||!(D=e&&e[z]&&a.isFunction(e[z])?e[z](A,B):"object"===typeof A&&"object"===typeof B&&k(A)===k(B)?m(A,B):{type:"complete",oldValue:A,newValue:B})||(n=n||{type:"partial",diff:{}},n.diff[z]=D)}return n}}Object.defineProperty(d,"__esModule",{value:!0});var t=["esri.Color","esri.portal.Portal"];d.diff=function(b,c){if(!a.isFunction(b)&&
!a.isFunction(c)&&(b||c))return!b||!c||"object"===typeof b&&"object"===typeof b&&k(b)!==k(c)?{type:"complete",oldValue:b,newValue:c}:m(b,c)}})},"esri/layers/vectorTiles/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./Accessor ./ArrayPool ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),function(b,d,a,c,e,g,h,f,l,k,m,t,q){function r(a){return a?a.isInstanceOf&&
a.isInstanceOf(D)?!0:!1:!1}function w(a){return a?r(a)?a.toArray():a.length?Array.prototype.slice.apply(a):[]:[]}function v(a){if(a&&a.length)return a[0]}function u(a,b,c,d){b&&b.forEach(function(b,e,n){a.push(b);u(a,c.call(d,b,e,n),c,d)})}b=function(){function a(){this.target=null;this.defaultPrevented=this.cancellable=!1}a.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};a.prototype.reset=function(a){this.defaultPrevented=!1;this.item=a};return a}();var x=function(){},
y=new k(b,!0,function(a){a.item=null;a.target=null}),n=new Set,p=new Set,z=new Set,A=new Map,B=0,D=function(b){function d(a){a=b.call(this,a)||this;a._boundDispatch=a._dispatchColChange.bind(a);a._chgListeners=[];a._notifications=null;a._timer=null;a.length=0;a._items=[];Object.defineProperty(a,"uid",{value:B++});return a}a(d,b);f=d;d.ofType=function(a){if(!a)return f;if(A.has(a))return A.get(a);var b;if("function"===typeof a)b=a.prototype.declaredClass;else if(a.base)b=a.base.prototype.declaredClass;
else for(var c in a.typeMap){var d=a.typeMap[c].prototype.declaredClass;b=b?b+(" | "+d):d}b=f.createSubclass({declaredClass:"esri.core.Collection\x3c"+b+"\x3e"});c={Type:a,ensureType:"function"===typeof a?q.ensureType(a):q.ensureOneOfType(a)};Object.defineProperty(b.prototype,"itemType",{value:c});A.set(a,b);return b};d.prototype.normalizeCtorArgs=function(a){return a?Array.isArray(a)||r(a)?{items:a}:a:{}};Object.defineProperty(d.prototype,"items",{get:function(){return this._items},set:function(a){this._emitBeforeChanges()||
(this._splice.apply(this,[0,this.length].concat(w(a))),this._emitAfterChanges())},enumerable:!0,configurable:!0});d.prototype.on=function(a,b){var c;Array.isArray(a)?c=a:-1<a.indexOf(",")&&(c=a.split(/\s*,\s*/));if(c){for(var d=[],n=0;n<c.length;n++)d.push(this.on(c[n],b));d.remove=function(){for(var a=0;a<d.length;a++)d[a].remove()};return d}if("change"===a){var p=this._chgListeners,f={removed:!1,callback:b};p.push(f);this._notifications&&this._notifications.push({listeners:p.slice(),items:this._items.slice(),
changes:[]});return{remove:function(){this.remove=x;f.removed=!0;p.splice(p.indexOf(f),1)}}}return e.after(this,"on"+a,b,!0)};d.prototype.hasEventListener=function(a){return"change"===a?0<this._chgListeners.length:this.inherited(arguments)};d.prototype.add=function(a,b){if(this._emitBeforeChanges())return this;var c=this.getNextIndex(b);this._splice(c,0,a);this._emitAfterChanges();return this};d.prototype.addMany=function(a,b){void 0===b&&(b=this._items.length);if(!a||!a.length||this._emitBeforeChanges())return this;
var c=this.getNextIndex(b);this._splice.apply(this,[c,0].concat(w(a)));this._emitAfterChanges();return this};d.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var a=this._splice(0,this.length)||[];this._emitAfterChanges();return a};d.prototype.clone=function(){return this._createNewInstance({items:this._items.map(l.clone)})};d.prototype.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a=a.map(w);return this._createNewInstance({items:(c=
this._items).concat.apply(c,a)});var c};d.prototype.drain=function(a,b){if(this.length&&!this._emitBeforeChanges()){for(var c=this._splice(0,this.length),d=c.length,e=0;e<d;e++)a.call(b,c[e],e,c);this._emitAfterChanges()}};d.prototype.every=function(a,b){return this._items.every(a,b)};d.prototype.filter=function(a,b){var c;c=2===arguments.length?this._items.filter(a,b):this._items.filter(a);return this._createNewInstance({items:c})};d.prototype.find=function(a,b){if("function"!==typeof a)throw new TypeError(a+
" is not a function");for(var c=this._items,d=c.length,e=0;e<d;e++){var n=c[e];if(a.call(b,n,e,c))return n}};d.prototype.findIndex=function(a,b){if("function"!==typeof a)throw new TypeError(a+" is not a function");for(var c=this._items,d=c.length,e=0;e<d;e++)if(a.call(b,c[e],e,c))return e;return-1};d.prototype.flatten=function(a,b){var c=[];u(c,this,a,b);return new f(c)};d.prototype.forEach=function(a,b){for(var c=this._items,d=c.length,e=0;e<d;e++)a.call(b,c[e],e,c)};d.prototype.getItemAt=function(a){return this._items[a]};
d.prototype.getNextIndex=function(a){var b=this.length;a=null==a?b:a;0>a?a=0:a>b&&(a=b);return a};d.prototype.includes=function(a,b){void 0===b&&(b=0);return arguments.length?-1!==this._items.indexOf(a,b):!1};d.prototype.indexOf=function(a,b){void 0===b&&(b=0);return this._items.indexOf(a,b)};d.prototype.join=function(a){void 0===a&&(a=",");return this._items.join(a)};d.prototype.lastIndexOf=function(a,b){void 0===b&&(b=this.length-1);return this._items.lastIndexOf(a,b)};d.prototype.map=function(a,
b){var c=this._items.map(a,b);return new f({items:c})};d.prototype.reorder=function(a,b){void 0===b&&(b=this.length-1);var c=this.indexOf(a);if(-1!==c){0>b?b=0:b>=this.length&&(b=this.length-1);if(c!==b){if(this._emitBeforeChanges())return a;this._splice(c,1);this._splice(b,0,a);this._emitAfterChanges()}return a}};d.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var a=v(this._splice(this.length-1,1));this._emitAfterChanges();return a}};d.prototype.push=function(){for(var a=[],
b=0;b<arguments.length;b++)a[b]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(a));this._emitAfterChanges();return this.length};d.prototype.reduce=function(a,b){var c=this._items;return 2===arguments.length?c.reduce(a,b):c.reduce(a)};d.prototype.reduceRight=function(a,b){var c=this._items;return 2===arguments.length?c.reduceRight(a,b):c.reduceRight(a)};d.prototype.remove=function(a){return this.removeAt(this.indexOf(a))};d.prototype.removeAt=
function(a){if(!(0>a||a>=this.length||this._emitBeforeChanges()))return a=v(this._splice(a,1)),this._emitAfterChanges(),a};d.prototype.removeMany=function(a){if(!a||!a.length||this._emitBeforeChanges())return[];a=r(a)?a.toArray():a;for(var b=this._items,c=[],d=a.length,e=0;e<d;e++){var n=b.indexOf(a[e]);if(-1<n){for(var p=e+1,f=n+1,z=Math.min(a.length-p,b.length-f),h=0;h<z&&a[p+h]===b[f+h];)h++;p=1+h;(n=this._splice(n,p))&&0<n.length&&c.push.apply(c,n);e+=p-1}}this._emitAfterChanges();return c};d.prototype.reverse=
function(){if(this._emitBeforeChanges())return this;var a=this._splice(0,this.length);a&&(a.reverse(),this._splice.apply(this,[0,0].concat(a)));this._emitAfterChanges();return this};d.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var a=v(this._splice(0,1));this._emitAfterChanges();return a}};d.prototype.slice=function(a,b){void 0===a&&(a=0);void 0===b&&(b=this.length);return this._createNewInstance({items:this._items.slice(a,b)})};d.prototype.some=function(a,b){return this._items.some(a,
b)};d.prototype.sort=function(a){if(!this.length||this._emitBeforeChanges())return this;var b=this._splice(0,this.length);arguments.length?b.sort(a):b.sort();this._splice.apply(this,[0,0].concat(b));return this};d.prototype.splice=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];if(this._emitBeforeChanges())return[];c=this._splice.apply(this,[a,b].concat(c))||[];this._emitAfterChanges();return c};d.prototype.toArray=function(){return this._items.slice()};d.prototype.toJSON=
function(){return this.toArray()};d.prototype.toLocaleString=function(){return this._items.toLocaleString()};d.prototype.toString=function(){return this._items.toString()};d.prototype.unshift=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(a));this._emitAfterChanges();return this.length};d.prototype._createNewInstance=function(a){return new this.constructor(a)};d.prototype._splice=function(a,
b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];var d=this._items,e=this.constructor.prototype.itemType,n,p;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=m.schedule(this._boundDispatch));if(b){p=d.splice(a,b);if(this.hasEventListener("before-remove")){var f=y.acquire();f.target=this;f.cancellable=!0;for(var z=0,h=p.length;z<h;z++)n=
p[z],f.reset(n),this.emit("before-remove",f),f.defaultPrevented&&(p.splice(z,1),d.splice(a,0,n),a+=1,--z,--h);y.release(f)}this.length=this._items.length;if(this.hasEventListener("after-remove")){n=y.acquire();n.target=this;n.cancellable=!1;h=p.length;for(z=0;z<h;z++)n.reset(p[z]),this.emit("after-remove",n);y.release(n)}this._notifyChangeEvent(null,p)}if(c&&c.length){if(e){z=[];for(h=0;h<c.length;h++)n=c[h],f=e.ensureType(n),null==f&&null!=n||z.push(f);c=z}e=this.hasEventListener("before-add");z=
this.hasEventListener("after-add");h=a===this.length;if(e||z){n=y.acquire();n.target=this;n.cancellable=!0;f=y.acquire();f.target=this;f.cancellable=!1;for(var k=0,g=c;k<g.length;k++){var l=g[k];e?(n.reset(l),this.emit("before-add",n),n.defaultPrevented||(h?d.push(l):d.splice(a++,0,l),this._set("length",d.length),z&&(f.reset(l),this.emit("after-add",f)))):(h?d.push(l):d.splice(a++,0,l),this._set("length",d.length),f.reset(l),this.emit("after-add",f))}y.release(n)}else h?d.push.apply(d,c):d.splice.apply(d,
[a,0].concat(c)),this._set("length",d.length);this._notifyChangeEvent(c,null)}return p};d.prototype._emitBeforeChanges=function(){var a=!1;if(this.hasEventListener("before-changes")){var b=y.acquire();b.target=this;b.cancellable=!0;this.emit("before-changes",b);a=b.defaultPrevented;y.release(b)}return a};d.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var a=y.acquire();a.target=this;a.cancellable=!1;this.emit("after-changes",a);y.release(a)}};d.prototype._notifyChangeEvent=
function(a,b){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:a,removed:b})};d.prototype._dispatchColChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var a=this._notifications;this._notifications=null;for(var b=function(a){var b=a.changes;n.clear();p.clear();z.clear();for(var d=0;d<b.length;d++){var e=b[d],f=e.added,e=e.removed;if(f)if(0===z.size&&0===p.size)for(var k=0,g=f;k<g.length;k++)f=g[k],n.add(f);
else for(k=0,g=f;k<g.length;k++)f=g[k],p.has(f)?(z.add(f),p.delete(f)):z.has(f)||n.add(f);if(e)if(0===z.size&&0===n.size)for(k=0;k<e.length;k++)f=e[k],p.add(f);else for(k=0;k<e.length;k++)f=e[k],n.has(f)?n.delete(f):(z.delete(f),p.add(f))}var l=h.acquire();n.forEach(function(a){l.push(a)});var m=h.acquire();p.forEach(function(a){m.push(a)});var A=c._items,q=a.items,x=h.acquire();z.forEach(function(a){q.indexOf(a)!==A.indexOf(a)&&x.push(a)});if(a.listeners&&(l.length||m.length||x.length))for(b={target:c,
added:l,removed:m,moved:x},d=a.listeners.length,f=0;f<d;f++)e=a.listeners[f],e.removed||e.callback.call(c,b);h.release(l);h.release(m);h.release(x)},c=this,d=0;d<a.length;d++)b(a[d]);n.clear();p.clear();z.clear()}};d.isCollection=r;c([t.property()],d.prototype,"length",void 0);c([t.property()],d.prototype,"items",null);return d=f=c([t.subclass("esri.core.Collection")],d);var f}(t.declared(g,f));return D})},"esri/layers/vectorTiles/core/Evented":function(){define(["require","exports","dojo/aspect",
"dojo/on"],function(b,d,a,c){function e(a,b,c,d){var f;Array.isArray(b)?f=b:-1<b.indexOf(",")&&(f=b.split(/\s*,\s*/));if(f){var h=[];for(b=0;b<f.length;b++)h.push(e(a,f[b],c,d));h.remove=function(){for(var a=0;a<h.length;a++)h[a].remove()};return h}return d(a,b)}return function(){function b(){}b.prototype.emit=function(a,b){if(this.hasEventListener(a))return b=b||{},b.target||(b.target=this),c.emit(this,a,b)};b.prototype.on=function(b,c){return e(this,b,c,function(b,d){return a.after(b,"on"+d,c,!0)})};
b.prototype.hasEventListener=function(a){a="on"+a;return!(!this[a]||!this[a].after)};return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileData":function(){define("require exports ./MemoryRequirements ./TileBufferData ./TileDisplayData ./Utils ./WGLDisplayList ./WGLDisplayRecord ./util/Reader ./util/Writer".split(" "),function(b,d,a,c,e,g,h,f,l,k){var m=new g.ValuesGetter,t=new a.default,q=new a.default;return function(){function a(){this.tileBufferData=this.tileDisplayData=null}a.prototype.reshuffle=
function(){t.reset();var b=this._collectDisplayRecords(),d;for(d in b)for(var e=b[d],f=0,k=e;f<k.length;f++){var n=k[f];t.needMore(n.geometryType,n.meshData?n.meshData.vertexCount:n.vertexCount,n.meshData?n.meshData.indexData.length:n.indexCount)}f=b.length;k=new c;for(d=0;d<f;++d){k.geometries[d].indexBuffer=new Uint32Array(Math.round(1.15*t.indicesFor(d)));var n=[],p;for(p in this.tileBufferData.geometries[d].vertexBuffer)n.push(this.tileBufferData.geometries[d].vertexBuffer[p].stride);var n=a._computeVertexAlignment(n),
e=Math.round(1.15*t.verticesFor(d)),n=a._align(e,n),z;for(z in this.tileBufferData.geometries[d].vertexBuffer)e=this.tileBufferData.geometries[d].vertexBuffer[z].stride,k.geometries[d].vertexBuffer[z]={stride:e,data:new Uint32Array(Math.round(n*e/4))}}q.reset();this.tileDisplayData.displayList=new h;for(d=0;d<f;++d){e=b[d];p=0;for(z=e;p<z.length;p++)n=z[p],n.meshData||n.readMeshDataFromBuffers(this.tileBufferData.geometries[d].vertexBuffer,this.tileBufferData.geometries[d].indexBuffer),n.writeMeshDataToBuffers(q.verticesFor(d),
k.geometries[d].vertexBuffer,q.indicesFor(d),k.geometries[d].indexBuffer),n.meshData=null,q.needMore(d,n.vertexCount,n.indexCount);this.tileDisplayData.displayList.addToList(e)}this.tileBufferData=k};a.prototype.getStrides=function(){for(var a=[],b=0;b<this.tileBufferData.geometries.length;++b){var c=this.tileBufferData.geometries[b];a[b]={};for(var d in c.vertexBuffer)a[b][d]=c.vertexBuffer[d].stride}return a};a.prototype._guessSize=function(){for(var a=this.tileDisplayData.displayObjects,b=Math.min(a.length,
4),c=0,d=0;d<b;d++)c=Math.max(c,a[d].displayRecords.length);return 2*(12*a.length+a.length*c*40)};a.prototype.serialize=function(){var a=this.tileBufferData.serialize(),b=this.tileBufferData.getBuffers(),c=this.tileDisplayData.serialize(new k.default(this._guessSize())).buffer();b.push(c);return{result:{displayData:c,bufferData:a},transferList:b}};a.deserialize=function(b){var d=e.deserialize(new l.default(b.displayData));b=c.deserialize(b.bufferData);var f=new a;f.tileDisplayData=d;f.tileBufferData=
b;return f};a.bind=function(b,c){var d=new a;d.tileDisplayData=b;d.tileBufferData=c;return d};a.create=function(b,d){var h=new a;h.tileDisplayData=new e;h.tileDisplayData.displayObjects=b;for(var k=[0,0,0,0],g=[0,0,0,0],n=[[],[],[],[]],p=0;p<b.length;p++)for(var z=0,l=b[p].displayRecords;z<l.length;z++){var m=l[z];n[m.geometryType].push(m);k[m.geometryType]+=m.meshData.vertexCount;g[m.geometryType]+=m.meshData.indexData.length}p=new c;z=[d.fill||{},d.line||{},d.icon||{},d.text||{}];for(l=0;4>l;l++){var m=
new Uint32Array(g[l]),q;q=z[l];var t=k[l],w={},r=void 0;for(r in q){var v={data:new Uint32Array(t*q[r]/4),stride:q[r]};w[r]=v}q=w;f.writeAllMeshDataToBuffers(n[l],q,m);p.geometries[l]={indexBuffer:m,vertexBuffer:q}}h.tileBufferData=p;return h};a._align=function(a,b){var c=a%b;return 0===c?a:a+(b-c)};a._computeVertexAlignment=function(a){for(var b=!1,c=!1,d=0;d<a.length;d++){var e=a[d];2===e%4?b=!0:0!==e%4&&(c=!0)}return c?4:b?2:1};a.prototype._collectDisplayRecords=function(){for(var a=[[],[],[],
[]],b=0,c=m.getValues(this.tileDisplayData.displayObjectRegistry);b<c.length;b++)for(var d=0,e=c[b].displayRecords;d<e.length;d++){var n=e[d];a[n.geometryType].push(n)}return a};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MemoryRequirements":function(){define(["require","exports"],function(b,d){Object.defineProperty(d,"__esModule",{value:!0});var a=function(){function a(){this._byGeometryType=null}Object.defineProperty(a.prototype,"satisfied",{get:function(){return!this._byGeometryType},
enumerable:!0,configurable:!0});a.prototype.reset=function(){this._byGeometryType=null};a.prototype.verticesFor=function(a){return this._byGeometryType?this._byGeometryType[a].vertices:0};a.prototype.indicesFor=function(a){return this._byGeometryType?this._byGeometryType[a].indices:0};a.prototype.needMore=function(a,b,c){if(b||c)this._byGeometryType||(this._byGeometryType=[{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0}]),a=this._byGeometryType[a],a.vertices+=
b,a.indices+=c};return a}();d.default=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileBufferData":function(){define(["require","exports"],function(b,d){return function(){function a(){this.geometries=[{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}}]}a.deserialize=function(b){for(var c=new a,d=0;4>d;++d){c.geometries[d].indexBuffer=new Uint32Array(b.geometries[d].indexBuffer);c.geometries[d].vertexBuffer=
{};for(var h in b.geometries[d].vertexBuffer)c.geometries[d].vertexBuffer[h]={data:new Uint32Array(b.geometries[d].vertexBuffer[h].data),stride:b.geometries[d].vertexBuffer[h].stride}}return c};a.prototype.serialize=function(){for(var a={geometries:[{indexBuffer:this.geometries[0].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[1].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[2].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[3].indexBuffer.buffer,
vertexBuffer:{}}]},b=0;4>b;++b)for(var d in this.geometries[b].vertexBuffer)a.geometries[b].vertexBuffer[d]={data:this.geometries[b].vertexBuffer[d].data.buffer,stride:this.geometries[b].vertexBuffer[d].stride};return a};a.prototype.getBuffers=function(){for(var a=[],b=0;4>b;++b){a.push(this.geometries[b].indexBuffer.buffer);for(var d in this.geometries[b].vertexBuffer)a.push(this.geometries[b].vertexBuffer[d].data.buffer)}return a};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileDisplayData":function(){define(["require",
"exports","./WGLDisplayList","./WGLDisplayObject","./util/serializationUtils"],function(b,d,a,c,e){return function(){function b(){}Object.defineProperty(b.prototype,"displayObjectRegistry",{get:function(){if(!this._displayObjectRegistry){this._displayObjectRegistry=new Map;for(var a=0,b=this.displayObjects;a<b.length;a++){var c=b[a];this._displayObjectRegistry.set(c.id,c)}}return this._displayObjectRegistry},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"displayList",{get:function(){if(!this._displayList){this._displayList=
new a;for(var b=0,c=this.displayObjects;b<c.length;b++)for(var d=0,e=c[b].displayRecords;d<e.length;d++)this._displayList.addToList(e[d])}return this._displayList},set:function(a){this._displayList=a},enumerable:!0,configurable:!0});b.prototype.serialize=function(a){e.serializeList(a,this.displayObjects);return a};b.prototype._deserializeObjects=function(b){for(var d=b.readInt32(),d=Array(d),e=new a,k=new Map,h=0;h<d.length;++h){var g=c.deserialize(b);d[h]=g;k.set(g.id,g);for(var q=0,g=g.displayRecords;q<
g.length;q++)e.addToList(g[q])}this.displayObjects=d;this._displayList=e;this._displayObjectRegistry=k};b.deserialize=function(a){var c=new b;c._deserializeObjects(a);return c};return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLDisplayList":function(){define("require exports ../../../../core/tsSupport/generatorHelper ../../../../core/Logger ./enums ./MaterialInfo ./Utils ./util/serializationUtils".split(" "),function(b,d,a,c,e,g,h,f){var l=c.getLogger("esri.views.2d.engine.webgl.WGLDisplayList");
b=function(){function b(){this.symbolLevels=[]}Object.defineProperty(b.prototype,"empty",{get:function(){return!this.symbolLevels||0===this.symbolLevels.length},enumerable:!0,configurable:!0});b.prototype.addToList=function(a){var b=this;Array.isArray(a)?a.forEach(function(a){b._addToList(a)}):this._addToList(a)};b.prototype.removeFromList=function(a){var b=this;Array.isArray(a)||(a=[a]);a.forEach(function(a){b._removeFromList(a)})};b.prototype.ofType=function(b){var c,d,e,f,n,p,z,k,h,g,l;return a(this,
function(a){switch(a.label){case 0:c=0,d=this.symbolLevels,a.label=1;case 1:if(!(c<d.length))return[3,8];e=d[c];f=0;n=e.zLevels;a.label=2;case 2:if(!(f<n.length))return[3,7];p=n[f];z=p.geometryDPInfo;k=this._getDPInfoType(b);if(!z[k])return[3,6];h=0;g=z[k];a.label=3;case 3:if(!(h<g.length))return[3,6];l=g[h];return[4,l];case 4:a.sent(),a.label=5;case 5:return h++,[3,3];case 6:return f++,[3,2];case 7:return c++,[3,1];case 8:return[2]}})};b.prototype._addToList=function(a){var b=this._getDisplayList(a.symbolLevel,
a.zOrder,a.geometryType),c=0<b.length?b[b.length-1]:null;null!==c&&h.isSameMaterialInfo(c.materialInfo,a.materialInfo)&&c.indexFrom+c.indexCount===a.indexFrom?c.indexCount+=a.indexCount:(c=new k,c.indexFrom=a.indexFrom,c.indexCount=a.indexCount,c.materialInfo=a.materialInfo,c.geometryType=a.geometryType,b.push(c))};b.prototype._removeFromList=function(a){for(var b=this._getDisplayList(a.symbolLevel,a.zOrder,a.geometryType),c=b.length,d=void 0,e=0;e<c;++e){var n=b[e];a.indexFrom+a.indexCount>n.indexFrom&&
a.indexFrom<n.indexFrom+n.indexCount&&(d=e)}if(void 0!==d)if(n=b[d],a.indexFrom<n.indexFrom)n.indexCount-=a.indexCount,n.indexFrom+=a.indexCount;else if(a.indexFrom+a.indexCount>n.indexFrom+n.indexCount)n.indexCount-=a.indexCount;else{var c=n.indexFrom,e=a.indexFrom-n.indexFrom,p=a.indexCount;a=n.indexFrom+n.indexCount-(a.indexFrom+a.indexCount);n.indexCount=e;var f=new k;f.geometryType=n.geometryType;f.materialInfo=new g.default;f.materialInfo.copy(n.materialInfo);f.indexFrom=c+e+p;f.indexCount=
a;b.splice(d+1,0,f)}};b.prototype._getDisplayList=function(a,b,c){for(var d,f=this.symbolLevels.length,n=0;n<f;n++)if(this.symbolLevels[n].symbolLevel===a){d=this.symbolLevels[n];break}d||(d=new q,d.symbolLevel=a,this.symbolLevels.push(d));var p;a=d.zLevels.length;for(f=0;f<a;f++)if(d.zLevels[f].zLevel===b){p=d.zLevels[f];break}p||(p=new t,p.geometryDPInfo=new m,p.zLevel=b,d.zLevels.push(p));var z;switch(c){case e.WGLGeometryType.FILL:p.geometryDPInfo.fill||(p.geometryDPInfo.fill=[]);z=p.geometryDPInfo.fill;
break;case e.WGLGeometryType.LINE:p.geometryDPInfo.line||(p.geometryDPInfo.line=[]);z=p.geometryDPInfo.line;break;case e.WGLGeometryType.MARKER:p.geometryDPInfo.marker||(p.geometryDPInfo.marker=[]);z=p.geometryDPInfo.marker;break;case e.WGLGeometryType.TEXT:p.geometryDPInfo.text||(p.geometryDPInfo.text=[]);z=p.geometryDPInfo.text;break;default:console.error("Trying to add a record with geometry type '"+c+"'.")}return z};b.prototype.serialize=function(a){f.serializeList(a,this.symbolLevels);return a};
b.deserialize=function(a){var c=new b;c.symbolLevels=f.deserializeList(a,q);return c};b.prototype._getDPInfoType=function(a){switch(a){case e.WGLGeometryType.FILL:return"fill";case e.WGLGeometryType.LINE:return"line";case e.WGLGeometryType.MARKER:return"marker";case e.WGLGeometryType.TEXT:return"text";default:l.error("DisplayList: Tried to convert unknown geometryType: "+a)}};return b}();var k=function(){function a(){this.materialInfo=null;this.indexCount=this.indexFrom=0}a.prototype.serialize=function(a){this.materialInfo.serialize(a);
a.writeInt32(this.indexFrom);a.writeInt32(this.indexCount);return a};a.deserialize=function(b,c){var d=new a;d.geometryType=c.geometryType;d.materialInfo=g.default.deserialize(b);d.indexFrom=b.readInt32();d.indexCount=b.readInt32();return d};return a}(),m=function(){function a(){this.text=this.marker=this.line=this.fill=null}a.prototype.serialize=function(a){f.serializeList(a,this.fill);f.serializeList(a,this.line);f.serializeList(a,this.marker);f.serializeList(a,this.text);return a};a.deserialize=
function(b){var c=new a,d={geometryType:e.WGLGeometryType.FILL},h=f.deserializeList(b,k,d);h.length&&(c.fill=h);d.geometryType=e.WGLGeometryType.LINE;h=f.deserializeList(b,k,d);h.length&&(c.line=h);d.geometryType=e.WGLGeometryType.MARKER;h=f.deserializeList(b,k,d);h.length&&(c.marker=h);d.geometryType=e.WGLGeometryType.TEXT;b=f.deserializeList(b,k,d);b.length&&(c.text=b);return c};return a}(),t=function(){function a(){this.geometryDPInfo=new m}a.prototype.serialize=function(a){a.writeInt32(this.zLevel);
this.geometryDPInfo.serialize(a);return a};a.deserialize=function(b){var c=new a;c.zLevel=b.readInt32();c.geometryDPInfo=m.deserialize(b);return c};return a}(),q=function(){function a(){this.zLevels=[]}a.prototype.serialize=function(a){a.writeInt32(this.symbolLevel);f.serializeList(a,this.zLevels);return a};a.deserialize=function(b){var c=new a;c.symbolLevel=b.readInt32();c.zLevels=f.deserializeList(b,t);return c};return a}();return b})},"esri/layers/vectorTiles/core/tsSupport/generatorHelper":function(){define([],
function(){return function(b,d){function a(a){return function(b){return c([a,b])}}function c(a){if(g)throw new TypeError("Generator is already executing.");for(;e;)try{if(g=1,h&&(f=h[a[0]&2?"return":a[0]?"throw":"next"])&&!(f=f.call(h,a[1])).done)return f;if(h=0,f)a=[0,f.value];switch(a[0]){case 0:case 1:f=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++;h=a[1];a=[0];continue;case 7:a=e.ops.pop();e.trys.pop();continue;default:if(!(f=e.trys,f=0<f.length&&f[f.length-1])&&(6===a[0]||
2===a[0])){e=0;continue}if(3===a[0]&&(!f||a[1]>f[0]&&a[1]<f[3]))e.label=a[1];else if(6===a[0]&&e.label<f[1])e.label=f[1],f=a;else if(f&&e.label<f[2])e.label=f[2],e.ops.push(a);else{f[2]&&e.ops.pop();e.trys.pop();continue}}a=d.call(b,e)}catch(m){a=[6,m],h=0}finally{g=f=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var e={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},g,h,f,l;return l={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=
function(){return this}),l}})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLDisplayObject":function(){define(["require","exports","./WGLDisplayRecord","./util/serializationUtils"],function(b,d,a,c){return function(){function b(a){this.displayRecords=[];this.id=a}b.prototype.serialize=function(a){a.writeInt32(this.id);c.serializeList(a,this.displayRecords);return a};b.deserialize=function(d){var e=d.readInt32(),f=new b(e);f.displayRecords=c.deserializeList(d,a,{id:e});return f};return b}()})},
"esri/layers/vectorTiles/views/2d/engine/webgl/WGLDisplayRecord":function(){define(["require","exports","./enums","./MaterialInfo","./MeshData"],function(b,d,a,c,e){return function(){function b(){this.id=-1;this.geometryType=a.WGLGeometryType.UNKNOWN;this.materialInfo=this.meshData=null;this.indexCount=this.indexFrom=this.vertexCount=this.vertexFrom=this.zOrder=this.symbolLevel=0}Object.defineProperty(b.prototype,"sortKey",{get:function(){void 0===this._sortKey&&this._computeSortKey();return this._sortKey},
enumerable:!0,configurable:!0});b.prototype.setData=function(a,b,c,d,e,g){this.id=a;this.geometryType=b;this.meshData=c;this.materialInfo=d;this.symbolLevel=e;this.zOrder=g};b.prototype.readMeshDataFromBuffers=function(a,b){this.meshData?this.meshData.clear():this.meshData=new e;for(var c in a){for(var d=a[c].stride,f=a[c].data,h=[],g=0;g<d*this.vertexCount/4;++g)h[g]=f[g+d*this.vertexFrom/4];this.meshData.vertexData.set(c,h)}for(g=this.meshData.indexData.length=0;g<this.indexCount;++g)this.meshData.indexData[g]=
b[g+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount};b.prototype.writeMeshDataToBuffers=function(a,b,c,d){for(var e in b)for(var f=b[e].stride,h=this.meshData.vertexData.get(e),k=b[e].data,g=0;g<f*this.meshData.vertexCount/4;++g)k[g+f*a/4]=h[g];for(g=0;g<this.meshData.indexData.length;++g)d[g+c]=this.meshData.indexData[g]+a;this.vertexFrom=a;this.vertexCount=this.meshData.vertexCount;this.indexFrom=c;this.indexCount=this.meshData.indexData.length};b.writeAllMeshDataToBuffers=
function(a,b,c){for(var d=0,e=0,f=0;f<a.length;f++){var h=a[f];h.writeMeshDataToBuffers(d,b,e,c);d+=h.vertexCount;e+=h.indexCount}};b.prototype._computeSortKey=function(){this._sortKey=(this.symbolLevel&31)<<12|(this.zOrder&127)<<4|this.geometryType&7};b.prototype.serialize=function(a){a.writeInt32(this.geometryType);this.materialInfo.serialize(a);a.writeInt32(this.symbolLevel);a.writeInt32(this.zOrder);a.writeInt32(this.vertexFrom);a.writeInt32(this.vertexCount);a.writeInt32(this.indexFrom);a.writeInt32(this.indexCount);
return a};b.deserialize=function(a,d){var e=new b;e.id=d.id;e.geometryType=a.readInt32();e.materialInfo=c.default.deserialize(a);e.symbolLevel=a.readInt32();e.zOrder=a.readInt32();e.vertexFrom=a.readInt32();e.vertexCount=a.readInt32();e.indexFrom=a.readInt32();e.indexCount=a.readInt32();e.meshData=null;return e};return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MeshData":function(){define(["require","exports"],function(b,d){return function(){function a(){this.vertexData=new Map;this.vertexCount=
0;this.indexData=[]}a.prototype.clear=function(){this.vertexData.clear();this.vertexCount=0;this.indexData=[]};a.prototype.update=function(a,b,d){for(var c in a)this.vertexData.set(c,a[c]);for(c in this.vertexData)null===a[c]&&this.vertexData.delete(c);this.vertexCount=b;this.indexData=d};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/Reader":function(){define(["require","exports"],function(b,d){Object.defineProperty(d,"__esModule",{value:!0});var a=function(){function a(a){this._pos=
0;this._buffer=a;this._view=new Int32Array(this._buffer)}a.prototype.readInt32=function(){return this._view[this._pos++]};return a}();d.default=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/Writer":function(){define(["require","exports"],function(b,d){Object.defineProperty(d,"__esModule",{value:!0});var a=function(){function a(a){this._pos=0;a=a?this._roundToNearest4(a):40;this._array=new ArrayBuffer(a);this._buffer=new Int32Array(this._array)}a.prototype._roundToNearest4=function(a){a=
Math.round(a);return a+(4-a%4)};a.prototype._ensureSize=function(){if(this._pos>=this._buffer.length){var a=new ArrayBuffer(this._roundToNearest4(1.5*this._array.byteLength)),b=new Int32Array(a);b.set(this._buffer,0);this._array=a;this._buffer=b}};a.prototype.writeInt32=function(a){this._ensureSize();var b=this._pos;this._buffer[this._pos++]=a;return b};a.prototype.buffer=function(){var a=this._array.slice(0,4*this._pos);this.destroy();return a};a.prototype.destroy=function(){this._buffer=this._array=
null};return a}();d.default=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/rendererInfoUtils":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../Graphic ../../../../arcade/Feature ../../../../support/arcadeUtils ./enums ./visualVariablesUtils".split(" "),function(b,d,a,c,e,g,h,f){function l(b,d,e){if(!b)return null;var f=0,h={};b=b.clone();var l=b.visualVariables,m=null;if("simple"!==b.type){var q=b.valueExpression;if(!b.field&&q){var t="$$fake"+f++,n=g.createFunction(q);
h[t]=function(a,b){k.repurposeFromGraphicLikeObject(a.geometry,a.attributes,e);return g.executeFunction(n,{vars:{$feature:k,$view:g.getViewInfo(b)},spatialReference:d})};b.field=t;b.valueExpression=null;m=function(a,b){b.attributes[t]=h[t](b);return a.valueExpression?a.getSymbol(c.fromJSON(b)):a.getSymbol(b)}}}l&&(b.visualVariables=l.map(function(b){if(b.normalizationField){var c=b.field,n=b.normalizationField,p="$$fake"+f++;h[p]=function(a,b){return a.attributes[c]/a.attributes[n]};b=a({},b);b.field=
p;delete b.normalizationField;return b}if(b.valueExpression&&"$view.scale"!==b.valueExpression){var l=b.valueExpression,p="$$fake"+f++,m=g.createFunction(l);h[p]=function(a,b){k.repurposeFromGraphicLikeObject(a.geometry,a.attributes,e);return g.executeFunction(m,{vars:{$feature:k,$view:g.getViewInfo(b)},spatialReference:d})};b=a({},b);b.field=p;delete b.valueExpression}return b}));return{renderer:b,normalizingFunctions:h,getSymbolFunction:m}}Object.defineProperty(d,"__esModule",{value:!0});var k=
new e;d.createRendererInfo=function(a,b,c){var d=(b=l(a,b,c)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},b.normalizingFunctions),e=b&&b.getSymbolFunction;a=b&&b.renderer||a;b=f.convertVisualVariables(a.visualVariables);return{renderer:a,vvFields:b.vvFields,vvRanges:b.vvRanges,getValue:function(a,b){var c=d[b];return c?c(a):a.attributes[b]},getSymbol:function(a){return e?e(this.renderer,a):this.renderer.getSymbol?this.renderer.getSymbol.call(this.renderer,a):null}}};d.getNormalizedRenderer=
function(a,b,c){return(b=l(a,b,c)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},b.renderer)||a};d.getSymbol=function(a,b){return a.getSymbol(b)};d.isRendererWebGLCompatible=function(a){if(!a||-1===["simple","class-breaks","unique-value"].indexOf(a.type))return!1;if(a.visualVariables){var b=0;for(a=a.visualVariables;b<a.length;b++){var c=a[b];switch(c.type){case "color":case "opacity":if(c.stops&&8<c.stops.length)return!1;break;case "size":if(f.getTypeOfSizeVisualVariable(c)===
h.WGLVVFlag.SIZE_FIELD_STOPS&&c.stops&&6<c.stops.length)return!1}}}return!0}})},"esri/layers/vectorTiles/Graphic":function(){define(["require","exports","esri/graphic"],function(b,d,a){return function(){function b(){}b.fromJSON=function(b){return new a(b)};return b}()})},"esri/layers/vectorTiles/arcade/Feature":function(){define(["require","exports","esri/arcade/Feature"],function(b,d,a){a.prototype.repurposeFromGraphicLikeObject=function(a,b,d){void 0===d&&(d=null);null===b&&(b={});this.attributes=
b;this.geometry=a;this._datesfixed=(this._layer=d)?!1:!0};return a})},"esri/layers/vectorTiles/support/arcadeUtils":function(){define(["require","exports","esri/renderers/arcadeUtils","esri/arcade/Dictionary"],function(b,d,a,c){Object.defineProperty(d,"__esModule",{value:!0});d.createSyntaxTree=function(b){return a.createSyntaxTree(b)};d.createFunction=function(b,c){return a.createFunction(b,c)};d.createExecContext=function(b,c){return a.createExecContext(b,c)};d.executeFunction=function(b,c){return a.executeFunction(b,
c)};d.extractFieldNames=function(b){return a.extractFieldNames(b)};d.getViewInfo=function(a){if(a&&a.viewingMode&&null!=a.scale&&a.spatialReference)return{view:new c({viewingMode:a.viewingMode,scale:a.scale}),sr:a.spatialReference}}})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../support/expressionUtils"],function(b,d,a,c){d("extend-esri")&&b.setObject("renderer.arcadeUtils",c,a);return c})},"esri/layers/vectorTiles/views/2d/engine/webgl/visualVariablesUtils":function(){define("require exports ../../../../core/screenUtils ./color ./enums ./Utils ../../../3d/layers/support/FastSymbolUpdates".split(" "),
function(b,d,a,c,e,g,h){function f(a){return g.isNumber(a.minDataValue)&&g.isNumber(a.maxDataValue)&&null!=a.minSize&&null!=a.maxSize?e.WGLVVFlag.SIZE_MINMAX_VALUE:(a.expression&&"view.scale"===a.expression||a.valueExpression&&"$view.scale"===a.valueExpression)&&Array.isArray(a.stops)?e.WGLVVFlag.SIZE_SCALE_STOPS:(null!=a.field||a.expression&&"view.scale"!==a.expression||a.valueExpression&&"$view.scale"!==a.valueExpression)&&Array.isArray(a.stops)?e.WGLVVFlag.SIZE_FIELD_STOPS:(null!=a.field||a.expression&&
"view.scale"!==a.expression||a.valueExpression&&"$view.scale"!==a.valueExpression)&&null!=a.valueUnit?e.WGLVVFlag.SIZE_UNIT_VALUE:e.WGLVVFlag.NONE}function l(b){return{value:b.value,size:a.toPt(b.size)}}function k(a){return a.map(function(a){return l(a)})}function m(b){return"string"===typeof b||"number"===typeof b?a.toPt(b):{type:"size",expression:b.expression,stops:k(b.stops)}}function t(a){var b={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(g.isString(a.field))if(a.stops){if(8<a.stops.length)return null;
a=a.stops;for(var c=0;8>c;++c){var d=a[Math.min(c,a.length-1)];b.values[c]=d.value;b.opacities[c]=d.opacity}}else if(a.opacityValues){if(!g.isDefined(a.minDataValue)||!g.isDefined(a.maxDataValue)||2!==a.opacityValues.length)return null;b.values[0]=a.minDataValue;b.opacities[0]=a.opacityValues[0];b.values[1]=a.maxDataValue;b.opacities[1]=a.opacityValues[1];for(c=2;8>c;++c)b.values[c]=a.maxDataValue,b.opacities[c]=a.opacityValues[1]}else return null;else if(a.stops&&0<=a.stops.length||a.opacityValues&&
0<=a.opacityValues.length)for(a=a.stops&&0<=a.stops.length?a.stops[0].opacity:a.opacityValues[0],c=0;8>c;c++)b.values[c]=Infinity,b.opacities[c]=a;else return null;return b}Object.defineProperty(d,"__esModule",{value:!0});d.getTypeOfSizeVisualVariable=f;d.getVisualVariableSizeValueRepresentationRatio=function(a,b){if(!a||!b)return a;switch(b){case "radius":case "distance":return 2*a;case "area":return Math.sqrt(a)}return a};d.stopToSizeStop=l;d.normalizeSizeStops=k;d.normalizeSizeElement=m;d.getVisualVariablesFields=
function(a){var b=a&&0<a.length?{}:null;b&&a.forEach(function(a){var c=a.type;a.field&&(b[c]=a.field)});return b};d.convertVisualVariables=function(b){var d=b&&0<b.length?{}:null,g=d?{}:null;d&&b.forEach(function(b){var l=b.type;b.field&&(d[l]=b.field);if("size"===l)switch(g.size||(g.size={}),f(b)){case e.WGLVVFlag.SIZE_MINMAX_VALUE:g.size.minMaxValue={minDataValue:b.minDataValue,maxDataValue:b.maxDataValue,minSize:m(b.minSize),maxSize:m(b.maxSize)};break;case e.WGLVVFlag.SIZE_SCALE_STOPS:g.size.scaleStops=
{stops:k(b.stops)};break;case e.WGLVVFlag.SIZE_FIELD_STOPS:var l=[],q=[];b=k(b.stops);for(var r=b.length,n=0;6>n;n++){var p=b[Math.min(n,r-1)];l.push(p.value);q.push(a.pt2px(p.size))}g.size.fieldStops={values:l,sizes:q};break;case e.WGLVVFlag.SIZE_UNIT_VALUE:g.size.unitValue={unit:b.valueUnit,valueRepresentation:b.valueRepresentation}}else if("color"===l)for(l=h.convertVisualVariables([b],{modelSize:null,symbolSize:null,unitInMeters:1,transformation:null}),g.color=l.color,n=0;32>n;n+=4)c.premultiplyAlpha(g.color.colors,
n,!0);else"opacity"===l?g.opacity=t(b):"rotation"===l&&(g.rotation={type:b.rotationType})});return{vvFields:d,vvRanges:g}}})},"esri/layers/vectorTiles/views/3d/layers/support/FastSymbolUpdates":function(){define(["require","exports","../../../../renderers/support/utils","../graphics/graphicUtils","../../lib/glMatrix"],function(b,d,a,c,e){function g(a){return null!==a&&void 0!==a}function h(a){return"number"===typeof a}function f(a,b){a&&a.push(b)}function l(b,c,d,e,n){var p=b.minSize,z=b.maxSize;
if(b.expression)return f(n,"Could not convert size info: expression not supported"),!1;if(b.useSymbolValue)return b=e.symbolSize[d],c.minSize[d]=b,c.maxSize[d]=b,c.offset[d]=c.minSize[d],c.factor[d]=0,c.type[d]=1,!0;if(g(b.field)){if(g(b.stops)){if(2===b.stops.length&&h(b.stops[0].size)&&h(b.stops[1].size))return k(b.stops[0].size,b.stops[1].size,b.stops[0].value,b.stops[1].value,c,d),c.type[d]=1,!0;f(n,"Could not convert size info: stops only supported with 2 elements");return!1}if(h(p)&&h(z)&&g(b.minDataValue)&&
g(b.maxDataValue))return k(p,z,b.minDataValue,b.maxDataValue,c,d),c.type[d]=1,!0;if(null!=a.meterIn[b.valueUnit])return c.minSize[d]=-Infinity,c.maxSize[d]=Infinity,c.offset[d]=0,c.factor[d]=1/a.meterIn[b.valueUnit],c.type[d]=1,!0;"unknown"===b.valueUnit?f(n,"Could not convert size info: proportional size not supported"):f(n,"Could not convert size info: scale-dependent size not supported");return!1}if(!g(b.field)){if(b.stops&&b.stops[0]&&h(b.stops[0].size))return c.minSize[d]=b.stops[0].size,c.maxSize[d]=
b.stops[0].size,c.offset[d]=c.minSize[d],c.factor[d]=0,c.type[d]=1,!0;if(h(p))return c.minSize[d]=p,c.maxSize[d]=p,c.offset[d]=p,c.factor[d]=0,c.type[d]=1,!0}f(n,"Could not convert size info: unsupported variant of sizeInfo");return!1}function k(a,b,c,d,e,n){d=0<Math.abs(d-c)?(b-a)/(d-c):0;e.minSize[n]=0<d?a:b;e.maxSize[n]=0<d?b:a;e.offset[n]=a-c*d;e.factor[n]=d}function m(a,b,c,d){if(a.normalizationField||a.valueRepresentation)return f(d,"Could not convert size info: unsupported property"),null;
var e=a.field;if(null!=e&&"string"!==typeof e)return f(d,"Could not convert size info: field is not a string"),null;if(!b.size)b.size={field:a.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[0,0,0]};else if(a.field)if(!b.size.field)b.size.field=a.field;else if(a.field!==b.size.field)return f(d,"Could not convert size info: multiple fields in use"),null;switch(a.axis){case "width":return(e=l(a,b.size,0,c,d))?b:null;case "height":return(e=l(a,b.size,2,c,d))?b:null;case "depth":return(e=
l(a,b.size,1,c,d))?b:null;case "width-and-depth":return(e=l(a,b.size,0,c,d))&&l(a,b.size,1,c,d),e?b:null;case null:case void 0:case "all":return(e=(e=(e=l(a,b.size,0,c,d))&&l(a,b.size,1,c,d))&&l(a,b.size,2,c,d))?b:null;default:return f(d,'Could not convert size info: unknown axis "'+a.axis+'""'),null}}function t(a,b,c){for(var d=0;3>d;++d){var e=b.unitInMeters;1===a.type[d]&&(e*=b.modelSize[d],a.type[d]=2);a.minSize[d]/=e;a.maxSize[d]/=e;a.offset[d]/=e;a.factor[d]/=e}if(0!==a.type[0])b=0;else if(0!==
a.type[1])b=1;else if(0!==a.type[2])b=2;else return f(c,"No size axis contains a valid size or scale"),!1;for(d=0;3>d;++d)0===a.type[d]&&(a.minSize[d]=a.minSize[b],a.maxSize[d]=a.maxSize[b],a.offset[d]=a.offset[b],a.factor[d]=a.factor[b],a.type[d]=a.type[b]);return!0}function q(a,b,c){a[4*b+0]=c.r/255;a[4*b+1]=c.g/255;a[4*b+2]=c.b/255;a[4*b+3]=c.a}function r(a,b,c){if(a.normalizationField)return f(c,"Could not convert color info: unsupported property"),null;if("string"===typeof a.field)if(a.stops){if(8<
a.stops.length)return f(c,"Could not convert color info: too many color stops"),null;b.color={field:a.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};a=a.stops;for(c=0;8>c;++c){var d=a[Math.min(c,a.length-1)];b.color.values[c]=d.value;q(b.color.colors,c,d.color)}}else if(a.colors){if(!g(a.minDataValue)||!g(a.maxDataValue))return f(c,"Could not convert color info: missing data values"),null;if(2!==a.colors.length)return f(c,"Could not convert color info: invalid colors array"),
null;b.color={field:a.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};b.color.values[0]=a.minDataValue;q(b.color.colors,0,a.colors[0]);b.color.values[1]=a.maxDataValue;q(b.color.colors,1,a.colors[1]);for(c=2;8>c;++c)b.color.values[c]=a.maxDataValue,q(b.color.colors,c,a.colors[1])}else return f(c,"Could not convert color info: missing stops or colors"),null;else if(a.stops&&0<=a.stops.length||a.colors&&0<=a.colors.length)for(a=a.stops&&0<=a.stops.length?
a.stops[0].color:a.colors[0],b.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},c=0;8>c;c++)b.color.values[c]=Infinity,q(b.color.colors,c,a);else return f(c,"Could not convert color info: no field and no colors/stops"),null;return b}function w(a,b,c,d){a=2===c&&"arithmetic"===a.rotationType;b.offset[c]=a?90:0;b.factor[c]=a?-1:1;b.type[c]=1}function v(a,b,c){if("string"!==typeof a.field)return f(c,"Could not convert rotation info: field is not a string"),
null;if(!b.rotation)b.rotation={field:a.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};else if(a.field)if(!b.rotation.field)b.rotation.field=a.field;else if(a.field!==b.rotation.field)return f(c,"Could not convert rotation info: multiple fields in use"),null;switch(a.axis){case "tilt":return w(a,b.rotation,0,c),b;case "roll":return w(a,b.rotation,1,c),b;case null:case void 0:case "heading":return w(a,b.rotation,2,c),b;default:return f(c,'Could not convert rotation info: unknown axis "'+a.axis+
'""'),null}}function u(a,b,c){if(!a)return null;var d=!b.supportedTypes||!!b.supportedTypes.size,e=!b.supportedTypes||!!b.supportedTypes.color,n=!b.supportedTypes||!!b.supportedTypes.rotation;return(a=a.reduce(function(a,p){if(!a)return a;if(p.valueExpression)return f(c,"Could not convert visual variables: arcade expressions not supported"),null;switch(p.type){case "size":return d?m(p,a,b,c):a;case "color":return e?r(p,a,c):a;case "rotation":return n?v(p,a,c):a;default:return f(c,"Could not convert visual variables: unsupported type "+
p.type),null}},{size:null,color:null,rotation:null}))&&a.size&&!t(a.size,b,c)?null:a}function x(a,b,c){if(!!a!==!!b||a&&a.field!==b.field)return!1;if(a&&"rotation"===c)for(c=0;3>c;c++)if(a.type[c]!==b.type[c]||a.offset[c]!==b.offset[c]||a.factor[c]!==b.factor[c])return!1;return!0}function y(a,b){var c={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,vvSizeOffset:null,vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvSymbolAnchor:null,vvSymbolRotation:null},
d=a&&null!=a.size;a&&a.size?(c.vvSizeEnabled=!0,c.vvSizeMinSize=a.size.minSize,c.vvSizeMaxSize=a.size.maxSize,c.vvSizeOffset=a.size.offset,c.vvSizeFactor=a.size.factor):a&&d&&(c.vvSizeValue=b.transformation.scale);a&&d&&(c.vvSymbolAnchor=b.transformation.anchor,c.vvSymbolRotation=b.transformation.rotation);a&&a.color&&(c.vvColorEnabled=!0,c.vvColorValues=a.color.values,c.vvColorColors=a.color.colors);return c}Object.defineProperty(d,"__esModule",{value:!0});d.convertVisualVariables=u;d.initFastSymbolUpdatesState=
function(a,b,c){return b&&a&&!a.disableFastUpdates?(a=u(a.visualVariables,c))?{enabled:!0,visualVariables:a,materialParameters:y(a,c),customTransformation:a&&null!=a.size}:{enabled:!1}:{enabled:!1}};d.updateFastSymbolUpdatesState=function(a,b,c){if(!b||!a.enabled)return!1;var d=a.visualVariables;b=u(b.visualVariables,c);if(!(b&&x(d.size,b.size,"size")&&x(d.color,b.color,"color")&&x(d.rotation,b.rotation,"rotation")))return!1;a.visualVariables=b;a.materialParameters=y(b,c);a.customTransformation=b&&
null!=b.size;return!0};d.getMaterialParams=y;var n;(function(a){var b=e.mat4d,d=e.vec3,n=b.create(),f=d.create();a.evaluateModelTransform=function(a,d,e){if(!a.vvSizeEnabled)return e;b.identity(n);b.multiply(e,n,n);c.computeObjectRotation(a.vvSymbolRotation[2],a.vvSymbolRotation[0],a.vvSymbolRotation[1],n);if(a.vvSizeEnabled){for(e=0;3>e;++e){var p=a.vvSizeOffset[e]+d[0]*a.vvSizeFactor[e],h=e;var k=a.vvSizeMinSize[e],z=a.vvSizeMaxSize[e],p=p<k?k:p>z?z:p;f[h]=p}b.scale(n,f,n)}else b.scale(n,a.vvSizeValue,
n);b.translate(n,a.vvSymbolAnchor,n);return n}})(n||(n={}));d.evaluateModelTransform=n.evaluateModelTransform})},"esri/layers/vectorTiles/renderers/support/utils":function(){define("dojo/_base/lang dojo/_base/array dojo/date/locale ../../Color ../../core/numberUtils dojo/i18n!dojo/cldr/nls/gregorian".split(" "),function(b,d,a,c,e,g){function h(a){return a&&d.map(a,function(a){return new c(a)})}function f(a,b,c){var d="";0===b?d=k.lt+" ":b===c&&(d=k.gt+" ");return d+a}var l={},k={lte:"\x3c\x3d",gte:"\x3e\x3d",
lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},m={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},t={millisecond:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},minute:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",
dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},q={formatLength:"short",fullYear:!0},r={formatLength:"short"};b.mixin(l,{meterIn:{inches:1/.0254,feet:1/.3048,"us-feet":3.28084,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(c,e){var f,h=[];
null==c||c instanceof Date||(c=new Date(c));e=e||{};e=b.mixin({},e);var k=e.selector?e.selector.toLowerCase():null;f=!k||-1<k.indexOf("time");k=!k||-1<k.indexOf("date");f&&(e.timeOptions=e.timeOptions||r,e.timeOptions&&(e.timeOptions=b.mixin({},e.timeOptions),e.timeOptions.selector=e.timeOptions.selector||"time",h.push(e.timeOptions)));k&&(e.dateOptions=e.dateOptions||q,e.dateOptions&&(e.dateOptions=b.mixin({},e.dateOptions),e.dateOptions.selector=e.dateOptions.selector||"date",h.push(e.dateOptions)));
h&&h.length?(h=d.map(h,function(b){return a.format(c,b)}),f=1==h.length?h[0]:g["dateTimeFormat-medium"].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return h[b]})):f=a.format(c);return f},createColorStops:function(a){var b=a.values,c=a.colors,h=a.labelIndexes,k=a.isDate,n=a.dateFormatOptions;a=[];return a=d.map(b,function(a,z){var p=null;if(!h||-1<d.indexOf(h,z)){var g;(g=k?l.formatDate(a,n):e.format(a))&&(p=f(g,z,b.length-1))}return{value:a,color:c[z],label:p}})},updateColorStops:function(a){var b=
a.stops,c=a.changes,h=a.isDate,k=a.dateFormatOptions,n=[],p,z=d.map(b,function(a){return a.value});d.forEach(c,function(a){n.push(a.index);z[a.index]=a.value});p=e.round(z,{indexes:n});d.forEach(b,function(a,c){a.value=z[c];if(null!=a.label){var d,n=null;(d=h?l.formatDate(p[c],k):e.format(p[c]))&&(n=f(d,c,b.length-1));a.label=n}})},createClassBreakLabel:function(a){var b=a.minValue,c=a.maxValue,d=a.isFirstBreak?"":k.gt+" ";a="percent-of-total"===a.normalizationType?k.pct:"";b=null==b?"":e.format(b);
c=null==c?"":e.format(c);return d+b+a+" "+k.ld+" "+c+a},setLabelsForClassBreaks:function(a){var b=a.classBreakInfos,c=a.classificationMethod,f=a.normalizationType,h=[];b&&b.length&&("standard-deviation"===c?console.log("setLabelsForClassBreaks: cannot set labels for class breaks generated using 'standard-deviation' method."):a.round?(h.push(b[0].minValue),d.forEach(b,function(a){h.push(a.maxValue)}),h=e.round(h),d.forEach(b,function(a,b){a.label=l.createClassBreakLabel({minValue:0===b?h[0]:h[b],maxValue:h[b+
1],isFirstBreak:0===b,normalizationType:f})})):d.forEach(b,function(a,b){a.label=l.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===b,normalizationType:f})}))},updateClassBreak:function(a){var b=a.classBreaks,c=a.normalizationType,d=a.change,e=d.index,d=d.value,n=-1,f=-1,h=b.length;"standard-deviation"===a.classificationMethod?console.log("updateClassBreak: cannot update labels for class breaks generated using 'standard-deviation' method."):(0===e?n=e:e===h?f=e-1:(f=
e-1,n=e),-1<n&&n<h&&(a=b[n],a.minValue=d,a.label=l.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===n,normalizationType:c})),-1<f&&f<h&&(a=b[f],a.maxValue=d,a.label=l.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===f,normalizationType:c})))},calculateDateFormatInterval:function(a){var b,c,e=a.length,f,n,p,h,k,g,l=Infinity,q;a=d.map(a,function(a){return new Date(a)});for(b=0;b<e-1;b++){f=a[b];p=[];k=Infinity;g="";for(c=b+1;c<e;c++)n=a[c],
n=f.getFullYear()!==n.getFullYear()&&"year"||f.getMonth()!==n.getMonth()&&"month"||f.getDate()!==n.getDate()&&"day"||f.getHours()!==n.getHours()&&"hour"||f.getMinutes()!==n.getMinutes()&&"minute"||f.getSeconds()!==n.getSeconds()&&"second"||"millisecond",h=m[n],h<k&&(k=h,g=n),p.push(n);k<l&&(l=k,q=g)}return q},createUniqueValueLabel:function(a){var b=a.value,c=a.fieldInfo,d=a.domain;a=a.dateFormatInterval;var f=String(b);(d=d&&d.codedValues?d.getName(b):null)?f=d:"number"===typeof b&&(f=c&&"date"===
c.type?l.formatDate(b,a&&t[a]):e.format(b));return f},cloneColorVariable:function(a){var e;a&&(e=b.mixin({},a),e.colors=h(e.colors),e.stops=e.stops&&d.map(e.stops,function(a){a=b.mixin({},a);a.color&&(a.color=new c(a.color));return a}),e.legendOptions&&(e.legendOptions=b.mixin({},e.legendOptions)));return e},cloneOpacityVariable:function(a){var c;if(a){c=b.mixin({},a);if(a=c.opacityValues)c.opacityValues=a.slice(0);if(a=c.stops)c.stops=d.map(a,function(a){return b.mixin({},a)});if(a=c.legendOptions)c.legendOptions=
b.mixin({},a)}return c},cloneSizeVariable:function(a){var c;a&&(c=b.mixin({},a),c.stops&&(c.stops=d.map(c.stops,function(a){return b.mixin({},a)})),(a=c.minSize)&&"object"===typeof a&&(c.minSize=l.cloneSizeVariable(a)),(a=c.maxSize)&&"object"===typeof a&&(c.maxSize=l.cloneSizeVariable(a)),a=c.legendOptions)&&(c.legendOptions=b.mixin({},a),a=a.customValues)&&(c.legendOptions.customValues=a.slice(0));return c}});return l})},"esri/layers/vectorTiles/Color":function(){define(["./core/declare","./core/accessorSupport/ensureType",
"dojo/colors"],function(b,d,a){function c(a){return Math.max(0,Math.min(d.ensureInteger(a),255))}var e=b([a],{declaredClass:"esri.Color",toJSON:function(){return[c(this.r),c(this.g),c(this.b),1<this.a?this.a:c(255*this.a)]},clone:function(){return new e(this.toRgba())}});e.toJSON=function(a){return a&&[c(a.r),c(a.g),c(a.b),1<a.a?a.a:c(255*a.a)]};e.fromJSON=function(a){return a&&new e([a[0],a[1],a[2],a[3]/255])};e.toUnitRGB=function(a){return[a.r/255,a.g/255,a.b/255]};e.toUnitRGBA=function(a){return[a.r/
255,a.g/255,a.b/255,null!=a.a?a.a:1]};var g="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(b=0;b<g.length;b++)e[g[b]]=a[g[b]];e.named.rebeccapurple=[102,51,153];return e})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(b,d,a,c){var e={};d.setObject("dojo.colors",e);var g=function(a,b,c){0>c&&++c;1<c&&--c;var d=6*c;return 1>d?a+(b-a)*d:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a};b.colorFromRgb=a.fromRgb=function(b,d){var e=
b.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(e){var f=e[2].split(/\s*,\s*/),h=f.length,e=e[1];if("rgb"==e&&3==h||"rgba"==e&&4==h)return e=f[0],"%"==e.charAt(e.length-1)?(e=c.map(f,function(a){return 2.56*parseFloat(a)}),4==h&&(e[3]=f[3]),a.fromArray(e,d)):a.fromArray(f,d);if("hsl"==e&&3==h||"hsla"==e&&4==h){var e=(parseFloat(f[0])%360+360)%360/360,l=parseFloat(f[1])/100,r=parseFloat(f[2])/100,l=.5>=r?r*(l+1):r+l-r*l,r=2*r-l,e=[256*g(r,l,e+1/3),256*g(r,l,e),256*g(r,l,e-1/3),1];4==
h&&(e[3]=f[3]);return a.fromArray(e,d)}}return null};var h=function(a,b,c){a=Number(a);return isNaN(a)?c:a<b?b:a>c?c:a};a.prototype.sanitize=function(){this.r=Math.round(h(this.r,0,255));this.g=Math.round(h(this.g,0,255));this.b=Math.round(h(this.b,0,255));this.a=h(this.a,0,1);return this};e.makeGrey=a.makeGrey=function(b,c){return a.fromArray([b,b,b,c])};d.mixin(a.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,
228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,
140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],
greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,
178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,
255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,
128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return a})},"esri/layers/vectorTiles/core/numberUtils":function(){define(["dojo/number",
"dojo/i18n!dojo/cldr/nls/number"],function(b,d){function a(a,b){return a-b}var c=/^-?(\d+)(\.(\d+))?$/i,e=new RegExp("\\"+d.decimal+"0+$","g"),g=RegExp("(\\d)0*$","g"),h={numDigits:function(a){var b=String(a),d=b.match(c);a={integer:0,fractional:0};d&&d[1]?(a.integer=d[1].split("").length,a.fractional=d[3]?d[3].split("").length:0):-1<b.toLowerCase().indexOf("e")&&(d=b.split("e"),b=d[0],d=d[1],b&&d&&(b=Number(b),d=Number(d),(a=0<d)||(d=Math.abs(d)),b=h.numDigits(b),a?(b.integer+=d,b.fractional=d>b.fractional?
0:b.fractional-d):(b.fractional+=d,b.integer=d>b.integer?1:b.integer-d),a=b));return a},percentChange:function(a,b,c,d){var e={previous:null,next:null},f;null!=c&&(f=a-c,e.previous=Math.floor(Math.abs(100*(b-c-f)/f)));null!=d&&(f=d-a,e.next=Math.floor(Math.abs(100*(d-b-f)/f)));return e},round:function(b,c){var d=b.slice(0),e,f,g,l,w,v,u,x,y,n=c&&null!=c.tolerance?c.tolerance:2,p=c&&c.indexes,z=c&&null!=c.strictBounds?c.strictBounds:!1;if(p)p.sort(a);else for(p=[],v=0;v<d.length;v++)p.push(v);for(v=
0;v<p.length;v++)if(y=p[v],e=d[y],f=0===y?null:d[y-1],g=y===d.length-1?null:d[y+1],l=h.numDigits(e),l=l.fractional){u=0;for(x=!1;u<=l&&!x;){w=e;x=u;var A=void 0,B=void 0,A=Number(w.toFixed(x));A<w?B=A+1/Math.pow(10,x):(B=A,A-=1/Math.pow(10,x));A=Number(A.toFixed(x));B=Number(B.toFixed(x));w=[A,B];w=z&&0===v?w[1]:w[0];x=n;var A=h.percentChange(e,w,f,g),D=B=void 0,B=void 0,B=null==A.previous||A.previous<=x,D=null==A.next||A.next<=x;x=B=B&&D||A.previous+A.next<=2*x;u++}x&&(d[y]=w)}return d},format:function(a,
c){c=c||{places:20,round:-1};var d=b.format(a,c);d&&(d=d.replace(g,"$1").replace(e,""));return d}};return h})},"esri/layers/vectorTiles/views/3d/layers/graphics/graphicUtils":function(){define(["require","exports","../../../../geometry","../../../../geometry/support/webMercatorUtils","../../lib/glMatrix"],function(b,d,a,c,e){function g(b,d){var e=b.spatialReference;e.equals(d)||(e.isWebMercator&&d.wkid===a.SpatialReference.WGS84.wkid?c.webMercatorToGeographic(b,!1,b):d.isWebMercator&&e.wkid===a.SpatialReference.WGS84.wkid&&
c.geographicToWebMercator(b,!1,b))}function h(a){if(Array.isArray(a)){for(var b=0;b<a.length;b++)if(!h(a[b]))return!1;return!0}return null==a||0<=a}Object.defineProperty(d,"__esModule",{value:!0});var f=e.vec4d,l=e.mat4d,k=[1,1,1];d.computeCentroid=function(b,c){if("extent"===b.type)return b.center;if("polygon"===b.type)return b.centroid;if("mesh"===b.type)return b.extent.center;for(var d=0,e=0,f=0,h=b.hasZ,k=0,l=0,m=b.paths;l<m.length;l++){for(var n=m[l],p=0,z=n;p<z.length;p++){var A=z[p],d=d+A[0],
e=e+A[1];h&&(f+=A[2])}k+=n.length}d=new a.Point({x:d/k,y:e/k,z:h?f/k:void 0,spatialReference:b.spatialReference});c&&g(d,c);return d};d.convertToSR=g;d.enlargeExtent=function(a,b,c){if(a){b||(b=f.create());var d=.5*a.width*(c-1);c=.5*a.height*(c-1);a.width<1E-7*a.height?d+=c/20:a.height<1E-7*a.width&&(c+=d/20);f.set4(a.xmin-d,a.ymin-c,a.xmax+d,a.ymax+c,b);return b}return null};d.updateVertexAttributeAuxpos1w=function(a,b){for(var c=0;c<a.geometries.length;++c){var d=a.geometries[c].data.vertexAttributes.auxpos1;
d&&d.data[3]!==b&&(d.data[3]=b,a.geometryVertexAttrsUpdated(c))}};d.mixinColorAndOpacity=function(a,b){var c=[1,1,1,1];null!=a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2]);null!==b&&void 0!==b?c[3]=b:null!=a&&3<a.length&&(c[3]=a[3]);return c};d.overrideColor=function(a,b,c,d,e,f){void 0===f&&(f=[0,0,0,0]);for(var h=0;3>h;++h)f[h]=a&&null!=a[h]?a[h]:c&&null!=c[h]?c[h]:e[h];f[3]=null!=b?b:null!=d?d:e[3];return f};d.computeObjectScale=function(a,b,c,d){void 0===a&&(a=k);void 0===d&&(d=1);var e=Array(3);if(null==
b||null==c)e[0]=1,e[1]=1,e[2]=1;else{for(var f=void 0,h=0,g=2;0<=g;g--){var l=a[g],n=void 0,p=null!=l,z=0===g&&!f&&!p,m=c[g];"symbolValue"===l||z?n=0!==m?b[g]/m:1:p&&"proportional"!==l&&isFinite(l)&&(n=0!==m?l/m:1);null!=n&&(f=e[g]=n,h=Math.max(h,Math.abs(n)))}for(g=2;0<=g;g--)null==e[g]?e[g]=f:0===e[g]&&(e[g]=.001*h)}for(g=2;0<=g;g--)e[g]/=d;return e};d.computeSizeWithResourceSize=function(a,b){var c=b.width,d=b.depth,e=b.height,f=b.isPrimitive?10:1;if(null==c&&null==e&&null==d)return[f*a[0],f*a[1],
f*a[2]];for(var c=[c,d,e],h,d=0;3>d;d++)if(e=c[d],null!=e){h=e/a[d];break}for(d=0;3>d;d++)null==c[d]&&(c[d]=a[d]*h);return c};d.validateSymbolLayerSize=function(a){null!=a.isPrimitive&&(a=[a.width,a.depth,a.height]);return h(a)?null:"Symbol sizes may not be negative values"};d.computeObjectRotation=function(a,b,c,d){void 0===d&&(d=l.identity());a=a||0;b=b||0;c=c||0;0!==a&&l.rotateZ(d,-a/180*Math.PI,d);0!==b&&l.rotateX(d,b/180*Math.PI,d);0!==c&&l.rotateY(d,c/180*Math.PI,d);return d}})},"esri/layers/vectorTiles/geometry":function(){define("require exports ./geometry/Extent ./geometry/Geometry ./geometry/Mesh ./geometry/Multipoint ./geometry/Point ./geometry/Polygon ./geometry/Polyline ./geometry/ScreenPoint ./geometry/SpatialReference ./geometry/support/jsonUtils".split(" "),
function(b,d,a,c,e,g,h,f,l,k,m,t){Object.defineProperty(d,"__esModule",{value:!0});d.Extent=a;d.BaseGeometry=c;d.Mesh=e;d.Multipoint=g;d.Point=h;d.Polygon=f;d.Polyline=l;d.ScreenPoint=k;d.SpatialReference=m;d.isGeometry=function(a){return a instanceof d.BaseGeometry};d.fromJSON=t.fromJSON;d.typeMap={point:d.Point,extent:d.Extent,polyline:d.Polyline,polygon:d.Polygon,multipoint:d.Multipoint,mesh:d.Mesh}})},"esri/layers/vectorTiles/geometry/Extent":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Geometry ./Point ./SpatialReference ./support/contains ./support/intersects ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
function(b,d,a,c,e,g,h,f,l,k,m,t,q){function r(a,b,c){return null==b?c:null==c?b:a(b,c)}b=function(b){function d(){for(var a=0;a<arguments.length;a++);a=b.call(this)||this;a.type="extent";a.xmin=0;a.ymin=0;a.mmin=void 0;a.zmin=void 0;a.xmax=0;a.ymax=0;a.mmax=void 0;a.zmax=void 0;return a}a(d,b);h=d;d.prototype.normalizeCtorArgs=function(a,b,c,d,e){return!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?"object"===typeof a?(a.spatialReference=null!=a.spatialReference?a.spatialReference:
l.WGS84,a):{xmin:a,ymin:b,xmax:c,ymax:d,spatialReference:null!=e?e:l.WGS84}:{spatialReference:a,xmin:0,ymin:0,xmax:0,ymax:0}};Object.defineProperty(d.prototype,"center",{get:function(){var a=new f({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});this.hasZ&&(a.z=.5*(this.zmin+this.zmax));this.hasM&&(a.m=.5*(this.mmin+this.mmax));return a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"extent",{get:function(){return this.clone()},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"hasM",{get:function(){return null!=this.mmin&&null!=this.mmax},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasZ",{get:function(){return null!=this.zmin&&null!=this.zmax},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"height",{get:function(){return Math.abs(this.ymax-this.ymin)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"width",{get:function(){return Math.abs(this.xmax-this.xmin)},
enumerable:!0,configurable:!0});d.prototype.centerAt=function(a){var b=this.center;return null!=a.z&&this.hasZ?this.offset(a.x-b.x,a.y-b.y,a.z-b.z):this.offset(a.x-b.x,a.y-b.y)};d.prototype.clone=function(){var a=new h;a.xmin=this.xmin;a.ymin=this.ymin;a.xmax=this.xmax;a.ymax=this.ymax;a.spatialReference=this.spatialReference;null!=this.zmin&&(a.zmin=this.zmin,a.zmax=this.zmax);null!=this.mmin&&(a.mmin=this.mmin,a.mmax=this.mmax);return a};d.prototype.contains=function(a){if(!a)return!1;var b=this.spatialReference,
c=a.spatialReference;b&&c&&!b.equals(c)&&q.canProject(b,c)&&(a=b.isWebMercator?q.geographicToWebMercator(a):q.webMercatorToGeographic(a,!0));return"point"===a.type?k.extentContainsPoint(this,a):"extent"===a.type?k.extentContainsExtent(this,a):!1};d.prototype.equals=function(a){if(!a)return!1;var b=this.spatialReference,c=a.spatialReference;b&&c&&!b.equals(c)&&q.canProject(b,c)&&(a=b.isWebMercator?q.geographicToWebMercator(a):q.webMercatorToGeographic(a,!0));return this.xmin===a.xmin&&this.ymin===
a.ymin&&this.zmin===a.zmin&&this.mmin===a.mmin&&this.xmax===a.xmax&&this.ymax===a.ymax&&this.zmax===a.zmax&&this.mmax===a.mmax};d.prototype.expand=function(a){a=.5*(1-a);var b=this.width*a,c=this.height*a;this.xmin+=b;this.ymin+=c;this.xmax-=b;this.ymax-=c;this.hasZ&&(b=(this.zmax-this.zmin)*a,this.zmin+=b,this.zmax-=b);this.hasM&&(a*=this.mmax-this.mmin,this.mmin+=a,this.mmax-=a);return this};d.prototype.intersects=function(a){if(!a)return!1;var b=this.spatialReference,c=a.spatialReference;b&&c&&
!b.equals(c)&&q.canProject(b,c)&&(a=b.isWebMercator?q.geographicToWebMercator(a):q.webMercatorToGeographic(a,!0));b=m.getExtentIntersector(a.type);return"mesh"!==a.type?b(this,a):b(this,a.extent)};d.prototype.normalize=function(){var a=this._normalize(!1,!0);return Array.isArray(a)?a:[a]};d.prototype.offset=function(a,b,c){this.xmin+=a;this.ymin+=b;this.xmax+=a;this.ymax+=b;null!=c&&(this.zmin+=c,this.zmax+=c);return this};d.prototype.shiftCentralMeridian=function(){return this._normalize(!0)};d.prototype.union=
function(a){this.xmin=Math.min(this.xmin,a.xmin);this.ymin=Math.min(this.ymin,a.ymin);this.xmax=Math.max(this.xmax,a.xmax);this.ymax=Math.max(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=r(Math.min,this.zmin,a.zmin),this.zmax=r(Math.max,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=r(Math.min,this.mmin,a.mmin),this.mmax=r(Math.max,this.mmax,a.mmax);return this};d.prototype.intersection=function(a){if(!this.intersects(a))return null;this.xmin=Math.max(this.xmin,a.xmin);this.ymin=Math.max(this.ymin,
a.ymin);this.xmax=Math.min(this.xmax,a.xmax);this.ymax=Math.min(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=r(Math.max,this.zmin,a.zmin),this.zmax=r(Math.min,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=r(Math.max,this.mmin,a.mmin),this.mmax=r(Math.min,this.mmax,a.mmax);return this};d.prototype.toJSON=function(a){return this.write(null,a)};d.prototype._shiftCM=function(a){void 0===a&&(a=t.getInfo(this.spatialReference));if(!a||!this.spatialReference)return this;var b=this.spatialReference,
c=this._getCM(a);if(c){var d=b.isWebMercator?q.webMercatorToGeographic(c):c;this.xmin-=c.x;this.xmax-=c.x;b.isWebMercator||(d.x=this._normalizeX(d.x,a).x);this.spatialReference=new l(e.substitute({Central_Meridian:d.x},b.isWGS84?a.altTemplate:a.wkTemplate))}return this};d.prototype._getCM=function(a){var b=null,c=a.valid;a=c[0];var c=c[1],d=this.xmin,e=this.xmax;d>=a&&d<=c&&e>=a&&e<=c||(b=this.center);return b};d.prototype._normalize=function(a,b,c){var d=this.spatialReference;if(!d)return this;c=
c||t.getInfo(d);if(!c)return this;var e=this._getParts(c).map(function(a){return a.extent});if(2>e.length)return e[0]||this;if(2<e.length)return a?this._shiftCM(c):this.set({xmin:c.valid[0],xmax:c.valid[1]});if(a)return this._shiftCM(c);if(b)return e;var f=!0,n=!0;e.forEach(function(a){a.hasZ||(f=!1);a.hasM||(n=!1)});return{rings:e.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(f)for(var c=(a.zmax-a.zmin)/2,d=0;d<b.length;d++)b[d].push(c);
if(n)for(a=(a.mmax-a.mmin)/2,d=0;d<b.length;d++)b[d].push(a);return b}),hasZ:f,hasM:n,spatialReference:d}};d.prototype._getParts=function(a){var b=this.cache._parts;if(!b){var b=[],c=this.ymin,d=this.ymax,e=this.spatialReference,f=this.width,g=this.xmin,k=this.xmax,l=void 0;a=a||t.getInfo(e);var m=a.valid,q=m[0],u=m[1],l=this._normalizeX(this.xmin,a),r=l.x,m=l.frameId,l=this._normalizeX(this.xmax,a),x=l.x;a=l.frameId;l=r===x&&0<f;if(f>2*u){f=new h(g<k?r:x,c,u,d,e);g=new h(q,c,g<k?x:r,d,e);k=new h(0,
c,u,d,e);c=new h(q,c,0,d,e);d=[];e=[];f.contains(k)&&d.push(m);f.contains(c)&&e.push(m);g.contains(k)&&d.push(a);g.contains(c)&&e.push(a);for(q=m+1;q<a;q++)d.push(q),e.push(q);b.push({extent:f,frameIds:[m]},{extent:g,frameIds:[a]},{extent:k,frameIds:d},{extent:c,frameIds:e})}else r>x||l?b.push({extent:new h(r,c,u,d,e),frameIds:[m]},{extent:new h(q,c,x,d,e),frameIds:[a]}):b.push({extent:new h(r,c,x,d,e),frameIds:[m]});this.cache._parts=b}a=this.hasZ;c=this.hasM;if(a||c)for(m={},a&&(m.zmin=this.zmin,
m.zmax=this.zmax),c&&(m.mmin=this.mmin,m.mmax=this.mmax),a=0;a<b.length;a++)b[a].extent.set(m);return b};d.prototype._normalizeX=function(a,b){var c=b.valid,d=c[0],e=c[1],c=2*e,f=0;a>e?(d=Math.ceil(Math.abs(a-e)/c),a-=d*c,f=d):a<d&&(d=Math.ceil(Math.abs(a-d)/c),a+=d*c,f=-d);return{x:a,frameId:f}};c([g.property({dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax spatialReference".split(" ")})],d.prototype,"cache",void 0);c([g.property({readOnly:!0,dependsOn:["cache"]})],d.prototype,"center",null);
c([g.property({readOnly:!0,dependsOn:["cache"]})],d.prototype,"extent",null);c([g.property({readOnly:!0,dependsOn:["mmin","mmax"],json:{write:{enabled:!1,overridePolicy:null}}})],d.prototype,"hasM",null);c([g.property({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],d.prototype,"hasZ",null);c([g.property({readOnly:!0,dependsOn:["ymin","ymax"]})],d.prototype,"height",null);c([g.property({readOnly:!0,dependsOn:["xmin","xmax"]})],d.prototype,"width",null);c([g.property({type:Number,
json:{write:!0}})],d.prototype,"xmin",void 0);c([g.property({type:Number,json:{write:!0}})],d.prototype,"ymin",void 0);c([g.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],d.prototype,"mmin",void 0);c([g.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],d.prototype,"zmin",void 0);c([g.property({type:Number,json:{write:!0}})],d.prototype,"xmax",void 0);
c([g.property({type:Number,json:{write:!0}})],d.prototype,"ymax",void 0);c([g.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],d.prototype,"mmax",void 0);c([g.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],d.prototype,"zmax",void 0);return d=h=c([g.subclass("esri.geometry.Extent")],d);var h}(g.declared(h));b.prototype.toJSON.isDefaultToJSON=!0;
return b})},"esri/layers/vectorTiles/geometry/support/contains":function(){define(["require","exports"],function(b,d){function a(a,b,c,d){return b>=a.xmin&&b<=a.xmax&&c>=a.ymin&&c<=a.ymax?null!=d&&a.hasZ?d>=a.zmin&&d<=a.zmax:!0:!1}function c(a,b){var c;if(c=a.rings)if(Array.isArray(c[0][0])){for(var d=!1,h=0,g=c.length;h<g;h++)d=e(d,c[h],b);c=d}else c=e(!1,c,b);else c=!1;return c}function e(a,b,c){var d=c[0];c=c[1];for(var e=0,f=0,h=b.length;f<h;f++){e++;e===h&&(e=0);var g=b[f],r=g[0],g=g[1],w=b[e],
v=w[0],w=w[1];(g<c&&w>=c||w<c&&g>=c)&&r+(c-g)/(w-g)*(v-r)<d&&(a=!a)}return a}Object.defineProperty(d,"__esModule",{value:!0});d.extentContainsPoint=function(b,c){return a(b,c.x,c.y,c.z)};d.extentContainsExtent=function(b,c){var d=c.xmin,e=c.ymin,h=c.zmin,g=c.xmax,t=c.ymax,q=c.zmax;return b.hasZ&&c.hasZ?a(b,d,e,h)&&a(b,d,t,h)&&a(b,g,t,h)&&a(b,g,e,h)&&a(b,d,e,q)&&a(b,d,t,q)&&a(b,g,t,q)&&a(b,g,e,q):a(b,d,e)&&a(b,d,t)&&a(b,g,t)&&a(b,g,e)};d.extentContainsCoords2D=function(b,c){return a(b,c[0],c[1])};
d.extentContainsCoords3D=function(b,c){return a(b,c[0],c[1],c[2])};d.polygonContainsPoint=function(a,b){return c(a,[b.x,b.y])};d.polygonContainsCoords=c})},"esri/layers/vectorTiles/geometry/support/intersects":function(){define(["require","exports","./contains"],function(b,d,a){function c(b,c){return a.extentContainsPoint(b,c)}function e(a,b){var c=a.hasZ&&b.hasZ,d;if(a.xmin<=b.xmin){if(d=b.xmin,a.xmax<d)return!1}else if(d=a.xmin,b.xmax<d)return!1;if(a.ymin<=b.ymin){if(d=b.ymin,a.ymax<d)return!1}else if(d=
a.ymin,b.ymax<d)return!1;if(c&&b.hasZ)if(a.zmin<=b.zmin){if(c=b.zmin,a.zmax<c)return!1}else if(c=a.zmin,b.zmax<c)return!1;return!0}function g(b,c){for(var d=c.hasZ?a.extentContainsCoords3D:a.extentContainsCoords2D,e=0,f=c.points;e<f.length;e++)if(d(b,f[e]))return!0;return!1}function h(b,c){m[0]=b.xmin;m[1]=b.ymax;t[0]=b.xmax;t[1]=b.ymax;q[0]=b.xmin;q[1]=b.ymin;r[0]=b.xmax;r[1]=b.ymin;for(var d=0,e=w;d<e.length;d++)if(a.polygonContainsCoords(c,e[d]))return!0;d=0;for(e=c.rings;d<e.length;d++){var f=
e[d];if(f.length){var h=f[0];if(a.extentContainsCoords2D(b,h))return!0;for(var g=1;g<f.length;g++){var k=f[g];if(a.extentContainsCoords2D(b,k)||l(h,k,v))return!0;h=k}}}return!1}function f(b,c){m[0]=b.xmin;m[1]=b.ymax;t[0]=b.xmax;t[1]=b.ymax;q[0]=b.xmin;q[1]=b.ymin;r[0]=b.xmax;r[1]=b.ymin;for(var d=c.paths,e=0;e<d.length;e++){var f=d[e];if(d.length){var h=f[0];if(a.extentContainsCoords2D(b,h))return!0;for(var g=1;g<f.length;g++){var k=f[g];if(a.extentContainsCoords2D(b,k)||l(h,k,v))return!0;h=k}}}return!1}
function l(a,b,c){for(var d=0;d<c.length;d++)if(k(a,b,c[d][0],c[d][1]))return!0;return!1}function k(a,b,c,d,e){var f=a[0];a=a[1];var n=b[0];b=b[1];var p=c[0],h=c[1];c=d[0]-p;var p=f-p,g=n-f;d=d[1]-h;var h=a-h,k=b-a,z=d*g-c*k;if(0===z)return!1;c=(c*h-d*p)/z;p=(g*h-k*p)/z;return 0<=c&&1>=c&&0<=p&&1>=p?(e&&(e[0]=f+c*(n-f),e[1]=a+c*(b-a)),!0):!1}Object.defineProperty(d,"__esModule",{value:!0});d.extentIntersectsPoint=c;d.extentIntersectsExtent=e;d.extentIntersectsMultipoint=g;var m=[0,0],t=[0,0],q=[0,
0],r=[0,0],w=[m,t,q,r],v=[[q,m],[m,t],[t,r],[r,q]];d.extentIntersectsPolygon=h;d.extentIntersectsPolyline=f;var u=[0,0];d.isSelfIntersecting=function(a){for(var b=0;b<a.length;b++){for(var c=a[b],d=0;d<c.length-1;d++)for(var e=c[d],f=c[d+1],h=b+1;h<a.length;h++)for(var g=0;g<a[h].length-1;g++){var l=a[h][g],m=a[h][g+1],q=k(e,f,l,m,u);if(q&&!(u[0]===e[0]&&u[1]===e[1]||u[0]===l[0]&&u[1]===l[1]||u[0]===f[0]&&u[1]===f[1]||u[0]===m[0]&&u[1]===m[1]))return!0}g=c.length;if(!(4>=g))for(d=0;d<g-3;d++){var t=
g-1;0===d&&(t=g-2);e=c[d];f=c[d+1];for(h=d+2;h<t;h++)if(l=c[h],m=c[h+1],(q=k(e,f,l,m,u))&&!(u[0]===e[0]&&u[1]===e[1]||u[0]===l[0]&&u[1]===l[1]||u[0]===f[0]&&u[1]===f[1]||u[0]===m[0]&&u[1]===m[1]))return!0}}return!1};d.segmentIntersects=k;d.getExtentIntersector=function(a){switch(a){case "esriGeometryEnvelope":case "extent":return e;case "esriGeometryMultipoint":case "multipoint":return g;case "esriGeometryPoint":case "point":return c;case "esriGeometryPolygon":case "polygon":return h;case "esriGeometryPolyline":case "polyline":return f;
case "mesh":return e}}})},"esri/layers/vectorTiles/geometry/Mesh":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Geometry"],function(b,d,a,c){return function(b){function c(a){return b.call(this)||this}a(c,b);c.prototype.clone=function(){return new c};return c}(c)})},"esri/layers/vectorTiles/geometry/Multipoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./support/zmUtils".split(" "),
function(b,d,a,c,e,g,h,f,l,k){function m(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}b=function(b){function d(){for(var a=0;a<arguments.length;a++);a=b.call(this)||this;a.points=[];a.type="multipoint";return a}a(d,b);f=d;d.prototype.normalizeCtorArgs=function(a,b){if(!a&&!b)return null;var c={};Array.isArray(a)?(c.points=a,c.spatialReference=b):!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?(a.points&&(c.points=a.points),a.spatialReference&&(c.spatialReference=
a.spatialReference),a.hasZ&&(c.hasZ=a.hasZ),a.hasM&&(c.hasM=a.hasM)):c.spatialReference=a;var d=c.points&&c.points[0];d&&(void 0===c.hasZ&&void 0===c.hasM?(c.hasZ=2<d.length,c.hasM=!1):void 0===c.hasZ?c.hasZ=3<d.length:void 0===c.hasM&&(c.hasM=3<d.length));return c};Object.defineProperty(d.prototype,"extent",{get:function(){var a=this.points;if(!a.length)return null;for(var b=new h,c=this.hasZ,d=this.hasM,e=c?3:2,f=a[0],p=m(Math.min),g=m(Math.max),k=f[0],l=f[1],q=f[0],f=f[1],t,r,E,H,K=0,aa=a.length;K<
aa;K++){var O=a[K],R=O[0],N=O[1],k=p(k,R),l=p(l,N),q=g(q,R),f=g(f,N);c&&2<O.length&&(R=O[2],t=p(t,R),E=g(E,R));d&&O.length>e&&(O=O[e],r=p(r,O),H=g(H,O))}b.xmin=k;b.ymin=l;b.xmax=q;b.ymax=f;b.spatialReference=this.spatialReference;c?(b.zmin=t,b.zmax=E):(b.zmin=null,b.zmax=null);d?(b.mmin=r,b.mmax=H):(b.mmin=null,b.mmax=null);return b},enumerable:!0,configurable:!0});d.prototype.writePoints=function(a,b,c,d){b.points=e.clone(this.points)};d.prototype.addPoint=function(a){this.clearCache();k.updateSupportFromPoint(this,
a);Array.isArray(a)?this.points.push(a):this.points.push(a.toArray());return this};d.prototype.clone=function(){var a={points:e.clone(this.points),spatialReference:this.spatialReference};this.hasZ&&(a.hasZ=!0);this.hasM&&(a.hasM=!0);return new f(a)};d.prototype.getPoint=function(a){if(!this._validateInputs(a))return null;a=this.points[a];var b={x:a[0],y:a[1],spatialReference:this.spatialReference},c=2;this.hasZ&&(b.z=a[2],c=3);this.hasM&&(b.m=a[c]);return new l(b)};d.prototype.removePoint=function(a){if(!this._validateInputs(a))return null;
this.clearCache();return new l(this.points.splice(a,1)[0],this.spatialReference)};d.prototype.setPoint=function(a,b){if(!this._validateInputs(a))return this;this.clearCache();k.updateSupportFromPoint(b);this.points[a]=b.toArray();return this};d.prototype.toJSON=function(a){return this.write(null,a)};d.prototype._validateInputs=function(a){return null!=a&&0<=a&&a<this.points.length};c([g.property({dependsOn:["points","hasZ","hasM","spatialReference"]})],d.prototype,"cache",void 0);c([g.property({dependsOn:["cache"]})],
d.prototype,"extent",null);c([g.property({type:[[Number]],json:{write:{isRequired:!0}}})],d.prototype,"points",void 0);c([g.writer("points")],d.prototype,"writePoints",null);return d=f=c([g.subclass("esri.geometry.Multipoint")],d);var f}(g.declared(f));b.prototype.toJSON.isDefaultToJSON=!0;return b})},"esri/layers/vectorTiles/geometry/support/zmUtils":function(){define(["require","exports"],function(b,d){Object.defineProperty(d,"__esModule",{value:!0});d.updateSupportFromPoint=function(a,b,d){void 0===
d&&(d=!1);var c=a.hasM,e=a.hasZ;Array.isArray(b)?4!==b.length||c||e?3===b.length&&d&&!c?(e=!0,c=!1):3===b.length&&c&&e&&(e=c=!1):e=c=!0:(e=!e&&b.hasZ&&(!c||b.hasM),c=!c&&b.hasM&&(!e||b.hasZ));a.hasZ=e;a.hasM=c}})},"esri/layers/vectorTiles/geometry/Polygon":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/centroid ./support/contains ./support/coordsUtils ./support/intersects ./support/webMercatorUtils ./support/zmUtils".split(" "),
function(b,d,a,c,e,g,h,f,l,k,m,t,q,r,w,v){function u(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}var x=u(Math.min),y=u(Math.max);b=function(b){function d(){for(var a=0;a<arguments.length;a++);a=b.call(this)||this;a.rings=[];a.type="polygon";return a}a(d,b);f=d;d.createEllipse=function(a){var b=a.center.x,c=a.center.y,d=a.center.z,e=a.center.m,n=a.center.hasZ,p=a.center.hasM,h=a.longAxis,k=a.shortAxis,g=a.numberOfPoints;a=a.view;for(var l=[],z=2*Math.PI/g,m=n?3:2,A=0;A<g;A++){var q=
a.toMap(h*Math.cos(A*z)+b,k*Math.sin(A*z)+c),q=[q.x,q.y];n&&(q[2]=d);p&&(q[m]=e);l.push(q)}l.push(l[0]);return new f({rings:[l],spatialReference:a.spatialReference})};d.createCircle=function(a){return f.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,view:a.view})};d.fromExtent=function(a){var b=a.clone().normalize();a=a.spatialReference;var c=!1,d=!1;b.map(function(a){a.hasZ&&(c=!0);a.hasM&&(d=!0)});b={rings:b.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,
a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(c&&a.hasZ)for(var e=a.zmin+.5*(a.zmax-a.zmin),f=0;f<b.length;f++)b[f].push(e);if(d&&a.hasM)for(a=a.mmin+.5*(a.mmax-a.mmin),f=0;f<b.length;f++)b[f].push(a);return b}),spatialReference:a};c&&(b.hasZ=!0);d&&(b.hasM=!0);return new f(b)};d.prototype.normalizeCtorArgs=function(a,b){var c=null,d,e,f=null;a&&!Array.isArray(a)?(c=a.rings?a.rings:null,b||(a.spatialReference?b=a.spatialReference:a.rings||(b=a)),d=a.hasZ,e=a.hasM):c=a;c=c||[];b=b||k.WGS84;
c.length&&c[0]&&null!=c[0][0]&&"number"===typeof c[0][0]&&(c=[c]);if(f=c[0]&&c[0][0])void 0===d&&void 0===e?(d=2<f.length,e=!1):void 0===d?d=!e&&3<f.length:void 0===e&&(e=!d&&3<f.length);return{rings:c,spatialReference:b,hasZ:d,hasM:e}};Object.defineProperty(d.prototype,"centroid",{get:function(){var a=m.polygonCentroid(this);if(!a||isNaN(a[0])||isNaN(a[1])||this.hasZ&&isNaN(a[2]))return null;var b=new l;b.x=a[0];b.y=a[1];b.spatialReference=this.spatialReference;this.hasZ&&(b.z=a[2]);return b},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"extent",{get:function(){var a=this.hasZ,b=this.hasM,c=this.spatialReference,d=this.rings,e=a?3:2;if(!d.length||!d[0].length)return null;for(var f=d[0][0],n=f[0],f=f[1],p=d[0][0],k=p[0],p=p[1],g=void 0,l=void 0,z=void 0,m=void 0,q=[],t=0;t<d.length;t++){for(var u=d[t],r=u[0],w=r[0],r=r[1],v=u[0],T=v[0],v=v[1],L=void 0,U=void 0,V=void 0,Q=void 0,I=0;I<u.length;I++){var ba=u[I],W=ba[0],Z=ba[1],n=x(n,W),f=x(f,Z),k=y(k,W),p=y(p,Z),w=x(w,W),r=x(r,Z),
T=y(T,W),v=y(v,Z);a&&2<ba.length&&(W=ba[2],g=x(g,W),l=y(l,W),L=x(L,W),U=y(U,W));b&&ba.length>e&&(Q=ba[e],z=x(g,Q),m=y(l,Q),V=x(L,Q),Q=y(U,Q))}q.push(new h({xmin:w,ymin:r,zmin:L,mmin:V,xmax:T,ymax:v,zmax:U,mmax:Q,spatialReference:c}))}d=new h;d.xmin=n;d.ymin=f;d.xmax=k;d.ymax=p;d.spatialReference=c;a&&(d.zmin=g,d.zmax=l);b&&(d.mmin=z,d.mmax=m);d.cache._partwise=1<q.length?q:null;return d},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isSelfIntersecting",{get:function(){return r.isSelfIntersecting(this.rings)},
enumerable:!0,configurable:!0});d.prototype.writePaths=function(a,b,c,d){b.rings=e.clone(this.rings)};d.prototype.addRing=function(a){if(a){this.clearCache();var b=this.rings,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var d=[],e=0,f=a.length;e<f;e++)d[e]=a[e].toArray();b[c]=d}return this}};d.prototype.clone=function(){var a=new f;a.spatialReference=this.spatialReference;a.rings=e.clone(this.rings);a.hasZ=this.hasZ;a.hasM=this.hasM;return a};d.prototype.contains=function(a){if(!a)return!1;
w.canProject(a,this.spatialReference)&&(a=w.project(a,this.spatialReference));return t.polygonContainsPoint(this,a)};d.prototype.isClockwise=function(a){var b=this;a=Array.isArray(a[0])?a:a.map(function(a){return b.hasZ?b.hasM?[a.x,a.y,a.z,a.m]:[a.x,a.y,a.z]:[a.x,a.y]});return q.isClockwise(a,this.hasM,this.hasZ)};d.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;var c=this.rings[a][b],d=this.hasZ,e=this.hasM;return d&&!e?new l(c[0],c[1],c[2],void 0,this.spatialReference):
e&&!d?new l(c[0],c[1],void 0,c[2],this.spatialReference):d&&e?new l(c[0],c[1],c[2],c[3],this.spatialReference):new l(c[0],c[1],this.spatialReference)};d.prototype.insertPoint=function(a,b,c){if(!this._validateInputs(a,b,!0))return this;this.clearCache();v.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a].splice(b,0,c);return this};d.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();return new l(this.rings[a].splice(b,1)[0],
this.spatialReference)};d.prototype.removeRing=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=this.rings.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new l(a,b)})};d.prototype.setPoint=function(a,b,c){if(!this._validateInputs(a,b))return this;this.clearCache();v.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a][b]=c;return this};d.prototype._validateInputs=function(a,b,c){void 0===c&&(c=!1);return null==a||0>
a||a>=this.rings.length||null!=b&&(a=this.rings[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};d.prototype.toJSON=function(a){return this.write(null,a)};c([g.property({dependsOn:["hasM","hasZ","rings"]})],d.prototype,"cache",void 0);c([g.property({readOnly:!0,dependsOn:["cache"]})],d.prototype,"centroid",null);c([g.property({dependsOn:["cache"],readOnly:!0})],d.prototype,"extent",null);c([g.property({dependsOn:["cache"],readOnly:!0})],d.prototype,"isSelfIntersecting",null);c([g.property({type:[[[Number]]],
json:{write:{isRequired:!0}}})],d.prototype,"rings",void 0);c([g.writer("rings")],d.prototype,"writePaths",null);return d=f=c([g.subclass("esri.geometry.Polygon")],d);var f}(g.declared(f));b.prototype.toJSON.isDefaultToJSON=!0;return b})},"esri/layers/vectorTiles/geometry/support/centroid":function(){define(["require","exports","../support/coordsUtils"],function(b,d,a){function c(a,b){if(!a||!a.length)return null;for(var c=[],d=[],f=b?[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity]:[Infinity,
-Infinity,Infinity,-Infinity],h=0,q=a.length;h<q;h++){var r=e(a[h],b,f);r&&d.push(r)}d.sort(function(a,c){var d=a[2]-c[2];0===d&&b&&(d=a[4]-c[4]);return d});d.length&&(h=6*d[0][2],c[0]=d[0][0]/h,c[1]=d[0][1]/h,b&&(h=6*d[0][4],c[2]=0!==h?d[0][3]/h:0),c[0]<f[0]||c[0]>f[1]||c[1]<f[2]||c[1]>f[3]||b&&(c[2]<f[4]||c[2]>f[5]))&&(c.length=0);if(!c.length)if(d=a[0]&&a[0].length?g(a[0],b):null)c[0]=d[0],c[1]=d[1],b&&2<d.length&&(c[2]=d[2]);else return null;return c}function e(a,b,c){for(var d=0,e=0,f=0,h=0,
g=0,l=0,v=a.length-1;l<v;l++){var u=a[l],x=u[0],y=u[1],n=u[2],p=a[l+1],z=p[0],A=p[1],B=p[2],D=x*A-z*y,h=h+D,d=d+(x+z)*D,e=e+(y+A)*D;b&&2<u.length&&2<p.length&&(D=x*B-z*n,f+=(n+B)*D,g+=D);x<c[0]&&(c[0]=x);x>c[1]&&(c[1]=x);y<c[2]&&(c[2]=y);y>c[3]&&(c[3]=y);b&&(n<c[4]&&(c[4]=n),n>c[5]&&(c[5]=n))}0<h&&(h*=-1);0<g&&(g*=-1);if(!h)return null;a=[d,e,.5*h];b&&(a[3]=f,a[4]=.5*g);return a}function g(b,c){for(var d=c?[0,0,0]:[0,0],e=c?[0,0,0]:[0,0],f=0,h=0,g=0,r=0,w=0,v=b.length;w<v-1;w++){var u=b[w],x=b[w+
1];u&&x&&(d[0]=u[0],d[1]=u[1],e[0]=x[0],e[1]=x[1],c&&2<u.length&&2<x.length&&(d[2]=u[2],e[2]=x[2]),length=a.getLength(d,e))&&(f+=length,u=a.getMidpoint(u,x),h+=length*u[0],g+=length*u[1],c&&2<u.length&&(r+=length*u[2]))}return 0<f?c?[h/f,g/f,r/f]:[h/f,g/f]:b.length?b[0]:null}Object.defineProperty(d,"__esModule",{value:!0});d.extentCentroid=function(a){return a?a.hasZ?[a.xmax-a.xmin/2,a.ymax-a.ymin/2,a.zmax-a.zmin/2]:[a.xmax-a.xmin/2,a.ymax-a.ymin/2]:null};d.polygonCentroid=function(a){return a?c(a.rings,
a.hasZ):null};d.lineCentroid=g})},"esri/layers/vectorTiles/geometry/support/coordsUtils":function(){define(["require","exports"],function(b,d){function a(a,b){var c=b[0]-a[0],d=b[1]-a[1];if(2<a.length&&2<b.length){var e=a[2]-b[2];return Math.sqrt(c*c+d*d+e*e)}return Math.sqrt(c*c+d*d)}function c(a,b,c){var d=a[0]+c*(b[0]-a[0]),e=a[1]+c*(b[1]-a[1]);return 2<a.length&&2<b.length?[d,e,a[2]+c*(b[2]-a[2])]:[d,e]}Object.defineProperty(d,"__esModule",{value:!0});d.geometryToCoordinates=function(a){if(!a)return null;
if(Array.isArray(a))return a;var b=a.hasZ,c=a.hasM;if("point"===a.type)return c&&b?[a.x,a.y,a.z,a.m]:b?[a.x,a.y,a.z]:c?[a.x,a.y,a.m]:[a.x,a.y];if("polygon"===a.type)return a.rings.slice(0);if("polyline"===a.type)return a.paths.slice(0);if("multipoint"===a.type)return a.points.slice(0);if("extent"===a.type){a=a.clone().normalize();if(!a)return null;var d=!1,e=!1;a.forEach(function(a){a.hasZ&&(d=!0);a.hasM&&(e=!0)});return a.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,
a.ymin],[a.xmin,a.ymin]];if(d&&a.hasZ)for(var c=.5*(a.zmax-a.zmin),f=0;f<b.length;f++)b[f].push(c);if(e&&a.hasM)for(a=.5*(a.mmax-a.mmin),f=0;f<b.length;f++)b[f].push(a);return b})}return null};d.getLength=a;d.getMidpoint=function(a,b){return c(a,b,.5)};d.getPathLength=function(b){for(var c=b.length,d=0,e=0;e<c-1;++e)d+=a(b[e],b[e+1]);return d};d.getPointOnPath=function(b,d){if(0>=d)return b[0];for(var e=b.length,f=0,g=0;g<e-1;++g){var k=a(b[g],b[g+1]);if(d-f<k)return c(b[g],b[g+1],(d-f)/k);f+=k}return b[e-
1]};d.isClockwise=function(a,b,c){for(var d=a.length,e=0,h=0,g=0,t=0;t<d;t++){var q=a[t],r=a[(t+1)%d],w=2,e=e+(q[0]*r[1]-r[0]*q[1]);2<q.length&&2<r.length&&c&&(h+=q[0]*r[2]-r[0]*q[2],w=3);q.length>w&&r.length>w&&b&&(g+=q[0]*r[w]-r[0]*q[w])}return 0>=e&&0>=h&&0>=g}})},"esri/layers/vectorTiles/geometry/Polyline":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/zmUtils".split(" "),
function(b,d,a,c,e,g,h,f,l,k,m){function t(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}var q=t(Math.min),r=t(Math.max);b=function(b){function d(){for(var a=0;a<arguments.length;a++);a=b.call(this)||this;a.paths=[];a.type="polyline";return a}a(d,b);f=d;d.prototype.normalizeCtorArgs=function(a,b){var c=null,d,e,f=null;a&&!Array.isArray(a)?(c=a.paths?a.paths:null,b||(a.spatialReference?b=a.spatialReference:a.paths||(b=a)),d=a.hasZ,e=a.hasM):c=a;c=c||[];b=b||k.WGS84;c.length&&c[0]&&null!=
c[0][0]&&"number"===typeof c[0][0]&&(c=[c]);if(f=c[0]&&c[0][0])void 0===d&&void 0===e?(d=2<f.length,e=!1):void 0===d?d=!e&&3<f.length:void 0===e&&(e=!d&&3<f.length);return{paths:c,spatialReference:b,hasZ:d,hasM:e}};Object.defineProperty(d.prototype,"extent",{get:function(){var a=this.hasZ,b=this.hasM,c=this.spatialReference,d=this.paths,e=a?3:2;if(!d.length||!d[0].length)return null;for(var f=d[0][0],g=f[0],f=f[1],k=d[0][0],l=k[0],k=k[1],m=void 0,t=void 0,u=void 0,w=void 0,v=[],O=0;O<d.length;O++){for(var R=
d[O],N=R[0],G=N[0],N=N[1],F=R[0],ea=F[0],F=F[1],S=void 0,P=void 0,Y=void 0,M=void 0,T=0;T<R.length;T++){var L=R[T],U=L[0],V=L[1],g=q(g,U),f=q(f,V),l=r(l,U),k=r(k,V),G=q(G,U),N=q(N,V),ea=r(ea,U),F=r(F,V);a&&2<L.length&&(U=L[2],m=q(m,U),t=r(t,U),S=q(S,U),P=r(P,U));b&&L.length>e&&(M=L[e],u=q(m,M),w=r(t,M),Y=q(S,M),M=r(P,M))}v.push(new h({xmin:G,ymin:N,zmin:S,mmin:Y,xmax:ea,ymax:F,zmax:P,mmax:M,spatialReference:c}))}d=new h;d.xmin=g;d.ymin=f;d.xmax=l;d.ymax=k;d.spatialReference=c;a&&(d.zmin=m,d.zmax=
t);b&&(d.mmin=u,d.mmax=w);d.cache._partwise=1<v.length?v:null;return d},enumerable:!0,configurable:!0});d.prototype.writePaths=function(a,b,c,d){b.paths=e.clone(this.paths)};d.prototype.addPath=function(a){if(a){this.clearCache();var b=this.paths,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var d=[],e=0,f=a.length;e<f;e++)d[e]=a[e].toArray();b[c]=d}return this}};d.prototype.clone=function(){var a=new f;a.spatialReference=this.spatialReference;a.paths=e.clone(this.paths);a.hasZ=this.hasZ;
a.hasM=this.hasM;return a};d.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;var c=this.paths[a][b],d=this.hasZ,e=this.hasM;return d&&!e?new l(c[0],c[1],c[2],void 0,this.spatialReference):e&&!d?new l(c[0],c[1],void 0,c[2],this.spatialReference):d&&e?new l(c[0],c[1],c[2],c[3],this.spatialReference):new l(c[0],c[1],this.spatialReference)};d.prototype.insertPoint=function(a,b,c){if(!this._validateInputs(a,b,!0))return this;this.clearCache();m.updateSupportFromPoint(this,c);
Array.isArray(c)||(c=c.toArray());this.paths[a].splice(b,0,c);return this};d.prototype.removePath=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=this.paths.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new l(a,b)})};d.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();return new l(this.paths[a].splice(b,1)[0],this.spatialReference)};d.prototype.setPoint=function(a,b,c){if(!this._validateInputs(a,
b))return this;this.clearCache();m.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.paths[a][b]=c;return this};d.prototype._validateInputs=function(a,b,c){void 0===c&&(c=!1);return null==a||0>a||a>=this.paths.length||null!=b&&(a=this.paths[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};d.prototype.toJSON=function(a){return this.write(null,a)};c([g.property({dependsOn:["hasM","hasZ","paths"]})],d.prototype,"cache",void 0);c([g.property({dependsOn:["cache"],readOnly:!0})],
d.prototype,"extent",null);c([g.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],d.prototype,"paths",void 0);c([g.writer("paths")],d.prototype,"writePaths",null);return d=f=c([g.subclass("esri.geometry.Polyline")],d);var f}(g.declared(f));b.prototype.toJSON.isDefaultToJSON=!0;return b})},"esri/layers/vectorTiles/geometry/ScreenPoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),
function(b,d,a,c,e,g){return function(b){function d(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];a=b.apply(this,a)||this;a.x=0;a.y=0;a.z=void 0;return a}a(d,b);e=d;d.prototype.normalizeCtorArgs=function(a,b){return"number"===typeof a?{x:a,y:b}:Array.isArray(a)?{x:a[0],y:a[1]}:a};d.prototype.clone=function(){return new e({x:this.x,y:this.y,z:this.z})};d.prototype.toArray=function(){return null==this.z?[this.x,this.y]:[this.x,this.y,this.z]};c([g.property({type:Number})],d.prototype,
"x",void 0);c([g.property({type:Number})],d.prototype,"y",void 0);c([g.property({type:Number})],d.prototype,"z",void 0);return d=e=c([g.subclass("esri.geometry.ScreenPoint")],d);var e}(g.declared(e))})},"esri/layers/vectorTiles/geometry/support/jsonUtils":function(){define("require exports ../Extent ../Multipoint ../Point ../Polygon ../Polyline".split(" "),function(b,d,a,c,e,g,h){function f(b){if(b){if(void 0!==b.x&&void 0!==b.y)return e.fromJSON(b);if(void 0!==b.paths)return h.fromJSON(b);if(void 0!==
b.rings)return g.fromJSON(b);if(void 0!==b.points)return c.fromJSON(b);if(void 0!==b.xmin&&void 0!==b.ymin&&void 0!==b.xmax&&void 0!==b.ymax)return a.fromJSON(b)}return null}Object.defineProperty(d,"__esModule",{value:!0});d.fromJson=function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(m){console.warn(m.stack)}return f(a)};d.fromJSON=f;d.getJsonType=function(b){return b instanceof e?"esriGeometryPoint":b instanceof h?"esriGeometryPolyline":b instanceof g?"esriGeometryPolygon":
b instanceof a?"esriGeometryEnvelope":b instanceof c?"esriGeometryMultipoint":null};var l={esriGeometryPoint:e,esriGeometryPolyline:h,esriGeometryPolygon:g,esriGeometryEnvelope:a,esriGeometryMultipoint:c};d.getGeometryType=function(a){return a&&l[a]||null}})},"esri/layers/vectorTiles/views/3d/lib/glMatrix":function(){define([],function(){var b={};(function(b,a){a(b,!0);a(b,!1)})(b,function(b,a){var c={};(function(){if("undefined"!=typeof Float32Array){var a=new Float32Array(1),b=new Int32Array(a.buffer);
c.invsqrt=function(c){a[0]=c;b[0]=1597463007-(b[0]>>1);var d=a[0];return d*(1.5-.5*c*d*d)}}else c.invsqrt=function(a){return 1/Math.sqrt(a)}})();var d=Array;"undefined"!=typeof Float32Array&&(d=a?Float32Array:Array);var g={create:function(a){var b=new d(3);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=b[2]=0;return b},createFrom:function(a,b,c){var e=new d(3);e[0]=a;e[1]=b;e[2]=c;return e},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},set3:function(a,b,c,d){d[0]=a;d[1]=b;d[2]=c;return d},
add:function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c},subtract:function(a,b,c){if(!c||a===c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c},multiply:function(a,b,c){if(!c||a===c)return a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a;c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];return c},max:function(a,b,c){c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);return c},
min:function(a,b,c){c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},scale:function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c},normalize:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=Math.sqrt(c*c+d*d+e*e);if(!f)return b[0]=0,b[1]=0,b[2]=0,b;if(1===f)return b[0]=c,b[1]=d,b[2]=e,b;f=1/f;b[0]=c*f;b[1]=d*f;b[2]=e*f;return b},cross:function(a,
b,c){c||(c=a);var d=a[0],e=a[1];a=a[2];var f=b[0],n=b[1];b=b[2];c[0]=e*b-a*n;c[1]=a*f-d*b;c[2]=d*n-e*f;return c},length:function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)},length2:function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0],e=a[1]-b[1];a=a[2]-b[2];b=Math.sqrt(d*d+e*e+a*a);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/b;c[0]=d*b;c[1]=e*b;c[2]=a*b;return c},lerp:function(a,
b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);return d},dist:function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)},dist2:function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e}},h=null,f=new d(4);g.unproject=function(a,b,c,d,e){e||(e=a);h||(h=w.create());var n=h;f[0]=2*(a[0]-d[0])/d[2]-1;f[1]=2*(a[1]-d[1])/d[3]-1;f[2]=2*a[2]-1;f[3]=1;w.multiply(c,b,n);if(!w.inverse(n))return null;w.multiplyVec4(n,f);if(0===
f[3])return null;e[0]=f[0]/f[3];e[1]=f[1]/f[3];e[2]=f[2]/f[3];return e};var l=g.createFrom(1,0,0),k=g.createFrom(0,1,0),m=g.createFrom(0,0,1);g.rotationTo=function(a,b,c){c||(c=v.create());var d=g.dot(a,b),e=g.create();if(1<=d)v.set(u,c);else if(-.999999>d)g.cross(l,a,e),1E-6>e.length&&g.cross(k,a,e),1E-6>e.length&&g.cross(m,a,e),g.normalize(e),v.fromAxisAngle(e,Math.PI,c);else{var d=Math.sqrt(2*(1+d)),f=1/d;g.cross(a,b,e);c[0]=e[0]*f;c[1]=e[1]*f;c[2]=e[2]*f;c[3]=.5*d;v.normalize(c)}1<c[3]?c[3]=1:
-1>c[3]&&(c[3]=-1);return c};var t=g.create(),q=g.create();g.project=function(a,b,c,d){d||(d=a);g.direction(b,c,t);g.subtract(a,b,q);a=g.dot(t,q);g.scale(t,a,d);g.add(d,b,d)};g.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var r={create:function(a){var b=new d(9);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]):b[0]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=0;return b},createFrom:function(a,b,c,e,f,h,g,k,l){var n=new d(9);n[0]=a;n[1]=b;n[2]=c;n[3]=
e;n[4]=f;n[5]=h;n[6]=g;n[7]=k;n[8]=l;return n},determinant:function(a){var b=a[3],c=a[4],d=a[5],e=a[6],f=a[7],n=a[8];return a[0]*(n*c-d*f)+a[1]*(-n*b+d*e)+a[2]*(f*b-c*e)},inverse:function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],n=a[4],p=a[5],h=a[6],g=a[7],k=a[8],l=k*n-p*g,m=-k*f+p*h,q=g*f-n*h,t=c*l+d*m+e*q;if(!t)return null;t=1/t;b||(b=r.create());b[0]=l*t;b[1]=(-k*d+e*g)*t;b[2]=(p*d-e*n)*t;b[3]=m*t;b[4]=(k*c-e*h)*t;b[5]=(-p*c+e*f)*t;b[6]=q*t;b[7]=(-g*c+d*h)*t;b[8]=(n*c-d*f)*t;return b},multiply:function(a,
b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],n=a[3],p=a[4],h=a[5],g=a[6],k=a[7];a=a[8];var l=b[0],z=b[1],m=b[2],q=b[3],t=b[4],u=b[5],r=b[6],w=b[7];b=b[8];c[0]=l*d+z*n+m*g;c[1]=l*e+z*p+m*k;c[2]=l*f+z*h+m*a;c[3]=q*d+t*n+u*g;c[4]=q*e+t*p+u*k;c[5]=q*f+t*h+u*a;c[6]=r*d+w*n+b*g;c[7]=r*e+w*p+b*k;c[8]=r*f+w*h+b*a;return c},add:function(a,b,c){c||(c=a);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];c[4]=a[4]+b[4];c[5]=a[5]+b[5];c[6]=a[6]+b[6];c[7]=a[7]+b[7];c[8]=a[8]+b[8];return c},subtract:function(a,
b,c){c||(c=a);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];c[4]=a[4]-b[4];c[5]=a[5]-b[5];c[6]=a[6]-b[6];c[7]=a[7]-b[7];c[8]=a[8]-b[8];return c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];c[0]=d*a[0]+b*a[3]+a[6];c[1]=d*a[1]+b*a[4]+a[7];return c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[3]+b*a[6];c[1]=d*a[1]+e*a[4]+b*a[7];c[2]=d*a[2]+e*a[5]+b*a[8];return c},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];
b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},identity:function(a){a||(a=r.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(!b||a===b){var c=a[1],d=a[2],e=a[5];a[1]=a[3];a[2]=a[6];a[3]=c;a[5]=a[7];a[6]=d;a[7]=e;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b},toMat4:function(a,b){b||(b=w.create());b[15]=1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=a[6];b[7]=0;b[6]=a[5];
b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},w={create:function(a){var b=new d(16);4===arguments.length?(b[0]=arguments[0],b[1]=arguments[1],b[2]=arguments[2],b[3]=arguments[3],b[4]=arguments[4],b[5]=arguments[5],b[6]=arguments[6],b[7]=arguments[7],b[8]=arguments[8],b[9]=arguments[9],b[10]=arguments[10],b[11]=arguments[11],b[12]=arguments[12],b[13]=arguments[13],
b[14]=arguments[14],b[15]=arguments[15]):a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b},createFrom:function(a,b,c,e,f,h,g,k,l,m,q,t,u,r,w,x){var n=new d(16);n[0]=a;n[1]=b;n[2]=c;n[3]=e;n[4]=f;n[5]=h;n[6]=g;n[7]=k;n[8]=l;n[9]=m;n[10]=q;n[11]=t;n[12]=u;n[13]=r;n[14]=w;n[15]=x;return n},createFromMatrixRowMajor:function(a){var b=new d(16);b[0]=a[0];b[4]=a[1];b[8]=
a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},createFromMatrix:function(a){var b=new d(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];
b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},setRowMajor:function(a,b){b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},identity:function(a){a||(a=w.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(!b||a===b){var c=
a[1],d=a[2],e=a[3],f=a[6],n=a[7],h=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=c;a[6]=a[9];a[7]=a[13];a[8]=d;a[9]=f;a[11]=a[14];a[12]=e;a[13]=n;a[14]=h;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b},determinant:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],n=a[5],h=a[6],g=a[7],k=a[8],l=a[9],m=a[10],q=a[11],t=a[12],u=a[13],r=a[14];a=a[15];return t*l*h*e-
k*u*h*e-t*n*m*e+f*u*m*e+k*n*r*e-f*l*r*e-t*l*d*g+k*u*d*g+t*c*m*g-b*u*m*g-k*c*r*g+b*l*r*g+t*n*d*q-f*u*d*q-t*c*h*q+b*u*h*q+f*c*r*q-b*n*r*q-k*n*d*a+f*l*d*a+k*c*h*a-b*l*h*a-f*c*m*a+b*n*m*a},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],n=a[4],h=a[5],g=a[6],k=a[7],p=a[8],l=a[9],m=a[10],q=a[11],t=a[12],u=a[13],r=a[14],w=a[15],x=c*h-d*n,y=c*g-e*n,v=c*k-f*n,M=d*g-e*h,T=d*k-f*h,L=e*k-f*g,U=p*u-l*t,V=p*r-m*t,Q=p*w-q*t,I=l*r-m*u,ba=l*w-q*u,W=m*w-q*r,Z=x*W-y*ba+v*I+M*Q-T*V+L*U;if(!Z)return null;
Z=1/Z;b[0]=(h*W-g*ba+k*I)*Z;b[1]=(-d*W+e*ba-f*I)*Z;b[2]=(u*L-r*T+w*M)*Z;b[3]=(-l*L+m*T-q*M)*Z;b[4]=(-n*W+g*Q-k*V)*Z;b[5]=(c*W-e*Q+f*V)*Z;b[6]=(-t*L+r*v-w*y)*Z;b[7]=(p*L-m*v+q*y)*Z;b[8]=(n*ba-h*Q+k*U)*Z;b[9]=(-c*ba+d*Q-f*U)*Z;b[10]=(t*T-u*v+w*x)*Z;b[11]=(-p*T+l*v-q*x)*Z;b[12]=(-n*I+h*V-g*U)*Z;b[13]=(c*I-d*V+e*U)*Z;b[14]=(-t*M+u*y-r*x)*Z;b[15]=(p*M-l*y+m*x)*Z;return b},toRotationMat:function(a,b){b||(b=w.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=
a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},toMat3:function(a,b){b||(b=r.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},toInverseMat3:function(a,b){var c=a[0],d=a[1],e=a[2],f=a[4],n=a[5],h=a[6],g=a[8],k=a[9],l=a[10],p=l*n-h*k,m=-l*f+h*g,q=k*f-n*g,t=c*p+d*m+e*q;if(!t)return null;t=1/t;b||(b=r.create());b[0]=p*t;b[1]=(-l*d+e*k)*t;b[2]=(h*d-e*n)*t;b[3]=m*t;b[4]=(l*c-e*g)*t;b[5]=(-h*c+e*f)*t;b[6]=q*t;
b[7]=(-k*c+d*g)*t;b[8]=(n*c-d*f)*t;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],n=a[3],h=a[4],g=a[5],k=a[6],l=a[7],p=a[8],z=a[9],m=a[10],q=a[11],t=a[12],u=a[13],r=a[14];a=a[15];var w=b[0],x=b[1],y=b[2],v=b[3],T=b[4],L=b[5],U=b[6],V=b[7],Q=b[8],I=b[9],ba=b[10],W=b[11],Z=b[12],fa=b[13],X=b[14];b=b[15];c[0]=w*d+x*h+y*p+v*t;c[1]=w*e+x*g+y*z+v*u;c[2]=w*f+x*k+y*m+v*r;c[3]=w*n+x*l+y*q+v*a;c[4]=T*d+L*h+U*p+V*t;c[5]=T*e+L*g+U*z+V*u;c[6]=T*f+L*k+U*m+V*r;c[7]=T*n+L*l+U*q+V*a;c[8]=Q*d+
I*h+ba*p+W*t;c[9]=Q*e+I*g+ba*z+W*u;c[10]=Q*f+I*k+ba*m+W*r;c[11]=Q*n+I*l+ba*q+W*a;c[12]=Z*d+fa*h+X*p+b*t;c[13]=Z*e+fa*g+X*z+b*u;c[14]=Z*f+fa*k+X*m+b*r;c[15]=Z*n+fa*l+X*q+b*a;return c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],e=b[1];b=b[2];c[0]=a[0]*d+a[4]*e+a[8]*b+a[12];c[1]=a[1]*d+a[5]*e+a[9]*b+a[13];c[2]=a[2]*d+a[6]*e+a[10]*b+a[14];return c},multiplyVec4:function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2];b=b[3];c[0]=a[0]*d+a[4]*e+a[8]*f+a[12]*b;c[1]=a[1]*d+a[5]*e+a[9]*f+a[13]*b;c[2]=a[2]*
d+a[6]*e+a[10]*f+a[14]*b;c[3]=a[3]*d+a[7]*e+a[11]*f+a[15]*b;return c},translate:function(a,b,c){var d=b[0],e=b[1];b=b[2];var f,h,g,n,k,l,p,z,m,q,t,u;if(!c||a===c)return a[12]=a[0]*d+a[4]*e+a[8]*b+a[12],a[13]=a[1]*d+a[5]*e+a[9]*b+a[13],a[14]=a[2]*d+a[6]*e+a[10]*b+a[14],a[15]=a[3]*d+a[7]*e+a[11]*b+a[15],a;f=a[0];h=a[1];g=a[2];n=a[3];k=a[4];l=a[5];p=a[6];z=a[7];m=a[8];q=a[9];t=a[10];u=a[11];c[0]=f;c[1]=h;c[2]=g;c[3]=n;c[4]=k;c[5]=l;c[6]=p;c[7]=z;c[8]=m;c[9]=q;c[10]=t;c[11]=u;c[12]=f*d+k*e+m*b+a[12];
c[13]=h*d+l*e+q*b+a[13];c[14]=g*d+p*e+t*b+a[14];c[15]=n*d+z*e+u*b+a[15];return c},scale:function(a,b,c){var d=b[0],e=b[1];b=b[2];if(!c||a===c)return a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=e,a[5]*=e,a[6]*=e,a[7]*=e,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=a[0]*d;c[1]=a[1]*d;c[2]=a[2]*d;c[3]=a[3]*d;c[4]=a[4]*e;c[5]=a[5]*e;c[6]=a[6]*e;c[7]=a[7]*e;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*
a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))},rotate:function(a,b,c,d){var e=c[0],f=c[1];c=c[2];var h=Math.sqrt(e*e+f*f+c*c),g,k,n,l,p,m,z,q,t,u,r,A,w,x,y,v,L,U,V,Q;if(!h)return null;1!==h&&(h=1/h,e*=h,f*=h,c*=h);g=Math.sin(b);k=Math.cos(b);n=1-k;b=a[0];h=a[1];l=a[2];p=a[3];m=a[4];z=a[5];q=a[6];t=a[7];u=a[8];r=a[9];A=a[10];w=a[11];x=e*e*n+k;y=f*e*n+c*g;v=c*e*n-f*g;L=e*f*n-c*g;U=f*f*n+k;V=c*f*n+e*g;Q=e*c*n+f*g;e=f*c*n-e*g;f=c*c*n+k;
d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*x+m*y+u*v;d[1]=h*x+z*y+r*v;d[2]=l*x+q*y+A*v;d[3]=p*x+t*y+w*v;d[4]=b*L+m*U+u*V;d[5]=h*L+z*U+r*V;d[6]=l*L+q*U+A*V;d[7]=p*L+t*U+w*V;d[8]=b*Q+m*e+u*f;d[9]=h*Q+z*e+r*f;d[10]=l*Q+q*e+A*f;d[11]=p*Q+t*e+w*f;return d},rotateX:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[4],f=a[5],h=a[6],g=a[7],k=a[8],n=a[9],l=a[10],p=a[11];c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=
e*b+k*d;c[5]=f*b+n*d;c[6]=h*b+l*d;c[7]=g*b+p*d;c[8]=e*-d+k*b;c[9]=f*-d+n*b;c[10]=h*-d+l*b;c[11]=g*-d+p*b;return c},rotateY:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],f=a[1],h=a[2],g=a[3],k=a[8],l=a[9],n=a[10],p=a[11];c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+k*-d;c[1]=f*b+l*-d;c[2]=h*b+n*-d;c[3]=g*b+p*-d;c[8]=e*d+k*b;c[9]=f*d+l*b;c[10]=h*d+n*b;c[11]=g*d+p*b;return c},rotateZ:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);
var e=a[0],f=a[1],h=a[2],g=a[3],k=a[4],l=a[5],n=a[6],p=a[7];c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+k*d;c[1]=f*b+l*d;c[2]=h*b+n*d;c[3]=g*b+p*d;c[4]=e*-d+k*b;c[5]=f*-d+l*b;c[6]=h*-d+n*b;c[7]=g*-d+p*b;return c},frustum:function(a,b,c,d,e,f,h){h||(h=w.create());var g=b-a,k=d-c,l=f-e;h[0]=2*e/g;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2*e/k;h[6]=0;h[7]=0;h[8]=(b+a)/g;h[9]=(d+c)/k;h[10]=-(f+e)/l;h[11]=-1;h[12]=0;h[13]=0;h[14]=-(f*e*2)/
l;h[15]=0;return h},perspective:function(a,b,c,d,e){a=c*Math.tan(a*Math.PI/360);b*=a;return w.frustum(-b,b,-a,a,c,d,e)},ortho:function(a,b,c,d,e,f,h){h||(h=w.create());var g=b-a,k=d-c,l=f-e;h[0]=2/g;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2/k;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=-2/l;h[11]=0;h[12]=-(a+b)/g;h[13]=-(d+c)/k;h[14]=-(f+e)/l;h[15]=1;return h},lookAt:function(a,b,c,d){d||(d=w.create());var e,f,h,g,k,l,n,p,m=a[0],z=a[1];a=a[2];h=c[0];g=c[1];f=c[2];n=b[0];c=b[1];e=b[2];if(m===n&&z===c&&a===e)return w.identity(d);
b=m-n;c=z-c;n=a-e;p=1/Math.sqrt(b*b+c*c+n*n);b*=p;c*=p;n*=p;e=g*n-f*c;f=f*b-h*n;h=h*c-g*b;(p=Math.sqrt(e*e+f*f+h*h))?(p=1/p,e*=p,f*=p,h*=p):h=f=e=0;g=c*h-n*f;k=n*e-b*h;l=b*f-c*e;(p=Math.sqrt(g*g+k*k+l*l))?(p=1/p,g*=p,k*=p,l*=p):l=k=g=0;d[0]=e;d[1]=g;d[2]=b;d[3]=0;d[4]=f;d[5]=k;d[6]=c;d[7]=0;d[8]=h;d[9]=l;d[10]=n;d[11]=0;d[12]=-(e*m+f*z+h*a);d[13]=-(g*m+k*z+l*a);d[14]=-(b*m+c*z+n*a);d[15]=1;return d},fromRotationTranslation:function(a,b,c){c||(c=w.create());var d=a[0],e=a[1],f=a[2],h=a[3],g=d+d,k=
e+e,l=f+f;a=d*g;var n=d*k,d=d*l,p=e*k,e=e*l,f=f*l,g=h*g,k=h*k,h=h*l;c[0]=1-(p+f);c[1]=n+h;c[2]=d-k;c[3]=0;c[4]=n-h;c[5]=1-(a+f);c[6]=e+g;c[7]=0;c[8]=d+k;c[9]=e-g;c[10]=1-(a+p);c[11]=0;c[12]=b[0];c[13]=b[1];c[14]=b[2];c[15]=1;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},v={create:function(a){var b=new d(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=
a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,e){var f=new d(4);f[0]=a;f[1]=b;f[2]=c;f[3]=e;return f},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=v.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},u=v.identity();v.calculateW=function(a,b){var c=a[0],d=a[1],e=a[2];if(!b||a===b)return a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a;b[0]=c;b[1]=d;b[2]=e;b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e));return b};v.dot=function(a,b){return a[0]*b[0]+
a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};v.inverse=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],c=(c=c*c+d*d+e*e+f*f)?1/c:0;if(!b||a===b)return a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a;b[0]=-a[0]*c;b[1]=-a[1]*c;b[2]=-a[2]*c;b[3]=a[3]*c;return b};v.conjugate=function(a,b){if(!b||a===b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};v.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};v.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],
e=a[2],f=a[3],h=Math.sqrt(c*c+d*d+e*e+f*f);if(0===h)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;h=1/h;b[0]=c*h;b[1]=d*h;b[2]=e*h;b[3]=f*h;return b};v.add=function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};v.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2];a=a[3];var h=b[0],g=b[1],k=b[2];b=b[3];c[0]=d*b+a*h+e*k-f*g;c[1]=e*b+a*g+f*h-d*k;c[2]=f*b+a*k+d*g-e*h;c[3]=a*b-d*h-e*g-f*k;return c};v.multiplyVec3=
function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2];b=a[0];var h=a[1],g=a[2];a=a[3];var k=a*d+h*f-g*e,l=a*e+g*d-b*f,n=a*f+b*e-h*d,d=-b*d-h*e-g*f;c[0]=k*a+d*-b+l*-g-n*-h;c[1]=l*a+d*-h+n*-b-k*-g;c[2]=n*a+d*-g+k*-h-l*-b;return c};v.scale=function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};v.toMat3=function(a,b){b||(b=r.create());var c=a[0],d=a[1],e=a[2],f=a[3],h=c+c,g=d+d,k=e+e,l=c*h,n=c*g,c=c*k,p=d*g,d=d*k,e=e*k,h=f*h,g=f*g,f=
f*k;b[0]=1-(p+e);b[1]=n+f;b[2]=c-g;b[3]=n-f;b[4]=1-(l+e);b[5]=d+h;b[6]=c+g;b[7]=d-h;b[8]=1-(l+p);return b};v.toMat4=function(a,b){b||(b=w.create());var c=a[0],d=a[1],e=a[2],f=a[3],h=c+c,g=d+d,k=e+e,l=c*h,n=c*g,c=c*k,p=d*g,d=d*k,e=e*k,h=f*h,g=f*g,f=f*k;b[0]=1-(p+e);b[1]=n+f;b[2]=c-g;b[3]=0;b[4]=n-f;b[5]=1-(l+e);b[6]=d+h;b[7]=0;b[8]=c+g;b[9]=d-h;b[10]=1-(l+p);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};v.slerp=function(a,b,c,d){d||(d=a);var e=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3],f,h;if(1<=
Math.abs(e))return d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d;f=Math.acos(e);h=Math.sqrt(1-e*e);if(.001>Math.abs(h))return d[0]=.5*a[0]+.5*b[0],d[1]=.5*a[1]+.5*b[1],d[2]=.5*a[2]+.5*b[2],d[3]=.5*a[3]+.5*b[3],d;e=Math.sin((1-c)*f)/h;c=Math.sin(c*f)/h;d[0]=a[0]*e+b[0]*c;d[1]=a[1]*e+b[1]*c;d[2]=a[2]*e+b[2]*c;d[3]=a[3]*e+b[3]*c;return d};v.fromRotationMatrix=function(a,b){b||(b=v.create());var c=a[0]+a[4]+a[8],d;if(0<c)d=Math.sqrt(c+1),b[3]=.5*d,d=.5/d,b[0]=(a[7]-a[5])*d,b[1]=(a[2]-a[6])*d,b[2]=
(a[3]-a[1])*d;else{d=v.fromRotationMatrix.s_iNext=v.fromRotationMatrix.s_iNext||[1,2,0];c=0;a[4]>a[0]&&(c=1);a[8]>a[3*c+c]&&(c=2);var e=d[c],f=d[e];d=Math.sqrt(a[3*c+c]-a[3*e+e]-a[3*f+f]+1);b[c]=.5*d;d=.5/d;b[3]=(a[3*f+e]-a[3*e+f])*d;b[e]=(a[3*e+c]+a[3*c+e])*d;b[f]=(a[3*f+c]+a[3*c+f])*d}return b};r.toQuat4=v.fromRotationMatrix;(function(){var a=r.create();v.fromAxes=function(b,c,d,e){a[0]=c[0];a[3]=c[1];a[6]=c[2];a[1]=d[0];a[4]=d[1];a[7]=d[2];a[2]=b[0];a[5]=b[1];a[8]=b[2];return v.fromRotationMatrix(a,
e)}})();v.identity=function(a){a||(a=v.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};v.fromAngleAxis=function(a,b,c){c||(c=v.create());a*=.5;var d=Math.sin(a);c[3]=Math.cos(a);c[0]=d*b[0];c[1]=d*b[1];c[2]=d*b[2];return c};v.toAngleAxis=function(a,b){b||(b=a);var d=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<d?(b[3]=2*Math.acos(a[3]),d=c.invsqrt(d),b[0]=a[0]*d,b[1]=a[1]*d,b[2]=a[2]*d):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};v.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var x={create:function(a){var b=
new d(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,e){var f=new d(4);f[0]=a;f[1]=b;f[2]=c;f[3]=e;return f},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=x.create());a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(!b||a===b){var c=a[1];a[1]=a[2];a[2]=c;return a}b[0]=a[0];b[1]=a[2];b[2]=a[1];b[3]=a[3];return b},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,
b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],h=c*f-e*d;if(!h)return null;h=1/h;b[0]=f*h;b[1]=-d*h;b[2]=-e*h;b[3]=c*h;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2];a=a[3];c[0]=d*b[0]+e*b[2];c[1]=d*b[1]+e*b[3];c[2]=f*b[0]+a*b[2];c[3]=f*b[1]+a*b[3];return c},rotate:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2];a=a[3];var h=Math.sin(b);b=Math.cos(b);c[0]=d*b+e*h;c[1]=d*-h+e*b;c[2]=f*b+a*h;c[3]=f*-h+a*b;return c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];c[0]=d*
a[0]+b*a[1];c[1]=d*a[2]+b*a[3];return c},scale:function(a,b,c){c||(c=a);var d=a[1],e=a[2],f=a[3],h=b[0];b=b[1];c[0]=a[0]*h;c[1]=d*b;c[2]=e*h;c[3]=f*b;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}},y=a?"":"d";b["glMath"+y]=c;b["vec2"+y]={create:function(a){var b=new d(2);a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0);return b},createFrom:function(a,b){var c=new d(2);c[0]=a;c[1]=b;return c},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];return c},subtract:function(a,
b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;return c},dist:function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},dist2:function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d},set:function(a,b){b[0]=a[0];b[1]=a[1];return b},set2:function(a,b,c){c[0]=a;c[1]=b;return c},negate:function(a,
b){b||(b=a);b[0]=-a[0];b[1]=-a[1];return b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0;return b},cross:function(a,b,c){a=a[0]*b[1]-a[1]*b[0];if(!c)return a;c[0]=c[1]=0;c[2]=a;return c},length:function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0];a=a[1]-b[1];b=d*d+a*a;if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/Math.sqrt(b);c[0]=d*
b;c[1]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);return d},str:function(a){return"["+a[0]+", "+a[1]+"]"}};b["vec3"+y]=g;b["vec4"+y]={create:function(a){var b=new d(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b},createFrom:function(a,b,c,e){var f=new d(4);f[0]=a;f[1]=b;f[2]=c;f[3]=e;return f},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c},subtract:function(a,
b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];
return b},set4:function(a,b,c,d,e){e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);d[3]=a[3]+c*(b[3]-a[3]);return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};b["mat2"+y]=x;b["mat3"+y]=r;b["mat4"+y]=w;b["quat4"+y]=v});return b})},"esri/layers/vectorTiles/views/2d/engine/webgl/TextureManager":function(){define("require exports ../../../../core/promiseUtils ./CIMSymbolHelper ./GlyphMosaic ./GlyphSource ./SDFHelper ./SpriteMosaic ./Utils ../../../3d/support/imageUtils".split(" "),
function(b,d,a,c,e,g,h,f,l,k){function m(a){if(a.type){switch(l.normalizeSymbolType(a.type)){case "simple-marker":return"simple-marker"+a.style;case "simple-line":return"simple-line"+a.style}if(l.isPictureSymbol(a))return a.url?a.url:a.imageData+(""+a.width+a.height)}return JSON.stringify(a)}return function(){function b(){this._spriteMosaic=new f(1024,1024,250);this._glyphSource=new g("https://basemaps.arcgis.com/v1/arcgis/rest/services/World_Basemap/VectorTileServer/resources/fonts/{fontstack}/{range}.pbf");
this._glyphMosaic=new e(1024,1024,this._glyphSource)}Object.defineProperty(b.prototype,"sprites",{get:function(){return this._spriteMosaic},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"glyphs",{get:function(){return this._glyphMosaic},enumerable:!0,configurable:!0});b.prototype.rasterizeItem=function(b,c){void 0===c&&(c=null);return b?!b.type||"text"!==b.type&&"esriTS"!==b.type?this._rasterizeSpriteSymbol(b).then(function(a){return{spriteMosaicItem:a}}):this._rasterizeTextSymbol(b,
c).then(function(a){return{glyphMosaicItems:a}}):a.resolve(null)};b.prototype.bindSpritePage=function(a,b,c,d){d||(d=9729);this._spriteMosaic.bind(a,d,b,c)};b.prototype.bindGlyphsPage=function(a,b,c){this._glyphMosaic.bind(a,9729,b,c)};b.prototype._rasterizeTextSymbol=function(a,b){return this._glyphMosaic.getGlyphItems(a,b)};b.prototype._rasterizeSpriteSymbol=function(b){var c=this;if((l.isFillSymbol(b)||l.isLineSymbol(b))&&("solid"===b.style||"esriSFSSolid"===b.style||"esriSLSSolid"===b.style||
"none"===b.style))return a.resolve(null);var d=m(b);if(this._spriteMosaic.has(d))return a.resolve(this._spriteMosaic.getSpriteItem(d));if(b.url||b.imageData)return k.requestImage(b.imageData?"data:"+b.contentType+";base64,"+b.imageData:b.url).then(function(a){a=c._rasterizeResource(a);return c._addItemToMosaic(d,a.size,a.anchor,a.image,!l.isMarkerSymbol(b),a.sdf)});var e=this._rasterizeResource(b);return a.resolve(this._addItemToMosaic(d,e.size,e.anchor,e.image,!l.isMarkerSymbol(b),e.sdf))};b.prototype._rasterizeResource=
function(a){if(a instanceof HTMLImageElement){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));this._rasterizationCanvas.width=a.width;this._rasterizationCanvas.height=a.height;var b=this._rasterizationCanvas.getContext("2d");b.drawImage(a,0,0,a.width,a.height);for(var b=b.getImageData(0,0,a.width,a.height),b=new Uint8Array(b.data),c=void 0,d=0;d<b.length;d+=4)c=b[d+3]/255,b[d]*=c,b[d+1]*=c,b[d+2]*=c;return{size:[a.width,a.height],anchor:[0,0],image:new Uint32Array(b.buffer),
sdf:!1}}return this._rasterizeJSON(a)};b.prototype._addItemToMosaic=function(a,b,c,d,e,f){return this._spriteMosaic.addSpriteItem(a,b,c,d,e,f)};b.prototype._rasterizeJSON=function(a){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));if("simple-fill"===a.type||"esriSFS"===a.type){var b=c.SymbolHelper.rasterizeSimpleFill(this._rasterizationCanvas,a.style);a=b[0];var d=b[1],b=b[2];return{size:[d,b],anchor:[0,0],image:new Uint32Array(a.buffer),sdf:!1}}if("simple-line"===
a.type||"esriSLS"===a.type)return b=c.SymbolHelper.rasterizeSimpleLine(this._rasterizationCanvas,a.style),a=b[0],d=b[1],b=b[2],{size:[d,b],anchor:[0,0],image:new Uint32Array(a.buffer),sdf:!0};"simple-marker"===a.type||"esriSMS"===a.type?(a=c.CIMSymbolHelper.fromSimpleMarker(a),d=!0):d=h.SDFHelper.checkSDF(a);if(d)return d=(new h.SDFHelper).buildSDF(a),a=d[0],{size:[d[1],d[2]],anchor:[0,0],image:new Uint32Array(a.buffer),sdf:!0};var e=c.CIMSymbolHelper.rasterize(this._rasterizationCanvas,a);a=e[0];
d=e[1];b=e[2];return{size:[d,b],anchor:[e[3],e[4]],image:new Uint32Array(a.buffer),sdf:!1}};return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/CIMSymbolHelper":function(){define(["require","exports","./CIMSymbolDrawHelper","./SDFHelper","../../../vectorTiles/GeometryUtils"],function(b,d,a,c,e){Object.defineProperty(d,"__esModule",{value:!0});b=function(){function b(){}b.getEnvelope=function(b){if("CIMPointSymbol"!==b.type)return null;var c=new a.EnvDrawHelper;c.drawSymbol(b,{type:"point",
x:0,y:0});return c.envelope()};b.rasterize=function(b,c){var d=this.getEnvelope(c);if(!d||0>=d.width||0>=d.height)return[null,0,0,0,0];var e=96/72,f=(d.x+.5*d.width)*e,h=-(d.y+.5*d.height)*e;b.width=d.width*e+2;b.height=d.height*e+2;d=b.getContext("2d");e=a.Transformation.createScale(e,-e);e.translate(.5*b.width-f,.5*b.height-h);(new a.CanvasDrawHelper(d,e)).drawSymbol(c,{type:"point",x:0,y:0});for(var e=d.getImageData(0,0,b.width,b.height),e=new Uint8Array(e.data),g=0;g<e.length;g+=4)d=e[g+3]/255,
e[g]*=d,e[g+1]*=d,e[g+2]*=d;return[e,b.width,b.height,f/b.width,h/b.height]};b.fromSimpleMarker=function(a){var b,c,d=a.style;if("circle"===d||"esriSMSCircle"===d){b=Math.acos(.995);c=Math.ceil(e.C_PI/b/4);0===c&&(c=1);b=e.C_PI_BY_2/c;c*=4;d=[];d.push([50,0]);for(var h=1;h<c;h++)d.push([50*Math.cos(h*b),-50*Math.sin(h*b)]);d.push([50,0]);b={rings:[d]};c={xmin:-50,ymin:-50,xmax:50,ymax:50}}else if("cross"===d||"esriSMSCross"===d)b=10,b={rings:[[[b,50],[b,b],[50,b],[50,-b],[b,-b],[b,-50],[-b,-50],[-b,
-b],[-50,-b],[-50,b],[-b,b],[-b,50],[b,50]]]},c={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("diamond"===d||"esriSMSDiamond"===d)b={rings:[[[-50,0],[0,50],[50,0],[0,-50],[-50,0]]]},c={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("square"===d||"esriSMSSquare"===d)b={rings:[[[-50,-50],[-50,50],[50,50],[50,-50],[-50,-50]]]},c={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("x"===d||"esriSMSX"===d)b=14.142135623730951,b={rings:[[[0,b],[50-b,50],[50,50-b],[b,0],[50,b-50],[50-b,-50],[0,-b],[b-50,-50],[-50,b-50],
[-b,0],[-50,50-b],[b-50,50],[0,b]]]},c={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("triangle"===d||"esriSMSTriangle"===d)c=2/3*100,d=c-100,b={rings:[[[-57.735026918962575,d],[0,c],[57.735026918962575,d],[-57.735026918962575,d]]]},c={xmin:-57.735026918962575,ymin:d,xmax:57.735026918962575,ymax:c};var g;b&&c&&(g=[{type:"CIMSolidFill",enable:!0,color:a.color}],a.outline&&g.push({type:"CIMSolidStroke",enable:!0,width:a.outline.width,color:a.outline.color}),g={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",
enable:!0,rotation:a.angle,size:a.size,offsetX:a.xoffset,offsetY:a.yoffset,frame:c,markerGraphics:[{type:"CIMMarkerGraphic",geometry:b,symbol:{type:"CIMPolygonSymbol",symbolLayers:g}}]}]});return g};return b}();d.CIMSymbolHelper=b;b=function(){function a(){}a.rasterizeSimpleFill=function(a,b){"solid"!==b&&"none"!==b&&"esriSFSSolid"!==b&&"esriSFSNull"!==b||console.error("Unexpected: style does not require rasterization");a.width=8;a.height=8;var c=a.getContext("2d");c.strokeStyle="#FFFFFF";c.beginPath();
if("vertical"===b||"cross"===b||"esriSFSCross"===b||"esriSFSVertical"===b)c.moveTo(0,0),c.lineTo(0,8);if("horizontal"===b||"cross"===b||"esriSFSCross"===b||"esriSFSHorizontal"===b)c.moveTo(0,0),c.lineTo(8,0);if("forward-diagonal"===b||"diagonal-cross"===b||"esriSFSDiagonalCross"===b||"esriSFSForwardDiagonal"===b)c.moveTo(0,0),c.lineTo(8,8);if("backward-diagonal"===b||"diagonal-cross"===b||"esriSFSBackwardDiagonal"===b||"esriSFSDiagonalCross"===b)c.moveTo(8,0),c.lineTo(0,8);c.stroke();for(var c=c.getImageData(0,
0,a.width,a.height),c=new Uint8Array(c.data),d,e=0;e<c.length;e+=4)d=c[e+3]/255,c[e]*=d,c[e+1]*=d,c[e+2]*=d;return[c,a.width,a.height]};a.rasterizeSimpleLine=function(a,b){var d;switch(b){case "dash":case "esriSLSDash":d=[3,2];break;case "dash-dot":case "esriSLSDashDot":d=[2,2,0,2];break;case "dot":case "esriSLSDot":d=[0,3];break;case "long-dash":case "esriSLSLongDash":d=[6,3];break;case "long-dash-dot":case "esriSLSLongDashDot":d=[6,3,0,3];break;case "long-dash-dot-dot":case "esriSLSLongDashDotDot":d=
[2,2,0,2,0,2];break;case "short-dash":case "esriSLSShortDash":d=[2,2];break;case "short-dash-dot":case "esriSLSShortDashDot":d=[2,2,0,2];break;case "short-dash-dot-dot":case "esriSLSShortDashDotDot":d=[2,2,0,2,0,2];break;case "short-dot":case "esriSLSShortDot":d=[0,2];break;case "solid":case "esriSLSSolid":throw Error("Unexpected: style does not require rasterization");case "none":throw Error("Unexpected: style does not require rasterization");}for(var e=0,f=0,h=d;f<h.length;f++)var g=h[f],e=e+g;
e*=16;h=31*e;f=new Float32Array(h);for(g=0;g<h;++g)f[g]=257;for(var r=h=.5,w=!0,v=0;v<d.length;v++){for(var g=d[v],h=r,r=r+16*g,u=h;u<r;){for(var x=.5;31>x;){var g=(31-x+1.5)*e+u-.5,y=(x-15.5)*(x-15.5);f[g]=w?y:Math.min((u-h)*(u-h)+y,(u-r)*(u-r)+y);x++}u++}w=!w}d=f.length;h=new Uint8Array(4*d);for(g=0;g<d;++g)c.packFloat(Math.sqrt(f[g])/15,h,4*g);return[h,e,31]};return a}();d.SymbolHelper=b})},"esri/layers/vectorTiles/views/2d/engine/webgl/CIMSymbolDrawHelper":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/decorateHelper ./GeometryUtils ./Rect".split(" "),
function(b,d,a,c,e,g){Object.defineProperty(d,"__esModule",{value:!0});var h=function(){function a(a){this._t=a}a.createIdentity=function(){return new a([1,0,0,0,1,0])};a.prototype.clone=function(){return new a(this._t.slice())};a.prototype.transform=function(a){var b=this._t;return[b[0]*a[0]+b[1]*a[1]+b[2],b[3]*a[0]+b[4]*a[1]+b[5]]};a.createScale=function(b,c){return new a([b,0,0,0,c,0])};a.prototype.scale=function(a,b){var c=this._t;c[0]*=a;c[1]*=a;c[2]*=a;c[3]*=b;c[4]*=b;c[5]*=b;return this};a.prototype.scaleRatio=
function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])};a.createTranslate=function(b,c){return new a([0,0,b,0,0,c])};a.prototype.translate=function(a,b){var c=this._t;c[2]+=a;c[5]+=b;return this};a.createRotate=function(b){var c=Math.cos(b);b=Math.sin(b);return new a([c,-b,0,b,c,0])};a.prototype.rotate=function(b){return this.multiply(a.createRotate(b))};a.prototype.multiply=function(a){var b=this._t;a=a._t;var c=b[1]*a[0]+b[4]*a[1],d=b[2]*a[0]+b[5]*a[1]+a[2],e=b[0]*a[3]+b[3]*a[4],
f=b[1]*a[3]+b[4]*a[4],h=b[2]*a[3]+b[5]*a[4]+a[5];b[0]=b[0]*a[0]+b[3]*a[1];b[1]=c;b[2]=d;b[3]=e;b[4]=f;b[5]=h;return this};return a}();d.Transformation=h;b=function(){function a(a){this._transfos=[];this._sizeTransfos=[];this._transfos.push(a||h.createIdentity());this._sizeTransfos.push(a?a.scaleRatio():1)}a.prototype.transformPt=function(a){return this._transfos[this._transfos.length-1].transform(a)};a.prototype.transformSize=function(a){return a*this._sizeTransfos[this._sizeTransfos.length-1]};a.prototype.back=
function(){return this._transfos[this._transfos.length-1]};a.prototype.push=function(a){var b=a.scaleRatio();a.multiply(this.back());this._transfos.push(a);this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*b)};a.prototype.pop=function(){this._transfos.splice(-1,1);this._sizeTransfos.splice(-1,1)};a.prototype.drawSolidFill=function(a,b){};a.prototype.drawSolidStroke=function(a,b,c){};a.prototype.drawSymbol=function(a,b){if(a)switch(a.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":this.drawMultiLayerSymbol(a,
b)}};a.prototype.drawMultiLayerSymbol=function(a,b){if(a){var c=a.symbolLayers;if(c)for(var d=c.length;d--;){var e=c[d];if(e&&e.enable)switch(e.type){case "CIMSolidFill":this.drawSolidFill(b,e.color);break;case "CIMSolidStroke":this.drawSolidStroke(b,e.color,e.width);break;case "CIMVectorMarker":this.drawVectorMarker(e,b)}}}};a.prototype.drawVectorMarker=function(a,b){if(a){var c=a.markerGraphics;if(c){var d=a.size,f=a.frame,g=f?f.ymax-f.ymin:0,g=d&&g?d/g:1,k=h.createIdentity();f&&k.translate(.5*
-(f.xmax+f.xmin),.5*-(f.ymax+f.ymin));var l=a.anchorPt;if(l){var u=l.x,l=l.y;"relative"===a.anchorPtUnits&&f&&(u*=(f.xmax-f.xmin)*g,l*=d);k.translate(-u,-l)}1!==g&&k.scale(g,g);a.rotation&&k.rotate(a.rotation*e.C_DEG_TO_RAD);k.translate(a.offsetX||0,a.offsetY||0);k.translate(b.x,b.y);this.push(k);for(d=0;d<c.length;d++)(f=c[d])&&this.drawSymbol(f.symbol,f.geometry);this.pop()}}};return a}();d.CIMSymbolDrawHelper=b;c=function(b){function c(){var a=b.call(this)||this;a._xmin=a._ymin=Infinity;a._xmax=
a._ymax=-Infinity;return a}a(c,b);c.prototype.envelope=function(){return new g(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)};c.prototype._merge=function(a,b){a[0]-b<this._xmin&&(this._xmin=a[0]-b);a[0]+b>this._xmax&&(this._xmax=a[0]+b);a[1]-b<this._ymin&&(this._ymin=a[1]-b);a[1]+b>this._ymax&&(this._ymax=a[1]+b)};c.prototype.drawSolidFill=function(a,b){for(var c=0,d=a.rings;c<d.length;c++){var e=d[c],f=e?e.length:0;if(2<f){this._merge(this.transformPt(e[0]),0);for(var h=1;h<
f;++h)this._merge(this.transformPt(e[h]),0)}}};c.prototype.drawSolidStroke=function(a,b,c){b=.5*this.transformSize(c);c=0;for(a=a.rings||a.paths;c<a.length;c++){var d=a[c],e=d?d.length:0;if(1<e){this._merge(this.transformPt(d[0]),b);for(var f=1;f<e;++f)this._merge(this.transformPt(d[f]),b)}}};return c}(b);d.EnvDrawHelper=c;b=function(b){function c(a,c){var d=b.call(this,c)||this;d._ctx=a;return d}a(c,b);c.prototype.drawSolidFill=function(a,b){var c=this._ctx;c.fillStyle="rgba("+Math.round(b[0])+","+
Math.round(b[1])+","+Math.round(b[2])+","+b[3]/255+")";c.beginPath();for(var d=0,e=a.rings;d<e.length;d++){var f=e[d],h=f?f.length:0;if(2<h){var g=this.transformPt(f[0]);c.moveTo(g[0],g[1]);for(var k=1;k<h;++k)g=this.transformPt(f[k]),c.lineTo(g[0],g[1]);c.closePath()}}c.fill("evenodd")};c.prototype.drawSolidStroke=function(a,b,c){var d=this._ctx;d.strokeStyle="rgba("+Math.round(b[0])+","+Math.round(b[1])+","+Math.round(b[2])+","+b[3]/255+")";d.lineWidth=this.transformSize(c)+.5;d.beginPath();b=!!a.rings;
c=0;for(a=a.rings||a.paths;c<a.length;c++){var e=a[c],f=e?e.length:0;if(1<f){var h=this.transformPt(e[0]);d.moveTo(h[0],h[1]);for(var g=1;g<f;++g)h=this.transformPt(e[g]),d.lineTo(h[0],h[1]);b&&d.closePath()}}d.stroke()};return c}(b);d.CanvasDrawHelper=b})},"esri/layers/vectorTiles/views/2d/engine/webgl/Rect":function(){define(["require","exports"],function(b,d){return function(){function a(a,b,d,h){void 0===a&&(a=0);void 0===b&&(b=0);void 0===d&&(d=0);void 0===h&&(h=0);this.x=a;this.y=b;this.width=
d;this.height=h}Object.defineProperty(a.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0});return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/SDFHelper":function(){define(["require","exports","./Geometry","./Rect"],function(b,d,a,c){function e(a){return a-Math.floor(a)}function g(a,b,c){0>a?a=0:.9999991<a&&(a=.9999991);var d=e(a*h[0]),g=e(a*h[1]),k=e(a*h[2]);a=e(a*h[3]);b[c+0]=256*(d-d*f[0]);b[c+1]=256*(g-d*f[1]);b[c+2]=256*(k-g*f[2]);
b[c+3]=256*(a-k*f[3])}Object.defineProperty(d,"__esModule",{value:!0});var h=[16777216,65536,256,1],f=[0,1/256,1/256,1/256];d.packFloat=g;b=function(){function b(){}b.checkSDF=function(a){return!0};b.prototype._extractGeometry=function(b){if(!b)return null;b=b.symbolLayers;if(!b||1!==b.length)return null;b=b[0];if(!b)return null;b=b.markerGraphics;if(!b||1!==b.length)return null;b=b[0];if(!b)return null;var c=b.geometry;if(!c||!c.rings)return null;b=[];for(var d=0,c=c.rings;d<c.length;d++){for(var e=
[],f=0,h=c[d];f<h.length;f++){var g=h[f];e.push(new a.Point(g[0],g[1]))}b.push(e)}return b};b.prototype._getEnvelope=function(a){for(var b=Infinity,d=-Infinity,e=Infinity,f=-Infinity,h=0;h<a.length;h++)for(var g=0,k=a[h];g<k.length;g++){var l=k[g];l.x<b&&(b=l.x);l.x>d&&(d=l.x);l.y<e&&(e=l.y);l.y>f&&(f=l.y)}return new c(b,e,d-b,f-e)};b.prototype.buildSDF=function(a){a=this._extractGeometry(a);if(!a)return null;var b=this._getEnvelope(a);if(0>=b.width||0>=b.height)return null;for(var c=Math.floor(31.5),
d=(128-2*(c+0+1))/Math.max(b.width,b.height),e=Math.round(b.width*d),f=Math.round(b.height*d),h=e+2*c,g=f+2*c,k=0;k<a.length;k++)for(var l=0,n=a[k];l<n.length;l++){var p=n[l];p.x-=b.x;p.y-=b.y;p.x*=d;p.y*=d;p.x+=c-.5;p.y+=c-.5}b=this._dist_map(a,h,g,c);this._sign_dist_map(a,h,g,c,b);return[this._encodeDistMap(b,c),h,g,e,f,d]};b.prototype._dist_map=function(a,b,c,d){for(var e=b*c,f=new Float32Array(e),h=d*d+1,g=0;g<e;++g)f[g]=h;for(h=0;h<a.length;h++)for(var k=a[h],l=k.length,g=1;g<l;++g){var m=k[g-
1],p=k[g],q=void 0,t=void 0;m.x<p.x?(q=m.x,t=p.x):(q=p.x,t=m.x);var B=void 0,D=void 0;m.y<p.y?(B=m.y,D=p.y):(B=p.y,D=m.y);var C=Math.floor(q)-d,t=Math.floor(t)+d,B=Math.floor(B)-d,D=Math.floor(D)+d;0>C&&(C=0);t>b&&(t=b);0>B&&(B=0);D>c&&(D=c);for(var q=p.x-m.x,J=p.y-m.y,E=q*q+J*J;C<t;C++)for(var H=B;H<D;H++){var K=(C-m.x)*q+(H-m.y)*J,aa=void 0,O=void 0;0>K?(aa=m.x,O=m.y):K>E?(aa=p.x,O=p.y):(K/=E,aa=m.x+K*q,O=m.y+K*J);K=(C-aa)*(C-aa)+(H-O)*(H-O);aa=(c-H-1)*b+C;K<f[aa]&&(f[aa]=K)}}for(g=0;g<e;++g)f[g]=
Math.sqrt(f[g]);return f};b.prototype._sign_dist_map=function(a,b,c,d,e){for(var f=0;f<a.length;f++)for(var h=a[f],g=h.length,k=1;k<g;++k){var l=h[k-1],m=h[k],p=void 0,q=void 0;l.x<m.x?(p=l.x,q=m.x):(p=m.x,q=l.x);var t=void 0,r=void 0;l.y<m.y?(t=l.y,r=m.y):(t=m.y,r=l.y);p=Math.floor(p);q=Math.floor(q)+1;t=Math.floor(t);r=Math.floor(r)+1;p<d&&(p=d);q>b-d&&(q=b-d);t<d&&(t=d);for(r>c-d&&(r=c-d);t<r;++t)if(l.y>t!==m.y>t){for(var D=(c-t-1)*b,C=p;C<q;++C)C<(m.x-l.x)*(t-l.y)/(m.y-l.y)+l.x&&(e[D+C]=-e[D+
C]);for(C=d;C<p;++C)e[D+C]=-e[D+C]}}};b.prototype._encodeDistMap=function(a,b){for(var c=2*b,d=a.length,e=new Uint8Array(4*d),f=0;f<d;++f)g(.5-a[f]/c,e,4*f);return e};return b}();d.SDFHelper=b})},"esri/layers/vectorTiles/views/2d/engine/webgl/Geometry":function(){define(["require","exports"],function(b,d){Object.defineProperty(d,"__esModule",{value:!0});var a=function(){function a(a,b){this.x=a;this.y=b}a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.equals=function(a,b){return a===
this.x&&b===this.y};a.prototype.isEqual=function(a){return a.x===this.x&&a.y===this.y};a.prototype.setCoords=function(a,b){this.x=a;this.y=b};a.prototype.normalize=function(){var a=this.x,b=this.y,a=Math.sqrt(a*a+b*b);this.x/=a;this.y/=a};a.prototype.rightPerpendicular=function(){var a=this.x;this.x=this.y;this.y=-a};a.prototype.move=function(a,b){this.x+=a;this.y+=b};a.prototype.assign=function(a){this.x=a.x;this.y=a.y};a.prototype.assignAdd=function(a,b){this.x=a.x+b.x;this.y=a.y+b.y};a.prototype.assignSub=
function(a,b){this.x=a.x-b.x;this.y=a.y-b.y};a.prototype.rotate=function(a,b){var c=this.x,d=this.y;this.x=c*a-d*b;this.y=c*b+d*a};a.prototype.scale=function(a){this.x*=a;this.y*=a};a.prototype.length=function(){var a=this.x,b=this.y;return Math.sqrt(a*a+b*b)};a.distance=function(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.sqrt(c*c+d*d)};a.add=function(b,c){return new a(b.x+c.x,b.y+c.y)};a.sub=function(b,c){return new a(b.x-c.x,b.y-c.y)};return a}();d.Point=a})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require",
"exports"],function(b,d){function a(a,b){a%=b;return 0<=a?a:a+b}Object.defineProperty(d,"__esModule",{value:!0});d.C_INFINITY=Number.POSITIVE_INFINITY;d.C_PI=Math.PI;d.C_2PI=2*d.C_PI;d.C_PI_BY_2=d.C_PI/2;d.C_RAD_TO_256=128/d.C_PI;d.C_256_TO_RAD=d.C_PI/128;d.C_DEG_TO_256=256/360;d.C_DEG_TO_RAD=d.C_PI/180;d.C_SQRT2=1.414213562;d.C_SQRT2_INV=1/d.C_SQRT2;var c=1/Math.LN2;d.positiveMod=a;d.radToByte=function(b){return a(b*d.C_RAD_TO_256,256)};d.degToByte=function(b){return a(b*d.C_DEG_TO_256,256)};d.log2=
function(a){return Math.log(a)*c};d.sqr=function(a){return a*a};d.clamp=function(a,b,c){return Math.min(Math.max(a,b),c)};d.interpolate=function(a,b,c){return a*(1-c)+b*c};d.between=function(a,b,c){return a>=b&&a<=c||a>=c&&a<=b}})},"esri/layers/vectorTiles/views/2d/engine/webgl/GlyphMosaic":function(){define("require exports dojo/has dojo/promise/all ./fontUtils ./Rect ./RectangleBinPack ../../../webgl/Texture".split(" "),function(b,d,a,c,e,g,h,f){var l;a("stable-symbol-rendering")&&(l=new Set);return function(){function b(a,
b,c){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;(0>=a||0>=b)&&console.error("Glyph mosaic width and height must be greater than zero!");this.width=a;this.height=b;this._glyphSource=c;this._binPack=new h(a-4,b-4);this._glyphData.push(new Uint8Array(a*b));this._dirties.push(!0);this._textures.push(void 0)}b.prototype.getGlyphItems=function(b,d){for(var f=this,k=e.getFullyQualifiedFontName(b),m=[],
t=this._glyphSource,u=new Set,x=1/256,y=0;y<d.length;y++)u.add(Math.floor(d[y]*x));var n=[];u.forEach(function(a){if(256>=a){var b=k+a;f._rangePromises.has(b)?n.push(f._rangePromises.get(b)):(a=t.getRange(k,a).always(function(){f._rangePromises["delete"](b)}),f._rangePromises.set(b,a),n.push(a))}});return c(n).then(function(b){b=f._glyphIndex[k];b||(b={},f._glyphIndex[k]=b);var c;if(a("stable-symbol-rendering")){l.clear();for(var e=0;e<d.length;e++)c=d[e],l.add(c);var n=[];u.forEach(function(a){n.push(a)});
n.sort();c=[];for(e=0;e<n.length;e++)for(var p=n[e],q=0;256>q;++q)c.push(256*p+q)}else c=d;e=0;for(p=c;e<p.length;e++)if(c=p[e],q=b[c]){if(!a("stable-symbol-rendering")||l.has(c))m[c]={rect:q.rect,metrics:q.metrics,page:q.page}}else{var r=t.getGlyph(k,c);if(r&&r.metrics){var q=r.metrics,x=void 0;if(0===q.width)x=new g(0,0,0,0);else{var w=q.width+6,y=q.height+6,v=w%4?4-w%4:4,O=y%4?4-y%4:4;1===v&&(v=5);1===O&&(O=5);x=f._binPack.allocate(w+v,y+O);x.isEmpty&&(f._dirties[f._currentPage]||(f._glyphData[f._currentPage]=
null),f._currentPage=f._glyphData.length,f._glyphData.push(new Uint8Array(f.width*f.height)),f._dirties.push(!0),f._textures.push(void 0),f._binPack=new h(f.width-4,f.height-4),x=f._binPack.allocate(w+v,y+O));var v=f._glyphData[f._currentPage],r=r.bitmap,R=O=void 0;if(r)for(var N=0;N<y;N++)for(var O=w*N,R=f.width*(x.y+N+1)+x.x,G=0;G<w;G++)v[R+G+1]=r[O+G]}b[c]={rect:x,metrics:q,tileIDs:null,page:f._currentPage};if(!a("stable-symbol-rendering")||l.has(c))m[c]={rect:x,metrics:q,page:f._currentPage};
f._dirties[f._currentPage]=!0}}return m})};b.prototype.bind=function(a,b,c,d){this._textures[c]||(this._textures[c]=new f(a,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));var e=this._textures[c];e.setSamplingMode(b);this._dirties[c]&&e.setData(this._glyphData[c]);a.bindTexture(e,d);this._dirties[c]=!1};b.prototype.dispose=function(){this._binPack=null;for(var a=0,b=this._textures;a<b.length;a++){var c=b[a];c&&c.dispose()}this._textures.length=
0};return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/fontUtils":function(){define(["require","exports"],function(b,d){Object.defineProperty(d,"__esModule",{value:!0});d.getFullyQualifiedFontName=function(a){a=a.font;var b;a:{switch(a.weight.toLowerCase()){case "bold":case "bolder":b=" Bold";break a}b=""}var d;a:{switch(a.style.toLowerCase()){case "italic":case "oblic":d=" Italic";break a}d=""}b+=d;a:{switch(a.decoration.toLowerCase()){case "underline":d=" Underline";break a;case "line-through":d=
" Strikethrough";break a}d=""}b+=d;return a.family.charAt(0).toUpperCase()+a.family.slice(1)+(0<b.length?b:" Regular")}})},"esri/layers/vectorTiles/views/2d/engine/webgl/RectangleBinPack":function(){define(["require","exports","./Rect"],function(b,d,a){return function(){function b(b,c){this._height=this._width=0;this._free=[];this._width=b;this._height=c;this._free.push(new a(0,0,b,c))}Object.defineProperty(b.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"height",{get:function(){return this._height},enumerable:!0,configurable:!0});b.prototype.allocate=function(b,c){if(b>this._width||c>this._height)return new a;for(var d=null,e=-1,g=0;g<this._free.length;++g){var k=this._free[g];b<=k.width&&c<=k.height&&(null===d||k.y<=d.y&&k.x<=d.x)&&(d=k,e=g)}if(null===d)return new a;this._free.splice(e,1);d.width<d.height?(d.width>b&&this._free.push(new a(d.x+b,d.y,d.width-b,c)),d.height>c&&this._free.push(new a(d.x,d.y+c,d.width,d.height-c))):(d.width>b&&this._free.push(new a(d.x+
b,d.y,d.width-b,d.height)),d.height>c&&this._free.push(new a(d.x,d.y+c,b,d.height-c)));return new a(d.x,d.y,b,c)};b.prototype.release=function(a){for(var b=0;b<this._free.length;++b){var c=this._free[b];if(c.y===a.y&&c.height===a.height&&c.x+c.width===a.x)c.width+=a.width;else if(c.x===a.x&&c.width===a.width&&c.y+c.height===a.y)c.height+=a.height;else if(a.y===c.y&&a.height===c.height&&a.x+a.width===c.x)c.x=a.x,c.width+=a.width;else if(a.x===c.x&&a.width===c.width&&a.y+a.height===c.y)c.y=a.y,c.height+=
a.height;else continue;this._free.splice(b,1);this.release(a)}this._free.push(a)};return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/GlyphSource":function(){define(["require","exports","../../../../request","../../../../core/pbf","../../../../core/promiseUtils"],function(b,d,a,c,e){var g=function(){function a(a){this._metrics=[];for(this._bitmaps=[];a.next();)switch(a.tag()){case 1:for(var b=a.getMessage();b.next();)switch(b.tag()){case 3:for(var c=b.getMessage(),d=void 0,e=void 0,f=void 0,
h=void 0,g=void 0,l=void 0,x=void 0;c.next();)switch(c.tag()){case 1:d=c.getUInt32();break;case 2:e=c.getBytes();break;case 3:f=c.getUInt32();break;case 4:h=c.getUInt32();break;case 5:g=c.getSInt32();break;case 6:l=c.getSInt32();break;case 7:x=c.getUInt32();break;default:c.skip()}d&&(this._metrics[d]={width:f,height:h,left:g,top:l,advance:x},this._bitmaps[d]=e);break;default:b.skip()}break;default:a.skip()}}a.prototype.getMetrics=function(a){return this._metrics[a]};a.prototype.getBitmap=function(a){return this._bitmaps[a]};
return a}(),h=function(){function a(){this._ranges=[]}a.prototype.getRange=function(a){return this._ranges[a]};a.prototype.addRange=function(a,b){this._ranges[a]=b};return a}();return function(){function b(a){this._glyphInfo={};this._baseURL=a}b.prototype.getRange=function(b,d){var f=this._getFontStack(b);if(f.getRange(d))return e.resolve();var h=256*d,k=h+255,h=this._baseURL.replace("{fontstack}",b).replace("{range}",h+"-"+k);return a(h,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(a){f.addRange(d,
new g(new c(new Uint8Array(a.data),new DataView(a.data))))})};b.prototype.getGlyph=function(a,b){var c=this._getFontStack(a);if(c){var d=Math.floor(b/256);if(!(256<d)&&(c=c.getRange(d)))return{metrics:c.getMetrics(b),bitmap:c.getBitmap(b)}}};b.prototype._getFontStack=function(a){var b=this._glyphInfo[a];b||(b=this._glyphInfo[a]=new h);return b};return b}()})},"esri/layers/vectorTiles/request":function(){define(["require","exports","esri/request","dojo/_base/lang","dojo/Deferred"],function(b,d,a,c,
e){return function(b,d){var f=c.mixin({},{url:b,failOk:!0},d);"array-buffer"===d.responseType?(f.handleAs="arraybuffer",delete f.responseType):d.responseType&&(f.handleAs=d.responseType,delete f.responseType);null!==d.query&&(f.content=f.query,delete f.query);var h;d.hasOwnProperty("allowImageDataAccess")&&(h={allowImageDataAccess:d.allowImageDataAccess},delete f.allowImageDataAccess);var g,m=new e(function(){g.isFulfilled()||g.cancel()});g=a(f,h).then(function(a){m.resolve({data:a})}).catch(function(a){a&&
null!=a.httpCode&&(a.details=a.details||{},a.details.httpStatus=a.httpCode);m.reject(a)});return m.promise}})},"esri/layers/vectorTiles/core/pbf":function(){define(["require","exports"],function(b,d){return function(){function a(a,b,d,h){this._tag=0;this._dataType=99;this._data=a;this._dataView=b;this._pos=d||0;this._end=h||a.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var b=
this._decodeVarint();this._tag=b>>3;this._dataType=b&7;if(!a||a===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=function(){var a=4294967295,a=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<7)>>>0;if(128>
this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<21)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&15)<<28)>>>0;if(128>this._data[this._pos++])return a};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){var a=this.getUInt32();return a>>>1^-(a&1)|0};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=
function(){var a=0!==this._data[this._pos];this._skip(1);return a};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getUint32(b+4,!0);this._skip(8);return a};a.prototype.getSFixed64=function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getInt32(b+4,!0);this._skip(8);return a};a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);this._skip(8);
return a};a.prototype.getFixed32=function(){var a=this._dataView.getUint32(this._pos,!0);this._skip(4);return a};a.prototype.getSFixed32=function(){var a=this._dataView.getInt32(this._pos,!0);this._skip(4);return a};a.prototype.getFloat=function(){var a=this._dataView.getFloat32(this._pos,!0);this._skip(4);return a};a.prototype.getString=function(){var a=this._getLength(),b=this._pos,b=this._toString(this._data,b,b+a);this._skip(a);return b};a.prototype.getBytes=function(){var a=this._getLength(),
b=this._pos,b=this._toBytes(this._data,b,b+a);this._skip(a);return b};a.prototype.getMessage=function(){var b=this._getLength(),d=this._pos,d=new a(this._data,this._dataView,d,d+b);this._skip(b);return d};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");
this._pos+=a};a.prototype._decodeVarint=function(){var a=this._data,b=this._pos,d=0,h;if(10<=this._end-b){if(h=a[b++],d|=h&127,0!==(h&128)&&(h=a[b++],d|=(h&127)<<7,0!==(h&128)&&(h=a[b++],d|=(h&127)<<14,0!==(h&128)&&(h=a[b++],d|=(h&127)<<21,0!==(h&128)&&(h=a[b++],d+=268435456*(h&127),0!==(h&128)&&(h=a[b++],d+=34359738368*(h&127),0!==(h&128)&&(h=a[b++],d+=4398046511104*(h&127),0!==(h&128)&&(h=a[b++],d+=562949953421312*(h&127),0!==(h&128)&&(h=a[b++],d+=72057594037927936*(h&127),0!==(h&128)&&(h=a[b++],
d+=0x7fffffffffffffff*(h&127),0!==(h&128)))))))))))throw Error("Varint too long!");}else{for(var f=1;b!==this._end;){h=a[b];if(0===(h&128))break;++b;d+=(h&127)*f;f*=128}if(b===this._end)throw Error("Varint overrun!");++b;d+=h*f}this._pos=b;return d};a.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(a,b,
d){var c="",e="";for(d=Math.min(this._end,d);b<d;++b){var g=a[b];g&128?e+="%"+g.toString(16):(c+=decodeURIComponent(e)+String.fromCharCode(g),e="")}e.length&&(c+=decodeURIComponent(e));return c};a.prototype._toBytes=function(a,b,d){d=Math.min(this._end,d);return new Uint8Array(a.buffer,b,d-b)};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/SpriteMosaic":function(){define("require exports ./GeometryUtils ./Rect ./RectangleBinPack ../../../webgl/Texture".split(" "),function(b,d,a,c,e,
g){return function(){function b(a,b,c){void 0===c&&(c=0);this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects=new Map;this._spriteCopyQueue=[];this.pixelRatio=1;(0>=a||0>=b)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!");this._pageWidth=a;this._pageHeight=b;0<c&&(this._maxItemSize=c);this.pixelRatio=window.devicePixelRatio|1;this._binPack=new e(this._pageWidth,
this._pageHeight);this._mosaicsData[0]=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight));this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}b.prototype.getWidth=function(a){return a>=this._size.length?-1:this._size[a][0]};b.prototype.getHeight=function(a){return a>=this._size.length?-1:this._size[a][1]};b.prototype.getPage=function(a){return a<this._textures.length?this._textures[a]:null};b.prototype.has=function(a){return this._mosaicRects.has(a)};
Object.defineProperty(b.prototype,"itemCount",{get:function(){return this._mosaicRects.size},enumerable:!0,configurable:!0});b.prototype.getSpriteItem=function(a){return this._mosaicRects.get(a)};b.prototype.addSpriteItem=function(a,b,c,d,e,h){if(this._mosaicRects.has(a))return this._mosaicRects.get(a);var f=this._allocateImage(b[0],b[1]),g=f[0],k=f[1],f=f[2];if(0>=g.width||0>=g.height)return null;c={rect:g,width:b[0],height:b[1],anchorX:c[0],anchorY:c[1],sdf:h,pixelRatio:1,page:k};this._mosaicRects.set(a,
c);this._copy({rect:g,spriteSize:b,spriteData:d,page:k,pageSize:f,repeat:e,sdf:h});return c};b.prototype.hasItemsToProcess=function(){return 0!==this._spriteCopyQueue.length};b.prototype.processNextItem=function(){var a=this._spriteCopyQueue.pop();a&&this._copy(a)};b.prototype.getSpriteItems=function(a){for(var b={},c=0;c<a.length;c++){var d=a[c];b[d]=this.getSpriteItem(d)}return b};b.prototype.getMosaicItemPosition=function(a,b){var c=this.getSpriteItem(a),d=c&&c.rect;if(!d)return null;d.width=c.width;
d.height=c.height;return{size:[c.width,c.height],tl:[(d.x+1)/this._size[c.page][0],(d.y+1)/this._size[c.page][1]],br:[(d.x+1+c.width)/this._size[c.page][0],(d.y+1+c.height)/this._size[c.page][1]],page:c.page}};b.prototype.bind=function(a,b,c,d){void 0===c&&(c=0);void 0===d&&(d=0);this._textures[c]||(this._textures[c]=new g(a,{pixelFormat:6408,dataType:5121,width:this._size[c][0],height:this._size[c][1]},new Uint8Array(this._mosaicsData[c].buffer)));var e=this._textures[c];e.setSamplingMode(b);this._dirties[c]&&
(e.setData(new Uint8Array(this._mosaicsData[c].buffer)),e.generateMipmap());a.bindTexture(e,d);this._dirties[c]=!1};b._copyBits=function(a,b,c,d,e,h,g,w,v,u,x){var f=d*b+c;g=w*h+g;if(x)for(g-=h,x=-1;x<=u;x++,f=((x+u)%u+d)*b+c,g+=h)for(w=-1;w<=v;w++)e[g+w]=a[f+(w+v)%v];else for(x=0;x<u;x++){for(w=0;w<v;w++)e[g+w]=a[f+w];f+=b;g+=h}};b.prototype._copy=function(a){if(!(a.page>=this._mosaicsData.length)){var c=a.spriteData,d=this._mosaicsData[a.page];d&&c||console.error("Source or target images are uninitialized!");
b._copyBits(c,a.spriteSize[0],0,0,d,a.pageSize[0],a.rect.x+1,a.rect.y+1,a.spriteSize[0],a.spriteSize[1],a.repeat);this._dirties[a.page]=!0}};b.prototype._allocateImage=function(b,d){b+=2;d+=2;var f=Math.max(b,d);if(this._maxItemSize&&this._maxItemSize<f){var f=Math.pow(2,Math.ceil(a.log2(b))),h=Math.pow(2,Math.ceil(a.log2(d))),g=new c(0,0,b,d);this._mosaicsData.push(new Uint32Array(f*h));this._dirties.push(!0);this._size.push([f,h]);this._textures.push(void 0);return[g,this._mosaicsData.length-1,
[f,h]]}f=this._binPack.allocate(b+(b%4?4-b%4:0),d+(d%4?4-d%4:0));return 0>=f.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new e(this._pageWidth,this._pageHeight),this._allocateImage(b,d)):[f,this._currentPage,[this._pageWidth,this._pageHeight]]};
b.prototype._dispose=function(){this._binPack=null;this._mosaicRects.clear()};return b}()})},"esri/layers/vectorTiles/views/3d/support/imageUtils":function(){define(["require","exports","../../../request"],function(b,d,a){Object.defineProperty(d,"__esModule",{value:!0});d.dataURItoBlob=function(a){var b=atob(a.split(",")[1]);a=a.split(",")[0].split(":")[1].split(";")[0];for(var c=new ArrayBuffer(b.length),d=new Uint8Array(c),f=0;f<b.length;f++)d[f]=b.charCodeAt(f);return new Blob([c],{type:a})};d.requestImage=
function(b){return a(b,{responseType:"image",allowImageDataAccess:!0}).then(function(a){return a.data})}})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLRendererInfo":function(){define("require exports ../../../../core/screenUtils ../../../../geometry/support/scaleUtils ../../../../renderers/support/utils ./color ./Utils".split(" "),function(b,d,a,c,e,g,h){function f(a,b){var c=b.length;if(a<b[0].value||1===c)return b[0].size;for(var d=1;d<c;d++)if(a<b[d].value)return b[d-1].size+(a-b[d-1].value)/
(b[d].value-b[d-1].value)*(b[d].size-b[d-1].size);return b[c-1].size}return function(){function b(a){this.symbolLevels=[];this.vvColorValues=new Float32Array(8);this.vvColors=new Float32Array(32);this.vvOpacityValues=new Float32Array(8);this.vvOpacities=new Float32Array(8);this.vvSizeMinMaxValue=new Float32Array(4);this.vvSizeFieldStopsValues=new Float32Array(6);this.vvSizeFieldStopsSizes=new Float32Array(6);this._vvMaterialParameters={vvSizeEnabled:!1,vvColorEnabled:!1,vvRotationEnabled:!1,vvRotationType:"geographic",
vvOpacityEnabled:!1};this.symbolLevels.push(0)}Object.defineProperty(b.prototype,"vvMaterialParameters",{get:function(){return this._vvMaterialParameters},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"heatmapParameters",{get:function(){return this._heatmapParameters},enumerable:!0,configurable:!0});b.prototype.updateHeatmapParameters=function(a){var b=a.blurRadius,c=Math.round(4.5*a.blurRadius),d=2*c+1;this._heatmapParameters||(this._heatmapParameters={radius:b,blurRadius:c,kernelSize:d,
refreshIntensityKernel:!0,intensityKernel:null,color:null,maxPixelIntensity:a.maxPixelIntensity,minPixelIntensity:a.minPixelIntensity});for(var e=this._heatmapParameters,f=a.colorStops,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l,y=0;16>y;y++){var n=f[Math.min(y,f.length-1)];h[y]=n.ratio;l=4*y;k[l+0]=n.color[0]/255;k[l+1]=n.color[1]/255;k[l+2]=n.color[2]/255;k[l+3]=1<n.color[3]?
n.color[3]/255:n.color[3];g.premultiplyAlpha(k,l,!0)}e.color={values:h,colors:k,refreshColorRamp:!0};1E-6<Math.abs(e.radius-a.radius)&&(e.radius=b,e.blurRadius=c,e.kernelSize=d,e.refreshIntensityKernel=!0);e.maxPixelIntensity=a.maxPixelIntensity;e.minPixelIntensity=a.minPixelIntensity};b.prototype.updateVisualVariables=function(b,d){var g=this._vvMaterialParameters;g.vvOpacityEnabled=!1;g.vvSizeEnabled=!1;g.vvColorEnabled=!1;g.vvRotationEnabled=!1;if(b){var k=b.size;if(k){g.vvSizeEnabled=!0;if(k.minMaxValue){var l=
k.minMaxValue,m=void 0,v=void 0;h.isDefined(l.minSize)&&h.isDefined(l.maxSize)&&(h.isNumber(l.minSize)&&h.isNumber(l.maxSize)?(m=a.pt2px(l.minSize),v=a.pt2px(l.maxSize)):(v=d.scale,m=a.pt2px(f(v,l.minSize.stops)),v=a.pt2px(f(v,l.maxSize.stops))));this.vvSizeMinMaxValue.set([l.minDataValue,l.maxDataValue,m,v])}k.scaleStops&&(this.vvSizeScaleStopsValue=a.pt2px(f(d.scale,k.scaleStops.stops)));k.unitValue&&(this.vvSizeUnitValueToPixelsRatio=c.getMetersPerUnitForSR(d.spatialReference)/e.meterIn[k.unitValue.unit]/
d.resolution);k.fieldStops&&(this.vvSizeFieldStopsValues.set(k.fieldStops.values),this.vvSizeFieldStopsSizes.set(k.fieldStops.sizes))}if(k=b.color)g.vvColorEnabled=!0,this.vvColorValues.set(k.values),this.vvColors.set(k.colors);if(k=b.opacity)g.vvOpacityEnabled=!0,this.vvOpacityValues.set(k.values),this.vvOpacities.set(k.opacities);if(k=b.rotation)g.vvRotationEnabled=!0,g.vvRotationType=k.type}};return b}()})},"esri/layers/vectorTiles/geometry/support/scaleUtils":function(){define(["require","exports",
"../../config","../../core/kebabDictionary","./WKIDUnitConversion"],function(b,d,a,c,e){function g(a){return r.fromJSON(a.toLowerCase())||null}function h(a){return f(a)||m}function f(a){var b,c,d;a&&("object"===typeof a?(b=a.wkid,c=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(c=a));b?d=q.values[q[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=t.exec(c))&&a[1]&&(d=parseFloat(a[1].split(",")[1]));return d}function l(a){var b,c,d;a&&("object"===typeof a?(b=a.wkid,c=a.wkt):"number"===typeof a?b=a:"string"===
typeof a&&(c=a));b?d=q.units[q[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=t.exec(c))&&a[1]&&(d=(a=/[\\"\\']{1}([^\\"\\']+)/.exec(a[1]))&&a[1]);return d?g(d):null}function k(b,c){var d=h(c);return b/(39.37*d*a.screenDPI)}Object.defineProperty(d,"__esModule",{value:!0});var m=20015077/180,t=/UNIT\[([^\]]+)\]\]$/i,q=e,r=c({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",
chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"},{ignoreUnknown:!0});d.unitFromRESTJSON=g;d.unitToRESTJSON=function(a){return r.toJSON(a)||null};d.getMetersPerVerticalUnitForSR=function(a){a=h(a);return 1E5<a?1:a};d.getVerticalUnitStringForSR=function(a){return 1E5<h(a)?"meters":l(a)};
d.getMetersPerUnitForSR=h;d.getMetersPerUnit=f;d.getUnitString=l;d.getScale=function(b,c){var d=c||b.extent,e=b.width,h=f(d&&d.spatialReference);return d&&e?d.width/e*(h||m)*39.37*a.screenDPI:0};d.getResolutionForScale=k;d.getExtentForScale=function(a,b){var c=a.extent,d=a.width,e=k(b,c.spatialReference);return c.clone().expand(e*d/c.width)}})},"esri/layers/vectorTiles/config":function(){define(["require","exports","esri/config"],function(b,d,a){Object.defineProperty(a,"workers",{get:function(){return a.defaults.workers},
set:function(b){return a.defaults.workers=b}});return a})},"esri/layers/vectorTiles/core/kebabDictionary":function(){define(["require","exports"],function(b,d){return function(a,b){void 0===b&&(b={});var c=b.ignoreUnknown||!1,d={},h;for(h in a)d[a[h]]=h;var f=function(a){return d.hasOwnProperty(a)?d[a]:c?void 0:a},l=function(b){return a.hasOwnProperty(b)?a[b]:c?void 0:b};return{toJSON:f,fromJSON:l,read:function(a){return l(a)},write:function(a,b,c){a=f(a);void 0!==a&&(b[c]=a)}}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLTile":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/libs/gl-matrix/mat4 ../../../../core/libs/gl-matrix/vec2 ../DisplayObject ./DisplayRecordStore ./enums ./WGLBuffers ./WGLDisplayList ./WGLDisplayObject ./WGLDisplayRecord ../../tiling/TileKey".split(" "),
function(b,d,a,c,e,g,h,f,l,k,m,t,q){function r(a,b){return a.sortKey-b.sortKey}var w=new Set;return function(b){function d(a,d){var h=b.call(this)||this;h.tileStatus=f.TileStatus.INITIALIZED;h._data=null;h.hlDisplayList=null;h._wglBuffers=null;h.coords=[0,0];h.bounds=[0,0,0,0];h.tileTransform={transform:Float32Array[16],displayCoord:Float32Array[2]};h._hasVisualVariables=!1;h.tileTransform.transform=c.create();h.tileTransform.displayCoord=e.create();h.key=q.pool.acquire(a);h.coords[0]=d[0];h.coords[1]=
d[3];h.bounds=d;return h}a(d,b);Object.defineProperty(d.prototype,"iconGeometry",{get:function(){return this.getGeometry(f.WGLGeometryType.MARKER)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"textGeometry",{get:function(){return this.getGeometry(f.WGLGeometryType.TEXT)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"fillGeometry",{get:function(){return this.getGeometry(f.WGLGeometryType.FILL)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"lineGeometry",{get:function(){return this.getGeometry(f.WGLGeometryType.LINE)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"canDisplay",{get:function(){return!!this.attached&&!!this._data},enumerable:!0,configurable:!0});d.prototype.getGeometry=function(a){return this._wglBuffers&&this._wglBuffers.has(a)?this._wglBuffers.get(a):null};d.prototype.getDisplayList=function(a){switch(a){case f.WGLDrawPhase.HIGHLIGHT:return this.hlDisplayList;default:return this._data&&this._data.tileDisplayData.displayList}};
Object.defineProperty(d.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0});d.prototype.setData=function(a,b,c){c?(this.clear(),this.tileStatus=f.TileStatus.INVALID):a&&a.tileDisplayData?(this._dispRecStore=h.default.fromTileData(a),this._hasVisualVariables=b,this._geometryTypes=[f.WGLGeometryType.FILL,f.WGLGeometryType.LINE,f.WGLGeometryType.MARKER,f.WGLGeometryType.TEXT],this._data=a,this.tileStatus=this.tileStatus===f.TileStatus.READY||this.tileStatus===f.TileStatus.NO_DATA||
this.tileStatus===f.TileStatus.INVALID?f.TileStatus.MODIFIED:f.TileStatus.READY):(this.clear(),this.tileStatus=f.TileStatus.NO_DATA)};d.prototype.patchData=function(a){this._data&&(this.tileStatus=f.TileStatus.MODIFIED,this._patchData(a)||(this._data.reshuffle(),this._dispRecStore=h.default.fromTileData(this._data)),this.requestRender())};d.prototype.commitChanges=function(a){this._data&&this.tileStatus===f.TileStatus.MODIFIED&&(this._wglBuffers&&(35048!==this._wglBuffers.usage&&(this._wglBuffers.dispose(),
this._wglBuffers=new l.default(35048)),this._wglBuffers.ensureBuffers(a.context,this._geometryTypes,this._hasVisualVariables),this._wglBuffers.upload(this._data.tileBufferData,this._geometryTypes,["geometry","visibility"],!0)),this.tileStatus=f.TileStatus.READY)};d.prototype.setVisibility=function(a){if(this._data){w.clear();for(var b=0;b<a.length;b++){var c=a[b],d=this._data.tileDisplayData.displayObjectRegistry.get(c.id);if(d)for(var e=0,d=d.displayRecords;e<d.length;e++){var f=d[e];w.add(f.geometryType);
var h=this._data.tileBufferData.geometries[f.geometryType];if(h.vertexBuffer.visibility)for(var h=h.vertexBuffer.visibility,g=0;g<f.vertexCount;++g)h.data[(f.vertexFrom+g)*h.stride/4]=c.visibility?4294967295:0}}if(this._wglBuffers){var k=[];w.forEach(function(a){k.push(a)});this._wglBuffers.upload(this._data.tileBufferData,k,["visibility"],!1);this.requestRender()}}};d.prototype.clear=function(){this._data=null;this._wglBuffers&&(this._wglBuffers.dispose(),this._wglBuffers=null);this.hlDisplayList&&
(this.hlDisplayList=null)};d.prototype.dispose=function(){this.clear()};d.prototype.attach=function(a){if(this.attached||this.tileStatus===f.TileStatus.INVALID)return!0;if(this.tileStatus===f.TileStatus.INITIALIZED)return!1;this._wglBuffers||(this._wglBuffers=new l.default(35044));this._data&&(this._wglBuffers.ensureBuffers(a.context,this._geometryTypes,this._hasVisualVariables),this._wglBuffers.upload(this._data.tileBufferData,this._geometryTypes,["geometry","visibility"],!0));return!0};d.prototype.detach=
function(a){b.prototype.detach.call(this,a)};d.prototype.doRender=function(a){var b=this;this.commitChanges(a);a.context.setStencilTestEnabled(!0);a.context.setStencilFunction(514,this.stencilRef,255);a.painter.getBrushes(a.drawPhase).forEach(function(c){return c.draw(a,b)})};d.prototype.buildHLList=function(a){var b=this;this.hlDisplayList=new k;a.forEach(function(a){b._addToHLDisplayList(b.hlDisplayList,a)})};d.prototype._addToHLDisplayList=function(a,b){if(this._data){var c=this._data.tileDisplayData.displayObjectRegistry.get(b);
if(c){for(var d=[],e=0,c=c.displayRecords;e<c.length;e++){var f=c[e],h=new t;h.id=f.id;h.geometryType=f.geometryType;h.vertexFrom=f.vertexFrom;h.vertexCount=f.vertexCount;h.indexFrom=f.indexFrom;h.indexCount=f.indexCount;h.materialInfo=f.materialInfo;h.meshData=null;h.symbolLevel=0;h.zOrder=0;d.push(h)}d.sort(r);a.addToList(d)}}};d.prototype._patchData=function(a){for(var b=!0,c=0,d=a.remove||[];c<d.length;c++){var e=d[c],f=this._data.tileDisplayData.displayObjectRegistry.get(e);if(f){this._data.tileDisplayData.displayList.removeFromList(f.displayRecords);
w.clear();for(var h=0,f=f.displayRecords;h<f.length;h++){var g=f[h];w.add(g.geometryType);this._dispRecStore.delete(g)}this._data.tileDisplayData.displayObjectRegistry.delete(e)}}var k=[];a.addOrUpdate.tileDisplayData.displayObjectRegistry.forEach(function(a){k.push(a)});for(c=0;c<k.length;c++){d=k[c];if(f=this._data.tileDisplayData.displayObjectRegistry.get(d.id)){for(e=0;e<f.displayRecords.length;++e)if(h=f.displayRecords[e],g=d.displayRecords[e],e>=d.displayRecords.length||h.geometryType!==g.geometryType||
h.symbolLevel!==g.symbolLevel||h.zOrder!==g.zOrder||h.materialInfo.materialKey!==g.materialInfo.materialKey)this._dispRecStore.delete(f.displayRecords[e]),e<d.displayRecords.length&&(f.displayRecords[e]=void 0);f.displayRecords.length=d.displayRecords.length}else f=new m(d.id),this._data.tileDisplayData.displayObjectRegistry.set(d.id,f);for(e=0;e<d.displayRecords.length;++e){var g=d.displayRecords[e],h=f.displayRecords[e],l=g.geometryType;g.readMeshDataFromBuffers(a.addOrUpdate.tileBufferData.geometries[l].vertexBuffer,
a.addOrUpdate.tileBufferData.geometries[l].indexBuffer);if(h)h.meshData=g.meshData,h.materialInfo=g.materialInfo;else{var h=new t,q;for(q in g)h[q]=g[q];h.vertexFrom=void 0;h.indexFrom=void 0;f.displayRecords[e]=h}b=b&&this._dispRecStore.commit(h)}}return b};return d}(g)})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec2":function(){define(["./common"],function(b){var d={create:function(){var a=new b.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var c=new b.ARRAY_TYPE(2);c[0]=a[0];c[1]=
a[1];return c},fromValues:function(a,c){var d=new b.ARRAY_TYPE(2);d[0]=a;d[1]=c;return d},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,d){a[0]=b;a[1]=d;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];return a},subtract:function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];return a}};d.sub=d.subtract;d.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];return a};d.mul=d.multiply;d.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];return a};d.div=d.divide;d.ceil=function(a,
b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};d.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};d.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);return a};d.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);return a};d.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};d.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;return a};d.scaleAndAdd=function(a,b,d,g){a[0]=b[0]+d[0]*g;a[1]=b[1]+d[1]*g;return a};
d.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)};d.dist=d.distance;d.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d};d.sqrDist=d.squaredDistance;d.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};d.len=d.length;d.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};d.sqrLen=d.squaredLength;d.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};d.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};d.normalize=function(a,
b){var c=b[0],d=b[1],c=c*c+d*d;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};d.cross=function(a,b,d){b=b[0]*d[1]-b[1]*d[0];a[0]=a[1]=0;a[2]=b;return a};d.lerp=function(a,b,d,g){var c=b[0];b=b[1];a[0]=c+g*(d[0]-c);a[1]=b+g*(d[1]-b);return a};d.random=function(a,c){c=c||1;var d=2*b.RANDOM()*Math.PI;a[0]=Math.cos(d)*c;a[1]=Math.sin(d)*c;return a};d.transformMat2=function(a,b,d){var c=b[0];b=b[1];a[0]=d[0]*c+d[2]*b;a[1]=d[1]*c+d[3]*b;return a};
d.transformMat2d=function(a,b,d){var c=b[0];b=b[1];a[0]=d[0]*c+d[2]*b+d[4];a[1]=d[1]*c+d[3]*b+d[5];return a};d.transformMat3=function(a,b,d){var c=b[0];b=b[1];a[0]=d[0]*c+d[3]*b+d[6];a[1]=d[1]*c+d[4]*b+d[7];return a};d.transformMat4=function(a,b,d){var c=b[0];b=b[1];a[0]=d[0]*c+d[4]*b+d[12];a[1]=d[1]*c+d[5]*b+d[13];return a};d.forEach=function(){var a=d.create();return function(b,d,g,h,f,l){d||(d=2);g||(g=0);for(h=h?Math.min(h*d+g,b.length):b.length;g<h;g+=d)a[0]=b[g],a[1]=b[g+1],f(a,a,l),b[g]=a[0],
b[g+1]=a[1];return b}}();d.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};d.equals=function(a,c){var d=a[0],g=a[1],h=c[0],f=c[1];return Math.abs(d-h)<=b.EPSILON*Math.max(1,Math.abs(d),Math.abs(h))&&Math.abs(g-f)<=b.EPSILON*Math.max(1,Math.abs(g),Math.abs(f))};return d})},"esri/layers/vectorTiles/views/2d/engine/webgl/DisplayRecordStore":function(){define(["require","exports","dojo/has","./FreeList"],function(b,d,a,c){function e(a){a=
a.getStrides();var b={},c;for(c in a)b[g[c]]=a[c];return b}Object.defineProperty(d,"__esModule",{value:!0});var g=["FILL","LINE","MARKER","TEXT"];b=function(){function b(a,b,d){this._strides=a;this._displayList=b;this._vertexAlignments={};this._freeListsAndStorage={};for(var e in a){var f=b=!1;this._freeListsAndStorage[e]={vtxFreeList:d?new c.FreeList(d):null,idxFreeList:d?new c.FreeList(d):null,vertexBuffers:{},indexBuffer:d?new Uint32Array(d):null};for(var h in a[e])this._freeListsAndStorage[e].vertexBuffers[h]=
{data:d?new Uint32Array(Math.floor(d*a[e][h]/4)):null,stride:a[e][h]},2===a[e][h]%4?b=!0:0!==a[e][h]%4&&(f=!0);this._vertexAlignments[e]=f?4:b?2:1}}b.fromTileData=function(a){var d=e(a),f=[0,0,0,0],h=[0,0,0,0],t=[];a.tileDisplayData.displayObjectRegistry.forEach(function(a){t.push(a)});for(var q=0;q<t.length;q++)for(var r=0,w=t[q].displayRecords;r<w.length;r++){var v=w[r];f[v.geometryType]=Math.max(f[v.geometryType],v.vertexFrom+v.vertexCount);h[v.geometryType]=Math.max(h[v.geometryType],v.indexFrom+
v.indexCount)}d=new b(d,a.tileDisplayData.displayList,null);for(q=0;q<a.tileBufferData.geometries.length;++q){var r=f[q],u=h[q],v=a.tileBufferData.geometries[q],w=d._storageFor(g[q]),x=a.tileBufferData.geometries[q].indexBuffer;w.indexBuffer=x;w.idxFreeList=new c.FreeList(x.length);w.idxFreeList.allocate(u);var u=void 0,y;for(y in v.vertexBuffer)v=a.tileBufferData.geometries[q].vertexBuffer[y],w.vertexBuffers[y].data=v.data,w.vertexBuffers[y].stride=v.stride,u=4*v.data.length/v.stride;w.vtxFreeList=
new c.FreeList(u);w.vtxFreeList.allocate(r)}return d};b.prototype.delete=function(a){var b=g[a.geometryType];this._freeVertices(b,a.vertexFrom,a.vertexCount);this._freeIndices(b,a.indexFrom,a.indexCount);this._displayList.removeFromList(a);a.vertexFrom=void 0;a.indexFrom=void 0};b.prototype.commit=function(a){var b=g[a.geometryType];if(!a.meshData)return!0;var c=a.meshData.vertexCount,d=a.meshData.indexData.length,e=a.vertexFrom,f=a.indexFrom,h=0,h=0,w=!1;void 0===a.vertexFrom?(h=this._align(b,c),
e=this._allocateVertices(b,h),a.meshData.vertexCount=h,-1!==e&&(a.vertexFrom=e,a.vertexCount=h)):c>a.vertexCount?(this._freeVertices(b,a.vertexFrom,a.vertexCount),h=this._align(b,c),e=this._allocateVertices(b,h),a.meshData.vertexCount=h,-1!==e&&(a.vertexFrom=e,a.vertexCount=h)):c!==a.vertexCount&&(this._freeVertices(b,a.vertexFrom+c,a.vertexCount-c),a.vertexCount=c);void 0===a.indexFrom?(w=!0,h=d,f=this._allocateIndices(b,h),-1!==f&&(a.indexFrom=f,a.indexCount=h)):d>a.indexCount?(w=!0,this._displayList.removeFromList(a),
this._freeIndices(b,a.indexFrom,a.indexCount),h=d,f=this._allocateIndices(b,h),-1!==f&&(a.indexFrom=f,a.indexCount=h)):d!==a.indexCount&&(w=!0,this._displayList.removeFromList(a),this._freeIndices(b,a.indexFrom+d,a.indexCount-d),a.indexCount=d);return-1!==e&&-1!==f?(b=this._storageFor(b),a.writeMeshDataToBuffers(a.vertexFrom,b.vertexBuffers,a.indexFrom,b.indexBuffer),a.meshData=null,w&&this._displayList.addToList(a),!0):!1};b.prototype._allocateVertices=function(a,b){var c=this._storageFor(a),d=c.vtxFreeList.allocate(b);
return-1===d||.5<c.vtxFreeList.fragmentation?-1:d};b.prototype._freeVertices=function(b,c,d){var e=this._storageFor(b);e.vtxFreeList.free(c,d);if(a("esri-feature-tiles-debug"))for(var f in e.vertexBuffers)for(var h=e.vertexBuffers[f].data,g=this._stridesFor(b,f),k=c*g/4,g=d*g/4,l=k;l<k+g;++l)h[l]=0};b.prototype._freeIndices=function(b,c,d){b=this._storageFor(b);b.idxFreeList.free(c,d);if(a("esri-feature-tiles-debug")){b=b.indexBuffer;for(var e=c;e<c+d;++e)b[e]=0}};b.prototype._align=function(a,b){var c=
b%this._vertexAlignments[a];return 0===c?b:b+(this._vertexAlignments[a]-c)};b.prototype._allocateIndices=function(a,b){var c=this._storageFor(a),d=c.idxFreeList.allocate(b);return-1===d||.5<c.idxFreeList.fragmentation?-1:d};b.prototype._storageFor=function(a){return this._freeListsAndStorage[a]};b.prototype._stridesFor=function(a,b){return this._strides[a][b]};return b}();d.default=b})},"esri/layers/vectorTiles/views/2d/engine/webgl/FreeList":function(){define(["require","exports"],function(b,d){Object.defineProperty(d,
"__esModule",{value:!0});var a=function(){function a(a){this._largestRange=null;this._parent=a;this._updateLargestRange()}Object.defineProperty(a.prototype,"largestRange",{get:function(){return this._largestRange},enumerable:!0,configurable:!0});a.prototype.rangeCreated=function(a){if(!this._largestRange||a.count>this._largestRange.count)this._largestRange=a};a.prototype.rangeResized=function(a,b,c){if(a===this._largestRange)a.count<c&&this._updateLargestRange();else if(!this._largestRange||a.count>
this._largestRange.count)this._largestRange=a};a.prototype.findBestRange=function(a){for(var b=this._parent._freeHead,c=null;null!==b;)b.count>=a&&(!c||b.count-a<c.count-a)&&(c=b),b=b.next;return c};a.prototype.findAdjacentRanges=function(a,b){for(var c=!0,d=!1,e=null,h=this._parent._freeHead;c&&!d;){var g=null!==h?h.from:this._parent._size;a>=(null!==e?e.from+e.count:0)&&a+b<=g?(c=!1,d=!0):null!==h?(e=h,h=h.next):c=!1}return[e,h]};a.prototype._updateLargestRange=function(){for(var a=null,b=this._parent._freeHead;null!==
b;){if(!a||b.count>a.count)a=b;b=b.next}this._largestRange=a};return a}(),c=function(){function b(b,c){this._allocated=0;this._size=b;this._freeHead=0<b?{from:0,count:b,prev:null,next:null}:null;this._bookKeeper=c||new a(this);this._freeHead&&this._bookKeeper.rangeCreated(this._freeHead)}b.prototype.allocate=function(a){var c=this._bookKeeper.findBestRange(a);if(null===c)return-1;var d=c.from,e=c.count;c.from+=a;c.count-=a;this._bookKeeper.rangeResized(c,d,e);this._allocated+=a;0===c.count&&(a=null!==
c.prev?this._freeHead:c.next,b._removeRange(c),this._freeHead=a);return d};b.prototype.free=function(a,c){var d=this._bookKeeper.findAdjacentRanges(a,c),e=d[0],d=d[1],h={from:a,count:c,prev:e,next:d};null!==e&&(e.next=h);null!==d&&(d.prev=h);this._bookKeeper.rangeCreated(h);this._allocated-=c;if(null!==d&&h.from+h.count===d.from){var g=h.from,t=h.count;b._fuse(h,d);b._removeRange(d);this._bookKeeper.rangeResized(h,g,t);this._bookKeeper.rangeResized(d,void 0,0)}null!==e&&e.from+e.count===h.from&&(g=
e.from,t=e.count,b._fuse(e,h),b._removeRange(h),this._bookKeeper.rangeResized(e,g,t),this._bookKeeper.rangeResized(h,void 0,0));this._freeHead=null!==h.prev?this._freeHead:h};Object.defineProperty(b.prototype,"fragmentation",{get:function(){var a=this._size-this._allocated;return 0===a?0:1-this._bookKeeper.largestRange.count/a},enumerable:!0,configurable:!0});b._removeRange=function(a){null!==a.prev?null!==a.next?(a.prev.next=a.next,a.next.prev=a.prev):a.prev.next=null:null!==a.next&&(a.next.prev=
null)};b._fuse=function(a,b){a.count+=b.count;a.next=b.next;b.from+=b.count;b.count=0;null!==b.next&&(b.next.prev=a)};return b}();d.FreeList=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLBuffers":function(){define(["require","exports","./enums","./Utils","../../../webgl/BufferObject"],function(b,d,a,c,e){Object.defineProperty(d,"__esModule",{value:!0});var g=new c.KeysGetter;b=function(){function b(a){this._usage=a;this.geometryMap=new Map}b.prototype.dispose=function(){for(var a=0,b=g.getKeys(this.geometryMap);a<
b.length;a++){var c=this.geometryMap.get(b[a]);c.vao&&c.vao.dispose();c.indexBuffer&&c.indexBuffer.dispose();for(var d in c.vertexBufferMap)c.vertexBufferMap[d]&&c.vertexBufferMap[d].dispose()}this.geometryMap.clear()};Object.defineProperty(b.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0});b.prototype.ensureBuffers=function(b,d,h){for(var f=0,k=g.getKeys(this.geometryMap);f<k.length;f++){var l=k[f];if(-1===d.indexOf(l)){var r=this.geometryMap.get(l);r.vao&&r.vao.dispose();
r.indexBuffer&&r.indexBuffer.dispose();for(var w in r.vertexBufferMap)r.vertexBufferMap[w]&&r.vertexBufferMap[w].dispose()}this.geometryMap["delete"](l)}for(f=0;f<d.length;f++){l=d[f];k=void 0;this.geometryMap.has(l)?(k=this.geometryMap.get(l),k.vao&&(k.vao.dispose(),k.vao=null)):(k={vertexBufferMap:{},indexBuffer:null,vao:null},this.geometryMap.set(l,k));r=void 0;l===a.WGLGeometryType.FILL?r=h?c.C_FILL_VERTEX_NAMES_VV:c.C_FILL_VERTEX_NAMES:l===a.WGLGeometryType.LINE?r=h?c.C_LINE_VERTEX_NAMES_VV:
c.C_LINE_VERTEX_NAMES:l===a.WGLGeometryType.MARKER?r=h?c.C_ICON_VERTEX_NAMES_VV:c.C_ICON_VERTEX_NAMES:l===a.WGLGeometryType.TEXT&&(r=h?c.C_TEXT_VERTEX_NAMES_VV:c.C_TEXT_VERTEX_NAMES);for(var v in k.vertexBufferMap)-1===r.indexOf(v)&&k.vertexBufferMap[v]&&(k.vertexBufferMap[v].dispose(),k.vertexBufferMap[v]=null);for(l=0;l<r.length;l++)w=r[l],k.vertexBufferMap[w]||(k.vertexBufferMap[w]=e.createVertex(b,this._usage));k.indexBuffer||(k.indexBuffer=e.createIndex(b,this._usage))}};b.prototype.get=function(a){return this.geometryMap.get(a)};
b.prototype.has=function(a){return this.geometryMap.has(a)};b.prototype.upload=function(a,b,c,d){for(var e=0;e<b.length;e++){var f=b[e],h=this.geometryMap.get(f);if(h){if(d){var g=a.geometries[f].indexBuffer.buffer;h.indexBuffer&&0<g.byteLength&&h.indexBuffer.setData(g)}for(var g=0,k=c;g<k.length;g++){var l=k[g],m=a.geometries[f].vertexBuffer[l];m&&(m=m.data.buffer,h.vertexBufferMap[l]&&0<m.byteLength&&h.vertexBufferMap[l].setData(m))}}}};return b}();d.default=b})},"esri/layers/vectorTiles/views/2d/tiling/TileKey":function(){define(["require",
"exports","../../../core/ObjectPool"],function(b,d,a){return function(){function b(a,b,c,d){this.set(a,b,c,d)}b.from=function(a,c,d,f){return b.pool.acquire(a,c,d,f)};b.getId=function(a,b,c,d){return"object"===typeof a?a.level+"/"+a.row+"/"+a.col+"/"+a.world:a+"/"+b+"/"+c+"/"+d};Object.defineProperty(b.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});b.prototype.equals=function(a){return this.level===a.level&&this.row===a.row&&this.col===a.col&&this.world===a.world};
b.prototype.release=function(){this.world=this.col=this.row=this.level=0};b.prototype.set=function(a,b,c,d){null==a?this.world=this.col=this.row=this.level=0:"object"===typeof a?(this.level=a.level||0,this.row=a.row||0,this.col=a.col||0,this.world=a.world||0):"string"===typeof a?(a=a.split("/"),b=a[1],c=a[2],d=a[3],this.level=parseFloat(a[0]),this.row=parseFloat(b),this.col=parseFloat(c),this.world=parseFloat(d)):(this.level=+a,this.row=+b,this.col=+c,this.world=+d||0);return this};b.prototype.toString=
function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};b.pool=new a(b,!0,null,25,50);return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/passes/WGLPaintPassHeatmap":function(){define("require exports dojo/text!../shaders/heatmapShaders.xml ../../../../webgl/BufferObject ../../../../webgl/FramebufferObject ../../../../webgl/Program ../../../../webgl/ShaderSnippets ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),function(b,d,a,c,e,g,h,f,l){Object.defineProperty(d,
"__esModule",{value:!0});b=function(){function b(){this._initWGLExtensions=this._initialized=!1}b.prototype.preRender=function(a,b){console.log("Heatmap: Running prerender");var c=a.context,d=c.getViewport();this._bindHeatmapSurface(c,d.width,d.height)};b.prototype.postRender=function(a,b){console.log("Heatmap: Running postrender");this._drawHeatmap(a.context,a.rendererInfo,1)};b.prototype._bindHeatmapSurface=function(a,b,c){if(!this._initWGLExtensions){var d=a.gl.getSupportedExtensions();if(-1===
d.indexOf("OES_texture_float_linear")||-1===d.indexOf("WEBGL_color_buffer_float"))throw Error("Required WebGL extensions needed for the heatmap drawing are not available!");a.gl.getExtension("OES_texture_float_linear");a.gl.getExtension("WEBGL_color_buffer_float");this._initWGLExtensions=!0}b=Math.round(b/4);c=Math.round(c/4);this._intensityFBO&&this._intensityFBO.width===b&&this._intensityFBO.height===c||(this._intensityFBO&&this._intensityFBO.dispose(),d=new f(a,{target:3553,internalFormat:34836,
pixelFormat:6408,dataType:5126,samplingMode:9729,wrapMode:33071,width:b,height:c}),this._intensityFBO=e.createWithAttachments(a,d,{colorTarget:0,depthStencilTarget:3,width:b,height:c,multisampled:!1}));this._boundFBO=a.getBoundFramebufferObject();a.bindFramebuffer(this._intensityFBO);this._prevVP=a.getViewport();a.setViewport(0,0,b,c);a.setStencilWriteMask(255);a.setClearColor(0,0,0,0);a.setClearStencil(0);a.clear(a.gl.COLOR_BUFFER_BIT|a.gl.STENCIL_BUFFER_BIT)};b.prototype._drawHeatmap=function(a,
b,c){a.bindFramebuffer(this._boundFBO);this._boundFBO=null;a.setViewport(this._prevVP.x,this._prevVP.y,this._prevVP.width,this._prevVP.height);this._initialized||(this._initialized=this._initialize(a));a.setBlendFunctionSeparate(1,771,1,771);a.setBlendingEnabled(!0);a.bindVAO(this._vertexArrayObject);a.bindProgram(this._program);a.bindTexture(this._intensityFBO.colorTexture,2);this._program.setUniform1i("u_texture",2);this._program.setUniform1f("u_opacity",c);b=b.heatmapParameters;this._updateGradient(a,
b);this._program.setUniform2f("u_minmax",b.minPixelIntensity,b.maxPixelIntensity);a.setActiveTexture(5);a.bindTexture(this._gradientTex,5);this._program.setUniform1i("u_gradient",5);a.drawArrays(5,0,4);a.bindVAO()};b.prototype._initialize=function(b){if(this._initialized)return!0;var d={a_pos:0,a_tex:1};this._shaderSnippets=new h;h.parse(a,this._shaderSnippets);var e=new g(b,this._shaderSnippets.heatmapVS,this._shaderSnippets.heatmapFS,d);if(!e)return!1;var f=new Int8Array(16);f[0]=-1;f[1]=-1;f[2]=
0;f[3]=0;f[4]=1;f[5]=-1;f[6]=1;f[7]=0;f[8]=-1;f[9]=1;f[10]=0;f[11]=1;f[12]=1;f[13]=1;f[14]=1;f[15]=1;b=new l(b,d,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},{geometry:c.createVertex(b,35044,f)});this._program=e;this._vertexArrayObject=b;return this._initialized=!0};b.prototype._updateGradient=function(a,b){if(!this._gradientTex||b.color.refreshColorRamp){this._gradientTex&&(this._gradientTex.dispose(),
this._gradientTex=null);this._gradientTex=new f(a,{target:3553,internalFormat:6408,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:1,height:512});var c=document.createElement("CANVAS");c.width=1;c.height=512;for(var d=c.getContext("2d"),e=b.color,h=[],g=0;g<e.values.length;++g)h.push({ratio:e.values[g],color:"rgba("+Math.floor(255*e.colors[4*g+0])+", "+Math.floor(255*e.colors[4*g+1])+", "+Math.floor(255*e.colors[4*g+2])+", "+e.colors[4*g+3]+")"});e=d.createLinearGradient(0,0,
0,512);for(g=0;g<h.length;g++){var k=h[g];e.addColorStop(k.ratio,k.color)}d.fillStyle=e;d.fillRect(0,0,1,512);this._gradientTex.setData(c);b.color.refreshColorRamp=!1}};return b}();d.default=b})},"esri/layers/vectorTiles/views/2d/layers/features/processors/SymbolProcessor":function(){define("require exports ../../../../../core/executeAsync ../../../../../core/MapPool ../../../../../core/promiseUtils ../../../../../core/SetPool ../../../engine/webgl/displayObjectUtils ../../../engine/webgl/TileData ../../../engine/webgl/Utils".split(" "),
function(b,d,a,c,e,g,h,f,l){function k(a,b){l.isMarkerSymbol(a)||l.isLineSymbol(a)?b.add(a):l.isFillSymbol(a)&&(b.add(a),a.outline&&"none"!==a.outline.style&&b.add(a.outline))}function m(a,b){if(!b.has(a)){b.set(a,new Set);for(var c=a.text,d=b.get(a),e=c.length,f=0;f<e;f++){var h=c.charCodeAt(f);d.add(h)}}}Object.defineProperty(d,"__esModule",{value:!0});b=function(){function b(a){this.type="symbol";this._symbolToMosaicItemMap=new Map;this._symbolToMosaicItemMap.clear();this._objectIdField=a.objectIdField;
this._geometryType=a.geometryType;this._rendererInfo=a.rendererInfo;this._devicePixelRatio=a.devicePixelRatio;this._textureManager=a.textureManager}b.prototype.destroy=function(){this._symbolToMosaicItemMap.clear()};b.prototype.getTileData=function(a,b){var c=this;return b&&b.features&&0!==b.features.length?e.when(this._getMosaicItems(b.features)).then(function(){return c._createTileData(b.features)}).then(function(b){return{tileKey:a,data:b}}):e.resolve({tileKey:a,data:null})};b.prototype._createTileData=
function(b){var c=this,d=[],e={},g=0;return a(function(){var a=b[g];g++;a=h.getDisplayObject(a,c._objectIdField,c._rendererInfo,c._geometryType,c._devicePixelRatio,c._symbolToMosaicItemMap,e);d.push(a);return g===b.length}).then(function(){return f.create(d,e)})};b.prototype._getMosaicItems=function(a){var b=g.acquire(),d=c.acquire(),f=this._rendererInfo;f.renderer.backgroundFillSymbol&&k(f.renderer.backgroundFillSymbol,b);for(var h,q=0;q<a.length;q++)h=a[q],(h=f.getSymbol(h))&&(l.isTextSymbol(h)?
m(h,d):k(h,b));if(0===b.size&&0===d.size)return g.release(b),c.release(d),e.resolve();var t=c.acquire(),n=[],p=this._symbolToMosaicItemMap,z=0;b.forEach(function(a){p.has(a)||(t.set(z,a),n.push({symbol:a.toJSON(),id:z}),z++)});d.forEach(function(a,b){if(p.has(b)){var c=p.get(b).glyphMosaicItems,d=[];a.forEach(function(a){if(c&&c.length<a||!c[a])d[a]=a});0<d.length&&(t.set(z,b),n.push({symbol:b.toJSON(),id:z,glyphIds:d}),z++)}else{t.set(z,b);var e=Array(a.size);a.forEach(function(a){return e.push(a)});
n.push({symbol:b.toJSON(),id:z,glyphIds:e});z++}});if(0<n.length)return this._getMaterialItems(n).then(function(a){for(var b=0;b<a.length;b++){var d=a[b],f=t.get(d.id);if(f)if(l.isTextSymbol(f))if(p.has(f)){if(f=p.get(f).glyphMosaicItems,d=d.mosaicItem.glyphMosaicItems)for(var h=0;h<d.length;h++)null!=d[h]&&(f[h]=d[h])}else p.set(f,d.mosaicItem);else p.set(f,d.mosaicItem)}c.release(t);return e.resolve()});g.release(b);c.release(d);return e.resolve()};b.prototype._getMaterialItems=function(a){if(!a||
0===a.length)return e.resolve([]);for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push(this._textureManager.rasterizeItem(d.symbol,d.glyphIds))}return e.all(b).then(function(a){return a.map(function(a,b){return{id:b,mosaicItem:a}})})};return b}();d.SymbolProcessor=b})},"esri/layers/vectorTiles/core/executeAsync":function(){define("require exports dojo/has ./nextTick ./now ./promiseUtils".split(" "),function(b,d,a,c,e,g){function h(){var a=0===f.length;if(!a){for(var b=e();!a&&6>e()-b;){var d=f[k];if(d){if(!0===
d()){var g=l.get(d);f[k]=null;l.delete(d);g()}k=(k+1)%f.length}else f.splice(k,1),k=(a=0===f.length)?0:k%f.length}a||c(h)}}var f=[],l=new Map,k=0;return function(a){return a?g.create(function(b){f.push(a);l.set(a,b);1===f.length&&c(h)},function(){f[f.indexOf(a)]=null;l.delete(a)}):g.reject(new TypeError("callback is not a function"))}})},"esri/layers/vectorTiles/core/MapPool":function(){define(["require","exports","./ObjectPool"],function(b,d,a){b=function(){function b(b,c){void 0===b&&(b=50);void 0===
c&&(c=50);this._pool=new a(Map,!1,function(a){return a.clear()},c,b)}b.prototype.acquire=function(){return this._pool.acquire()};b.prototype.release=function(a){this._pool.release(a)};b.acquire=function(){return c.acquire()};b.release=function(a){return c.release(a)};return b}();var c=new b(100);return b})},"esri/layers/vectorTiles/core/SetPool":function(){define(["require","exports","./ObjectPool"],function(b,d,a){b=function(){function b(b,c){void 0===b&&(b=50);void 0===c&&(c=50);this._pool=new a(Set,
!1,function(a){return a.clear()},c,b)}b.prototype.acquire=function(){return this._pool.acquire()};b.prototype.release=function(a){this._pool.release(a)};b.acquire=function(){return c.acquire()};b.release=function(a){return c.release(a)};return b}();var c=new b(100);return b})},"esri/layers/vectorTiles/views/2d/engine/webgl/displayObjectUtils":function(){define("require exports ./enums ./enums ./MaterialInfoUtils ./mesh ./textMeshUtils ./Utils ./visualVariablesUtils ./WGLDisplayObject ./WGLDisplayRecord".split(" "),
function(b,d,a,c,e,g,h,f,l,k,m){function t(b,c){if(!b)return a.WGLVVFlag.NONE;for(var d=0,e=0;e<b.length;e++){var f=b[e];"size"===f.type&&"outline"!==f.target?d|=l.getTypeOfSizeVisualVariable(f):"color"===f.type?d|=a.WGLVVFlag.COLOR:"opacity"===f.type?d|=a.WGLVVFlag.OPACITY:c&&"rotation"===f.type&&(d|=a.WGLVVFlag.ROTATION)}return d}Object.defineProperty(d,"__esModule",{value:!0});var q=[];d.getDisplayObject=function(b,d,v,u,x,y,n){d=b.attributes[d];var p=new k(d);q.length=0;var z=v.renderer,r=v.getSymbol(b);
if(r){var w=f.isMarkerSymbol(r)||f.isTextSymbol(r);if("esriGeometryPoint"===u||"esriGeometryPolyline"===u)q.push({symbol:r,vv:t(z.visualVariables,w)});else if(w){if(z.backgroundFillSymbol&&(w=z.backgroundFillSymbol,q.push({symbol:w,vv:a.WGLVVFlag.NONE}),w.outline&&"none"!==w.outline.style)){var D=a.WGLVVFlag.NONE;if(z.visualVariables)for(var C=0,J=z.visualVariables;C<J.length;C++){var E=J[C];if("size"===E.type&&"outline"===E.target){D|=l.getTypeOfSizeVisualVariable(E);break}}q.push({symbol:w.outline,
vv:D})}q.push({symbol:r,vv:t(z.visualVariables,!0)})}else if(f.isFillSymbol(r)){D=a.WGLVVFlag.NONE;if(z.visualVariables)for(C=0,J=z.visualVariables;C<J.length;C++)w=J[C],w=w.type,"color"===w?D|=a.WGLVVFlag.COLOR:"opacity"===w&&(D|=a.WGLVVFlag.OPACITY);q.push({symbol:r,vv:D});if(r.outline&&"none"!==r.outline.style){D=a.WGLVVFlag.NONE;if(z.visualVariables)for(C=0,z=z.visualVariables;C<z.length;C++)if(w=z[C],"size"===w.type&&"outline"===w.target){D|=l.getTypeOfSizeVisualVariable(w);break}q.push({symbol:r.outline,
vv:D})}}else f.isLineSymbol(r)&&q.push({symbol:r,vv:t(z.visualVariables,w)})}for(r=0;r<q.length;r++){D=q[r];w=D.symbol;z=f.getSymbolGeometryType(w);C=0!==D.vv;switch(z){case c.WGLGeometryType.MARKER:n.icon||(n.icon=f.getStrides(c.WGLGeometryType.MARKER,C,!1));break;case c.WGLGeometryType.LINE:n.line||(n.line=f.getStrides(c.WGLGeometryType.LINE,C));break;case c.WGLGeometryType.FILL:n.fill||(n.fill=f.getStrides(c.WGLGeometryType.FILL,C));break;case c.WGLGeometryType.TEXT:n.text||(n.text=f.getStrides(c.WGLGeometryType.TEXT,
C))}if(z===c.WGLGeometryType.TEXT)for(z=0,w=h.createTextDisplayRecords(b,D,d,v,y,f.getTextProperties(w));z<w.length;z++)p.displayRecords.push(w[z]);else if(C=y.get(w),D=e.createMaterialInfo(v,C,z,D.vv),w=g.createMesh(d,v,D.materialKeyInfo,C,z,u,x,b,w))C=new m,C.setData(d,z,w,D,0,0),p.displayRecords.push(C)}return p}})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh":function(){define("require exports dojo/has ../../../../core/screenUtils ../../../../core/libs/earcut/earcut ../../../../core/libs/libtess/libtess ./color ./enums ./lineMeshUtil ./MeshData ./number ./TileClipper ./Utils ./visualVariablesUtils".split(" "),
function(b,d,a,c,e,g,h,f,l,k,m,t,q,r){function w(a,b,c,d,f,h,g){d=c.slice(d,f);c=a.length/(g.length+1);h=e(d,h,2);f=h.length;if(0>=f)return 0;for(var k=0;k<d.length;)a.push(m.i1616to32(d[k++],d[k++])),a.push.apply(a,g);for(a=0;a<f;)b.push(h[a++]+c,h[a++]+c,h[a++]+c)}Object.defineProperty(d,"__esModule",{value:!0});var v=[],u=[],x,y=function(){function a(){this._indexCounter=this._currentVertexIndex=0;this._triangleIndices=[-1,-1,-1];this.glu=new g.GluTesselator;this.glu.gluTessCallback(g.gluEnum.GLU_TESS_BEGIN,
this._begincallback.bind(this));this.glu.gluTessCallback(g.gluEnum.GLU_TESS_VERTEX_DATA,this._vertexCallback.bind(this));this.glu.gluTessCallback(g.gluEnum.GLU_TESS_END,this._endcallback.bind(this));this.glu.gluTessCallback(g.gluEnum.GLU_TESS_COMBINE,this._combinecallback.bind(this));this.glu.gluTessCallback(g.gluEnum.GLU_TESS_ERROR,this._errorcallback.bind(this));this.glu.gluTessCallback(g.gluEnum.GLU_TESS_EDGE_FLAG,this._edgeCallback.bind(this));this.glu.gluTessProperty(g.gluEnum.GLU_TESS_WINDING_RULE,
g.windingRule.GLU_TESS_WINDING_ODD)}a.prototype.beginPolygon=function(a,b){this._triangleIndices[0]=-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._indexCounter=this._currentVertexIndex=0;this.glu.gluTessBeginPolygon(a);this._indices=b};a.prototype.endPolygon=function(){this.glu.gluTessEndPolygon()};a.prototype.beginContour=function(){this.glu.gluTessBeginContour()};a.prototype.endContour=function(){this.glu.gluTessEndContour()};a.prototype.addVertex=function(a,b){this.glu.gluTessVertex(a,
b)};a.prototype._vertexCallback=function(a,b){b[b.length]=a[0];b[b.length]=a[1];this._triangleIndices[this._currentVertexIndex]=-1;if(2<=this._currentVertexIndex){for(var c=0;3>c;c++)-1===this._triangleIndices[c]&&(this._triangleIndices[c]=this._indexCounter++),this._indices[this._indices.length]=this._triangleIndices[c];this._currentVertexIndex=0}else this._currentVertexIndex++};a.prototype._begincallback=function(a){this._triangleIndices[0]=-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=
-1;this._currentVertexIndex=0};a.prototype._endcallback=function(){this._currentVertexIndex=0};a.prototype._errorcallback=function(a){};a.prototype._combinecallback=function(a,b,c){return[a[0],a[1],a[2]]};a.prototype._edgeCallback=function(a){};return a}();b=a("esri-featurelayer-webgl");var n="libtess"===(b&&b.tesselator||"libtess"),p;d.createTextMesh=function(a,b,c,d,e,f,h){return null};d.createMesh=function(a,b,d,e,g,J,E,H,K){switch(g){case f.WGLGeometryType.MARKER:var z=new k,A,B,D,G,F=0,C=0,S,
P,Y,M,T,L=b.heatmapInfo;if(L){var U=Math.round(b.heatmapInfo.radius);B=A=0;G=D=U;S=[1,1,1,1];P=[0,0,0,0];M=Y=U;T=0}else{var V=e.spriteMosaicItem;A=Math.round(V.rect.x/4);B=Math.round(V.rect.y/4);D=A+Math.round(V.rect.width/4);G=B+Math.round(V.rect.height/4);var F=K.xoffset|0,C=K.yoffset|0,Q=K.color?K.color:[0,0,0,0];S=q.isPictureSymbol(K)?[255,255,255,255]:h.copyAndPremultiply(Q);Y=Math.round(c.pt2px(K.width||K.size));M=Math.round(c.pt2px(K.height||K.size));K.outline?(P=null!=K.outline.color?h.copyAndPremultiply(K.outline.color):
[0,0,0,0],T=null!=K.outline.width?Math.round(c.pt2px(K.outline.width)):0):(P=[0,0,0,0],T=0)}var I=[],ba=m.i8888to32(S[0],S[1],S[2],S[3]),W=m.i8888to32(P[0],P[1],P[2],P[3]),Z=m.i8888to32(Y,M,T,0),fa=m.numTo32(a),X=0,ca=0,ma=0,na=0,za=0,Aa=d.vvColor||d.vvOpacity||d.vvRotation||d.vvSizeMinMaxValue||d.vvSizeScaleStops||d.vvSizeFieldStops||d.vvSizeUnitValue;if(Aa){var oa=b.vvFields,Oa=oa.rotation?b.getValue(H,oa.rotation):0,Pa=oa.opacity?b.getValue(H,oa.opacity):0,Qa=oa.color?b.getValue(H,oa.color):0,
Ba=oa.size&&!d.vvSizeScaleStops?b.getValue(H,oa.size):0;d.vvSizeUnitValue&&(Ba=r.getVisualVariableSizeValueRepresentationRatio(Ba,b.vvRanges.size.unitValue.valueRepresentation));isNaN(Ba)&&(Ba=1);isNaN(Oa)&&(Oa=1);isNaN(Pa)&&(Pa=1);isNaN(Qa)&&(Qa=1);X=m.toUint32(Ba);ca=m.toUint32(Pa);ma=m.toUint32(Oa);na=m.toUint32(Qa)}var Ga=[X,na,ca,ma];L&&(za=m.toUint32(b.heatmapInfo.getIntensity(H)));var ra=H.centroid||H.geometry,sa;switch(J){case "esriGeometryPoint":sa=[[ra.x,ra.y]];break;case "esriGeometryMultipoint":sa=
ra.points;break;case "esriGeometryPolyline":sa=ra.paths[0];break;case "esriGeometryPolygon":sa=H.centroid?[[ra.x,ra.y]]:ra.rings[0]}for(var pa=0,ta,Ra=0,Sa=0,ua=Array(4*sa.length),Ha=0;Ha<sa.length;Ha++){var kb=sa[Ha],lb=kb[0],mb=kb[1],Ia=m.i1616to32(lb+Ra+F,mb+Sa+C),Ra=Ra+lb,Sa=Sa+mb;I.push(Ia);I.push(m.i8888to32(-32,-32,A,B));I.push(fa);I.push(ba);I.push(W);I.push(Z);Aa?I.push.apply(I,Ga):L&&I.push(za);I.push(Ia);I.push(m.i8888to32(32,-32,D,B));I.push(fa);I.push(ba);I.push(W);I.push(Z);Aa?I.push.apply(I,
Ga):L&&I.push(za);I.push(Ia);I.push(m.i8888to32(-32,32,A,G));I.push(fa);I.push(ba);I.push(W);I.push(Z);Aa?I.push.apply(I,Ga):L&&I.push(za);I.push(Ia);I.push(m.i8888to32(32,32,D,G));I.push(fa);I.push(ba);I.push(W);I.push(Z);Aa?I.push.apply(I,Ga):L&&I.push(za);ta=6*Ha;ua[ta+0]=pa+0;ua[ta+1]=pa+1;ua[ta+2]=pa+2;ua[ta+3]=pa+1;ua[ta+4]=pa+3;ua[ta+5]=pa+2;pa+=4}z.update({geometry:I},pa,ua);return z;case f.WGLGeometryType.FILL:var Ta;a:{var Ja=null!=e?e.spriteMosaicItem:null,Ua=H.geometry,nb=q.isPictureSymbol(K),
ob;ob=nb?h.premultiplyAlphaUint32(h.white):K.color?h.premultiplyAlphaUint32(K.color):0;var zb=d.vvColor||d.vvOpacity,pb=new k,Va=0,Wa=0,Xa=0,Ya=0;if(Ja)var qb=Ja.rect,rb=qb.x,sb=qb.y,Ab=Ja.width,Bb=Ja.height,Va=rb+1,Wa=sb+1,Xa=rb+1+Ab,Ya=sb+1+Bb;var Cb=nb&&K.width&&K.height?m.i8888to32(m.nextHighestPowerOfTwo(K.width),m.nextHighestPowerOfTwo(K.height),0,0):m.i8888to32(m.nextHighestPowerOfTwo(Xa-Va),m.nextHighestPowerOfTwo(Ya-Wa),0,0),Ca=[m.numTo32(a),ob,m.i1616to32(Va,Wa),m.i1616to32(Xa,Ya),Cb];if(zb){var Ka=
b.vvFields,Za=Ka.opacity?b.getValue(H,Ka.opacity):0,$a=Ka.color?b.getValue(H,Ka.color):0;isNaN(Za)&&(Za=1);isNaN($a)&&($a=1);Ca.push(m.toUint32($a),m.toUint32(Za))}for(var qa=!1,ab=0,tb=Ua.rings;ab<tb.length;ab++){var da=tb[ab],Da=da.length;if(!(3>Da)){var Ea=da[0][0],Fa=da[0][1];if(-8>Ea||520<Ea||-8>Fa||520<Fa){qa=!0;break}for(var ga=1;ga<Da;++ga)if(Ea+=da[ga][0],Fa+=da[ga][1],-8>Ea||520<Ea||-8>Fa||520<Fa){qa=!0;break}if(qa)break}}var ya,ia,ha;if(qa){x||(x=new t.TileClipper(0,0,0,1,8),x.setExtent(512));
x.reset(3);for(var bb=0,ub=Ua.rings;bb<ub.length;bb++)if(da=ub[bb],Da=da.length,!(3>Da)){ia=da[0][0];ha=da[0][1];x.moveTo(ia,ha);for(ga=1;ga<Da;++ga)ia+=da[ga][0],ha+=da[ga][1],x.lineTo(ia,ha);x.close()}ya={rings:x.result(!n)};if(!ya.rings||0===ya.rings.length){Ta=null;break a}}else ya=Ua;var va=[],La=[],ja,ka;if(n){p||(p=new y);p.beginPolygon(v,La);for(var cb=0,vb=ya.rings;cb<vb.length;cb++)if(da=vb[cb],!(3>da.length)){p.beginContour();ja=ka=0;qa?(ia=da[0].x,ha=da[0].y):(db=da[0],ia=db[0],ha=db[1]);
var wb=[ia,ha,0];p.addVertex(wb,wb);for(ga=1;ga<da.length-1;ga++){qa?(ia=da[ga].x,ha=da[ga].y):(eb=da[ga],ja=eb[0],ka=eb[1],ia+=ja,ha+=ka);var xb=[ia,ha,0];p.addVertex(xb,xb)}p.endContour()}p.endPolygon();for(var Ma=0;Ma<v.length;Ma+=2)va.push(m.i1616to32(v[Ma],v[Ma+1])),va.push.apply(va,Ca)}else{for(var wa=0,la=0,fb=void 0,gb=void 0,hb=0,yb=ya.rings;hb<yb.length;hb++){var da=yb[hb],xa=la;qa?(ia=da[0].x,ha=da[0].y):(ib=da[0],ia=ib[0],ha=ib[1]);v[la++]=ia;v[la++]=ha;var Na=0;ja=ka=0;for(ga=1;ga<da.length;++ga)qa?
(fb=da[ga].x,gb=da[ga].y,ja=fb-ia,ka=gb-ha,Na-=ja*(ha+ha+ka),ia=fb,ha=gb):(jb=da[ga],ja=jb[0],ka=jb[1],Na-=ja*(ha+ha+ka),ia+=ja,ha+=ka),v[la++]=ia,v[la++]=ha;0<Na?(0<xa-wa&&(w(va,La,v,wa,xa,u,Ca),wa=xa),u.length=0):0>Na?0<xa-wa?u.push(.5*(xa-wa)):la=xa:la=xa}0<la-wa&&w(va,La,v,wa,la,u,Ca)}v.length=u.length=0;pb.update({geometry:va},va.length/(Ca.length+1),La);Ta=pb;break a;var db,eb,ib,jb}return Ta;case f.WGLGeometryType.LINE:return l.createLineMeshData(a,b,d,e,E,H,K)}return null}})},"esri/layers/vectorTiles/core/libs/earcut/earcut":function(){define([],
function(){function b(b,e,f){f=f||2;n=b.length/f+(e?2*e.length:0);p=!1;var k=e&&e.length,m=k?e[0]*f:b.length,z=d(b,0,m,f,!0),q=[];if(!z)return q;var u,t,r,x;if(k)a:{var y=f,k=[],A,v,B;x=0;for(A=e.length;x<A;x++)v=e[x]*y,B=x<A-1?e[x+1]*y:b.length,v=d(b,v,B,y,!1),v===v.next&&(v.steiner=!0),k.push(l(v));k.sort(g);for(x=0;x<k.length;x++){if(!z){z=null;break a}e=k[x];y=z;if(y=h(e,y))e=w(y,e),a(e,e.next);z=a(z,z.next)}}if(p)return q;if(b.length>80*f){u=r=b[0];t=k=b[1];for(y=f;y<m;y+=f)x=b[y],e=b[y+1],x<
u&&(u=x),e<t&&(t=e),x>r&&(r=x),e>k&&(k=e);r=Math.max(r-u,k-t)}c(z,q,f,u,t,r);return q}function d(a,b,c,d,e){var f;if(e===0<y(a,b,c,d))for(e=b;e<c;e+=d)f=v(e,a[e],a[e+1],f);else for(e=c-d;e>=b;e-=d)f=v(e,a[e],a[e+1],f);f&&t(f,f.next)&&(u(f),f=f.next);return f}function a(a,b){if(!a)return a;b||(b=a);var c=a,d,e=0,f=n*n/2;do{d=!1;if(c.steiner||!t(c,c.next)&&0!==m(c.prev,c,c.next))c=c.next;else{u(c);c=b=c.prev;if(c===c.next)return null;d=!0}if(e++>f)return p=!0,null}while(d||c!==b);return b}function c(b,
d,h,g,l,n,x){if(b){if(!x&&n){var z=b,y=z;do null===y.z&&(y.z=f(y.x,y.y,g,l,n)),y.prevZ=y.prev,y=y.nextZ=y.next;while(y!==z);y.prevZ.nextZ=null;y.prevZ=null;var z=y,v,A,B,D,G,F,E=1;do{y=z;B=z=null;for(D=0;y;){D++;A=y;for(v=G=0;v<E&&(G++,A=A.nextZ,A);v++);for(F=E;0<G||0<F&&A;)0===G?(v=A,A=A.nextZ,F--):0!==F&&A?y.z<=A.z?(v=y,y=y.nextZ,G--):(v=A,A=A.nextZ,F--):(v=y,y=y.nextZ,G--),B?B.nextZ=v:z=v,v.prevZ=B,B=v;y=A}B.nextZ=null;E*=2}while(1<D)}for(z=b;b.prev!==b.next;){y=b.prev;A=b.next;if(n)a:{B=b;F=g;
var C=l,J=n;D=B.prev;G=B;E=B.next;if(0<=m(D,G,E))B=!1;else{var Y=D.x>G.x?D.x>E.x?D.x:E.x:G.x>E.x?G.x:E.x,M=D.y>G.y?D.y>E.y?D.y:E.y:G.y>E.y?G.y:E.y;v=f(D.x<G.x?D.x<E.x?D.x:E.x:G.x<E.x?G.x:E.x,D.y<G.y?D.y<E.y?D.y:E.y:G.y<E.y?G.y:E.y,F,C,J);F=f(Y,M,F,C,J);for(C=B.nextZ;C&&C.z<=F;){if(C!==B.prev&&C!==B.next&&k(D.x,D.y,G.x,G.y,E.x,E.y,C.x,C.y)&&0<=m(C.prev,C,C.next)){B=!1;break a}C=C.nextZ}for(C=B.prevZ;C&&C.z>=v;){if(C!==B.prev&&C!==B.next&&k(D.x,D.y,G.x,G.y,E.x,E.y,C.x,C.y)&&0<=m(C.prev,C,C.next)){B=
!1;break a}C=C.prevZ}B=!0}}else B=e(b);if(B)d.push(y.i/h),d.push(b.i/h),d.push(A.i/h),u(b),z=b=A.next;else{if(p)break;b=A;if(b===z){if(!x)c(a(b),d,h,g,l,n,1);else if(1===x){x=d;z=h;y=b;do A=y.prev,B=y.next.next,!t(A,B)&&q(A,y,y.next,B)&&r(A,B)&&r(B,A)&&(x.push(A.i/z),x.push(y.i/z),x.push(B.i/z),u(y),u(y.next),y=b=B),y=y.next;while(y!==b);b=y;c(b,d,h,g,l,n,2)}else if(2===x)a:{x=b;do{for(z=x.next.next;z!==x.prev;){if(y=x.i!==z.i){y=x;A=z;B=void 0;if(B=y.next.i!==A.i&&y.prev.i!==A.i){B=void 0;b:{B=y;
do{if(B.i!==y.i&&B.next.i!==y.i&&B.i!==A.i&&B.next.i!==A.i&&q(B,B.next,y,A)){B=!0;break b}B=B.next}while(B!==y);B=!1}B=!B}D=void 0;if(D=B&&r(y,A)&&r(A,y)){B=y;D=!1;G=(y.x+A.x)/2;A=(y.y+A.y)/2;do B.y>A!==B.next.y>A&&G<(B.next.x-B.x)*(A-B.y)/(B.next.y-B.y)+B.x&&(D=!D),B=B.next;while(B!==y)}y=D}if(y){b=w(x,z);x=a(x,x.next);b=a(b,b.next);c(x,d,h,g,l,n);c(b,d,h,g,l,n);break a}z=z.next}x=x.next}while(x!==b)}break}}}}}function e(a){var b=a.prev,c=a.next;if(0<=m(b,a,c))return!1;for(var d=a.next.next,e=0;d!==
a.prev;){if(k(b.x,b.y,a.x,a.y,c.x,c.y,d.x,d.y)&&0<=m(d.prev,d,d.next))return!1;d=d.next;if(e++>n)return p=!0,!1}return!0}function g(a,b){return a.x-b.x}function h(a,b){var c=b,d=a.x,e=a.y,f=-Infinity,h;do{if(!c)return null;if(e<=c.y&&e>=c.next.y){var g=c.x+(e-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(g<=d&&g>f){f=g;if(g===d){if(e===c.y)return c;if(e===c.next.y)return c.next}h=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!h)return null;if(d===f)return h.prev;for(var g=h,l=h.x,n=h.y,p=Infinity,m,c=h.next;c!==
g;)d>=c.x&&c.x>=l&&k(e<n?d:f,e,l,n,e<n?f:d,e,c.x,c.y)&&(m=Math.abs(e-c.y)/(d-c.x),(m<p||m===p&&c.x>h.x)&&r(c,a)&&(h=c,p=m)),c=c.next;return h}function f(a,b,c,d,e){a=32767*(a-c)/e;b=32767*(b-d)/e;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function l(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function k(a,b,c,d,e,f,h,g){return 0<=(e-h)*(b-g)-(a-h)*
(f-g)&&0<=(a-h)*(d-g)-(c-h)*(b-g)&&0<=(c-h)*(f-g)-(e-h)*(d-g)}function m(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function t(a,b){return a.x===b.x&&a.y===b.y}function q(a,b,c,d){return t(a,b)&&t(c,d)||t(a,d)&&t(c,b)?!0:0<m(a,b,c)!==0<m(a,b,d)&&0<m(c,d,a)!==0<m(c,d,b)}function r(a,b){return 0>m(a.prev,a,a.next)?0<=m(a,b,a.next)&&0<=m(a,a.prev,b):0>m(a,b,a.prev)||0>m(a,a.next,b)}function w(a,b){var c=new x(a.i,a.x,a.y),d=new x(b.i,b.x,b.y),e=a.next,f=b.prev;a.next=b;b.prev=a;c.next=e;e.prev=
c;d.next=c;c.prev=d;f.next=d;d.prev=f;return d}function v(a,b,c,d){a=new x(a,b,c);d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a);return a}function u(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function x(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function y(a,b,c,d){for(var e=0,f=c-d;b<c;b+=d)e+=(a[f]-a[b])*(a[b+1]+a[f+1]),f=b;return e}var n,p;b.deviation=
function(a,b,c,d){var e=b&&b.length,f=Math.abs(y(a,0,e?b[0]*c:a.length,c));if(e)for(var e=0,h=b.length;e<h;e++)f-=Math.abs(y(a,b[e]*c,e<h-1?b[e+1]*c:a.length,c));for(e=b=0;e<d.length;e+=3){var h=d[e]*c,g=d[e+1]*c,k=d[e+2]*c;b+=Math.abs((a[h]-a[k])*(a[g+1]-a[h+1])-(a[h]-a[g])*(a[k+1]-a[h+1]))}return 0===f&&0===b?0:Math.abs((b-f)/f)};b.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},d=0,e=0;e<a.length;e++){for(var f=0;f<a[e].length;f++)for(var h=0;h<b;h++)c.vertices.push(a[e][f][h]);
0<e&&(d+=a[e-1].length,c.holes.push(d))}return c};return b})},"esri/layers/vectorTiles/core/libs/libtess/libtess":function(){define([],function(){var b={DEBUG:!1,assert:function(d,a){if(b.DEBUG&&!d)throw Error("Assertion failed"+(a?": "+a:""));},GLU_TESS_MAX_COORD:1E150,TRUE_PROJECT:!1,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,
GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,
GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901},geom:{}};b.geom.vertEq=function(b,a){return b.s===a.s&&b.t===a.t};b.geom.vertLeq=function(b,a){return b.s<a.s||b.s===a.s&&b.t<=a.t};b.geom.edgeEval=function(d,a,c){b.assert(b.geom.vertLeq(d,a)&&b.geom.vertLeq(a,c));var e=a.s-d.s,g=c.s-a.s;return 0<e+g?e<g?a.t-
d.t+e/(e+g)*(d.t-c.t):a.t-c.t+g/(e+g)*(c.t-d.t):0};b.geom.edgeSign=function(d,a,c){b.assert(b.geom.vertLeq(d,a)&&b.geom.vertLeq(a,c));var e=a.s-d.s,g=c.s-a.s;return 0<e+g?(a.t-c.t)*e+(a.t-d.t)*g:0};b.geom.transLeq=function(b,a){return b.t<a.t||b.t===a.t&&b.s<=a.s};b.geom.transEval=function(d,a,c){b.assert(b.geom.transLeq(d,a)&&b.geom.transLeq(a,c));var e=a.t-d.t,g=c.t-a.t;return 0<e+g?e<g?a.s-d.s+e/(e+g)*(d.s-c.s):a.s-c.s+g/(e+g)*(c.s-d.s):0};b.geom.transSign=function(d,a,c){b.assert(b.geom.transLeq(d,
a)&&b.geom.transLeq(a,c));var e=a.t-d.t,g=c.t-a.t;return 0<e+g?(a.s-c.s)*e+(a.s-d.s)*g:0};b.geom.edgeGoesLeft=function(d){return b.geom.vertLeq(d.dst(),d.org)};b.geom.edgeGoesRight=function(d){return b.geom.vertLeq(d.org,d.dst())};b.geom.vertL1dist=function(b,a){return Math.abs(b.s-a.s)+Math.abs(b.t-a.t)};b.geom.vertCCW=function(b,a,c){return 0<=b.s*(a.t-c.t)+a.s*(c.t-b.t)+c.s*(b.t-a.t)};b.geom.interpolate_=function(b,a,c,e){b=0>b?0:b;c=0>c?0:c;return b<=c?0===c?(a+e)/2:a+b/(b+c)*(e-a):e+c/(b+c)*
(a-e)};b.geom.edgeIntersect=function(d,a,c,e,g){var h,f;b.geom.vertLeq(d,a)||(h=d,d=a,a=h);b.geom.vertLeq(c,e)||(h=c,c=e,e=h);b.geom.vertLeq(d,c)||(h=d,d=c,c=h,h=a,a=e,e=h);b.geom.vertLeq(c,a)?b.geom.vertLeq(a,e)?(h=b.geom.edgeEval(d,c,a),f=b.geom.edgeEval(c,a,e),0>h+f&&(h=-h,f=-f),g.s=b.geom.interpolate_(h,c.s,f,a.s)):(h=b.geom.edgeSign(d,c,a),f=-b.geom.edgeSign(d,e,a),0>h+f&&(h=-h,f=-f),g.s=b.geom.interpolate_(h,c.s,f,e.s)):g.s=(c.s+a.s)/2;b.geom.transLeq(d,a)||(h=d,d=a,a=h);b.geom.transLeq(c,e)||
(h=c,c=e,e=h);b.geom.transLeq(d,c)||(h=d,d=c,c=h,h=a,a=e,e=h);b.geom.transLeq(c,a)?b.geom.transLeq(a,e)?(h=b.geom.transEval(d,c,a),f=b.geom.transEval(c,a,e),0>h+f&&(h=-h,f=-f),g.t=b.geom.interpolate_(h,c.t,f,a.t)):(h=b.geom.transSign(d,c,a),f=-b.geom.transSign(d,e,a),0>h+f&&(h=-h,f=-f),g.t=b.geom.interpolate_(h,c.t,f,e.t)):g.t=(c.t+a.t)/2};b.mesh={};b.mesh.makeEdge=function(d){var a=b.mesh.makeEdgePair_(d.eHead);b.mesh.makeVertex_(a,d.vHead);b.mesh.makeVertex_(a.sym,d.vHead);b.mesh.makeFace_(a,d.fHead);
return a};b.mesh.meshSplice=function(d,a){var c=!1,e=!1;d!==a&&(a.org!==d.org&&(e=!0,b.mesh.killVertex_(a.org,d.org)),a.lFace!==d.lFace&&(c=!0,b.mesh.killFace_(a.lFace,d.lFace)),b.mesh.splice_(a,d),e||(b.mesh.makeVertex_(a,d.org),d.org.anEdge=d),c||(b.mesh.makeFace_(a,d.lFace),d.lFace.anEdge=d))};b.mesh.deleteEdge=function(d){var a=d.sym,c=!1;d.lFace!==d.rFace()&&(c=!0,b.mesh.killFace_(d.lFace,d.rFace()));d.oNext===d?b.mesh.killVertex_(d.org,null):(d.rFace().anEdge=d.oPrev(),d.org.anEdge=d.oNext,
b.mesh.splice_(d,d.oPrev()),c||b.mesh.makeFace_(d,d.lFace));a.oNext===a?(b.mesh.killVertex_(a.org,null),b.mesh.killFace_(a.lFace,null)):(d.lFace.anEdge=a.oPrev(),a.org.anEdge=a.oNext,b.mesh.splice_(a,a.oPrev()));b.mesh.killEdge_(d)};b.mesh.addEdgeVertex=function(d){var a=b.mesh.makeEdgePair_(d),c=a.sym;b.mesh.splice_(a,d.lNext);a.org=d.dst();b.mesh.makeVertex_(c,a.org);a.lFace=c.lFace=d.lFace;return a};b.mesh.splitEdge=function(d){var a=b.mesh.addEdgeVertex(d).sym;b.mesh.splice_(d.sym,d.sym.oPrev());
b.mesh.splice_(d.sym,a);d.sym.org=a.org;a.dst().anEdge=a.sym;a.sym.lFace=d.rFace();a.winding=d.winding;a.sym.winding=d.sym.winding;return a};b.mesh.connect=function(d,a){var c=!1,e=b.mesh.makeEdgePair_(d),g=e.sym;a.lFace!==d.lFace&&(c=!0,b.mesh.killFace_(a.lFace,d.lFace));b.mesh.splice_(e,d.lNext);b.mesh.splice_(g,a);e.org=d.dst();g.org=a.org;e.lFace=g.lFace=d.lFace;d.lFace.anEdge=g;c||b.mesh.makeFace_(e,d.lFace);return e};b.mesh.zapFace=function(d){var a=d.anEdge,c=a.lNext,e;do if(e=c,c=e.lNext,
e.lFace=null,null===e.rFace()){e.oNext===e?b.mesh.killVertex_(e.org,null):(e.org.anEdge=e.oNext,b.mesh.splice_(e,e.oPrev()));var g=e.sym;g.oNext===g?b.mesh.killVertex_(g.org,null):(g.org.anEdge=g.oNext,b.mesh.splice_(g,g.oPrev()));b.mesh.killEdge_(e)}while(e!==a);a=d.prev;d=d.next;d.prev=a;a.next=d};b.mesh.meshUnion=function(b,a){var c=b.fHead,d=b.vHead,g=b.eHead,h=a.fHead,f=a.vHead,l=a.eHead;h.next!==h&&(c.prev.next=h.next,h.next.prev=c.prev,h.prev.next=c,c.prev=h.prev);f.next!==f&&(d.prev.next=
f.next,f.next.prev=d.prev,f.prev.next=d,d.prev=f.prev);l.next!==l&&(g.sym.next.sym.next=l.next,l.next.sym.next=g.sym.next,l.sym.next.sym.next=g,g.sym.next=l.sym.next);return b};b.mesh.deleteMesh=function(b){};b.mesh.makeEdgePair_=function(d){var a=new b.GluHalfEdge,c=new b.GluHalfEdge,e=d.sym.next;c.next=e;e.sym.next=a;a.next=d;d.sym.next=c;a.sym=c;a.oNext=a;a.lNext=c;c.sym=a;c.oNext=c;return c.lNext=a};b.mesh.splice_=function(b,a){var c=b.oNext,d=a.oNext;c.sym.lNext=a;d.sym.lNext=b;b.oNext=d;a.oNext=
c};b.mesh.makeVertex_=function(d,a){var c=a.prev,e=new b.GluVertex(a,c);c.next=e;a.prev=e;c=e.anEdge=d;do c.org=e,c=c.oNext;while(c!==d)};b.mesh.makeFace_=function(d,a){var c=a.prev,e=new b.GluFace(a,c);c.next=e;a.prev=e;e.anEdge=d;e.inside=a.inside;c=d;do c.lFace=e,c=c.lNext;while(c!==d)};b.mesh.killEdge_=function(b){var a=b.next;b=b.sym.next;a.sym.next=b;b.sym.next=a};b.mesh.killVertex_=function(b,a){var c=b.anEdge,d=c;do d.org=a,d=d.oNext;while(d!==c);c=b.prev;d=b.next;d.prev=c;c.next=d};b.mesh.killFace_=
function(b,a){var c=b.anEdge,d=c;do d.lFace=a,d=d.lNext;while(d!==c);c=b.prev;d=b.next;d.prev=c;c.next=d};b.normal={};b.normal.S_UNIT_X_=1;b.normal.S_UNIT_Y_=0;b.normal.projectPolygon=function(d,a,c,e){var g=!1,h=[a,c,e];0===a&&0===c&&0===e&&(b.normal.computeNormal_(d,h),g=!0);c=b.normal.longAxis_(h);a=d.mesh.vHead;if(b.TRUE_PROJECT){b.normal.normalize_(h);e=[0,0,0];var f=[0,0,0];e[c]=0;e[(c+1)%3]=b.normal.S_UNIT_X_;e[(c+2)%3]=b.normal.S_UNIT_Y_;c=b.normal.dot_(e,h);e[0]-=c*h[0];e[1]-=c*h[1];e[2]-=
c*h[2];b.normal.normalize_(e);f[0]=h[1]*e[2]-h[2]*e[1];f[1]=h[2]*e[0]-h[0]*e[2];f[2]=h[0]*e[1]-h[1]*e[0];b.normal.normalize_(f);for(h=a.next;h!==a;h=h.next)h.s=b.normal.dot_(h.coords,e),h.t=b.normal.dot_(h.coords,f)}else for(e=(c+1)%3,f=(c+2)%3,c=0<h[c]?1:-1,h=a.next;h!==a;h=h.next)h.s=h.coords[e],h.t=c*h.coords[f];g&&b.normal.checkOrientation_(d)};b.normal.dot_=function(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]};b.normal.normalize_=function(d){var a=d[0]*d[0]+d[1]*d[1]+d[2]*d[2];b.assert(0<a);a=
Math.sqrt(a);d[0]/=a;d[1]/=a;d[2]/=a};b.normal.longAxis_=function(b){var a=0;Math.abs(b[1])>Math.abs(b[0])&&(a=1);Math.abs(b[2])>Math.abs(b[a])&&(a=2);return a};b.normal.computeNormal_=function(d,a){var c=[-2*b.GLU_TESS_MAX_COORD,-2*b.GLU_TESS_MAX_COORD,-2*b.GLU_TESS_MAX_COORD],e=[2*b.GLU_TESS_MAX_COORD,2*b.GLU_TESS_MAX_COORD,2*b.GLU_TESS_MAX_COORD],g=[],h=[],f,l=d.mesh.vHead;for(f=l.next;f!==l;f=f.next)for(var k=0;3>k;++k){var m=f.coords[k];m<e[k]&&(e[k]=m,h[k]=f);m>c[k]&&(c[k]=m,g[k]=f)}f=0;c[1]-
e[1]>c[0]-e[0]&&(f=1);c[2]-e[2]>c[f]-e[f]&&(f=2);if(e[f]>=c[f])a[0]=0,a[1]=0,a[2]=1;else{c=0;e=h[f];g=g[f];h=[0,0,0];e=[e.coords[0]-g.coords[0],e.coords[1]-g.coords[1],e.coords[2]-g.coords[2]];k=[0,0,0];for(f=l.next;f!==l;f=f.next)k[0]=f.coords[0]-g.coords[0],k[1]=f.coords[1]-g.coords[1],k[2]=f.coords[2]-g.coords[2],h[0]=e[1]*k[2]-e[2]*k[1],h[1]=e[2]*k[0]-e[0]*k[2],h[2]=e[0]*k[1]-e[1]*k[0],m=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],m>c&&(c=m,a[0]=h[0],a[1]=h[1],a[2]=h[2]);0>=c&&(a[0]=a[1]=a[2]=0,a[b.normal.longAxis_(e)]=
1)}};b.normal.checkOrientation_=function(b){for(var a=0,c=b.mesh.fHead,d=c.next;d!==c;d=d.next){var g=d.anEdge;if(!(0>=g.winding)){do a+=(g.org.s-g.dst().s)*(g.org.t+g.dst().t),g=g.lNext;while(g!==d.anEdge)}}if(0>a)for(b=b.mesh.vHead,a=b.next;a!==b;a=a.next)a.t=-a.t};b.render={};b.render.renderMesh=function(d,a,c){for(var e=!1,g=-1,h=a.fHead.prev;h!==a.fHead;h=h.prev)if(h.inside){e||(d.callBeginCallback(b.primitiveType.GL_TRIANGLES),e=!0);var f=h.anEdge;b.assert(f.lNext.lNext.lNext===f,"renderMesh called with non-triangulated mesh");
do{if(c){var l=f.rFace().inside?0:1;g!==l&&(g=l,d.callEdgeFlagCallback(!!g))}d.callVertexCallback(f.org.data);f=f.lNext}while(f!==h.anEdge)}e&&d.callEndCallback()};b.render.renderBoundary=function(d,a){for(var c=a.fHead.next;c!==a.fHead;c=c.next)if(c.inside){d.callBeginCallback(b.primitiveType.GL_LINE_LOOP);var e=c.anEdge;do d.callVertexCallback(e.org.data),e=e.lNext;while(e!==c.anEdge);d.callEndCallback()}};b.sweep={};b.sweep.SENTINEL_COORD_=4*b.GLU_TESS_MAX_COORD;b.sweep.TOLERANCE_NONZERO_=!1;b.sweep.computeInterior=
function(d){d.fatalError=!1;b.sweep.removeDegenerateEdges_(d);b.sweep.initPriorityQ_(d);b.sweep.initEdgeDict_(d);for(var a;null!==(a=d.pq.extractMin());){for(;;){var c=d.pq.minimum();if(null===c||!b.geom.vertEq(c,a))break;c=d.pq.extractMin();b.sweep.spliceMergeVertices_(d,a.anEdge,c.anEdge)}b.sweep.sweepEvent_(d,a)}a=d.dict.getMin().getKey();d.event=a.eUp.org;b.sweep.doneEdgeDict_(d);b.sweep.donePriorityQ_(d);b.sweep.removeDegenerateFaces_(d.mesh);d.mesh.checkMesh()};b.sweep.addWinding_=function(b,
a){b.winding+=a.winding;b.sym.winding+=a.sym.winding};b.sweep.edgeLeq_=function(d,a,c){d=d.event;a=a.eUp;c=c.eUp;if(a.dst()===d)return c.dst()===d?b.geom.vertLeq(a.org,c.org)?0>=b.geom.edgeSign(c.dst(),a.org,c.org):0<=b.geom.edgeSign(a.dst(),c.org,a.org):0>=b.geom.edgeSign(c.dst(),d,c.org);if(c.dst()===d)return 0<=b.geom.edgeSign(a.dst(),d,a.org);a=b.geom.edgeEval(a.dst(),d,a.org);d=b.geom.edgeEval(c.dst(),d,c.org);return a>=d};b.sweep.deleteRegion_=function(d,a){a.fixUpperEdge&&b.assert(0===a.eUp.winding);
a.eUp.activeRegion=null;d.dict.deleteNode(a.nodeUp);a.nodeUp=null};b.sweep.fixUpperEdge_=function(d,a){b.assert(d.fixUpperEdge);b.mesh.deleteEdge(d.eUp);d.fixUpperEdge=!1;d.eUp=a;a.activeRegion=d};b.sweep.topLeftRegion_=function(d){var a=d.eUp.org;do d=d.regionAbove();while(d.eUp.org===a);d.fixUpperEdge&&(a=b.mesh.connect(d.regionBelow().eUp.sym,d.eUp.lNext),b.sweep.fixUpperEdge_(d,a),d=d.regionAbove());return d};b.sweep.topRightRegion_=function(b){var a=b.eUp.dst();do b=b.regionAbove();while(b.eUp.dst()===
a);return b};b.sweep.addRegionBelow_=function(d,a,c){var e=new b.ActiveRegion;e.eUp=c;e.nodeUp=d.dict.insertBefore(a.nodeUp,e);return c.activeRegion=e};b.sweep.isWindingInside_=function(d,a){switch(d.windingRule){case b.windingRule.GLU_TESS_WINDING_ODD:return 0!==(a&1);case b.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==a;case b.windingRule.GLU_TESS_WINDING_POSITIVE:return 0<a;case b.windingRule.GLU_TESS_WINDING_NEGATIVE:return 0>a;case b.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return 2<=a||-2>=
a}b.assert(!1);return!1};b.sweep.computeWinding_=function(d,a){a.windingNumber=a.regionAbove().windingNumber+a.eUp.winding;a.inside=b.sweep.isWindingInside_(d,a.windingNumber)};b.sweep.finishRegion_=function(d,a){var c=a.eUp,e=c.lFace;e.inside=a.inside;e.anEdge=c;b.sweep.deleteRegion_(d,a)};b.sweep.finishLeftRegions_=function(d,a,c){var e=a;for(a=a.eUp;e!==c;){e.fixUpperEdge=!1;var g=e.regionBelow(),h=g.eUp;if(h.org!==a.org){if(!g.fixUpperEdge){b.sweep.finishRegion_(d,e);break}h=b.mesh.connect(a.lPrev(),
h.sym);b.sweep.fixUpperEdge_(g,h)}a.oNext!==h&&(b.mesh.meshSplice(h.oPrev(),h),b.mesh.meshSplice(a,h));b.sweep.finishRegion_(d,e);a=g.eUp;e=g}return a};b.sweep.addRightEdges_=function(d,a,c,e,g,h){var f=!0;do b.assert(b.geom.vertLeq(c.org,c.dst())),b.sweep.addRegionBelow_(d,a,c.sym),c=c.oNext;while(c!==e);for(null===g&&(g=a.regionBelow().eUp.rPrev());;){e=a.regionBelow();c=e.eUp.sym;if(c.org!==g.org)break;c.oNext!==g&&(b.mesh.meshSplice(c.oPrev(),c),b.mesh.meshSplice(g.oPrev(),c));e.windingNumber=
a.windingNumber-c.winding;e.inside=b.sweep.isWindingInside_(d,e.windingNumber);a.dirty=!0;!f&&b.sweep.checkForRightSplice_(d,a)&&(b.sweep.addWinding_(c,g),b.sweep.deleteRegion_(d,a),b.mesh.deleteEdge(g));f=!1;a=e;g=c}a.dirty=!0;b.assert(a.windingNumber-c.winding===e.windingNumber);h&&b.sweep.walkDirtyRegions_(d,a)};b.sweep.callCombine_=function(d,a,c,e,g){var h=[a.coords[0],a.coords[1],a.coords[2]];a.data=null;a.data=d.callCombineCallback(h,c,e);null===a.data&&(g?d.fatalError||(d.callErrorCallback(b.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),
d.fatalError=!0):a.data=c[0])};b.sweep.spliceMergeVertices_=function(d,a,c){var e=[null,null,null,null];e[0]=a.org.data;e[1]=c.org.data;b.sweep.callCombine_(d,a.org,e,[.5,.5,0,0],!1);b.mesh.meshSplice(a,c)};b.sweep.vertexWeights_=function(d,a,c,e,g){var h=b.geom.vertL1dist(a,d),f=b.geom.vertL1dist(c,d),l=g+1;e[g]=.5*f/(h+f);e[l]=.5*h/(h+f);d.coords[0]+=e[g]*a.coords[0]+e[l]*c.coords[0];d.coords[1]+=e[g]*a.coords[1]+e[l]*c.coords[1];d.coords[2]+=e[g]*a.coords[2]+e[l]*c.coords[2]};b.sweep.getIntersectData_=
function(d,a,c,e,g,h){var f=[0,0,0,0],l=[c.data,e.data,g.data,h.data];a.coords[0]=a.coords[1]=a.coords[2]=0;b.sweep.vertexWeights_(a,c,e,f,0);b.sweep.vertexWeights_(a,g,h,f,2);b.sweep.callCombine_(d,a,l,f,!0)};b.sweep.checkForRightSplice_=function(d,a){var c=a.regionBelow(),e=a.eUp,g=c.eUp;if(b.geom.vertLeq(e.org,g.org)){if(0<b.geom.edgeSign(g.dst(),e.org,g.org))return!1;b.geom.vertEq(e.org,g.org)?e.org!==g.org&&(d.pq.remove(e.org.pqHandle),b.sweep.spliceMergeVertices_(d,g.oPrev(),e)):(b.mesh.splitEdge(g.sym),
b.mesh.meshSplice(e,g.oPrev()),a.dirty=c.dirty=!0)}else{if(0>b.geom.edgeSign(e.dst(),g.org,e.org))return!1;a.regionAbove().dirty=a.dirty=!0;b.mesh.splitEdge(e.sym);b.mesh.meshSplice(g.oPrev(),e)}return!0};b.sweep.checkForLeftSplice_=function(d,a){var c=a.regionBelow(),e=a.eUp,g=c.eUp;b.assert(!b.geom.vertEq(e.dst(),g.dst()));if(b.geom.vertLeq(e.dst(),g.dst())){if(0>b.geom.edgeSign(e.dst(),g.dst(),e.org))return!1;a.regionAbove().dirty=a.dirty=!0;c=b.mesh.splitEdge(e);b.mesh.meshSplice(g.sym,c);c.lFace.inside=
a.inside}else{if(0<b.geom.edgeSign(g.dst(),e.dst(),g.org))return!1;a.dirty=c.dirty=!0;c=b.mesh.splitEdge(g);b.mesh.meshSplice(e.lNext,g.sym);c.rFace().inside=a.inside}return!0};b.sweep.checkForIntersect_=function(d,a){var c=a.regionBelow(),e=a.eUp,g=c.eUp,h=e.org,f=g.org,l=e.dst(),k=g.dst(),m=new b.GluVertex;b.assert(!b.geom.vertEq(k,l));b.assert(0>=b.geom.edgeSign(l,d.event,h));b.assert(0<=b.geom.edgeSign(k,d.event,f));b.assert(h!==d.event&&f!==d.event);b.assert(!a.fixUpperEdge&&!c.fixUpperEdge);
if(h===f||Math.min(h.t,l.t)>Math.max(f.t,k.t))return!1;if(b.geom.vertLeq(h,f)){if(0<b.geom.edgeSign(k,h,f))return!1}else if(0>b.geom.edgeSign(l,f,h))return!1;b.geom.edgeIntersect(l,h,k,f,m);b.assert(Math.min(h.t,l.t)<=m.t);b.assert(m.t<=Math.max(f.t,k.t));b.assert(Math.min(k.s,l.s)<=m.s);b.assert(m.s<=Math.max(f.s,h.s));b.geom.vertLeq(m,d.event)&&(m.s=d.event.s,m.t=d.event.t);var t=b.geom.vertLeq(h,f)?h:f;b.geom.vertLeq(t,m)&&(m.s=t.s,m.t=t.t);if(b.geom.vertEq(m,h)||b.geom.vertEq(m,f))return b.sweep.checkForRightSplice_(d,
a),!1;if(!b.geom.vertEq(l,d.event)&&0<=b.geom.edgeSign(l,d.event,m)||!b.geom.vertEq(k,d.event)&&0>=b.geom.edgeSign(k,d.event,m)){if(k===d.event)return b.mesh.splitEdge(e.sym),b.mesh.meshSplice(g.sym,e),a=b.sweep.topLeftRegion_(a),e=a.regionBelow().eUp,b.sweep.finishLeftRegions_(d,a.regionBelow(),c),b.sweep.addRightEdges_(d,a,e.oPrev(),e,e,!0),!0;if(l===d.event)return b.mesh.splitEdge(g.sym),b.mesh.meshSplice(e.lNext,g.oPrev()),c=a,a=b.sweep.topRightRegion_(a),h=a.regionBelow().eUp.rPrev(),c.eUp=g.oPrev(),
g=b.sweep.finishLeftRegions_(d,c,null),b.sweep.addRightEdges_(d,a,g.oNext,e.rPrev(),h,!0),!0;0<=b.geom.edgeSign(l,d.event,m)&&(a.regionAbove().dirty=a.dirty=!0,b.mesh.splitEdge(e.sym),e.org.s=d.event.s,e.org.t=d.event.t);0>=b.geom.edgeSign(k,d.event,m)&&(a.dirty=c.dirty=!0,b.mesh.splitEdge(g.sym),g.org.s=d.event.s,g.org.t=d.event.t);return!1}b.mesh.splitEdge(e.sym);b.mesh.splitEdge(g.sym);b.mesh.meshSplice(g.oPrev(),e);e.org.s=m.s;e.org.t=m.t;e.org.pqHandle=d.pq.insert(e.org);b.sweep.getIntersectData_(d,
e.org,h,l,f,k);a.regionAbove().dirty=a.dirty=c.dirty=!0;return!1};b.sweep.walkDirtyRegions_=function(d,a){for(var c=a.regionBelow();;){for(;c.dirty;)a=c,c=c.regionBelow();if(!a.dirty&&(c=a,a=a.regionAbove(),null===a||!a.dirty))break;a.dirty=!1;var e=a.eUp,g=c.eUp;e.dst()!==g.dst()&&b.sweep.checkForLeftSplice_(d,a)&&(c.fixUpperEdge?(b.sweep.deleteRegion_(d,c),b.mesh.deleteEdge(g),c=a.regionBelow(),g=c.eUp):a.fixUpperEdge&&(b.sweep.deleteRegion_(d,a),b.mesh.deleteEdge(e),a=c.regionAbove(),e=a.eUp));
if(e.org!==g.org)if(e.dst()===g.dst()||a.fixUpperEdge||c.fixUpperEdge||e.dst()!==d.event&&g.dst()!==d.event)b.sweep.checkForRightSplice_(d,a);else if(b.sweep.checkForIntersect_(d,a))break;e.org===g.org&&e.dst()===g.dst()&&(b.sweep.addWinding_(g,e),b.sweep.deleteRegion_(d,a),b.mesh.deleteEdge(e),a=c.regionAbove())}};b.sweep.connectRightVertex_=function(d,a,c){var e=c.oNext,g=a.regionBelow(),h=a.eUp,f=g.eUp,l=!1;h.dst()!==f.dst()&&b.sweep.checkForIntersect_(d,a);b.geom.vertEq(h.org,d.event)&&(b.mesh.meshSplice(e.oPrev(),
h),a=b.sweep.topLeftRegion_(a),e=a.regionBelow().eUp,b.sweep.finishLeftRegions_(d,a.regionBelow(),g),l=!0);b.geom.vertEq(f.org,d.event)&&(b.mesh.meshSplice(c,f.oPrev()),c=b.sweep.finishLeftRegions_(d,g,null),l=!0);l?b.sweep.addRightEdges_(d,a,c.oNext,e,e,!0):(e=b.geom.vertLeq(f.org,h.org)?f.oPrev():h,e=b.mesh.connect(c.lPrev(),e),b.sweep.addRightEdges_(d,a,e,e.oNext,e.oNext,!1),e.sym.activeRegion.fixUpperEdge=!0,b.sweep.walkDirtyRegions_(d,a))};b.sweep.connectLeftDegenerate_=function(d,a,c){var e=
a.eUp;if(b.geom.vertEq(e.org,c))b.assert(b.sweep.TOLERANCE_NONZERO_),b.sweep.TOLERANCE_NONZERO_&&b.sweep.spliceMergeVertices_(d,e,c.anEdge);else if(b.geom.vertEq(e.dst(),c)){if(b.assert(b.sweep.TOLERANCE_NONZERO_),b.sweep.TOLERANCE_NONZERO_){a=b.sweep.topRightRegion_(a);var e=a.regionBelow(),g=e.eUp.sym,h=g.oNext,f=h;e.fixUpperEdge&&(b.assert(h!==g),b.sweep.deleteRegion_(d,e),b.mesh.deleteEdge(g),g=h.oPrev());b.mesh.meshSplice(c.anEdge,g);b.geom.edgeGoesLeft(h)||(h=null);b.sweep.addRightEdges_(d,
a,g.oNext,f,h,!0)}}else b.mesh.splitEdge(e.sym),a.fixUpperEdge&&(b.mesh.deleteEdge(e.oNext),a.fixUpperEdge=!1),b.mesh.meshSplice(c.anEdge,e),b.sweep.sweepEvent_(d,c)};b.sweep.connectLeftVertex_=function(d,a){var c=new b.ActiveRegion;c.eUp=a.anEdge.sym;var c=d.dict.search(c).getKey(),e=c.regionBelow(),g=c.eUp,h=e.eUp;0===b.geom.edgeSign(g.dst(),a,g.org)?b.sweep.connectLeftDegenerate_(d,c,a):(e=b.geom.vertLeq(h.dst(),g.dst())?c:e,c.inside||e.fixUpperEdge?(g=e===c?b.mesh.connect(a.anEdge.sym,g.lNext):
b.mesh.connect(h.dNext(),a.anEdge).sym,e.fixUpperEdge?b.sweep.fixUpperEdge_(e,g):b.sweep.computeWinding_(d,b.sweep.addRegionBelow_(d,c,g)),b.sweep.sweepEvent_(d,a)):b.sweep.addRightEdges_(d,c,a.anEdge,a.anEdge,null,!0))};b.sweep.sweepEvent_=function(d,a){d.event=a;for(var c=a.anEdge;null===c.activeRegion;)if(c=c.oNext,c===a.anEdge){b.sweep.connectLeftVertex_(d,a);return}var c=b.sweep.topLeftRegion_(c.activeRegion),e=c.regionBelow(),g=e.eUp,e=b.sweep.finishLeftRegions_(d,e,null);e.oNext===g?b.sweep.connectRightVertex_(d,
c,e):b.sweep.addRightEdges_(d,c,e.oNext,g,g,!0)};b.sweep.addSentinel_=function(d,a){var c=new b.ActiveRegion,e=b.mesh.makeEdge(d.mesh);e.org.s=b.sweep.SENTINEL_COORD_;e.org.t=a;e.dst().s=-b.sweep.SENTINEL_COORD_;e.dst().t=a;d.event=e.dst();c.eUp=e;c.windingNumber=0;c.inside=!1;c.fixUpperEdge=!1;c.sentinel=!0;c.dirty=!1;c.nodeUp=d.dict.insert(c)};b.sweep.initEdgeDict_=function(d){d.dict=new b.Dict(d,b.sweep.edgeLeq_);b.sweep.addSentinel_(d,-b.sweep.SENTINEL_COORD_);b.sweep.addSentinel_(d,b.sweep.SENTINEL_COORD_)};
b.sweep.doneEdgeDict_=function(d){for(var a=0,c;null!==(c=d.dict.getMin().getKey());)c.sentinel||(b.assert(c.fixUpperEdge),b.assert(1===++a)),b.assert(0===c.windingNumber),b.sweep.deleteRegion_(d,c);d.dict=null};b.sweep.removeDegenerateEdges_=function(d){for(var a=d.mesh.eHead,c,e=a.next;e!==a;e=c){c=e.next;var g=e.lNext;b.geom.vertEq(e.org,e.dst())&&e.lNext.lNext!==e&&(b.sweep.spliceMergeVertices_(d,g,e),b.mesh.deleteEdge(e),e=g,g=e.lNext);if(g.lNext===e){if(g!==e){if(g===c||g===c.sym)c=c.next;b.mesh.deleteEdge(g)}if(e===
c||e===c.sym)c=c.next;b.mesh.deleteEdge(e)}}};b.sweep.initPriorityQ_=function(d){var a=new b.PriorityQ;d.pq=a;d=d.mesh.vHead;var c;for(c=d.next;c!==d;c=c.next)c.pqHandle=a.insert(c);a.init()};b.sweep.donePriorityQ_=function(b){b.pq.deleteQ();b.pq=null};b.sweep.removeDegenerateFaces_=function(d){for(var a,c=d.fHead.next;c!==d.fHead;c=a)a=c.next,c=c.anEdge,b.assert(c.lNext!==c),c.lNext.lNext===c&&(b.sweep.addWinding_(c.oNext,c),b.mesh.deleteEdge(c))};b.tessmono={};b.tessmono.tessellateMonoRegion_=function(d){d=
d.anEdge;for(b.assert(d.lNext!==d&&d.lNext.lNext!==d);b.geom.vertLeq(d.dst(),d.org);d=d.lPrev());for(;b.geom.vertLeq(d.org,d.dst());d=d.lNext);for(var a=d.lPrev(),c;d.lNext!==a;)if(b.geom.vertLeq(d.dst(),a.org)){for(;a.lNext!==d&&(b.geom.edgeGoesLeft(a.lNext)||0>=b.geom.edgeSign(a.org,a.dst(),a.lNext.dst()));)c=b.mesh.connect(a.lNext,a),a=c.sym;a=a.lPrev()}else{for(;a.lNext!==d&&(b.geom.edgeGoesRight(d.lPrev())||0<=b.geom.edgeSign(d.dst(),d.org,d.lPrev().org));)c=b.mesh.connect(d,d.lPrev()),d=c.sym;
d=d.lNext}for(b.assert(a.lNext!==d);a.lNext.lNext!==d;)c=b.mesh.connect(a.lNext,a),a=c.sym};b.tessmono.tessellateInterior=function(d){for(var a,c=d.fHead.next;c!==d.fHead;c=a)a=c.next,c.inside&&b.tessmono.tessellateMonoRegion_(c)};b.tessmono.discardExterior=function(d){for(var a,c=d.fHead.next;c!==d.fHead;c=a)a=c.next,c.inside||b.mesh.zapFace(c)};b.tessmono.setWindingNumber=function(d,a,c){for(var e,g=d.eHead.next;g!==d.eHead;g=e)e=g.next,g.rFace().inside!==g.lFace.inside?g.winding=g.lFace.inside?
a:-a:c?b.mesh.deleteEdge(g):g.winding=0};b.Dict=function(d,a){this.head_=new b.DictNode;this.frame_=d;this.leq_=a};b.Dict.prototype.deleteDict_=function(){};b.Dict.prototype.insertBefore=function(d,a){do d=d.prev;while(null!==d.key&&!this.leq_(this.frame_,d.key,a));var c=new b.DictNode(a,d.next,d);d.next.prev=c;return d.next=c};b.Dict.prototype.insert=function(b){return this.insertBefore(this.head_,b)};b.Dict.prototype.deleteNode=function(b){b.next.prev=b.prev;b.prev.next=b.next};b.Dict.prototype.search=
function(b){var a=this.head_;do a=a.next;while(null!==a.key&&!this.leq_(this.frame_,b,a.key));return a};b.Dict.prototype.getMin=function(){return this.head_.next};b.Dict.prototype.getMax=function(){return this.head_.prev};b.DictNode=function(b,a,c){this.key=b||null;this.next=a||this;this.prev=c||this};b.DictNode.prototype.getKey=function(){return this.key};b.DictNode.prototype.getSuccessor=function(){return this.next};b.DictNode.prototype.getPredecessor=function(){return this.prev};b.GluTesselator=
function(){this.state_=b.GluTesselator.tessState_.T_DORMANT;this.errorCallback_=this.mesh=this.lastEdge_=null;this.normal_=[0,0,0];this.windingRule=b.windingRule.GLU_TESS_WINDING_ODD;this.fatalError=!1;this.combineCallback_=this.event=this.pq=this.dict=null;this.boundaryOnly_=!1;this.polygonData_=this.meshCallback_=this.endCallback_=this.vertexCallback_=this.edgeFlagCallback_=this.beginCallback_=null};b.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2};b.GluTesselator.prototype.gluDeleteTess=
function(){this.requireState_(b.GluTesselator.tessState_.T_DORMANT)};b.GluTesselator.prototype.gluTessProperty=function(d,a){switch(d){case b.gluEnum.GLU_TESS_TOLERANCE:return;case b.gluEnum.GLU_TESS_WINDING_RULE:switch(a){case b.windingRule.GLU_TESS_WINDING_ODD:case b.windingRule.GLU_TESS_WINDING_NONZERO:case b.windingRule.GLU_TESS_WINDING_POSITIVE:case b.windingRule.GLU_TESS_WINDING_NEGATIVE:case b.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:this.windingRule=a;return}break;case b.gluEnum.GLU_TESS_BOUNDARY_ONLY:this.boundaryOnly_=
!!a;return;default:this.callErrorCallback(b.gluEnum.GLU_INVALID_ENUM);return}this.callErrorCallback(b.gluEnum.GLU_INVALID_VALUE)};b.GluTesselator.prototype.gluGetTessProperty=function(d){switch(d){case b.gluEnum.GLU_TESS_TOLERANCE:return 0;case b.gluEnum.GLU_TESS_WINDING_RULE:return d=this.windingRule,b.assert(d===b.windingRule.GLU_TESS_WINDING_ODD||d===b.windingRule.GLU_TESS_WINDING_NONZERO||d===b.windingRule.GLU_TESS_WINDING_POSITIVE||d===b.windingRule.GLU_TESS_WINDING_NEGATIVE||d===b.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO),
d;case b.gluEnum.GLU_TESS_BOUNDARY_ONLY:return b.assert(!0===this.boundaryOnly_||!1===this.boundaryOnly_),this.boundaryOnly_;default:this.callErrorCallback(b.gluEnum.GLU_INVALID_ENUM)}return!1};b.GluTesselator.prototype.gluTessNormal=function(b,a,c){this.normal_[0]=b;this.normal_[1]=a;this.normal_[2]=c};b.GluTesselator.prototype.gluTessCallback=function(d,a){var c=a?a:null;switch(d){case b.gluEnum.GLU_TESS_BEGIN:case b.gluEnum.GLU_TESS_BEGIN_DATA:this.beginCallback_=c;break;case b.gluEnum.GLU_TESS_EDGE_FLAG:case b.gluEnum.GLU_TESS_EDGE_FLAG_DATA:this.edgeFlagCallback_=
c;break;case b.gluEnum.GLU_TESS_VERTEX:case b.gluEnum.GLU_TESS_VERTEX_DATA:this.vertexCallback_=c;break;case b.gluEnum.GLU_TESS_END:case b.gluEnum.GLU_TESS_END_DATA:this.endCallback_=c;break;case b.gluEnum.GLU_TESS_ERROR:case b.gluEnum.GLU_TESS_ERROR_DATA:this.errorCallback_=c;break;case b.gluEnum.GLU_TESS_COMBINE:case b.gluEnum.GLU_TESS_COMBINE_DATA:this.combineCallback_=c;break;case b.gluEnum.GLU_TESS_MESH:this.meshCallback_=c;break;default:this.callErrorCallback(b.gluEnum.GLU_INVALID_ENUM)}};b.GluTesselator.prototype.gluTessVertex=
function(d,a){var c=!1,e=[0,0,0];this.requireState_(b.GluTesselator.tessState_.T_IN_CONTOUR);for(var g=0;3>g;++g){var h=d[g];h<-b.GLU_TESS_MAX_COORD&&(h=-b.GLU_TESS_MAX_COORD,c=!0);h>b.GLU_TESS_MAX_COORD&&(h=b.GLU_TESS_MAX_COORD,c=!0);e[g]=h}c&&this.callErrorCallback(b.errorType.GLU_TESS_COORD_TOO_LARGE);this.addVertex_(e,a)};b.GluTesselator.prototype.gluTessBeginPolygon=function(d){this.requireState_(b.GluTesselator.tessState_.T_DORMANT);this.state_=b.GluTesselator.tessState_.T_IN_POLYGON;this.mesh=
new b.GluMesh;this.polygonData_=d};b.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(b.GluTesselator.tessState_.T_IN_POLYGON);this.state_=b.GluTesselator.tessState_.T_IN_CONTOUR;this.lastEdge_=null};b.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(b.GluTesselator.tessState_.T_IN_CONTOUR);this.state_=b.GluTesselator.tessState_.T_IN_POLYGON};b.GluTesselator.prototype.gluTessEndPolygon=function(){this.requireState_(b.GluTesselator.tessState_.T_IN_POLYGON);
this.state_=b.GluTesselator.tessState_.T_DORMANT;b.normal.projectPolygon(this,this.normal_[0],this.normal_[1],this.normal_[2]);b.sweep.computeInterior(this);if(!this.fatalError){var d=this.mesh;this.boundaryOnly_?b.tessmono.setWindingNumber(d,1,!0):b.tessmono.tessellateInterior(d);this.mesh.checkMesh();if(this.beginCallback_||this.endCallback_||this.vertexCallback_||this.edgeFlagCallback_)this.boundaryOnly_?b.render.renderBoundary(this,this.mesh):b.render.renderMesh(this,this.mesh,!!this.edgeFlagCallback_);
if(this.meshCallback_){b.tessmono.discardExterior(this.mesh);this.meshCallback_(this.mesh);this.polygonData_=this.mesh=null;return}}b.mesh.deleteMesh(this.mesh);this.mesh=this.polygonData_=null};b.GluTesselator.prototype.requireState_=function(b){this.state_!==b&&this.gotoState_(b)};b.GluTesselator.prototype.gotoState_=function(d){for(;this.state_!==d;)if(this.state_<d)switch(this.state_){case b.GluTesselator.tessState_.T_DORMANT:this.callErrorCallback(b.errorType.GLU_TESS_MISSING_BEGIN_POLYGON);
this.gluTessBeginPolygon(null);break;case b.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(b.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state_){case b.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorCallback(b.errorType.GLU_TESS_MISSING_END_CONTOUR);this.gluTessEndContour();break;case b.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(b.errorType.GLU_TESS_MISSING_END_POLYGON),this.gluTessEndPolygon()}};b.GluTesselator.prototype.addVertex_=
function(d,a){var c=this.lastEdge_;null===c?(c=b.mesh.makeEdge(this.mesh),b.mesh.meshSplice(c,c.sym)):(b.mesh.splitEdge(c),c=c.lNext);c.org.data=a;c.org.coords[0]=d[0];c.org.coords[1]=d[1];c.org.coords[2]=d[2];c.winding=1;c.sym.winding=-1;this.lastEdge_=c};b.GluTesselator.prototype.callBeginCallback=function(b){this.beginCallback_&&this.beginCallback_(b,this.polygonData_)};b.GluTesselator.prototype.callVertexCallback=function(b){this.vertexCallback_&&this.vertexCallback_(b,this.polygonData_)};b.GluTesselator.prototype.callEdgeFlagCallback=
function(b){this.edgeFlagCallback_&&this.edgeFlagCallback_(b,this.polygonData_)};b.GluTesselator.prototype.callEndCallback=function(){this.endCallback_&&this.endCallback_(this.polygonData_)};b.GluTesselator.prototype.callCombineCallback=function(b,a,c){return this.combineCallback_?this.combineCallback_(b,a,c,this.polygonData_)||null:null};b.GluTesselator.prototype.callErrorCallback=function(b){this.errorCallback_&&this.errorCallback_(b,this.polygonData_)};b.GluFace=function(b,a){this.next=b||this;
this.prev=a||this;this.anEdge=null;this.inside=!1};b.GluHalfEdge=function(b){this.next=b||this;this.activeRegion=this.lFace=this.org=this.lNext=this.oNext=this.sym=null;this.winding=0};b.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace};b.GluHalfEdge.prototype.dst=function(){return this.sym.org};b.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext};b.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym};b.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym};
b.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext};b.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym};b.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym};b.GluMesh=function(){this.vHead=new b.GluVertex;this.fHead=new b.GluFace;this.eHead=new b.GluHalfEdge;this.eHeadSym=new b.GluHalfEdge;this.eHead.sym=this.eHeadSym;this.eHeadSym.sym=this.eHead};b.GluMesh.prototype.checkMesh=function(){if(b.DEBUG){var d=this.fHead,a=this.vHead,c=this.eHead,e,g;for(e=e=d;(g=
e.next)!==d;e=g){b.assert(g.prev===e);e=g.anEdge;do b.assert(e.sym!==e),b.assert(e.sym.sym===e),b.assert(e.lNext.oNext.sym===e),b.assert(e.oNext.sym.lNext===e),b.assert(e.lFace===g),e=e.lNext;while(e!==g.anEdge)}b.assert(g.prev===e&&null===g.anEdge);for(e=e=a;(d=e.next)!==a;e=d){b.assert(d.prev===e);e=d.anEdge;do b.assert(e.sym!==e),b.assert(e.sym.sym===e),b.assert(e.lNext.oNext.sym===e),b.assert(e.oNext.sym.lNext===e),b.assert(e.org===d),e=e.oNext;while(e!==d.anEdge)}b.assert(d.prev===e&&null===
d.anEdge&&null===d.data);for(a=a=c;(e=a.next)!==c;a=e)b.assert(e.sym.next===a.sym),b.assert(e.sym!==e),b.assert(e.sym.sym===e),b.assert(null!==e.org),b.assert(null!==e.dst()),b.assert(e.lNext.oNext.sym===e),b.assert(e.oNext.sym.lNext===e);b.assert(e.sym.next===a.sym&&e.sym===this.eHeadSym&&e.sym.sym===e&&null===e.org&&null===e.dst()&&null===e.lFace&&null===e.rFace())}};b.GluVertex=function(b,a){this.next=b||this;this.prev=a||this;this.data=this.anEdge=null;this.coords=[0,0,0];this.pqHandle=this.t=
this.s=0};b.PriorityQ=function(){this.verts_=[];this.order_=null;this.size_=0;this.initialized_=!1;this.heap_=new b.PriorityQHeap};b.PriorityQ.prototype.deleteQ=function(){this.verts_=this.order_=this.heap_=null};b.PriorityQ.prototype.init=function(){this.order_=[];for(var d=0;d<this.size_;d++)this.order_[d]=d;d=function(a){return function(c,d){return b.geom.vertLeq(a[c],a[d])?1:-1}}(this.verts_);this.order_.sort(d);this.initialized_=!0;this.heap_.init();if(b.DEBUG)for(var a=0+this.size_-1,d=0;d<
a;++d)b.assert(b.geom.vertLeq(this.verts_[this.order_[d+1]],this.verts_[this.order_[d]]))};b.PriorityQ.prototype.insert=function(b){if(this.initialized_)return this.heap_.insert(b);var a=this.size_++;this.verts_[a]=b;return-(a+1)};b.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();var d=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var a=this.heap_.minimum();if(b.geom.vertLeq(a,d))return this.heap_.extractMin()}do--this.size_;while(0<this.size_&&
null===this.verts_[this.order_[this.size_-1]]);return d};b.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var d=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var a=this.heap_.minimum();if(b.geom.vertLeq(a,d))return a}return d};b.PriorityQ.prototype.remove=function(d){if(0<=d)this.heap_.remove(d);else for(d=-(d+1),b.assert(d<this.verts_.length&&null!==this.verts_[d]),this.verts_[d]=null;0<this.size_&&null===this.verts_[this.order_[this.size_-
1]];)--this.size_};b.PriorityQHeap=function(){this.heap_=b.PriorityQHeap.reallocNumeric_([0],b.PriorityQHeap.INIT_SIZE_+1);this.verts_=[null,null];this.handles_=[0,0];this.size_=0;this.max_=b.PriorityQHeap.INIT_SIZE_;this.freeList_=0;this.initialized_=!1;this.heap_[1]=1};b.PriorityQHeap.INIT_SIZE_=32;b.PriorityQHeap.reallocNumeric_=function(b,a){for(var c=Array(a),d=0;d<b.length;d++)c[d]=b[d];for(;d<a;d++)c[d]=0;return c};b.PriorityQHeap.prototype.init=function(){for(var b=this.size_;1<=b;--b)this.floatDown_(b);
this.initialized_=!0};b.PriorityQHeap.prototype.insert=function(d){var a=++this.size_;2*a>this.max_&&(this.max_*=2,this.handles_=b.PriorityQHeap.reallocNumeric_(this.handles_,this.max_+1));var c;0===this.freeList_?c=a:(c=this.freeList_,this.freeList_=this.handles_[this.freeList_]);this.verts_[c]=d;this.handles_[c]=a;this.heap_[a]=c;this.initialized_&&this.floatUp_(a);return c};b.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_};b.PriorityQHeap.prototype.minimum=function(){return this.verts_[this.heap_[1]]};
b.PriorityQHeap.prototype.extractMin=function(){var b=this.heap_,a=this.verts_,c=this.handles_,e=b[1],g=a[e];0<this.size_&&(b[1]=b[this.size_],c[b[1]]=1,a[e]=null,c[e]=this.freeList_,this.freeList_=e,0<--this.size_&&this.floatDown_(1));return g};b.PriorityQHeap.prototype.remove=function(d){var a=this.heap_,c=this.verts_,e=this.handles_;b.assert(1<=d&&d<=this.max_&&null!==c[d]);var g=e[d];a[g]=a[this.size_];e[a[g]]=g;g<=--this.size_&&(1>=g?this.floatDown_(g):b.geom.vertLeq(c[a[g>>1]],c[a[g]])?this.floatDown_(g):
this.floatUp_(g));c[d]=null;e[d]=this.freeList_;this.freeList_=d};b.PriorityQHeap.prototype.floatDown_=function(d){for(var a=this.heap_,c=this.verts_,e=this.handles_,g=a[d];;){var h=d<<1;h<this.size_&&b.geom.vertLeq(c[a[h+1]],c[a[h]])&&(h+=1);b.assert(h<=this.max_);var f=a[h];if(h>this.size_||b.geom.vertLeq(c[g],c[f])){a[d]=g;e[g]=d;break}a[d]=f;e[f]=d;d=h}};b.PriorityQHeap.prototype.floatUp_=function(d){for(var a=this.heap_,c=this.verts_,e=this.handles_,g=a[d];;){var h=d>>1,f=a[h];if(0===h||b.geom.vertLeq(c[f],
c[g])){a[d]=g;e[g]=d;break}a[d]=f;e[f]=d;d=h}};b.ActiveRegion=function(){this.nodeUp=this.eUp=null;this.windingNumber=0;this.fixUpperEdge=this.dirty=this.sentinel=this.inside=!1};b.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()};b.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()};return b})},"esri/layers/vectorTiles/views/2d/engine/webgl/lineMeshUtil":function(){define("require exports ./color ./LineTess ./MeshData ./number ./TileClipper ./Utils ./visualVariablesUtils".split(" "),
function(b,d,a,c,e,g,h,f,l){function k(a,b,d,e,f){"butt"===f?q.buttCap(a,b,d):"round"===f?q.roundCap(a,b,d,e,c.getNumberOfSlices(Math.PI),e===c.CapPosition.START?-1:1):"square"===f?q.squareCap(a,b,d,e):(q.buttCap(a,b,d),console.error("Unknown cap type!"))}function m(a,b,c,d,e,f,h,k,l,n,m,q){var p=0,u;for(u=0;u<m.vectors.count;++u){var t=m.vectors.items[u].vector[0],r=m.vectors.items[u].vector[1],z=m.vectors.items[u].texCoords[0],y=m.vectors.items[u].texCoords[1],x=m.vectors.items[u].direction[0],
w=m.vectors.items[u].direction[1],v=l+p;++p;q.push(g.i1616to32(a,b),h,d,g.i8888to32(Math.round(31*t),Math.round(31*r),Math.round(31*z),Math.round(31*y)),g.i1616to32(c,31*k),g.i1616to32(e[0],e[1]),g.i1616to32(f[0],f[1]),g.i8888to32(Math.round(31*x),Math.round(31*w),0,0));n&&q.push(n.size,n.color,n.opacity);m.vectors.items[u].base={index:v,point:[a,b]}}return p}function t(a,b,c){q.bridge(x,a,b);for(a=0;a<x.count;++a)b=x.items[a],c.push(b.v1.base.index,b.v2.base.index,b.v3.base.index)}Object.defineProperty(d,
"__esModule",{value:!0});var q=new c.Tessellator({distanceAlongCorrection:!0}),r=new Float32Array(1),w=new Uint32Array(r.buffer),v=[c.allocExtrudeVectors(),c.allocExtrudeVectors()],u=c.allocExtrudeVectors(),x=c.allocTriangles(20),y=c.allocTriangles(20),n=new h.TileClipper(0,0,0,1,8);n.setExtent(512);d.createLineMeshData=function(b,d,h,B,D,C,J){var p=null!=B?B.spriteMosaicItem:null,z=C.geometry,A=!f.isPictureSymbol(J)&&J.color?a.copyAndPremultiply(J.color):[255,255,255,1];B=g.numTo32(b);D=0<J.width?
.5*(J.width+1/D):0;J=null!=p;var aa=h.vvColor||h.vvOpacity||h.vvSizeMinMaxValue||h.vvSizeScaleStops||h.vvSizeFieldStops||h.vvSizeUnitValue,O=0,R=0,N=0;aa&&(N=d.vvFields,O=N.opacity?d.getValue(C,N.opacity):0,R=N.color?d.getValue(C,N.color):0,N=N.size&&!h.vvSizeScaleStops?d.getValue(C,N.size):0,h.vvSizeUnitValue&&(N=l.getVisualVariableSizeValueRepresentationRatio(N,d.vvRanges.size.unitValue.valueRepresentation)),isNaN(N)&&(N=1),isNaN(O)&&(O=1),isNaN(R)&&(R=1),r[0]=N,N=w[0],r[0]=O,O=w[0],r[0]=R,R=w[0]);
d=g.i8888to32(A[0],A[1],A[2],A[3]);h=[0,0];C=[0,0];if(p){var A=p.rect.x,G=p.rect.y,F=p.width,p=p.height;h[0]=A+1;h[1]=G+1;C[0]=A+1+F;C[1]=G+1+p}for(var A=z.rings||z.paths,z=[],G=A.length,F=0,ea=!1;F<G;){var S=A[F],p=[];n.reset(2);var P=S[0][0],Y=S[0][1];if(ea)n.moveTo(P,Y);else{if(-8>P||520<P||-8>Y||520<Y){ea=!0;continue}p.push({x:P,y:Y})}for(var M=!1,T=S.length,L=1;L<T;++L)if(P+=S[L][0],Y+=S[L][1],ea)n.lineTo(P,Y);else{if(-8>P||520<P||-8>Y||520<Y){M=!0;break}p.push({x:P,y:Y})}if(M)ea=!0;else{if(ea){if(ea=
n.resultWithStarts())for(p=0;p<ea.length;p++)z.push(ea[p])}else z.push({line:p,start:0});F++;ea=!1}}A=0;G=[];F=[];for(ea=0;ea<z.length;ea++)if(Y=z[ea],p=Y.line,!(2>p.length))for(var S=p.length,M=p[0],T=p[S-1],P=T.x-M.x,M=T.y-M.y,P=1E-6>P*P+M*M,U=Y.start%65535,Y=v[1],M=void 0,T=aa?{size:N,color:R,opacity:O}:null,M=0;M<S;++M){var V=p[M],L=Y===v[M%2]?v[(M+1)%2]:v[M%2];if(M<S-1||!P||J){a:{var Q=L,I=M,ba=p,W=S,Z=P,fa=ba[I],X=[void 0,void 0],ca=[void 0,void 0];if(0<I&&I<W-1){var ma=ba[(I+W-1)%W],na=ba[(I+
1)%W];c.normalize(X,[fa.x-ma.x,fa.y-ma.y]);c.normalize(ca,[na.x-fa.x,na.y-fa.y])}else if(0===I)na=ba[(I+1)%W],c.normalize(ca,[na.x-fa.x,na.y-fa.y]),Z?(ba=ba[W-2],c.normalize(X,[fa.x-ba.x,fa.y-ba.y])):X=ca;else if(I===W-1)ma=ba[(I+W-1)%W],c.normalize(X,[fa.x-ma.x,fa.y-ma.y]),Z?(ba=ba[1],c.normalize(ca,[ba.x-fa.x,ba.y-fa.y])):ca=X;else{console.error("Vertex index 'i' out of range.");break a}Z||0!==I?Z||I!==W-1?(I=c.getRads(X,ca),I>Math.PI-.05?q.rectJoin(Q,X,ca):.1>I?.05>I?q.fastMiterJoin(Q,X,ca):I<
c.MITER_SAFE_RADS?q.miterJoin(Q,X,ca):q.bevelJoin(Q,X,ca,c.SYSTEM_MAG_LIMIT):(W=c.getNumberOfSlices(I),2.3>I?2>W||.5>I?q.bevelJoin(Q,X,ca,1):q.roundJoin(Q,X,ca,W):q.unitRoundJoin(Q,X,ca,W))):k(Q,X,ca,c.CapPosition.END,"round"):k(Q,X,ca,c.CapPosition.START,"round")}A+=m(V.x,V.y,U,d,h,C,B,D,A,T,L,G);if(L.capCenter&&(!P||M!==S-1))for(ca=F,q.pie(y,L),X=void 0,X=0;X<y.count;++X)Q=y.items[X],ca.push(Q.v1.base.index,Q.v2.base.index,Q.v3.base.index);P&&0===M&&!J&&c.copyExtrudeVectors(u,L)}else c.copyExtrudeVectors(L,
u);0<M&&t(Y,L,F);M<S-1&&(X=p[M+1],ca=[X.x-V.x,X.y-V.y],Q=c.length(ca),ca=[ca[0]/Q,ca[1]/Q],Q=U+Q,65535<Q?(I=(65535-U)/(Q-U),U=V.x+(X.x-V.x)*I,V=V.y+(X.y-V.y)*I,X=Y,q.buttCap(X,ca,ca),A+=m(U,V,65535,d,h,C,b,D,A,T,X,G),q.bridge(x,L,X),t(L,X,F),q.buttCap(X,ca,ca),A+=m(U,V,0,d,h,C,b,D,A,T,X,G),U=Q-65535):(U=Q,Y=L))}b=new e;b.update({geometry:G},A,F);return b}})},"esri/layers/vectorTiles/views/2d/engine/webgl/LineTess":function(){define(["require","exports"],function(b,d){function a(a){var b={items:[],
count:0},c;for(c=0;c<a;++c)b.items.push(void 0);return b}function c(a,b){n.vector[0]=a.vector[0];n.vector[1]=a.vector[1];n.texCoords[0]=a.texCoords[0];n.texCoords[1]=a.texCoords[1];n.direction[0]=a.direction[0];n.direction[1]=a.direction[1];n.base=a.base;a.vector[0]=b.vector[0];a.vector[1]=b.vector[1];a.texCoords[0]=b.texCoords[0];a.texCoords[1]=b.texCoords[1];a.direction[0]=b.direction[0];a.direction[1]=b.direction[1];a.base=b.base;b.vector[0]=n.vector[0];b.vector[1]=n.vector[1];b.texCoords[0]=n.texCoords[0];
b.texCoords[1]=n.texCoords[1];b.direction[0]=n.direction[0];b.direction[1]=n.direction[1];b.base=n.base}function e(a,b){return a[0]*b[0]+a[1]*b[1]}function g(a){return Math.sqrt(e(a,a))}function h(a,b){var c=g(b);a[0]=b[0]/c;a[1]=b[1]/c;return a}function f(a,b){a[0]=-b[1];a[1]=b[0];return a}function l(a,b){return a[0]*b[1]-a[1]*b[0]}function k(a,b){a[0]=-b[0];a[1]=-b[1];return a}function m(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a}function t(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a}function q(a,
b){var c=e(a,b);return.999<c?0:-.999>c?Math.PI:Math.acos(c)}function r(a,b,c,d,e){if(0===d)a.count=0;else{var f=g(b),h=m(p[0],b,1/f);c=m(p[1],c,1/f);h=q(h,c);h=(e?-1:1)*h/d;e=Math.cos(h);h=Math.sin(h);c=b[0];var k=b[1];for(b=0;b<d-1;++b)f=c,c=e*f-h*k,k=h*f+e*k,a.items[b][0]=c,a.items[b][1]=k;a.count=d-1}}function w(a){var b=a.count,c=Math.floor(b/2),d;for(d=0;d<c;++d){var e=a.items[d];a.items[d]=a.items[b-d-1];a.items[b-d-1]=e}}Object.defineProperty(d,"__esModule",{value:!0});var v;(function(a){a[a.ENTRY=
1]="ENTRY";a[a.EXIT=2]="EXIT";a[a.CAP=3]="CAP"})(v=d.VectorRole||(d.VectorRole={}));var u;(function(a){a[a.START=1]="START";a[a.END=2]="END"})(u=d.CapPosition||(d.CapPosition={}));d.SYSTEM_MAG_LIMIT=3.8;d.MITER_SAFE_RADS=2*Math.acos(1/d.SYSTEM_MAG_LIMIT);var x=d.SYSTEM_MAG_LIMIT*d.SYSTEM_MAG_LIMIT,y=16/(2*Math.PI);d.allocTriangles=function(a){var b={items:[],count:0},c;for(c=0;c<a;++c)b.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v2:{vector:[void 0,
void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]}});return b};d.allocExtrudeVectors=function(){var b={items:[],count:0},c;for(c=0;30>c;++c)b.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]});c={};c[v.ENTRY]=a(20);c[v.EXIT]=a(20);c[v.CAP]=a(20);return{vectors:b,lists:c}};d.copyExtrudeVectors=function(a,b){var c;for(c=0;c<b.vectors.count;++c)a.vectors.items[c].vector[0]=
b.vectors.items[c].vector[0],a.vectors.items[c].vector[1]=b.vectors.items[c].vector[1],a.vectors.items[c].texCoords[0]=b.vectors.items[c].texCoords[0],a.vectors.items[c].texCoords[1]=b.vectors.items[c].texCoords[1],a.vectors.items[c].direction[0]=b.vectors.items[c].direction[0],a.vectors.items[c].direction[1]=b.vectors.items[c].direction[1],a.vectors.items[c].base=b.vectors.items[c].base;a.vectors.count=b.vectors.count;var d=b.lists[v.ENTRY],e=a.lists[v.ENTRY],f=b.lists[v.EXIT],h=a.lists[v.EXIT],
g=b.lists[v.CAP],k=a.lists[v.CAP];for(c=0;c<d.count;++c)e.items[c]=d.items[c];e.count=d.count;for(c=0;c<f.count;++c)h.items[c]=f.items[c];h.count=f.count;for(c=0;c<g.count;++c)k.items[c]=g.items[c];k.count=g.count;a.capCenter=b.capCenter};var n={vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0],base:void 0};d.swapExtrudeVectors=c;var p=[],z;for(z=0;32>z;++z)p.push([void 0,void 0]);var A=function(a){var b={items:[],count:0},c;for(c=0;c<a;++c)b.items.push([void 0,void 0]);return b}(16);
d.length=g;d.normalize=h;d.getNumberOfSlices=function(a){return Math.max(Math.round(a*y),1)};d.getRads=q;d.reverse=w;var B=[void 0,void 0],D=[void 0,void 0],C=[0,0],J=[0,0],E=[0,0],H=[0,0],K=Math.cos(Math.PI/4),aa=Math.sin(Math.PI/4),O=Math.sqrt(2);z=function(){function a(a){this._distanceAlongCorrection=a.distanceAlongCorrection}a.prototype.bridge=function(a,b,d){var e=b.vectors;b=b.lists[v.EXIT];var f=d.vectors,h=d.lists[v.ENTRY],g,k;if(b.count===h.count+1)d=b.items,g=e.items,k=h.items,f=f.items;
else if(h.count===b.count+1)d=h.items,g=f.items,k=b.items,f=e.items;else if(b.count===h.count)d=h.items,g=f.items,k=b.items,f=e.items;else{console.error("Cannot bridge "+b.count+" to "+h.count+".");a.count=0;return}e=b.count+h.count-2;a.count=e;B[0]=d;B[1]=k;D[0]=g;D[1]=f;for(b=0;b<e;++b)d=a.items[b],g=(b+0)%2,g=D[g][B[g][Math.floor((b+0)/2)]],d.v1.vector[0]=g.vector[0],d.v1.vector[1]=g.vector[1],d.v1.texCoords[0]=g.texCoords[0],d.v1.texCoords[1]=g.texCoords[1],d.v1.direction[0]=g.direction[0],d.v1.direction[1]=
g.direction[1],d.v1.base=g.base,g=(b+1)%2,g=D[g][B[g][Math.floor((b+1)/2)]],d.v2.vector[0]=g.vector[0],d.v2.vector[1]=g.vector[1],d.v2.texCoords[0]=g.texCoords[0],d.v2.texCoords[1]=g.texCoords[1],d.v2.direction[0]=g.direction[0],d.v2.direction[1]=g.direction[1],d.v2.base=g.base,g=(b+2)%2,g=D[g][B[g][Math.floor((b+2)/2)]],d.v3.vector[0]=g.vector[0],d.v3.vector[1]=g.vector[1],d.v3.texCoords[0]=g.texCoords[0],d.v3.texCoords[1]=g.texCoords[1],d.v3.direction[0]=g.direction[0],d.v3.direction[1]=g.direction[1],
d.v3.base=g.base,g=d.v1.base&&d.v1.base.point||C,k=d.v2.base&&d.v2.base.point||C,f=d.v3.base&&d.v3.base.point||C,J[0]=g[0]+d.v1.vector[0],J[1]=g[1]+d.v1.vector[1],E[0]=k[0]+d.v2.vector[0],E[1]=k[1]+d.v2.vector[1],H[0]=f[0]+d.v3.vector[0],H[1]=f[1]+d.v3.vector[1],0>(E[0]-J[0])*(H[1]-J[1])-(H[0]-J[0])*(E[1]-J[1])||c(d.v2,d.v3)};a.prototype.pie=function(a,b){if(0===b.lists[v.CAP].count)a.count=0;else if(1===b.lists[v.CAP].count)console.error("A single vector is not enough to define a pie."),a.count=
0;else{a.count=b.lists[v.CAP].count-1;var d;for(d=0;d<a.count;++d){var e=a.items[d],f=b.vectors.items[b.lists[v.CAP].items[d]];e.v1.vector[0]=f.vector[0];e.v1.vector[1]=f.vector[1];e.v1.texCoords[0]=f.texCoords[0];e.v1.texCoords[1]=f.texCoords[1];e.v1.direction[0]=f.direction[0];e.v1.direction[1]=f.direction[1];e.v1.base=f.base;f=b.vectors.items[b.lists[v.CAP].items[d+1]];e.v2.vector[0]=f.vector[0];e.v2.vector[1]=f.vector[1];e.v2.texCoords[0]=f.texCoords[0];e.v2.texCoords[1]=f.texCoords[1];e.v2.direction[0]=
f.direction[0];e.v2.direction[1]=f.direction[1];e.v2.base=f.base;f=b.vectors.items[b.capCenter];e.v3.vector[0]=f.vector[0];e.v3.vector[1]=f.vector[1];e.v3.texCoords[0]=f.texCoords[0];e.v3.texCoords[1]=f.texCoords[1];e.v3.direction[0]=f.direction[0];e.v3.direction[1]=f.direction[1];e.v3.base=f.base;var f=e.v1.base&&e.v1.base.point||C,h=e.v2.base&&e.v2.base.point||C,g=e.v3.base&&e.v3.base.point||C;J[0]=f[0]+e.v1.vector[0];J[1]=f[1]+e.v1.vector[1];E[0]=h[0]+e.v2.vector[0];E[1]=h[1]+e.v2.vector[1];H[0]=
g[0]+e.v3.vector[0];H[1]=g[1]+e.v3.vector[1];0>(E[0]-J[0])*(H[1]-J[1])-(H[0]-J[0])*(E[1]-J[1])||c(e.v2,e.v3)}}};a.prototype.buttCap=function(a,b,c){this.fastMiterJoin(a,b,c)};a.prototype.roundCap=function(a,b,c,d,e,f){void 0===f&&(f=0);this.fastMiterJoin(a,b,c);c=d===u.START?0:1;d=d===u.START?1:0;a.capCenter=a.vectors.count;b=a.vectors.items[a.capCenter];b.vector[0]=0;b.vector[1]=0;b.texCoords[0]=0;b.texCoords[1]=0;b.direction[0]=0;b.direction[1]=0;++a.vectors.count;r(A,a.vectors.items[c].vector,
a.vectors.items[d].vector,e,!1);e=a.vectors.count;b=a.lists[v.CAP];b.items[0]=c;c=a.vectors.items[c].texCoords[1];var h=a.vectors.items[d].texCoords[1],g;for(g=0;g<A.count;++g){var k=f*(1-Math.abs(A.count/2-g)/(A.count/2)),l=c+g/(A.count-1)*(h-c),n=A.items[g],p=a.vectors.items[e+g];p.vector[0]=n[0];p.vector[1]=n[1];p.texCoords[0]=k;p.texCoords[1]=l;p.direction[0]=0;p.direction[1]=0;b.items[g+1]=e+g}b.items[A.count+1]=d;b.count=A.count+2;a.vectors.count=e+A.count};a.prototype.squareCap=function(a,
b,c,d){this.fastMiterJoin(a,b,c);b=d===u.START?0:1;c=d===u.START?1:0;var e=p[0],f=p[1],h=p[2],g=p[3];d=p[4];var k=a.vectors.items[b].vector;e[0]=K*k[0]-aa*k[1];e[1]=aa*k[0]+K*k[1];m(g,e,O);f[0]=K*e[0]-aa*e[1];f[1]=aa*e[0]+K*e[1];h[0]=K*f[0]-aa*f[1];h[1]=aa*f[0]+K*f[1];m(d,h,O);b=a.vectors.items[b];b.vector[0]=g[0];b.vector[1]=g[1];a=a.vectors.items[c];a.vector[0]=d[0];a.vector[1]=d[1]};a.prototype.fastMiterJoin=function(a,b,c){c=f(p[0],c);b=k(p[1],c);var d=a.vectors.items[0];d.vector[0]=c[0];d.vector[1]=
c[1];d.texCoords[0]=0;d.texCoords[1]=-1;d.direction[0]=0;d.direction[1]=0;c=a.vectors.items[1];c.vector[0]=b[0];c.vector[1]=b[1];c.texCoords[0]=0;c.texCoords[1]=1;c.direction[0]=0;c.direction[1]=0;a.vectors.count=2;b=a.lists[v.ENTRY];b.items[0]=0;b.items[1]=1;b.count=2;b=a.lists[v.EXIT];b.items[0]=0;b.items[1]=1;b.count=2;a.lists[v.CAP].count=0;a.capCenter=void 0};a.prototype.miterJoin=function(a,b,c){var d=f(p[0],b),g=f(p[1],c),l=p[2];l[0]=d[0]+g[0];l[1]=d[1]+g[1];g=h(p[3],l);d=e(g,d);g=m(p[4],g,
1/d);d=k(p[5],g);this._distanceAlongCorrection?(l=a.vectors.items[0],l.vector[0]=g[0],l.vector[1]=g[1],l.texCoords[0]=0,l.texCoords[1]=-1,l.direction[0]=b[0],l.direction[1]=b[1],l=a.vectors.items[1],l.vector[0]=d[0],l.vector[1]=d[1],l.texCoords[0]=0,l.texCoords[1]=1,l.direction[0]=b[0],l.direction[1]=b[1],b=a.vectors.items[2],b.vector[0]=g[0],b.vector[1]=g[1],b.texCoords[0]=0,b.texCoords[1]=-1,b.direction[0]=c[0],b.direction[1]=c[1],b=a.vectors.items[3],b.vector[0]=d[0],b.vector[1]=d[1],b.texCoords[0]=
0,b.texCoords[1]=1,b.direction[0]=c[0],b.direction[1]=c[1],a.vectors.count=4,c=a.lists[v.ENTRY],c.items[0]=0,c.items[1]=1,c.count=2,c=a.lists[v.EXIT],c.items[0]=2,c.items[1]=3):(l=a.vectors.items[0],l.vector[0]=g[0],l.vector[1]=g[1],l.texCoords[0]=0,l.texCoords[1]=-1,l.direction[0]=0,l.direction[1]=0,l=a.vectors.items[1],l.vector[0]=d[0],l.vector[1]=d[1],l.texCoords[0]=0,l.texCoords[1]=1,l.direction[0]=0,l.direction[1]=0,a.vectors.count=2,c=a.lists[v.ENTRY],c.items[0]=0,c.items[1]=1,c.count=2,c=a.lists[v.EXIT],
c.items[0]=0,c.items[1]=1);c.count=2;a.lists[v.CAP].count=0;a.capCenter=void 0};a.prototype.bevelJoin=function(a,b,c,d){var g=d*d;d=l(b,c);var n=0<d?[-1,1]:[1,-1],q=n[0],n=n[1],u=0<d?k(p[0],f(p[1],b)):f(p[2],b),r=0<d?k(p[3],f(p[4],c)):f(p[5],c),z=p[6];z[0]=u[0]+r[0];z[1]=u[1]+r[1];var y=h(p[7],z),A=k(p[8],y),B=e(y,u),z=l(y,u),D=Math.abs(z/B),z=1+D*D,C=z<x?[D,this._distanceAlongCorrection]:[Math.sqrt(x-1),!0],E=C[0],C=C[1],K=z<g?[D,this._distanceAlongCorrection]:[Math.sqrt(g-1),!0],D=K[0];(K=K[1])&&
C?(C=a.vectors.items[0],t(C.vector,k(p[9],u),m(p[10],k(p[11],b),E)),C.texCoords[0]=0,C.texCoords[1]=q,C.direction[0]=this._distanceAlongCorrection?b[0]:0,C.direction[1]=this._distanceAlongCorrection?b[1]:0,A=a.vectors.items[1],t(A.vector,k(p[12],r),m(p[13],c,E)),A.texCoords[0]=0,A.texCoords[1]=q,A.direction[0]=this._distanceAlongCorrection?c[0]:0,A.direction[1]=this._distanceAlongCorrection?c[1]:0,q=a.vectors.items[2],q.vector[0]=0,q.vector[1]=0,q.texCoords[0]=0,q.texCoords[1]=0,q.direction[0]=0,
q.direction[1]=0,q=a.vectors.items[3],t(q.vector,u,m(p[14],b,D)),q.texCoords[0]=0,q.texCoords[1]=n,q.direction[0]=this._distanceAlongCorrection?b[0]:0,q.direction[1]=this._distanceAlongCorrection?b[1]:0,b=a.vectors.items[4],t(b.vector,r,m(p[15],k(p[16],c),D)),b.texCoords[0]=0,b.texCoords[1]=n,b.direction[0]=this._distanceAlongCorrection?c[0]:0,b.direction[1]=this._distanceAlongCorrection?c[1]:0,a.vectors.count=5,c=a.lists[v.ENTRY],c.items[0]=0,c.items[1]=2,c.items[2]=3,c.count=3,c=a.lists[v.EXIT],
c.items[0]=1,c.items[1]=2,c.items[2]=4,c.count=3,z<g?(g=a.lists[v.CAP],g.count=0,a.capCenter=void 0):(g=a.lists[v.CAP],g.items[0]=3,g.items[1]=4,g.count=2,a.capCenter=2)):!K&&C?(C=a.vectors.items[0],t(C.vector,k(p[9],u),m(p[10],k(p[11],b),E)),C.texCoords[0]=0,C.texCoords[1]=q,C.direction[0]=this._distanceAlongCorrection?b[0]:0,C.direction[1]=this._distanceAlongCorrection?b[1]:0,A=a.vectors.items[1],t(A.vector,k(p[12],r),m(p[13],c,E)),A.texCoords[0]=0,A.texCoords[1]=q,A.direction[0]=this._distanceAlongCorrection?
c[0]:0,A.direction[1]=this._distanceAlongCorrection?c[1]:0,q=a.vectors.items[2],q.vector[0]=0,q.vector[1]=0,q.texCoords[0]=0,q.texCoords[1]=0,q.direction[0]=0,q.direction[1]=0,q=a.vectors.items[3],m(q.vector,y,1/B),q.texCoords[0]=0,q.texCoords[1]=n,q.direction[0]=0,q.direction[1]=0,a.vectors.count=4,c=a.lists[v.ENTRY],c.items[0]=0,c.items[1]=2,c.items[2]=3,c.count=3,c=a.lists[v.EXIT],c.items[0]=1,c.items[1]=2,c.items[2]=3,c.count=3,a.lists[v.CAP].count=0,a.capCenter=void 0):K&&!C?(C=a.vectors.items[0],
m(C.vector,A,1/B),C.texCoords[0]=0,C.texCoords[1]=q,C.direction[0]=0,C.direction[1]=0,A=a.vectors.items[1],A.vector[0]=0,A.vector[1]=0,A.texCoords[0]=0,A.texCoords[1]=0,A.direction[0]=0,A.direction[1]=0,q=a.vectors.items[2],t(q.vector,u,m(p[9],b,D)),q.texCoords[0]=0,q.texCoords[1]=n,q.direction[0]=this._distanceAlongCorrection?b[0]:0,q.direction[1]=this._distanceAlongCorrection?b[1]:0,q=a.vectors.items[3],t(q.vector,r,m(p[10],k(p[11],c),D)),q.texCoords[0]=0,q.texCoords[1]=n,q.direction[0]=this._distanceAlongCorrection?
c[0]:0,q.direction[1]=this._distanceAlongCorrection?c[1]:0,a.vectors.count=4,c=a.lists[v.ENTRY],c.items[0]=0,c.items[1]=1,c.items[2]=2,c.count=3,c=a.lists[v.EXIT],c.items[0]=0,c.items[1]=1,c.items[2]=3,c.count=3,z<g?(g=a.lists[v.CAP],g.count=0,a.capCenter=void 0):(g=a.lists[v.CAP],g.items[0]=2,g.items[1]=3,g.count=2,a.capCenter=1)):K||C||(C=a.vectors.items[0],m(C.vector,A,1/B),C.texCoords[0]=0,C.texCoords[1]=q,C.direction[0]=0,C.direction[1]=0,A=a.vectors.items[1],m(A.vector,y,1/B),A.texCoords[0]=
0,A.texCoords[1]=n,A.direction[0]=0,A.direction[1]=0,a.vectors.count=2,c=a.lists[v.ENTRY],c.items[0]=0,c.items[1]=1,c.count=2,c=a.lists[v.EXIT],c.items[0]=0,c.items[1]=1,c.count=2,a.lists[v.CAP].count=0,a.capCenter=void 0);0>d&&(w(a.lists[v.ENTRY]),w(a.lists[v.EXIT]))};a.prototype.roundJoin=function(a,b,c,d){var g=l(b,c),n=0<g?[-1,1]:[1,-1],q=n[0],n=n[1],u=0<g?k(p[0],f(p[1],b)):f(p[2],b),z=0<g?k(p[3],f(p[4],c)):f(p[5],c),y=p[6];y[0]=u[0]+z[0];y[1]=u[1]+z[1];var B=h(p[7],y),y=k(p[8],B),D=e(B,u),B=
l(B,u),B=Math.abs(B/D),C=1+B*B<x?[B,this._distanceAlongCorrection]:[Math.sqrt(x-1),!0],B=C[0];C[1]?(C=a.vectors.items[0],C.vector[0]=u[0],C.vector[1]=u[1],C.texCoords[0]=0,C.texCoords[1]=n,C.direction[0]=0,C.direction[1]=0,C=a.vectors.items[1],C.vector[0]=z[0],C.vector[1]=z[1],C.texCoords[0]=0,C.texCoords[1]=n,C.direction[0]=0,C.direction[1]=0,C=a.vectors.items[2],t(C.vector,k(p[9],u),m(p[10],k(p[11],b),B)),C.texCoords[0]=0,C.texCoords[1]=q,C.direction[0]=this._distanceAlongCorrection?b[0]:0,C.direction[1]=
this._distanceAlongCorrection?b[1]:0,b=a.vectors.items[3],t(b.vector,k(p[12],z),m(p[13],c,B)),b.texCoords[0]=0,b.texCoords[1]=q,b.direction[0]=this._distanceAlongCorrection?c[0]:0,b.direction[1]=this._distanceAlongCorrection?c[1]:0,c=a.vectors.items[4],c.vector[0]=0,c.vector[1]=0,c.texCoords[0]=0,c.texCoords[1]=0,c.direction[0]=0,c.direction[1]=0,a.vectors.count=5,c=a.lists[v.ENTRY],c.items[0]=2,c.items[1]=4,c.items[2]=0,c.count=3,c=a.lists[v.EXIT],c.items[0]=3,c.items[1]=4,c.items[2]=1,c.count=3,
a.capCenter=4):(C=a.vectors.items[0],C.vector[0]=u[0],C.vector[1]=u[1],C.texCoords[0]=0,C.texCoords[1]=n,C.direction[0]=0,C.direction[1]=0,C=a.vectors.items[1],C.vector[0]=z[0],C.vector[1]=z[1],C.texCoords[0]=0,C.texCoords[1]=n,C.direction[0]=0,C.direction[1]=0,C=a.vectors.items[2],m(C.vector,y,1/D),C.texCoords[0]=0,C.texCoords[1]=q,C.direction[0]=0,C.direction[1]=0,b=a.vectors.items[3],b.vector[0]=0,b.vector[1]=0,b.texCoords[0]=0,b.texCoords[1]=0,b.direction[0]=0,b.direction[1]=0,a.vectors.count=
4,c=a.lists[v.ENTRY],c.items[0]=2,c.items[1]=3,c.items[2]=0,c.count=3,c=a.lists[v.EXIT],c.items[0]=2,c.items[1]=3,c.items[2]=1,c.count=3,a.capCenter=3);r(A,u,z,d,0>g);d=a.vectors.count;u=a.lists[v.CAP];for(z=u.items[0]=0;z<A.count;++z)c=A.items[z],q=a.vectors.items[d+z],q.vector[0]=c[0],q.vector[1]=c[1],q.texCoords[0]=0,q.texCoords[1]=n,q.direction[0]=0,q.direction[1]=0,u.items[z+1]=d+z;u.items[A.count+1]=1;u.count=A.count+2;a.vectors.count=d+A.count;0>g&&(w(a.lists[v.ENTRY]),w(a.lists[v.EXIT]))};
a.prototype.unitRoundJoin=function(a,b,c,d){var e=l(b,c),h=0<e?[-1,1]:[1,-1],g=h[0],h=h[1];b=0<e?k(p[0],f(p[1],b)):f(p[2],b);c=0<e?k(p[3],f(p[4],c)):f(p[5],c);var n=a.vectors.items[0];n.vector[0]=b[0];n.vector[1]=b[1];n.texCoords[0]=0;n.texCoords[1]=h;n.direction[0]=0;n.direction[1]=0;n=a.vectors.items[1];n.vector[0]=c[0];n.vector[1]=c[1];n.texCoords[0]=0;n.texCoords[1]=h;n.direction[0]=0;n.direction[1]=0;n=a.vectors.items[2];k(n.vector,b);n.texCoords[0]=0;n.texCoords[1]=g;n.direction[0]=0;n.direction[1]=
0;n=a.vectors.items[3];k(n.vector,c);n.texCoords[0]=0;n.texCoords[1]=g;n.direction[0]=0;n.direction[1]=0;g=a.vectors.items[4];g.vector[0]=0;g.vector[1]=0;g.texCoords[0]=0;g.texCoords[1]=0;g.direction[0]=0;g.direction[1]=0;a.vectors.count=5;g=a.lists[v.ENTRY];g.items[0]=2;g.items[1]=0;g.count=2;g=a.lists[v.EXIT];g.items[0]=3;g.items[1]=1;g.count=2;a.capCenter=4;r(A,b,c,d,0>e);d=a.vectors.count;b=a.lists[v.CAP];for(g=b.items[0]=0;g<A.count;++g)c=A.items[g],n=a.vectors.items[d+g],n.vector[0]=c[0],n.vector[1]=
c[1],n.texCoords[0]=0,n.texCoords[1]=h,n.direction[0]=0,n.direction[1]=0,b.items[g+1]=d+g;b.items[A.count+1]=1;b.count=A.count+2;a.vectors.count=d+A.count;0>e&&(w(a.lists[v.ENTRY]),w(a.lists[v.EXIT]))};a.prototype.rectJoin=function(a,b,c){b=f(p[0],b);c=f(p[1],c);var d=a.vectors.items[0];d.vector[0]=b[0];d.vector[1]=b[1];d.texCoords[0]=0;d.texCoords[1]=-1;d.direction[0]=0;d.direction[1]=0;d=a.vectors.items[1];d.vector[0]=c[0];d.vector[1]=c[1];d.texCoords[0]=0;d.texCoords[1]=-1;d.direction[0]=0;d.direction[1]=
0;d=a.vectors.items[2];k(d.vector,b);d.texCoords[0]=0;d.texCoords[1]=1;d.direction[0]=0;d.direction[1]=0;b=a.vectors.items[3];k(b.vector,c);b.texCoords[0]=0;b.texCoords[1]=1;b.direction[0]=0;b.direction[1]=0;a.vectors.count=4;b=a.lists[v.ENTRY];b.items[0]=0;b.items[1]=2;b.count=2;b=a.lists[v.EXIT];b.items[0]=1;b.items[1]=3;b.count=2;a.capCenter=void 0};return a}();d.Tessellator=z})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileClipper":function(){define(["require","exports","./Geometry","./GeometryUtils"],
function(b,d,a,c){Object.defineProperty(d,"__esModule",{value:!0});var e=function(){return function(a,b,c){this.ratio=a;this.x=b;this.y=c}}();b=function(){function b(a,b,c,d,e){void 0===d&&(d=8);void 0===e&&(e=8);this.lines=[];this.starts=[];this.pixelRatio=d;this.pixelMargin=e;this.tileSize=512*d;this.dz=a;this.yPos=b;this.xPos=c}b.prototype.setExtent=function(a){this.finalRatio=this.tileSize/a*(1<<this.dz);var b=this.pixelRatio*this.pixelMargin,b=b/this.finalRatio;a>>=this.dz;b>a&&(b=a);this.margin=
b;this.xmin=a*this.xPos-b;this.ymin=a*this.yPos-b;this.xmax=this.xmin+a+2*b;this.ymax=this.ymin+a+2*b};b.prototype.reset=function(a){this.type=a;this.lines=[];this.starts=[];this.line=null;this.start=0};b.prototype.moveTo=function(b,c){this._pushLine();this._prevIsIn=this._isIn(b,c);this._moveTo(b,c,this._prevIsIn);this._prevPt=new a.Point(b,c);this._firstPt=new a.Point(b,c);this._dist=0};b.prototype.lineTo=function(b,c){var d=this._isIn(b,c),f=new a.Point(b,c),h=a.Point.distance(this._prevPt,f),
g,l,w,v,u;if(d)this._prevIsIn?this._lineTo(b,c,!0):(g=this._prevPt,l=f,w=this._intersect(l,g),this.start=this._dist+h*(1-this._r),this._lineTo(w.x,w.y,!0),this._lineTo(l.x,l.y,!0));else if(this._prevIsIn)l=this._prevPt,g=f,w=this._intersect(l,g),this._lineTo(w.x,w.y,!0),this._lineTo(g.x,g.y,!1);else{var x=this._prevPt;if(!(x.x<=this.xmin&&f.x<=this.xmin||x.x>=this.xmax&&f.x>=this.xmax||x.y<=this.ymin&&f.y<=this.ymin||x.y>=this.ymax&&f.y>=this.ymax)){g=[];if(x.x<this.xmin&&f.x>this.xmin||x.x>this.xmin&&
f.x<this.xmin)l=(this.xmin-x.x)/(f.x-x.x),u=x.y+l*(f.y-x.y),u<=this.ymin?v=!1:u>=this.ymax?v=!0:g.push(new e(l,this.xmin,u));if(x.x<this.xmax&&f.x>this.xmax||x.x>this.xmax&&f.x<this.xmax)l=(this.xmax-x.x)/(f.x-x.x),u=x.y+l*(f.y-x.y),u<=this.ymin?v=!1:u>=this.ymax?v=!0:g.push(new e(l,this.xmax,u));if(x.y<this.ymin&&f.y>this.ymin||x.y>this.ymin&&f.y<this.ymin)l=(this.ymin-x.y)/(f.y-x.y),u=x.x+l*(f.x-x.x),u<=this.xmin?w=!1:u>=this.xmax?w=!0:g.push(new e(l,u,this.ymin));if(x.y<this.ymax&&f.y>this.ymax||
x.y>this.ymax&&f.y<this.ymax)l=(this.ymax-x.y)/(f.y-x.y),u=x.x+l*(f.x-x.x),u<=this.xmin?w=!1:u>=this.xmax?w=!0:g.push(new e(l,u,this.ymax));if(0===g.length)w?v?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):v?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<g.length&&g[0].ratio>g[1].ratio)this.start=this._dist+h*g[1].ratio,this._lineTo(g[1].x,g[1].y,!0),this._lineTo(g[0].x,g[0].y,!0);else for(this.start=this._dist+h*g[0].ratio,l=0;l<g.length;l++)this._lineTo(g[l].x,
g[l].y,!0)}this._lineTo(f.x,f.y,!1)}this._dist+=h;this._prevIsIn=d;this._prevPt=f};b.prototype.close=function(){var a,b;0<this.line.length&&(a=this._firstPt,b=this._prevPt,a.x===b.x&&a.y===b.y||this.lineTo(a.x,a.y),a=this.line,b=a.length,4<=b&&(a[0].x===a[1].x&&a[0].x===a[b-2].x||a[0].y===a[1].y&&a[0].y===a[b-2].y)&&(a.pop(),a[0].x=a[b-2].x,a[0].y=a[b-2].y))};b.prototype.result=function(a){void 0===a&&(a=!0);this._pushLine();if(0===this.lines.length)return null;3===this.type&&a&&g.simplify(this.tileSize,
this.margin*this.finalRatio,this.lines);return this.lines};b.prototype.resultWithStarts=function(){if(2!==this.type)throw Error("Only valid for lines");this._pushLine();var a=this.lines,b=a.length;if(0===b)return null;for(var c=[],d=0;d<b;d++)c.push({line:a[d],start:this.starts[d]||0});return c};b.prototype._isIn=function(a,b){return a>=this.xmin&&a<=this.xmax&&b>=this.ymin&&b<=this.ymax};b.prototype._intersect=function(b,c){var d,e,f;if(c.x>=this.xmin&&c.x<=this.xmax)e=c.y<=this.ymin?this.ymin:this.ymax,
f=(e-b.y)/(c.y-b.y),d=b.x+f*(c.x-b.x);else if(c.y>=this.ymin&&c.y<=this.ymax)d=c.x<=this.xmin?this.xmin:this.xmax,f=(d-b.x)/(c.x-b.x),e=b.y+f*(c.y-b.y);else{e=c.y<=this.ymin?this.ymin:this.ymax;d=c.x<=this.xmin?this.xmin:this.xmax;var h=(d-b.x)/(c.x-b.x),g=(e-b.y)/(c.y-b.y);h<g?(f=h,e=b.y+h*(c.y-b.y)):(f=g,d=b.x+g*(c.x-b.x))}this._r=f;return new a.Point(d,e)};b.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):2===
this.type?1<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&3<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)));this.line=[];this.start=0};b.prototype._moveTo=function(b,c,d){3!==this.type?d&&(b=Math.round((b-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),this.line.push(new a.Point(b,c))):(d||(b<this.xmin&&(b=this.xmin),b>this.xmax&&(b=this.xmax),c<this.ymin&&(c=this.ymin),c>
this.ymax&&(c=this.ymax)),b=Math.round((b-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),this.line.push(new a.Point(b,c)),this._is_v=this._is_h=!1)};b.prototype._lineTo=function(b,c,d){if(3!==this.type)if(d){b=Math.round((b-(this.xmin+this.margin))*this.finalRatio);c=Math.round((c-(this.ymin+this.margin))*this.finalRatio);if(0<this.line.length&&(d=this.line[this.line.length-1],d.equals(b,c)))return;this.line.push(new a.Point(b,c))}else this.line&&
0<this.line.length&&this._pushLine();else if(d||(b<this.xmin&&(b=this.xmin),b>this.xmax&&(b=this.xmax),c<this.ymin&&(c=this.ymin),c>this.ymax&&(c=this.ymax)),b=Math.round((b-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){d=this.line[this.line.length-1];var e=d.x===b,f=d.y===c;e&&f||(this._is_h&&e?(d.x=b,d.y=c,d=this.line[this.line.length-2],this._is_h=d.x===b,this._is_v=d.y===c):this._is_v&&f?(d.x=b,d.y=c,d=this.line[this.line.length-
2],this._is_h=d.x===b,this._is_v=d.y===c):(this.line.push(new a.Point(b,c)),this._is_h=e,this._is_v=f))}else this.line.push(new a.Point(b,c))};return b}();d.TileClipper=b;b=function(){function b(){}b.prototype.setExtent=function(a){this._ratio=4096===a?1:4096/a};b.prototype.reset=function(a){this.type=a;this.lines=[];this.line=null};b.prototype.moveTo=function(b,c){this.line&&this.lines.push(this.line);this.line=[];var d=this._ratio;this.line.push(new a.Point(Math.round(b*d),Math.round(c*d)))};b.prototype.lineTo=
function(b,c){var d=this._ratio;this.line.push(new a.Point(Math.round(b*d),Math.round(c*d)))};b.prototype.close=function(){var a=this.line;a&&!a[0].isEqual(a[a.length-1])&&a.push(a[0])};b.prototype.result=function(){this.line&&this.lines.push(this.line);if(0===this.lines.length)return null;3===this.type&&1!==this._ratio&&g.simplify(4096,64,this.lines);return this.lines};return b}();d.SimpleBuilder=b;var g=function(){function a(){}a.simplify=function(b,c,d){if(d){var e=-c,f=b+c,h=-c,g=b+c;b=[];c=[];
for(var k=d.length,l=0;l<k;++l){var u=d[l];if(u&&!(2>u.length))for(var x=u[0],y=void 0,n=u.length,p=1;p<n;++p)y=u[p],x.x===y.x&&(x.x<=e&&(x.y>y.y?(b.push(l),b.push(p),b.push(0),b.push(-1)):(c.push(l),c.push(p),c.push(0),c.push(-1))),x.x>=f&&(x.y<y.y?(b.push(l),b.push(p),b.push(1),b.push(-1)):(c.push(l),c.push(p),c.push(1),c.push(-1)))),x.y===y.y&&(x.y<=h&&(x.x<y.x?(b.push(l),b.push(p),b.push(2),b.push(-1)):(c.push(l),c.push(p),c.push(2),c.push(-1))),x.y>=g&&(x.x>y.x?(b.push(l),b.push(p),b.push(3),
b.push(-1)):(c.push(l),c.push(p),c.push(3),c.push(-1)))),x=y}0!==b.length&&0!==c.length&&(a.fillParent(d,c,b),a.fillParent(d,b,c),e=[],a.calcDeltas(e,c,b),a.calcDeltas(e,b,c),a.addDeltas(e,d))}};a.fillParent=function(a,b,d){for(var e=d.length,f=b.length,h=0;h<f;h+=4){for(var g=b[h],k=b[h+1],l=b[h+2],u=a[g][k-1],g=a[g][k],k=8092,x=-1,y=0;y<e;y+=4)if(d[y+2]===l){var n=d[y],p=d[y+1],z=a[n][p-1],n=a[n][p];switch(l){case 0:case 1:c.between(u.y,z.y,n.y)&&c.between(g.y,z.y,n.y)&&(z=Math.abs(n.y-z.y),z<k&&
(k=z,x=y));break;case 2:case 3:c.between(u.x,z.x,n.x)&&c.between(g.x,z.x,n.x)&&(z=Math.abs(n.x-z.x),z<k&&(k=z,x=y))}}b[h+3]=x}};a.calcDeltas=function(b,c,d){for(var e=c.length,f=0;f<e;f+=4){var h=a.calcDelta(f,c,d,[]);b.push(c[f]);b.push(c[f+1]);b.push(c[f+2]);b.push(h)}};a.calcDelta=function(b,c,d,e){b=c[b+3];if(-1===b)return 0;var f=e.length;if(1<f&&e[f-2]===b)return 0;e.push(b);return a.calcDelta(b,d,c,e)+1};a.addDeltas=function(a,b){for(var c=a.length,d=0,e=0;e<c;e+=4){var f=a[e+3];f>d&&(d=f)}for(e=
0;e<c;e+=4){var h=b[a[e]],g=a[e+1],f=d-a[e+3];switch(a[e+2]){case 0:h[g-1].x-=f;h[g].x-=f;break;case 1:h[g-1].x+=f;h[g].x+=f;break;case 2:h[g-1].y-=f;h[g].y-=f;break;case 3:h[g-1].y+=f,h[g].y+=f}}c=b.length;for(d=0;d<c;++d)h=b[d],!h||2>h.length||h[h.length-1].x!==h[0].x&&h[h.length-1].y!==h[0].y&&h.push(h[0])};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/textMeshUtils":function(){define("require exports ../../../../core/screenUtils ./color ./enums ./Geometry ./MaterialInfoUtils ./MeshData ./number ./SymbolProperties ./TextShaping ./visualVariablesUtils ./WGLDisplayRecord".split(" "),
function(b,d,a,c,e,g,h,f,l,k,m,t,q){Object.defineProperty(d,"__esModule",{value:!0});var r=[],w=l.i8888to32(255,255,255,255);d.createTextDisplayRecords=function(b,d,x,y,n,p){r.length=0;var u=d.symbol;n=n.get(u);if(!n.glyphMosaicItems||0===n.glyphMosaicItems.length)return r;var v=u.text;n=(new m([n.glyphMosaicItems],240,24,0,[24*p.offsetX,24*p.offsetY],p.hAnchor,p.vAnchor,.5)).getShaping(v,!1);if(!n||0===n.length)return r;d=d.vv;var v=l.numTo32(x),B=h.createTextMaterialInfo(n[0].glyphMosaicItem,d).materialKeyInfo,
D=0,C=0,J=0,E=0,H=B.vvColor||B.vvOpacity||B.vvRotation||B.vvSizeMinMaxValue||B.vvSizeScaleStops||B.vvSizeFieldStops||B.vvSizeUnitValue;H&&(D=y.vvFields,J=D.rotation?y.getValue(b,D.rotation):0,C=D.opacity?y.getValue(b,D.opacity):0,E=D.color?y.getValue(b,D.color):0,D=D.size&&!B.vvSizeScaleStops?y.getValue(b,D.size):0,B.vvSizeUnitValue&&(D=t.getVisualVariableSizeValueRepresentationRatio(D,y.vvRanges.size.unitValue.valueRepresentation)),isNaN(D)&&(D=1),isNaN(J)&&(J=1),isNaN(C)&&(C=1),isNaN(E)&&(E=1),
D=l.toUint32(D),C=l.toUint32(C),J=l.toUint32(J),E=l.toUint32(E));y=[D,E,C,J];b=b.centroid||b.geometry;var B=b.x,E=b.y,K,aa,O;b=c.copyAndPremultiply(u.color);D=c.copyAndPremultiply(u.haloColor);b=l.i8888to32(b[0],b[1],b[2],b[3]);var R=l.i8888to32(D[0],D[1],D[2],D[3]),D=[a.pt2px(u.xoffset),a.pt2px(u.yoffset)],B=B+D[0],E=E+D[1],D=u.font.size,u=10*(null!=u.haloSize?a.pt2px(a.toPt(u.haloSize)):0);if(0<u)for(var N=l.i1616to32(2*B+1,2*E),J=0;J<n.length;J++){var G=n[J],F=[],ea=[],S=G.glyphMosaicItem,C=Math.round(S.rect.x/
4);K=Math.round(S.rect.y/4);aa=C+Math.round(S.rect.width/4);O=K+Math.round(S.rect.height/4);var P=G.x+0+S.metrics.left,G=G.y+-17-S.metrics.top,P=new g.Point(P-4,G-4),G=new g.Point(P.x+S.rect.width,P.y+S.rect.height),Y=new g.Point(P.x,G.y),M=new g.Point(G.x,P.y);if(0!==p.angle){var T=Math.cos(p.angle),L=Math.sin(p.angle);P.rotate(T,L);G.rotate(T,L);Y.rotate(T,L);M.rotate(T,L)}T=h.createTextMaterialInfo(S,d);S=new f;F.push(N);F.push(v);F.push(R);F.push(l.i1616to32(32*P.x,32*P.y));F.push(l.i8888to32(C,
K,D,u));H&&F.push.apply(F,y);F.push(N);F.push(v);F.push(R);F.push(l.i1616to32(32*M.x,32*M.y));F.push(l.i8888to32(aa,K,D,u));H&&F.push.apply(F,y);F.push(N);F.push(v);F.push(R);F.push(l.i1616to32(32*Y.x,32*Y.y));F.push(l.i8888to32(C,O,D,u));H&&F.push.apply(F,y);F.push(N);F.push(v);F.push(R);F.push(l.i1616to32(32*G.x,32*G.y));F.push(l.i8888to32(aa,O,D,u));H&&F.push.apply(F,y);ea.push(w);S.update({geometry:F,visibility:ea},4,[0,1,2,1,3,2]);C=new q;C.setData(x,e.WGLGeometryType.TEXT,S,T,0,0);r.push(C)}B=
l.i1616to32(2*B,2*E);for(J=0;J<n.length;J++)G=n[J],F=[],ea=[],E=G.glyphMosaicItem,C=Math.round(E.rect.x/4),K=Math.round(E.rect.y/4),aa=C+Math.round(E.rect.width/4),O=K+Math.round(E.rect.height/4),P=G.x+0+E.metrics.left,G=G.y+-17-E.metrics.top,P=new g.Point(P-4,G-4),G=new g.Point(P.x+E.rect.width,P.y+E.rect.height),Y=new g.Point(P.x,G.y),M=new g.Point(G.x,P.y),0!==p.angle&&(T=Math.cos(p.angle),L=Math.sin(p.angle),P.rotate(T,L),G.rotate(T,L),Y.rotate(T,L),M.rotate(T,L)),E=h.createTextMaterialInfo(E,
d),S=new f,F.push(B),F.push(v),F.push(b),F.push(l.i1616to32(32*P.x,32*P.y)),F.push(l.i8888to32(C,K,D,u)),H&&F.push.apply(F,y),F.push(B),F.push(v),F.push(b),F.push(l.i1616to32(32*M.x,32*M.y)),F.push(l.i8888to32(aa,K,D,u)),H&&F.push.apply(F,y),F.push(B),F.push(v),F.push(b),F.push(l.i1616to32(32*Y.x,32*Y.y)),F.push(l.i8888to32(C,O,D,u)),H&&F.push.apply(F,y),F.push(B),F.push(v),F.push(b),F.push(l.i1616to32(32*G.x,32*G.y)),F.push(l.i8888to32(aa,O,D,u)),H&&F.push.apply(F,y),ea.push(w),S.update({geometry:F,
visibility:ea},4,[0,1,2,1,3,2]),C=new q,C.setData(x,e.WGLGeometryType.TEXT,S,E,0,0),r.push(C);k.TextProperties.pool.release(p);return r}})},"esri/layers/vectorTiles/views/2d/engine/webgl/TextShaping":function(){define(["require","exports","../../../../core/SetPool"],function(b,d,a){return function(){function b(a,b,c,d,l,k,m,t){this._glyphItems=a;this._maxWidth=b;this._lineHeight=c;this._letterSpacing=d;this._offset=l;this._hAnchor=k;this._vAnchor=m;this._justify=t}b.prototype.getShaping=function(b,
c){for(var d=this._letterSpacing,e=this._offset[0],g=this._offset[1],k=[],m=a.acquire(),t=b.length,q=0;q<t;q++){var r=b.charCodeAt(q);if(10===r)m.add(k.length);else{for(var w=void 0,v=0,u=this._glyphItems;v<u.length&&!(w=u[v][r]);v++);w&&(k.push({codePoint:r,x:e,y:g,glyphMosaicItem:w}),e+=w.metrics.advance+d)}}if(0<k.length){v=this._maxWidth;d=this._lineHeight;g=this._justify;t=k.length;w=r=e=0;if(0!==v||0<m.size)for(var x=0,q=u=0;q<t;q++){var y=k[q];y.x-=u;y.y=c?y.y-d*e:y.y+d*e;var n=m.has(q);if(v&&
y.x>v&&0<x||n){for(var p=n?q:x+1,z=k[p].x,w=Math.max(z,w),A=p;A<=q;A++)k[A].y=c?k[A].y-d:k[A].y+d,k[A].x-=z;g&&(x=n?q-1:x-1,0<=x&&this._applyJustification(k,r,x));r=p;x=0;u+=z;e++}32===y.codePoint&&(x=q)}q=k[t-1];w=Math.max(w,q.x+q.glyphMosaicItem.metrics.advance);g&&this._applyJustification(k,r,t-1);q=(g-this._hAnchor)*w;g=(-this._vAnchor*(e+1)+.5)*d;c&&e&&(g+=e*d);for(d=0;d<k.length;d++)e=k[d],e.x+=q,e.y+=g}a.release(m);return k};b.getBox=function(a,b){var c=a.length;if(0!==c){for(var d=a[0].x,
e=d,g=a[0].y,m=g,t=g,q=1;q<c;q++){var r=a[q],w=r.x;w<d&&(d=w);w>e&&(e=w);r=r.y;r<g&&(g=r);r>m&&(m=r);r!==t&&(t=this._glyphWidth(a[q-1].codePoint,b),e=Math.max(e,a[q-1].x+t),t=r)}q=this._glyphWidth(a[c-1].codePoint,b);e=Math.max(e,a[c-1].x+q);g+=17;return{x:d,y:g,width:e-d,height:m+7-g}}};b.prototype._applyJustification=function(a,b,c){for(var d=a[c],d=(d.x+d.glyphMosaicItem.metrics.advance)*this._justify;b<=c;b++)a[b].x-=d};b._glyphWidth=function(a,b){for(var c,d=0;d<b.length&&!(c=b[d][a]);d++);return c?
c.metrics.advance:0};return b}()})},"esri/layers/vectorTiles/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(b,d,a,c,e,g,h){return function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a.color=new e([0,255,255]);a.haloOpacity=1;a.fillOpacity=.5;return a}a(d,b);c([h.property({type:e})],
d.prototype,"color",void 0);c([h.property()],d.prototype,"haloOpacity",void 0);c([h.property()],d.prototype,"fillOpacity",void 0);return d=c([h.subclass("esri.views.2d.support.HighlightOptions")],d)}(h.declared(g))})},"esri/layers/vectorTiles/renderers/SimpleRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Renderer ../symbols/support/jsonUtils ../symbols/support/typeUtils".split(" "),
function(b,d,a,c,e,g,h,f,l){return function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a.description=null;a.label=null;a.symbol=null;a.type="simple";return a}a(d,b);h=d;d.prototype.writeSymbolWebScene=function(a,b,c,d){f.writeTarget(a,b,c,d)};d.prototype.writeSymbol=function(a,b,c,d){f.writeTarget(a,b,c,d)};d.prototype.readSymbol=function(a,b,c){return f.read(a,b,c)};d.prototype.getSymbol=function(a,b){return this.symbol};d.prototype.getSymbols=function(){return this.symbol?[this.symbol]:
[]};d.prototype.clone=function(){return new h({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:e.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};c([g.property({type:String,json:{write:!0}})],d.prototype,"description",void 0);c([g.property({type:String,json:{write:!0}})],d.prototype,"label",void 0);c([g.property({types:l.rendererTypes})],d.prototype,"symbol",void 0);c([g.writer("web-scene","symbol",{symbol:{types:l.rendererTypes3D}})],
d.prototype,"writeSymbolWebScene",null);c([g.writer("symbol")],d.prototype,"writeSymbol",null);c([g.reader("symbol")],d.prototype,"readSymbol",null);return d=h=c([g.subclass("esri.renderers.SimpleRenderer")],d);var h}(g.declared(h))})},"esri/layers/vectorTiles/renderers/Renderer":function(){define("../core/declare ../core/Accessor ../core/JSONSupport ../core/kebabDictionary ../core/screenUtils ../core/lang ../core/Error ../support/arcadeUtils dojo/_base/lang ../Color ./support/utils ./support/AuthoringInfo".split(" "),
function(b,d,a,c,e,g,h,f,l,k,m,t){var q=c({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),r=c({widthAndDepth:"width-and-depth"}),w=c({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});c({classedSize:"classed-size",classedColor:"classed-color",univariateColorSize:"univariate-color-size"});
c({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"});c({percentTotal:"percent-of-total"});var v=Math.PI;return b([d,a],{declaredClass:"esri.renderers.Renderer",properties:{authoringInfo:{type:t,value:null,json:{write:!0}},requiredFields:{dependsOn:["visualVariables"],get:function(){var a=Object.create(null);this.collectRequiredFields(a);return Object.keys(a)}},
type:{type:String,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}},visualVariables:{json:{read:{source:["visualVariables","rotationType","rotationExpression"],reader:function(a,b){return this._readVariables(a,b)}},write:function(a,b,c,d){var e=[];a.forEach(function(a,b){"size"===a.type?e.push(this._writeSizeInfo(a,d,b)):"color"===a.type?e.push(this._writeColorInfo(a,d,b)):"opacity"===a.type?e.push(this._writeOpacityInfo(a,d,b)):"rotation"===a.type&&e.push(this._writeRotationInfo(a,d,b))},this);
b.visualVariables=e}}}},constructor:function(){this._cache={}},_rotationRE:/^\[([^\]]+)\]$/i,_viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,_visualVariablesSetter:function(a){var b=this._cache;this.visualVariables&&this.visualVariables.forEach(function(a,c){b.hasOwnProperty(c)&&(b[c]=null)},this);a&&a.some(function(a){return!!a.target})&&a.sort(function(a,b){return a.target===b.target?0:a.target?1:-1});a&&a.forEach(function(a,c){"color"===a.type?b[c]=this._processColorInfo(a):"opacity"===
a.type?b[c]=this._processOpacityInfo(a):"size"===a.type?b[c]=this._processSizeInfo(a):"rotation"===a.type&&(b[c]=this._processRotationInfo(a))},this);this._set("visualVariables",a)},getSymbol:function(a,b){},getVisualVariableValues:function(a,b){var c=this.visualVariables,d;c&&(d=c.map(function(c){var d,e=c.type,f=e+"Info";b=l.mixin({},b);b[f]=c;switch(e){case "size":d=this.getSize(a,b);break;case "color":d=this.getColor(a,b);break;case "opacity":d=this.getOpacity(a,b);break;case "rotation":d=this.getRotationAngle(a,
b)}return{variable:c,value:d}},this).filter(function(a){return null!=a.value},this));return d},hasVisualVariables:function(a,b){return a?!!this.getVisualVariablesForType(a,b):!!(this.getVisualVariablesForType("size",b)||this.getVisualVariablesForType("color",b)||this.getVisualVariablesForType("opacity",b)||this.getVisualVariablesForType("rotation",b))},getVisualVariablesForType:function(a,b){var c=this.visualVariables,d;c&&(d=c.filter(function(c){return c.type===a&&("string"===typeof b?c.target===
b:!1===b?!c.target:!0)}))&&0===d.length&&(d=void 0);return d},getSize:function(a,b){var c=this._getVarInfo(b&&b.sizeInfo,"size"),d=c.variable,c=this._cache[c.cacheKey],e=null;if(d)var f=d.minSize,e=d.maxSize,f="object"===typeof f&&f?this._getSize(a,f,c&&c.minSize,b):f,e="object"===typeof e&&e?this._getSize(a,e,c&&c.maxSize,b):e,e=this._getSize(a,d,c&&c.root,b,[f,e]);return e},getSizeRangeAtScale:function(a,b){var c,d=this._getVarInfo(a,"size"),e=this._cache[d.cacheKey],f={scale:b};if((a=d.variable)&&
b){var d=a.minSize,h=a.maxSize,d="object"===typeof d&&d?this._getSize({},d,e&&e.minSize,f):d,e="object"===typeof h&&h?this._getSize({},h,e&&e.maxSize,f):h;if(null!=d||null!=e)d>e&&(c=e,e=d,d=c),c={minSize:d,maxSize:e}}return c},getColor:function(a,b){var c=this._getVarInfo(b&&b.colorInfo,"color");return this._getColorComponent(a,c.variable,this._cache[c.cacheKey],b)},getOpacity:function(a,b){var c=this._getVarInfo(b&&b.opacityInfo,"opacity");return this._getColorComponent(a,c.variable,this._cache[c.cacheKey],
b,!0)},getRotationAngle:function(a,b){var c=this._getVarInfo(b&&b.rotationInfo,"rotation"),d=c.variable,e=this._cache[c.cacheKey],h=d.axis||"heading",c="heading"===h&&"arithmetic"===d.rotationType?90:0,h="heading"===h&&"arithmetic"===d.rotationType?-1:1,d=d.field,e=e&&e.compiledFunc,g=a.attributes,k=0;if(d||e)e?k=f.executeFunction(e,f.createExecContext(a,f.getViewInfo(b))):l.isFunction(d)?k=d.apply(this,arguments):g&&(k=g[d]||0),k="number"!==typeof k||isNaN(k)?null:c+h*k;return k},collectRequiredFields:function(a){var b=
[];this.visualVariables&&(b=b.concat(this.visualVariables));b.forEach(function(b){b&&(b.field&&(a[b.field]=!0),b.normalizationField&&(a[b.normalizationField]=!0),b.valueExpression&&f.extractFieldNames(b.valueExpression).forEach(function(b){a[b]=!0}))})},_getVarInfo:function(a,b){var c;a&&a.type===b&&this.visualVariables?(c=this.visualVariables.indexOf(a),a=this.visualVariables[c]):this.visualVariables&&(a=(c=this.getVisualVariablesForType(b))&&c[0],c=this.visualVariables.indexOf(a));return{variable:a,
cacheKey:c}},_readSizeInfo:function(a){a.axis&&(a.axis=r.fromJSON(a.axis));a.valueUnit&&(a.valueUnit=w.fromJSON(a.valueUnit));return a},_readColorInfo:function(a){a&&(a.colors&&a.colors.forEach(function(b,c){l.isArray(b)?a.colors[c]=k.fromJSON(b):a.colors[c]=new k(b)}),a.stops&&a.stops.forEach(function(b,c){b.color&&l.isArray(b.color)?a.stops[c].color=k.fromJSON(b.color):b.color&&(a.stops[c].color=new k(b.color))}));return a},_readOpacityInfo:function(a){var b;a&&(b=l.mixin({},a),b.transparencyValues&&
(b.opacityValues=b.transparencyValues.map(function(a){return 1-a/100}),delete b.transparencyValues),b.stops&&(b.stops=b.stops.map(function(a){a=l.mixin({},a);a.opacity=1-a.transparency/100;delete a.transparency;return a})));return b},_readVariables:function(a,b){a&&(a=a.map(function(a){a=g.clone(a);a.type=q.fromJSON(a.type);"size"===a.type?a=this._readSizeInfo(a):"color"===a.type?a=this._readColorInfo(a):"opacity"===a.type&&(a=this._readOpacityInfo(a));return a},this));var c=b.rotationType,d=b.rotationExpression;
d&&(c={type:"rotation",rotationType:c},(d=d.match(this._rotationRE))&&d[1]&&(c.field=d[1],a||(a=[]),a.push(c)));return a},_createCache:function(a){var b=a&&a.valueExpression,c=f.createSyntaxTree(b),c=f.createFunction(c),d=!(!a||!a.expression)||this._viewScaleRE.test(b);return{ipData:this._interpolateData(a),hasExpr:!!b,compiledFunc:c,isScaleDriven:d}},_processColorInfo:function(a){a&&(a.colors&&a.colors.forEach(function(b,c){b instanceof k||(a.colors[c]=new k(b))}),a.stops&&a.stops.forEach(function(b,
c){!b.color||b.color instanceof k||(a.stops[c].color=new k(b.color))}),this._sortStops(a.stops));return this._createCache(a)},_processOpacityInfo:function(a){this._sortStops(a&&a.stops);return this._createCache(a)},_processSizeInfo:function(a){a.stops&&Array.isArray(a.stops)?a.stops=this._processSizeInfoStops(a.stops):(a.minSize=a.minSize&&this._processSizeInfoSize(a.minSize),a.maxSize=a.maxSize&&this._processSizeInfoSize(a.maxSize));return{root:this._createCache(a),minSize:this._createCache(a.minSize),
maxSize:this._createCache(a.maxSize)}},_processSizeInfoSize:function(a){"object"===typeof a?a.stops=this._processSizeInfoStops(a.stops):a=e.toPt(a);return a},_processSizeInfoStops:function(a){a&&Array.isArray(a)&&(a.forEach(function(a){a.size=e.toPt(a.size)}),this._sortStops(a));return a},_sortStops:function(a){a&&Array.isArray(a)&&a.sort(function(a,b){return a.value-b.value})},_processRotationInfo:function(a){return this._createCache(a)},_getSize:function(a,b,c,d,e){var h=a.attributes,g=b.field,
k=b.stops,n=0,p=c&&c.hasExpr,q=c&&c.compiledFunc,t=c&&c.ipData,u=c&&c.isScaleDriven,r="number"===typeof a,y=r?a:null;if(g||u||p){var x=d&&d.scale,w=e?e[0]:b.minSize,N=e?e[1]:b.maxSize,G=b.minDataValue,F=b.maxDataValue,ea=b.valueUnit||"unknown",S=b.valueRepresentation,n=b.scaleBy,P=b.normalizationField,Y=h?parseFloat(h[P]):void 0,M=d&&d.shape;u?y=null==x?this._getAverageValue(b):x:"number"!==typeof y&&(p?y=f.executeFunction(q,f.createExecContext(a,f.getViewInfo(d))):l.isFunction(g)?y=g.apply(this,
arguments):h&&(y=h[g]));if(null==y||P&&!r&&(isNaN(Y)||0===Y))return null;isNaN(Y)||r||(y/=Y);if(k)N=this._lookupData(y,t),y=N[0],w=N[1],y===w?n=k[y].size:(y=k[y].size,k=k[w].size,n=y+(k-y)*N[2]);else if(null!=w&&null!=N&&null!=G&&null!=F)y<=G?n=w:y>=F?n=N:(k=(y-G)/(F-G),"area"===n&&M?(w=(y="circle"===M)?v*Math.pow(w/2,2):w*w,k=w+k*((y?v*Math.pow(N/2,2):N*N)-w),n=y?2*Math.sqrt(k/v):Math.sqrt(k)):n=w+k*(N-w));else if("unknown"===ea)null!=w&&null!=G?(w&&G?(k=y/G,n="circle"===M?2*Math.sqrt(k*Math.pow(w/
2,2)):"square"===M||"diamond"===M||"image"===M?Math.sqrt(k*Math.pow(w,2)):k*w):n=y+(w||G),n=n<w?w:n,null!=N&&n>N&&(n=N)):n=y;else{k=(d&&d.resolution?d.resolution:1)*m.meterIn[ea];if("area"===S)n=Math.sqrt(y/v)/k,n*=2;else if(n=y/k,"radius"===S||"distance"===S)n*=2;null!=w&&n<w&&(n=w);null!=N&&n>N&&(n=N)}}else b&&(n=k&&k[0]&&k[0].size,null==n&&(n=b.minSize));return n=isNaN(n)?0:n},_getAverageValue:function(a){var b=a.stops,c;b?(c=b[0].value,a=b[b.length-1].value):(c=a.minDataValue||0,a=a.maxDataValue||
0);return(c+a)/2},_getColorComponent:function(a,b,c,d,e,h){var g=a.attributes,k=b&&b.field,n="number"===typeof a,p=n?a:null,m=c&&c.hasExpr,q=c&&c.compiledFunc,t=c&&c.ipData,u;if(k||m){var z=b.normalizationField,r=g?parseFloat(g[z]):void 0;"number"!==typeof p&&(m?p=f.executeFunction(q,f.createExecContext(a,f.getViewInfo(d))):l.isFunction(k)?p=k.apply(this,arguments):g&&(p=g[k]));null==p||z&&!n&&(isNaN(r)||0===r)||(isNaN(r)||n||(p/=r),u=e?this._getOpacity(p,b,t):this._getColor(p,b,t))}else b&&(g=b.stops,
e?(u=g&&g[0]&&g[0].opacity,null==u&&(u=b.opacityValues&&b.opacityValues[0])):u=g&&g[0]&&g[0].color||b.colors&&b.colors[0]);h&&(h.data=p,h.value=u);return h||u},_interpolateData:function(a){var b;if(a)if(a.colors||a.opacityValues){var c=(a.colors||a.opacityValues).length,d=a.minDataValue,e=(a.maxDataValue-d)/(c-1);b=[];for(a=0;a<c;a++)b[a]=d+a*e}else a.stops&&(b=a.stops.map(function(a){return a.value||0}));return b},_getOpacity:function(a,b,c){a=this._lookupData(a,c);var d;b=b||this.opacityInfo;a&&
(c=a[0],d=a[1],c===d?d=this._getOpacValue(b,c):(c=this._getOpacValue(b,c),b=this._getOpacValue(b,d),d=c+(b-c)*a[2]));return d},_getOpacValue:function(a,b){return a.opacityValues?a.opacityValues[b]:a.stops[b].opacity},_getColor:function(a,b,c){a=this._lookupData(a,c);var d;b=b||this.colorInfo;a&&(d=a[0],c=a[1],d=d===c?this._getColorObj(b,d):k.blendColors(this._getColorObj(b,d),this._getColorObj(b,c),a[2]),d=new k(d));return d},_getColorObj:function(a,b){return a.colors?a.colors[b]:a.stops[b].color},
_lookupData:function(a,b){var c;if(b){var d=0,e=b.length-1;b.some(function(b,c){if(a<b)return e=c,!0;d=c;return!1});c=[d,e,(a-b[d])/(b[e]-b[d])]}return c},_processForContext:function(a,b,c){if(b&&"web-scene"===b.origin){var d=null!=a.expression,e=null!=a.valueExpressionTitle&&"rotation"===a.type;b.messages&&(d&&b.messages.push(new h("property:unsupported",a.type+"VisualVariable.expression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+
".expression",context:b})),e&&b.messages.push(new h("property:unsupported",a.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+".valueExpressionTitle",context:b})));d&&delete a.expression;e&&delete a.valueExpressionTitle}else"size"===a.type&&this._convertExpressionToArcade(a)},_writeRotationInfo:function(a,b,c){a&&(a=l.mixin({},a),this._processForContext(a,b,"visualVariables["+c+"]"),a.type=q.toJSON(a.type),
a=g.fixJson(a,!0));return a},_convertExpressionToArcade:function(a){a&&a.expression&&(a.valueExpression="$view.scale")},_writeSizeInfo:function(a,b,c){if(a){a=l.mixin({},a);this._processForContext(a,b,"string"===typeof c?c:"visualVariables["+c+"]");var d=a.minSize,e=a.maxSize;d&&(a.minSize="number"===typeof d?d:this._writeSizeInfo(d,b,"visualVariables["+c+"].minSize"));e&&(a.maxSize="number"===typeof e?e:this._writeSizeInfo(e,b,"visualVariables["+c+"].maxSize"));b=a.legendOptions;c=a.axis;a.type=
q.toJSON(a.type);c&&(a.axis=r.toJSON(c));b&&(a.legendOptions=l.mixin({},b),b=b.customValues)&&(a.legendOptions.customValues=b.slice(0));a.stops&&(a.stops=a.stops.map(function(a){a=l.mixin({},a);null===a.label&&delete a.label;return a}));a=g.fixJson(a,!0)}return a},_writeColorInfo:function(a,b,c){a&&(a=l.mixin({},a),this._processForContext(a,b,"visualVariables["+c+"]"),a.type=q.toJSON(a.type),a.colors&&(a.colors=a.colors.map(function(a){return k.toJSON(a)})),a.stops&&(a.stops=a.stops.map(function(a){a=
l.mixin({},a);a.color&&(a.color=k.toJSON(a.color));null==a.value&&(a.value=0);null===a.label&&delete a.label;return a})),a.legendOptions&&(a.legendOptions=l.mixin({},a.legendOptions)),a=g.fixJson(a,!0));return a},_writeOpacityInfo:function(a,b,c){var d;a&&(d=l.mixin({},a),this._processForContext(d,b,"visualVariables["+c+"]"),d.type=q.toJSON(d.type),d.opacityValues&&(d.transparencyValues=d.opacityValues.map(function(a){return Math.max(0,Math.min(Math.round(100*(1-a)),100))}),delete d.opacityValues),
d.stops&&(d.stops=d.stops.map(function(a){a=l.mixin({},a);a.transparency=Math.max(0,Math.min(Math.round(100*(1-a.opacity)),100));delete a.opacity;null===a.label&&delete a.label;return a})),d.legendOptions&&(d.legendOptions=l.mixin({},d.legendOptions)),d=g.fixJson(d,!0));return d}})})},"esri/layers/vectorTiles/renderers/support/AuthoringInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ./AuthoringInfoVisualVariable".split(" "),
function(b,d,a,c,e,g,h,f){var l=g({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),k=g({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size"});return function(b){function d(a){a=b.call(this)||this;a.lengthUnit=null;a.visualVariables=null;return a}a(d,b);e=d;Object.defineProperty(d.prototype,"classificationMethod",
{get:function(){if("class-breaks-size"===this.type||"class-breaks-color"===this.type){var a=this._get("classificationMethod");return a?a:"manual"}return null},set:function(a){this._set("classificationMethod",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"fields",{get:function(){return"predominance"===this.type?this._get("fields"):null},set:function(a){this._set("fields",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"standardDeviationInterval",{get:function(){return"standard-deviation"===
this.classificationMethod?this._get("standardDeviationInterval"):null},set:function(a){this._set("standardDeviationInterval",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"type",{get:function(){return this._get("type")},set:function(a){var b=a;"classed-size"===a?b="class-breaks-size":"classed-color"===a&&(b="class-breaks-color");this._set("type",b)},enumerable:!0,configurable:!0});d.prototype.clone=function(){return new e({classificationMethod:this.classificationMethod,fields:this.fields&&
this.fields.slice(0),lengthUnit:this.lengthUnit,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(function(a){return a.clone()})})};c([h.property({type:String,value:null,dependsOn:["type"],json:{read:l.read,write:l.write}})],d.prototype,"classificationMethod",null);c([h.property({type:[String],value:null,dependsOn:["type"],json:{write:!0}})],d.prototype,"fields",null);c([h.property({type:String,json:{read:!1,write:!1,
origins:{"web-scene":{read:!0,write:!0}}}})],d.prototype,"lengthUnit",void 0);c([h.property({type:Number,value:null,dependsOn:["classificationMethod"],json:{write:!0}})],d.prototype,"standardDeviationInterval",null);c([h.property({type:String,value:null,json:{read:k.read,write:k.write}})],d.prototype,"type",null);c([h.property({type:[f],json:{write:!0}})],d.prototype,"visualVariables",void 0);return d=e=c([h.subclass("esri.renderers.support.AuthoringInfo")],d);var e}(h.declared(e))})},"esri/layers/vectorTiles/renderers/support/AuthoringInfoVisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/decorators/cast".split(" "),
function(b,d,a,c,e,g,h,f){var l=g({percentTotal:"percent-of-total"}),k=g({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity"}),m={key:function(a){return"number"===typeof a?"number":"string"},typeMap:{number:Number,string:String},base:null};return function(b){function d(a){a=b.call(this)||this;a.endTime=null;a.field=null;a.maxSliderValue=null;a.minSliderValue=null;a.startTime=null;a.type=null;a.units=null;return a}a(d,b);e=d;d.prototype.castEndTime=function(a){return"string"===typeof a||
"number"===typeof a?a:null};d.prototype.castStartTime=function(a){return"string"===typeof a||"number"===typeof a?a:null};Object.defineProperty(d.prototype,"style",{get:function(){return"color"===this.type?this._get("style"):null},set:function(a){this._set("style",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"theme",{get:function(){return"color"===this.type?this._get("theme")||"high-to-low":null},set:function(a){this._set("theme",a)},enumerable:!0,configurable:!0});d.prototype.clone=
function(){return new e({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})};c([h.property({types:m,json:{write:!0}})],d.prototype,"endTime",void 0);c([f.cast("endTime")],d.prototype,"castEndTime",null);c([h.property({type:String,json:{write:!0}})],d.prototype,"field",void 0);c([h.property({type:Number,json:{write:!0}})],d.prototype,"maxSliderValue",
void 0);c([h.property({type:Number,json:{write:!0}})],d.prototype,"minSliderValue",void 0);c([h.property({types:m,json:{write:!0}})],d.prototype,"startTime",void 0);c([f.cast("startTime")],d.prototype,"castStartTime",null);c([h.property({type:String,value:null,dependsOn:["type"],json:{read:l.read,write:l.write}})],d.prototype,"style",null);c([h.property({type:String,value:null,dependsOn:["type"],json:{write:!0}})],d.prototype,"theme",null);c([h.property({type:String,json:{read:k.read,write:k.write}})],
d.prototype,"type",void 0);c([h.property({type:String,json:{write:!0}})],d.prototype,"units",void 0);return d=e=c([h.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],d);var e}(h.declared(e))})},"esri/layers/vectorTiles/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol3D ../TextSymbol ../WebStyleSymbol ../callouts/LineCallout3D ./symbolConversion".split(" "),
function(b,d,a,c,e,g,h,f,l,k,m,t,q,r,w,v,u,x,y){function n(b,c,d){if(!b)return null;if(!d||"web-scene"!==d.origin||b.isInstanceOf(w)||b.isInstanceOf(u))return b.write(c,d);var e=y.to3D(b);if(e.symbol)return e.symbol.write(c,d);d.messages&&d.messages.push(new a("symbol:unsupported","Symbols of type '"+b.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",{symbol:b,context:d,error:e.error}));return null}Object.defineProperty(d,"__esModule",
{value:!0});var p={esriSMS:r,esriPMS:l,esriTS:v,esriSLS:q,esriSFS:t,esriPFS:f,PointSymbol3D:k,LineSymbol3D:g,PolygonSymbol3D:m,MeshSymbol3D:h,LabelSymbol3D:e,styleSymbolReference:u};d.read=function(a,b,d){if(b=a?p[a.type]||null:null)return b=new b,b.read(a,d),b;d&&d.messages&&a&&d.messages.push(new c("symbol:unsupported","Symbols of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:d}));return null};d.writeTarget=function(a,b,c,d){(a=n(a,{},d))&&(b[c]=a)};d.write=n;d.fromJSON=
function(a,b){var c=a?p[a.type]||null:null;return c?c.fromJSON(a,b):null};d.readCallout3D=function(a,b){if(!a||!a.type)return null;var c=null;switch(a.type){case "line":c=new x}c&&c.read(a,b);return c}})},"esri/layers/vectorTiles/core/Warning":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(b,d,a,c,e){b=function(b){function c(a,d,e){var f=b.call(this,a,d,e)||this;return f instanceof c?f:new c(a,d,e)}a(c,b);return c}(e);b.prototype.type=
"warning";return b})},"esri/layers/vectorTiles/symbols/LabelSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(b,d,a,c){return function(b){function c(){return null!==b&&b.apply(this,arguments)||this}a(c,b);return c}(c)})},"esri/layers/vectorTiles/symbols/Symbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol"],function(b,d,a,c){return function(b){function c(){return null!==b&&b.apply(this,arguments)||
this}a(c,b);return c}(c)})},"esri/layers/vectorTiles/symbols/Symbol":function(){define(["../core/lang","../core/kebabDictionary","../core/JSONSupport","../Color"],function(b,d,a,c){var e=d({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),g=0;return a.createSubclass({declaredClass:"esri.symbols.Symbol",
constructor:function(){this.id="sym"+g++},properties:{type:{type:String,value:null,json:{read:e.fromJSON,write:{ignoreOrigin:!0,writer:function(a,b){b.type=e.toJSON(this.type)}}}},color:{type:c,value:new c([0,0,0,1]),json:{read:function(a){return a&&b.isDefined(a[0])?[a[0],a[1],a[2],a[3]/255]:a},write:{allowNull:!0}}}}})})},"esri/layers/vectorTiles/symbols/LineSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(b,d,a,c){return function(b){function c(){return null!==
b&&b.apply(this,arguments)||this}a(c,b);return c}(c)})},"esri/layers/vectorTiles/symbols/MeshSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(b,d,a,c){return function(b){function c(){return null!==b&&b.apply(this,arguments)||this}a(c,b);return c}(c)})},"esri/layers/vectorTiles/symbols/PictureFillSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./FillSymbol ./support/urlUtils".split(" "),function(b,
d,a,c,e,g){var h={xscale:1,yscale:1,xoffset:0,yoffset:0,width:12,height:12},f=b(e,{declaredClass:"esri.symbols.PictureFillSymbol",properties:{type:"picture-fill",url:g.urlPropertyDefinition,xscale:{value:1,json:{write:!0}},yscale:{value:1,json:{write:!0}},width:{value:12,cast:c.toPt,json:{write:!0}},height:{value:12,cast:c.toPt,json:{write:!0}},xoffset:{value:0,cast:c.toPt,json:{write:!0}},yoffset:{value:0,cast:c.toPt,json:{write:!0}},source:g.sourcePropertyDefinition},getDefaults:function(){return d.mixin(this.inherited(arguments),
h)},normalizeCtorArgs:function(a,b,d,e){if(a&&"string"!==typeof a&&null==a.imageData)return a;var f={};a&&(f.url=a);b&&(f.outline=b);null!=d&&(f.width=c.toPt(d));null!=e&&(f.height=c.toPt(e));return f},clone:function(){var b=new f({color:a.clone(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});b._set("source",a.clone(this.source));return b}});f.defaultProps=h;return f})},
"esri/layers/vectorTiles/symbols/FillSymbol":function(){define(["./Symbol","./SimpleLineSymbol"],function(b,d){return b.createSubclass({declaredClass:"esri.symbols.FillSymbol",properties:{outline:{type:d,json:{read:{default:null},write:!0}},type:null}})})},"esri/layers/vectorTiles/symbols/SimpleLineSymbol":function(){define(["../core/declare","dojo/_base/lang","../core/lang","../core/screenUtils","./LineSymbol"],function(b,d,a,c,e){var g={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",
STYLE_DASHDOTDOT:"long-dash-dot-dot",STYLE_NULL:"none",STYLE_SHORTDASH:"short-dash",STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},h={color:[0,0,0,1],style:g.STYLE_SOLID,width:.75,cap:g.CAP_BUTT,join:g.JOIN_MITER,miterLimit:7.5},f=b(e,{declaredClass:"esri.symbols.SimpleLineSymbol",
properties:{type:"simple-line",style:{value:g.STYLE_SOLID,json:{read:function(b,c){return a.valueOf(this._jsonStyles,b)||void 0},write:function(a,b){b.style=this._jsonStyles[a]}}},cap:{value:g.CAP_BUTT,json:{read:!1,write:!1}},join:{value:g.JOIN_MITER,json:{read:!1,write:!1}},miterLimit:{value:7.5,cast:c.toPt,json:{read:!1,write:!1}}},_jsonStyles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot","dash-dot":"esriSLSDashDot","long-dash-dot-dot":"esriSLSDashDotDot",none:"esriSLSNull","inside-frame":"esriSLSInsideFrame",
"short-dash":"esriSLSShortDash","short-dot":"esriSLSShortDot","short-dash-dot":"esriSLSShortDashDot","short-dash-dot-dot":"esriSLSShortDashDotDot","long-dash":"esriSLSLongDash","long-dash-dot":"esriSLSLongDashDot"},getDefaults:function(){return d.mixin(this.inherited(arguments),h)},normalizeCtorArgs:function(a,b,d,e,f,h){if(a&&"string"!==typeof a)return a;var g={};null!=a&&(g.style=a);null!=b&&(g.color=b);null!=d&&(g.width=c.toPt(d));null!=e&&(g.cap=e);null!=f&&(g.join=f);null!=h&&(g.miterLimit=c.toPt(h));
return g},clone:function(){return new f({color:a.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})}});d.mixin(f,g);f.defaultProps=h;return f})},"esri/layers/vectorTiles/symbols/LineSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(b,d,a){return b(a,{declaredClass:"esri.symbols.LineSymbol",properties:{color:{},type:"simple-line",width:{value:.75,cast:d.toPt,json:{write:!0}}}})})},"esri/layers/vectorTiles/symbols/support/urlUtils":function(){define(["require",
"exports","../../core/urlUtils"],function(b,d,a){function c(b,c,d){return c.imageData?a.makeData({mediaType:c.contentType||"image/png",isBase64:!0,data:c.imageData}):e(c.url,d)}function e(b,c){return!c||"service"!==c.origin&&"portal-item"!==c.origin||!c.layer||"feature"!==c.layer.type&&"stream"!==c.layer.type||a.isAbsolute(b)||!c.layer.parsedUrl?a.read(b,c):a.join(c.layer.parsedUrl.path,"images",b)}function g(b,c,d,e){a.isDataProtocol(b)?(b=a.dataComponents(b),c.contentType=b.mediaType,c.imageData=
b.data,d&&d.imageData===c.imageData&&d.url&&(c.url=h(d.url,e))):c.url=h(b,e)}function h(b,c){return a.write(b,c)}Object.defineProperty(d,"__esModule",{value:!0});d.readImageDataOrUrl=c;d.read=e;d.writeImageDataAndUrl=g;d.write=h;d.urlPropertyDefinition={json:{read:{source:["imageData","url"],reader:c},write:{writer:function(a,b,c,d){g(a,b,this.source,d)}}}};d.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(a,b,c){a={};b.imageData&&(a.imageData=b.imageData);
b.contentType&&(a.contentType=b.contentType);b.url&&(a.url=e(b.url,c));return a}}}}})},"esri/layers/vectorTiles/core/urlUtils":function(){define(["require","exports","esri/urlUtils","dojo/_base/url"],function(b,d,a,c){function e(b){return a.normalize(b)}function g(a){return"data:"===a.slice(0,5)}function h(a){return f(a)||x.test(a)}function f(a){return a&&"/"===a[0]&&"/"===a[1]}function l(b){return a.urlToObject(b)}function k(a){if("string"===typeof a)return new c(t(a));a.scheme||(a.scheme=d.appUrl.scheme);
return a}function m(a){if(g(a))return null;var b=a.indexOf("://");if(-1===b&&f(a))b=2;else if(-1!==b)b+=3;else return null;b=a.indexOf("/",b);return-1===b?a:a.slice(0,b)}function t(a,b,c){void 0===b&&(b=d.appBaseUrl);if(f(a))return c&&c.preserveProtocolRelative?a:"http"===d.appUrl.scheme&&d.appUrl.authority===m(a).slice(2)?"http:"+a:"https:"+a;if(x.test(a))return a;c=r;if("/"===a[0]){var e=b.indexOf("//"),e=b.indexOf("/",e+2);b=-1===e?b:b.slice(0,e)}return c(b,a)}function q(a,b,c){void 0===c&&(c=
!1);a=k(a);b=k(b);return c||a.scheme===b.scheme?a.host.toLowerCase()===b.host.toLowerCase()&&a.port===b.port:!1}function r(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(a&&a.length){b=[];if(h(a[0])){var c=a[0],d=c.indexOf("//");b.push(c.slice(0,d+1));u.test(a[0])&&(b[0]+="/");a[0]=c.slice(d+2)}else"/"===a[0][0]&&b.push("");a=a.reduce(function(a,b){return a.concat(b.split("/"))},[]);for(c=0;c<a.length;c++)d=a[c],".."===d&&0<b.length?b.pop():!d||"."===d&&0!==b.length||b.push(d);return b.join("/")}}
function w(a,b,c){if(!(b&&c&&a&&h(a)))return a;var d=a.indexOf("//"),e=a.indexOf("/",d+2),f=a.indexOf(":",d+2),e=Math.min(0>e?a.length:e,0>f?a.length:f);if(a.slice(d+2,e).toLowerCase()!==b.toLowerCase())return a;b=a.slice(0,d+2);a=a.slice(e);return""+b+c+a}function v(a,b,c){void 0===b&&(b=d.appBaseUrl);if(!h(a))return a;var f=e(a),g=f.toLowerCase();b=e(b).toLowerCase().replace(/\/+$/,"");if((c=c?e(c).toLowerCase().replace(/\/+$/,""):null)&&0!==b.indexOf(c))return a;for(var k=function(a,b,c){c=a.indexOf(b,
c);return-1===c?a.length:c},l=k(g,"/",g.indexOf("//")+2),m=-1;g.slice(0,l+1)===b.slice(0,l)+"/";){m=l+1;if(l===g.length)break;l=k(g,"/",l+1)}if(-1===m||c&&m<c.length)return a;a=f.slice(m);f=b.slice(m-1).replace(/[^/]+/g,"").length;if(0<f)for(g=0;g<f;g++)a="../"+a;else a="./"+a;return a}Object.defineProperty(d,"__esModule",{value:!0});d.normalize=e;d.canUseXhr=function(b){return a.canUseXhr(b)};b=Function("return this")();d.appUrl=new c(b.location);d.appBaseUrl=function(){var a=d.appUrl.path,a=a.substring(0,
a.lastIndexOf(a.split("/")[a.split("/").length-1]));return""+(d.appUrl.scheme+"://"+d.appUrl.host+(null!=d.appUrl.port?":"+d.appUrl.port:""))+a}();var u=/^\s*file:/i,x=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;d.isDataProtocol=g;d.isAbsolute=h;d.urlToObject=l;d.getOrigin=m;d.makeAbsolute=t;d.hasSameOrigin=q;d.join=r;d.removeFile=function(a){var b=0;if(h(a)){var c=a.indexOf("//");-1!==c&&(b=c+2)}c=a.lastIndexOf("/");return c<b?a:a.slice(0,c+1)};d.addProxy=function(b){return a.addProxy(b)};d.makeData=function(a){return a.isBase64?
"data:"+a.mediaType+";base64,"+a.data:"data:"+a.mediaType+","+a.data};var y=/^data:(.*?)(;base64)?,(.*)$/;d.dataComponents=function(a){return(a=a.match(y))?{mediaType:a[1],isBase64:!!a[2],data:a[3]}:null};d.changeDomain=w;d.read=function(a,b){var c=b&&b.url&&b.url.path;a&&c&&(a=t(a,c,{preserveProtocolRelative:!0}));var c=a,e=b&&b.portal;if(e&&!e.isPortal&&e.urlKey&&e.customBaseUrl)var f=e.urlKey+"."+e.customBaseUrl,c=q(d.appUrl,d.appUrl.scheme+"://"+f)?w(c,e.portalHostname,f):w(c,f,e.portalHostname);
return c};d.write=function(a,b){if(!a)return a;!h(a)&&b&&b.blockedRelativeUrls&&b.blockedRelativeUrls.push(a);var c=t(a);if(b){var d=b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.rootPath||b.url&&b.url.path;d&&(c=v(c,d,d),c!==a&&b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.writtenUrls.push(c))}c=(d=b&&b.portal)&&!d.isPortal&&d.urlKey&&d.customBaseUrl?w(c,d.urlKey+"."+d.customBaseUrl,d.portalHostname):c;return c};d.makeRelative=v;d.removeQueryParameters=function(a){a=l(a);Object.keys(a.query||
{});return a.path}})},"esri/layers/vectorTiles/symbols/PictureMarkerSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./MarkerSymbol ./support/urlUtils".split(" "),function(b,d,a,c,e,g){var h={width:12,height:12,angle:0,xoffset:0,yoffset:0},f=b(e,{declaredClass:"esri.symbols.PictureMarkerSymbol",properties:{color:{json:{write:!1}},type:"picture-marker",url:g.urlPropertyDefinition,source:g.sourcePropertyDefinition,height:{json:{read:{source:["height","size"],
reader:function(a,b){return b.size||a}},write:!0},cast:c.toPt},width:{json:{read:{source:["width","size"],reader:function(a,b){return b.size||a}},write:!0},cast:c.toPt},size:{json:{write:!1}}},getDefaults:function(){return d.mixin(this.inherited(arguments),h)},normalizeCtorArgs:function(a,b,d){if(a&&"string"!==typeof a&&null==a.imageData)return a;var e={};a&&(e.url=a);null!=b&&(e.width=c.toPt(b));null!=d&&(e.height=c.toPt(d));return e},clone:function(){var b=new f({angle:this.angle,height:this.height,
url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});b._set("source",a.clone(this.source));return b}});f.defaultProps=h;return f})},"esri/layers/vectorTiles/symbols/MarkerSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(b,d,a){return b(a,{declaredClass:"esri.symbols.MarkerSymbol",properties:{angle:{value:0,json:{read:function(a){return a&&-1*a},write:function(a,b){b.angle=a&&-1*a}}},type:{},xoffset:{value:0,cast:d.toPt,json:{write:!0}},yoffset:{value:0,
cast:d.toPt,json:{write:!0}},size:{value:9,cast:function(a){return"auto"===a?a:d.toPt(a)},json:{write:!0}}}})})},"esri/layers/vectorTiles/symbols/PointSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(b,d,a,c){return function(b){function c(){return null!==b&&b.apply(this,arguments)||this}a(c,b);return c}(c)})},"esri/layers/vectorTiles/symbols/PolygonSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper",
"./Symbol3D"],function(b,d,a,c){return function(b){function c(){return null!==b&&b.apply(this,arguments)||this}a(c,b);return c}(c)})},"esri/layers/vectorTiles/symbols/SimpleFillSymbol":function(){define(["../core/declare","dojo/_base/lang","../core/lang","./FillSymbol","./SimpleLineSymbol"],function(b,d,a,c,e){var g={style:"solid",outline:new e,color:[0,0,0,.25]},h=b(c,{declaredClass:"esri.symbols.SimpleFillSymbol",properties:{color:{},type:"simple-fill",style:{value:"solid",type:String,json:{read:function(b){return a.valueOf(this._styles,
b)||void 0},write:function(a,b){b.style=this._styles[a]}}}},_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical","forward-diagonal":"esriSFSForwardDiagonal","backward-diagonal":"esriSFSBackwardDiagonal",cross:"esriSFSCross","diagonal-cross":"esriSFSDiagonalCross"},getDefaults:function(){return d.mixin(this.inherited(arguments),g)},normalizeCtorArgs:function(a,b,c){if(a&&"string"!==typeof a)return a;var d={};a&&(d.style=a);b&&(d.outline=b);c&&(d.color=
c);return d},clone:function(){return new h({color:a.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}});d.mixin(h,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forward-diagonal",STYLE_BACKWARD_DIAGONAL:"backward-diagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonal-cross"});h.defaultProps=g;return h})},"esri/layers/vectorTiles/symbols/SimpleMarkerSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./MarkerSymbol ./SimpleLineSymbol".split(" "),
function(b,d,a,c,e,g){var h={style:"circle",color:[255,255,255,.25],outline:new g,size:12,angle:0,xoffset:0,yoffset:0},f=b(e,{declaredClass:"esri.symbols.SimpleMarkerSymbol",properties:{color:{json:{write:function(a,b){a&&"x"!==this.style&&"cross"!==this.style&&(b.color=a.toJSON())}}},type:"simple-marker",size:{value:12},style:{type:String,value:"circle",json:{read:function(b){return a.valueOf(this._styles,b)},write:function(a,b){b.style=this._styles[a]}}},path:{type:String,value:null,set:function(a){this.style=
"path";this._set("path",a)},json:{write:!0}},outline:{type:g,json:{write:!0}}},_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},getDefaults:function(){return d.mixin(this.inherited(arguments),h)},normalizeCtorArgs:function(a,b,d,e){if(a&&"string"!==typeof a)return a;var f={};a&&(f.style=a);null!=b&&(f.size=c.toPt(b));d&&(f.outline=d);e&&(f.color=e);return f},clone:function(){return new f({angle:this.angle,color:a.clone(this.color),
outline:this.outline&&this.outline.clone(),size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})},read:function k(a,b){return this.getInherited(k,arguments).call(this,d.mixin({outline:null},a),b)}});d.mixin(f,{STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"});f.defaultProps=h;return f})},"esri/layers/vectorTiles/symbols/TextSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ../Color ./Symbol ./Font".split(" "),
function(b,d,a,c,e,g,h){var f={text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:{},angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},l=b(g,{declaredClass:"esri.symbols.TextSymbol",properties:{backgroundColor:{type:e,json:{write:!0}},borderLineColor:{type:e,json:{write:!0}},borderLineSize:{type:Number,json:{write:!0}},color:{},font:{type:h,json:{write:!0}},horizontalAlignment:{value:"center",json:{write:!0}},kerning:{value:!0,json:{write:!0}},haloColor:{type:e,json:{write:!0}},haloSize:{type:Number,
cast:c.toPt,json:{write:!0}},rightToLeft:{json:{write:!0}},rotated:{value:!1,json:{write:!0}},text:{type:String,json:{write:!0}},type:"text",verticalAlignment:{type:String,json:{write:!0}},xoffset:{value:0,type:Number,cast:c.toPt,json:{write:!0}},yoffset:{value:0,type:Number,cast:c.toPt,json:{write:!0}},angle:{type:Number,value:0,json:{read:function(a){return a&&-1*a},write:function(a,b){b.angle=a&&-1*a}}},width:{json:{write:!0}}},getDefaults:function(){return d.mixin(this.inherited(arguments),f)},
normalizeCtorArgs:function(a,b,c){if(a&&"string"!==typeof a)return a;var d={};a&&(d.text=a);b&&(d.font=b);c&&(d.color=c);return d},clone:function(){return new l({angle:this.angle,backgroundColor:a.clone(this.backgroundColor),borderLineColor:a.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:a.clone(this.color),font:this.font&&this.font.clone(),haloColor:a.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,
rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}});d.mixin(l,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});l.defaultProps=f;return l})},"esri/layers/vectorTiles/symbols/Font":function(){define(["dojo/_base/lang","../core/JSONSupport","../core/lang","../core/screenUtils"],
function(b,d,a,c){var e={style:"normal",weight:"normal",size:9,family:"serif",decoration:"none"},g=d.createSubclass({declaredClass:"esri.symbols.Font",properties:{decoration:{},family:{},size:{cast:c.toPt},style:{},weight:{}},getDefaults:function(){return e},normalizeCtorArgs:function(a,b,d,e){if(a&&"string"!==typeof a)return a;var f={};null!=a&&(f.size=c.toPt(a));null!=b&&(f.style=b);null!=d&&(f.weight=d);e&&(f.family=e);return f},toJSON:function(){return a.fixJson({size:this.size,style:this.style,
decoration:this.decoration,weight:this.weight,family:this.family})},clone:function(){return new g({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}});g.defaultProps=e;b.mixin(g,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});return g})},"esri/layers/vectorTiles/symbols/WebStyleSymbol":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper",
"./Symbol"],function(b,d,a,c){return function(b){function c(){return null!==b&&b.apply(this,arguments)||this}a(c,b);return c}(c)})},"esri/layers/vectorTiles/symbols/callouts/LineCallout3D":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","./Callout3D"],function(b,d,a,c){return function(b){function c(){return null!==b&&b.apply(this,arguments)||this}a(c,b);return c}(c)})},"esri/layers/vectorTiles/symbols/callouts/Callout3D":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper",
"../../core/JSONSupport"],function(b,d,a,c){return function(b){function c(){return null!==b&&b.apply(this,arguments)||this}a(c,b);return c}(c)})},"esri/layers/vectorTiles/symbols/support/symbolConversion":function(){define("require exports dojo/_base/lang ../../Color ../../core/Error ../../core/lang ../FillSymbol3DLayer ../Font ../IconSymbol3DLayer ../LabelSymbol3D ../LineSymbol3D ../LineSymbol3DLayer ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol3D ../TextSymbol ../TextSymbol3DLayer ../WebStyleSymbol".split(" "),
function(b,d,a,c,e,g,h,f,l,k,m,t,q,r,w,v,u,x,y,n,p,z){function A(a){var b=a.color?a.color.clone():new c([255,255,255]),d,e,f;a instanceof q?(a.color&&0===a.color.r&&0===a.color.g&&0===a.color.b&&(b=new c([255,255,255])),d={href:a.url},e=a.width<=a.height?a.height:a.width):(d=a.style,d in B?d=B[d]:(console.log(d+' cannot be mapped to Icon symbol. Fallback to "circle"'),d="circle"),d={primitive:d},e=a.size,a.outline&&a.outline.color&&0<a.outline.width&&(f={size:a.outline.width,color:a.outline.color.clone()}));
return new r(new l({size:e,resource:d,material:{color:b},outline:f}))}Object.defineProperty(d,"__esModule",{value:!0});var B={};B[x.STYLE_CIRCLE]="circle";B[x.STYLE_CROSS]="cross";B[x.STYLE_DIAMOND]="kite";B[x.STYLE_SQUARE]="square";B[x.STYLE_X]="x";d.to3D=function(b,c,d,l){void 0===c&&(c=!1);void 0===d&&(d=!1);void 0===l&&(l=!0);if(!b)return{symbol:null};if(b instanceof y||b instanceof z)l=b.clone();else if(b instanceof u)l=new m(new t({size:b.width||1,material:{color:b.color?b.color.clone():[255,
255,255]}}));else if(b instanceof x)l=A(b);else if(b instanceof q)l=A(b);else if(b instanceof v)l=new h({material:{color:b.color?b.color.clone():[255,255,255]}}),b.outline&&b.outline.color&&(l.outline={size:b.outline.width||0,color:b.outline.color}),l=new w(l);else if(b instanceof n){var B=a.clone(f.defaultProps);b.font&&a.mixin(B,b.font);var C;C=b.haloColor;var D=b.haloSize;C=C&&0<D?{color:g.clone(C),size:D}:null;l=new (l?k:r)(new p({size:B.size,font:{family:B.family,weight:B.weight,style:B.style},
halo:C,material:{color:b.color.clone()},text:b.text}))}else return{error:new e("symbol-conversion:unsupported-2d-symbol","2D symbol of type '"+(b.type||b.declaredClass)+"' is unsupported in 3D",{symbol:b})};c&&(l.id=b.id);if(d&&l.isInstanceOf(y))for(b=0;b<l.symbolLayers.length;++b)l.symbolLayers.getItemAt(b)._ignoreDrivers=!0;return{symbol:l}}})},"esri/layers/vectorTiles/symbols/FillSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(b,
d,a,c){return function(b){function c(){return null!==b&&b.apply(this,arguments)||this}a(c,b);return c}(c)})},"esri/layers/vectorTiles/symbols/Symbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","../core/JSONSupport"],function(b,d,a,c){return function(b){function c(){return null!==b&&b.apply(this,arguments)||this}a(c,b);return c}(c)})},"esri/layers/vectorTiles/symbols/IconSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper",
"./Symbol3DLayer"],function(b,d,a,c){return function(b){function c(){return null!==b&&b.apply(this,arguments)||this}a(c,b);return c}(c)})},"esri/layers/vectorTiles/symbols/LineSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(b,d,a,c){(function(b){function c(){return null!==b&&b.apply(this,arguments)||this}a(c,b);return c})(c);return c})},"esri/layers/vectorTiles/symbols/TextSymbol3DLayer":function(){define(["require","exports",
"../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(b,d,a,c){return function(b){function c(){return null!==b&&b.apply(this,arguments)||this}a(c,b);return c}(c)})},"esri/layers/vectorTiles/symbols/support/typeUtils":function(){define("require exports ../../core/accessorSupport/ensureType ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol ../TextSymbol ../WebStyleSymbol".split(" "),
function(b,d,a,c,e,g,h,f,l,k,m,t,q,r,w,v){Object.defineProperty(d,"__esModule",{value:!0});d.types={base:r,key:"type",typeMap:{"simple-fill":m,"picture-fill":h,"picture-marker":f,"simple-line":t,"simple-marker":q,text:w,"label-3d":c,"line-3d":e,"mesh-3d":g,"point-3d":l,"polygon-3d":k,"web-style":v}};d.rendererTypes={base:r,key:"type",typeMap:{"simple-fill":m,"picture-fill":h,"picture-marker":f,"simple-line":t,"simple-marker":q,text:w,"line-3d":e,"mesh-3d":g,"point-3d":l,"polygon-3d":k,"web-style":v}};
d.labelTypes={base:r,key:"type",typeMap:{text:w,"label-3d":c}};d.types3D={base:r,key:"type",typeMap:{"label-3d":c,"line-3d":e,"mesh-3d":g,"point-3d":l,"polygon-3d":k,"web-style":v}};d.rendererTypes3D={base:r,key:"type",typeMap:{"line-3d":e,"mesh-3d":g,"point-3d":l,"polygon-3d":k,"web-style":v}};d.labelTypes3D={base:r,key:"type",typeMap:{"label-3d":c}};d.ensureType=a.ensureOneOfType(d.types)})},"esri/layers/vectorTiles/renderers/ClassBreaksRenderer":function(){define("../core/declare ../core/lang ../core/kebabDictionary ../core/Error ../core/Logger ../core/accessorSupport/ensureType dojo/_base/lang ../support/arcadeUtils ../symbols/Symbol ../symbols/PolygonSymbol3D ../symbols/support/jsonUtils ../symbols/support/typeUtils ./Renderer ./support/LegendOptions ./support/ClassBreakInfo".split(" "),
function(b,d,a,c,e,g,h,f,l,k,m,t,q,r,w){var v=e.getLogger("esri.renderers.ClassBreaksRenderer");r=r.LegendOptions;w=w.ClassBreakInfo;var u=a({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),x=g.ensureType(w),y=b(q,{declaredClass:"esri.renderers.ClassBreaksRenderer",properties:{backgroundFillSymbol:{types:{base:l,key:"type",typeMap:{"simple-fill":t.types.typeMap["simple-fill"],"picture-fill":t.types.typeMap["picture-fill"],"polygon-3d":t.types.typeMap["polygon-3d"]}},
value:null,json:{origins:{"web-scene":{read:m.read,write:{target:{backgroundFillSymbol:{type:k}},writer:m.writeTarget}}},read:m.read,write:m.writeTarget}},classBreakInfos:{type:[w],json:{read:function(a,b,c){if(Array.isArray(a)){var d=b.minValue;return a.map(function(a){var b=new w;b.read(a,c);null==b.minValue&&(b.minValue=d);null==b.maxValue&&(b.maxValue=b.minValue);d=b.maxValue;return b})}},write:function(a,b,c,d){a=a.map(function(a){return a.write({},d)});this._areClassBreaksConsecutive()&&a.forEach(function(a){delete a.classMinValue});
b[c]=a}}},minValue:{type:Number,readOnly:!0,dependsOn:["classBreakInfos"],get:function(){return this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0},json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}},defaultLabel:{type:String,value:null,json:{write:!0}},defaultSymbol:{types:t.rendererTypes,value:null,json:{origins:{"web-scene":{read:m.read,write:{target:{defaultSymbol:{types:t.rendererTypes3D}},
writer:m.writeTarget}}},read:m.read,write:m.writeTarget}},valueExpression:{type:String,value:null,json:{write:!0}},valueExpressionTitle:{type:String,value:null,json:{write:!0}},compiledFunc:{dependsOn:["valueExpression"],get:function(){return f.createFunction(this.valueExpression)}},legendOptions:{type:r,value:null,json:{write:!0}},field:{value:null,cast:function(a){return null==a?a:"function"===typeof a?a:g.ensureString(a)},json:{type:String,write:function(a,b,d,e){"string"===typeof a?b[d]=a:e&&
e.messages?e.messages.push(new c("property:unsupported","ClassBreaksRenderer.field set to a function cannot be written to JSON")):v.error(".field: cannot write field to JSON since it's not a string value")}}},isMaxInclusive:!0,normalizationField:{type:String,value:null,json:{write:!0}},normalizationTotal:{type:Number,value:null,json:{write:!0}},normalizationType:{type:String,value:null,dependsOn:["normalizationField","normalizationTotal"],get:function(){var a=this._get("normalizationType"),b=!!this.normalizationField,
c=null!=this.normalizationTotal;if(b||c)a=b&&"field"||c&&"percent-of-total",b&&c&&console.warn("warning: both normalizationField and normalizationTotal are set!");else if("field"===a||"percent-of-total"===a)a=null;return a},json:{read:u.fromJSON,write:function(a,b){var c=u.toJSON(a);c&&(b.normalizationType=c)}}},requiredFields:{dependsOn:["field","normalizationField","valueExpression"]},type:{value:"class-breaks",json:{write:function(a,b){b.type="classBreaks"}}}},constructor:function(){this.classBreakInfos=
[]},addClassBreakInfo:function(a,b,c){a="number"===typeof a?new w({minValue:a,maxValue:b,symbol:c}):x(d.clone(a));this.classBreakInfos.push(a);1===this.classBreakInfos.length&&this.notifyChange("minValue")},removeClassBreakInfo:function(a,b){var c,d,e=this.classBreakInfos.length;for(d=0;d<e;d++)if(c=[this.classBreakInfos[d].minValue,this.classBreakInfos[d].maxValue],c[0]==a&&c[1]==b){this.classBreakInfos.splice(d,1);break}},getBreakIndex:function(a,b){var c=this.field,d=a.attributes,e=this.classBreakInfos.length,
g,k=this.isMaxInclusive;if(this.valueExpression)c=f.executeFunction(this.compiledFunc,f.createExecContext(a,f.getViewInfo(b)));else if(h.isFunction(c))c=c(a);else{c=parseFloat(d[c]);g=this.normalizationType;var l;if(g)if(l=parseFloat(this.normalizationTotal),d=parseFloat(d[this.normalizationField]),"log"===g)c=Math.log(c)*Math.LOG10E;else if("percent-of-total"===g&&!isNaN(l))c=c/l*100;else if("field"===g&&!isNaN(d)){if(isNaN(c)||isNaN(d))return-1;c/=d}}if(null!=c&&!isNaN(c)&&"number"===typeof c)for(d=
0;d<e;d++)if(g=[this.classBreakInfos[d].minValue,this.classBreakInfos[d].maxValue],g[0]<=c&&(k?c<=g[1]:c<g[1]))return d;return-1},getClassBreakInfo:function(a,b){var c=this.getBreakIndex(a,b);return-1!==c?this.classBreakInfos[c]:null},getSymbol:function(a,b){var c=this.getBreakIndex(a,b);return-1<c?this.classBreakInfos[c].symbol:this.defaultSymbol},getSymbols:function(){var a=[];this.classBreakInfos.forEach(function(b){b.symbol&&a.push(b.symbol)});this.defaultSymbol&&a.push(this.defaultSymbol);return a},
clone:function(){return new y({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:d.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,
visualVariables:d.clone(this.visualVariables),legendOptions:d.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})},collectRequiredFields:function(a){this.inherited(arguments);[this.field,this.normalizationField].forEach(function(b){b&&(a[b]=!0)});this.valueExpression&&f.extractFieldNames(this.valueExpression).forEach(function(b){a[b]=!0})},_areClassBreaksConsecutive:function(){for(var a=this.classBreakInfos,b=1;b<a.length;b++)if(a[b-1].maxValue!==a[b].minValue)return!1;
return!0}});return y})},"esri/layers/vectorTiles/renderers/support/LegendOptions":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(b,d,a,c,e,g){Object.defineProperty(d,"__esModule",{value:!0});b=function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a.title=null;return a}a(d,b);e=d;d.prototype.clone=function(){return new e({title:this.title})};
c([g.property({type:String,json:{write:!0}})],d.prototype,"title",void 0);return d=e=c([g.subclass("esri.renderers.support.LegendOptions")],d);var e}(g.declared(e));d.LegendOptions=b;d.default=b})},"esri/layers/vectorTiles/renderers/support/ClassBreakInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),
function(b,d,a,c,e,g,h,f){Object.defineProperty(d,"__esModule",{value:!0});b=function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a.description=null;a.label=null;a.minValue=null;a.maxValue=0;a.symbol=null;return a}a(d,b);e=d;d.prototype.clone=function(){return new e({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})};c([g.property({type:String,json:{write:!0}})],d.prototype,"description",void 0);
c([g.property({type:String,json:{write:!0}})],d.prototype,"label",void 0);c([g.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],d.prototype,"minValue",void 0);c([g.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],d.prototype,"maxValue",void 0);c([g.property({types:f.rendererTypes,json:{origins:{"web-scene":{read:h.read,write:{target:{symbol:{types:f.rendererTypes3D}},writer:h.writeTarget}}},read:h.read,write:h.writeTarget}})],
d.prototype,"symbol",void 0);return d=e=c([g.subclass("esri.renderers.support.ClassBreakInfo")],d);var e}(g.declared(e));d.ClassBreakInfo=b;d.default=b})},"esri/layers/vectorTiles/renderers/UniqueValueRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/arrayUtils ../core/Error ../core/lang ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../portal/Portal ./Renderer ./support/diffUtils ./support/LegendOptions ./support/UniqueValueInfo ../support/arcadeUtils ../symbols/PolygonSymbol3D ../symbols/Symbol ../symbols/WebStyleSymbol ../symbols/support/jsonUtils ../symbols/support/styleUtils ../symbols/support/typeUtils".split(" "),
function(b,d,a,c,e,g,h,f,l,k,m,t,q,r,w,v,u,x,y,n,p,z,A,B){var D=l.getLogger("esri.renderers.UniqueValueRenderer"),C=t.ensureType(u.default);return function(b){function d(a){a=b.call(this)||this;a._valueInfoMap={};a._isDefaultSymbolDerived=!1;a.type="unique-value";a.backgroundFillSymbol=null;a.field=null;a.field2=null;a.field3=null;a.valueExpression=null;a.valueExpressionTitle=null;a.legendOptions=null;a.defaultLabel=null;a.fieldDelimiter=null;a.portal=null;a.styleOrigin=null;a.diff={uniqueValueInfos:function(a,
b){if(a||b){if(!a||!b)return{type:"complete",oldValue:a,newValue:b};for(var c=!1,d={type:"collection",added:[],removed:[],changed:[],unchanged:[]},e=function(e){var f=g.find(a,function(a){return a.value===b[e].value});f?w.diff(f,b[e])?d.changed.push({type:"complete",oldValue:f,newValue:b[e]}):d.unchanged.push({oldValue:f,newValue:b[e]}):d.added.push(b[e]);c=!0},f=0;f<b.length;f++)e(f);e=function(e){g.find(b,function(b){return b.value===a[e].value})||(d.removed.push(a[e]),c=!0)};for(f=0;f<a.length;f++)e(f);
return c?d:void 0}}};a._set("uniqueValueInfos",[]);return a}a(d,b);l=d;d.prototype.writeType=function(a,b,c,d){b.type="uniqueValue"};d.prototype.writeBackgroundFillSymbolWebScene=function(a,b,c,d){z.writeTarget(a,b,c,d)};d.prototype.castField=function(a){return null==a?a:"function"===typeof a?a:t.ensureString(a)};d.prototype.writeField=function(a,b,c,d){"string"===typeof a?b[c]=a:d&&d.messages?d.messages.push(new h("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):
D.error(".field: cannot write field to JSON since it's not a string value")};Object.defineProperty(d.prototype,"compiledFunc",{get:function(){return x.createFunction(this.valueExpression)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"defaultSymbol",{set:function(a){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",a)},enumerable:!0,configurable:!0});d.prototype.readDefaultSymbol=function(a,b,c){return z.read(a,b,c)};d.prototype.writeDefaultSymbolWebScene=function(a,b,
c,d){this._isDefaultSymbolDerived||z.writeTarget(a,b,c,d)};d.prototype.writeDefaultSymbol=function(a,b,c,d){this._isDefaultSymbolDerived||z.writeTarget(a,b,c,d)};d.prototype.readPortal=function(a,b,c){return c.portal||q.getDefault()};d.prototype.readStyleOrigin=function(a,b,c){if(b.styleName)return Object.freeze({styleName:b.styleName});if(b.styleUrl)return a=k.read(b.styleUrl,c),Object.freeze({styleUrl:a})};d.prototype.writeStyleOrigin=function(a,b,c,d){a.styleName?b.styleName=a.styleName:a.styleUrl&&
(b.styleUrl=k.write(a.styleUrl,d),k.isAbsolute(b.styleUrl)&&(b.styleUrl=k.normalize(b.styleUrl)))};Object.defineProperty(d.prototype,"uniqueValueInfos",{set:function(a){this.styleOrigin?D.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",a),this._updateValueInfoMap())},enumerable:!0,configurable:!0});d.prototype.addUniqueValueInfo=function(a,b){if(this.styleOrigin)D.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");
else{var c;c="object"===typeof a?C(a):new u.default({value:a,symbol:b});this.uniqueValueInfos.push(c);this._valueInfoMap[c.value]=c}};d.prototype.removeUniqueValueInfo=function(a){if(this.styleOrigin)D.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var b=0;b<this.uniqueValueInfos.length;b++)if(this.uniqueValueInfos[b].value===a+""){delete this._valueInfoMap[a];this.uniqueValueInfos.splice(b,1);break}};d.prototype.getUniqueValueInfo=
function(a,b){var c=this.field,d=a.attributes,e;if(this.valueExpression)e=x.executeFunction(this.compiledFunc,x.createExecContext(a,x.getViewInfo(b)));else if("function"!==typeof c&&this.field2){e=this.field2;var f=this.field3,h=[];c&&h.push(d[c]);e&&h.push(d[e]);f&&h.push(d[f]);e=h.join(this.fieldDelimiter||"")}else"function"===typeof c?e=c(a):c&&(e=d[c]);return this._valueInfoMap[e+""]};d.prototype.getSymbol=function(a,b){var c=this.getUniqueValueInfo(a,b);return c&&c.symbol||this.defaultSymbol};
d.prototype.getSymbols=function(){for(var a=[],b=0,c=this.uniqueValueInfos;b<c.length;b++){var d=c[b];d.symbol&&a.push(d.symbol)}this.defaultSymbol&&a.push(this.defaultSymbol);return a};d.prototype.clone=function(){var a=new l({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:f.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:f.clone(this.visualVariables),
legendOptions:f.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:f.clone(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(a._isDefaultSymbolDerived=!0);a._set("portal",this.portal);var b=f.clone(this.uniqueValueInfos);this.styleOrigin&&(a._set("styleOrigin",Object.freeze(f.clone(this.styleOrigin))),Object.freeze(b));a._set("uniqueValueInfos",b);a._updateValueInfoMap();return a};d.prototype.collectRequiredFields=function(a){this.inherited(arguments);
[this.field,this.field2,this.field3].forEach(function(b){b&&"string"===typeof b&&(a[b]=!0)});this.valueExpression&&x.extractFieldNames(this.valueExpression).forEach(function(b){a[b]=!0})};d.prototype.populateFromStyle=function(){var a=this;return A.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(b){var c=[];a._valueInfoMap={};b&&b.data&&Array.isArray(b.data.items)&&b.data.items.forEach(function(d){var e=new p({styleUrl:b.styleUrl,styleName:b.styleName,portal:a.portal,name:d.name});
a.defaultSymbol||d.name!==b.data.defaultItem||(a.defaultSymbol=e,a._isDefaultSymbolDerived=!0);e=new u.default({value:d.name,symbol:e});c.push(e);a._valueInfoMap[d.name]=e});a._set("uniqueValueInfos",Object.freeze(c));!a.defaultSymbol&&a.uniqueValueInfos.length&&(a.defaultSymbol=a.uniqueValueInfos[0].symbol,a._isDefaultSymbolDerived=!0);return a})};d.prototype._updateValueInfoMap=function(){var a=this;this._valueInfoMap={};this.uniqueValueInfos.forEach(function(b){return a._valueInfoMap[b.value+""]=
b})};d.fromPortalStyle=function(a,b){var c=new l(b&&b.properties);c._set("styleOrigin",Object.freeze({styleName:a}));c._set("portal",b&&b.portal||q.getDefault());c=c.populateFromStyle();c.catch(function(b){D.error("#fromPortalStyle('"+a+"'[, ...])","Failed to create unique value renderer from style name",b)});return c};d.fromStyleUrl=function(a,b){var c=new l(b&&b.properties);c._set("styleOrigin",Object.freeze({styleUrl:a}));c=c.populateFromStyle();c.catch(function(b){D.error("#fromStyleUrl('"+a+
"'[, ...])","Failed to create unique value renderer from style URL",b)});return c};c([m.property()],d.prototype,"type",void 0);c([m.writer("type")],d.prototype,"writeType",null);c([m.property({types:{base:n,key:"type",typeMap:{"simple-fill":B.rendererTypes.typeMap["simple-fill"],"picture-fill":B.rendererTypes.typeMap["picture-fill"],"polygon-3d":B.rendererTypes.typeMap["polygon-3d"]}},json:{read:z.read,write:z.writeTarget}})],d.prototype,"backgroundFillSymbol",void 0);c([m.writer("web-scene","backgroundFillSymbol",
{backgroundFillSymbol:{type:y}})],d.prototype,"writeBackgroundFillSymbolWebScene",null);c([m.property({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],d.prototype,"field",void 0);c([m.cast("field")],d.prototype,"castField",null);c([m.writer("field")],d.prototype,"writeField",null);c([m.property({type:String,json:{write:!0}})],d.prototype,"field2",void 0);c([m.property({type:String,json:{write:!0}})],d.prototype,"field3",void 0);c([m.property({type:String,json:{write:!0}})],d.prototype,
"valueExpression",void 0);c([m.property({type:String,json:{write:!0}})],d.prototype,"valueExpressionTitle",void 0);c([m.property({dependsOn:["valueExpression"]})],d.prototype,"compiledFunc",null);c([m.property({type:v.default,json:{write:!0}})],d.prototype,"legendOptions",void 0);c([m.property({type:String,json:{write:!0}})],d.prototype,"defaultLabel",void 0);c([m.property({types:B.rendererTypes})],d.prototype,"defaultSymbol",null);c([m.reader("defaultSymbol")],d.prototype,"readDefaultSymbol",null);
c([m.writer("web-scene","defaultSymbol",{defaultSymbol:{types:B.rendererTypes3D}})],d.prototype,"writeDefaultSymbolWebScene",null);c([m.writer("defaultSymbol")],d.prototype,"writeDefaultSymbol",null);c([m.property({type:String,json:{write:!0}})],d.prototype,"fieldDelimiter",void 0);c([m.property({type:q,readOnly:!0})],d.prototype,"portal",void 0);c([m.reader("portal",["styleName"])],d.prototype,"readPortal",null);c([m.property({readOnly:!0})],d.prototype,"styleOrigin",void 0);c([m.reader("styleOrigin",
["styleName","styleUrl"])],d.prototype,"readStyleOrigin",null);c([m.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],d.prototype,"writeStyleOrigin",null);c([m.property({type:[u.default],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],d.prototype,"uniqueValueInfos",null);c([m.property({dependsOn:["field","field2","field3","valueExpression"],readOnly:!0})],d.prototype,"requiredFields",void 0);c([e(1,m.cast(B.ensureType))],d.prototype,
"addUniqueValueInfo",null);return d=l=c([m.subclass("esri.renderers.UniqueValueRenderer")],d);var l}(m.declared(r))})},"esri/layers/vectorTiles/core/tsSupport/paramHelper":function(){define([],function(){return function(b,d){return function(a,c){d(a,c,b)}}})},"esri/layers/vectorTiles/core/arrayUtils":function(){define([],function(){function b(a,b){return-1===a.indexOf(b)}function d(a,b,d){return!a.some(b.bind(null,d))}var a={findIndex:function(a,b,d){for(var c=a.length,e,g=0;g<c;g++)if(e=a[g],b.call(d,
e,g,a))return g;return-1},find:function(a,b,d){for(var c=a.length,e,g=0;g<c;g++)if(e=a[g],b.call(d,e,g,a))return e},equals:function(a,b,d){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;if(d)for(var c=0;c<a.length;c++){if(!d(a[c],b[c]))return!1}else for(d=0;d<a.length;d++)if(a[d]!==b[d])return!1;return!0},difference:function(a,e,g){var c;g?(c=e.filter(d.bind(null,a,g)),a=a.filter(d.bind(null,e,g))):(c=e.filter(b.bind(null,a)),a=a.filter(b.bind(null,e)));return{added:c,removed:a}},intersect:function(b,
d,g){return b&&d?g?b.filter(function(b){return-1<a.findIndex(d,function(a){return g(b,a)})}):b.filter(function(a){return-1<d.indexOf(a)}):[]},range:function(a,b){null==b&&(b=a,a=0);for(var c=Array(b-a),d=a;d<b;d++)c[d-a]=d;return c},constant:function(a,b){for(var c=Array(a),d=0;d<a;d++)c[d]=b;return c},binaryIndexOf:function(a,b,d){for(var c=a.length,e=0,g=c-1;e<g;){var k=e+Math.floor((g-e)/2);b>a[k]?e=k+1:g=k}g=a[e];return d?b>=a[c-1]?-1:g===b?e:e-1:g===b?e:-1}};return a})},"esri/layers/vectorTiles/portal/Portal":function(){define(["require",
"exports"],function(b,d){return function(){function a(){}a.getDefault=function(){return null};return a}()})},"esri/layers/vectorTiles/renderers/support/UniqueValueInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),function(b,d,a,c,e,g,h,f){Object.defineProperty(d,"__esModule",{value:!0});b=function(b){function d(){var a=
null!==b&&b.apply(this,arguments)||this;a.description=null;a.label=null;a.symbol=null;a.value=null;return a}a(d,b);e=d;d.prototype.clone=function(){return new e({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})};c([g.property({type:String,json:{write:!0}})],d.prototype,"description",void 0);c([g.property({type:String,json:{write:!0}})],d.prototype,"label",void 0);c([g.property({types:f.rendererTypes,json:{origins:{"web-scene":{read:h.read,
write:{target:{symbol:{types:f.rendererTypes3D}},writer:h.writeTarget}}},read:h.read,write:h.writeTarget}})],d.prototype,"symbol",void 0);c([g.property({type:String,json:{write:!0}})],d.prototype,"value",void 0);return d=e=c([g.subclass("esri.renderers.support.UniqueValueInfo")],d);var e}(g.declared(e));d.UniqueValueInfo=b;d.default=b})},"esri/layers/vectorTiles/symbols/support/styleUtils":function(){define(["require","exports","../../core/promiseUtils","../../core/Error"],function(b,d,a,c){Object.defineProperty(d,
"__esModule",{value:!0});d.fetchStyle=function(b,d){return a.reject(new c("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}})},"esri/layers/OnDemandDrillMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/has ../kernel ../promiseList ./RenderMode ../geometry/Extent ../geometry/jsonUtils ../tasks/query ../tasks/FeatureSet ./vectorTiles/core/promiseUtils ./vectorTiles/core/SetPool ./vectorTiles/layers/support/TileInfo ./vectorTiles/views/2d/tiling/TileInfoView ./vectorTiles/views/2d/tiling/TileQueue ./vectorTiles/views/2d/tiling/TileStrategy ./vectorTiles/views/2d/tiling/TileKey ./vectorTiles/geometry/SpatialReference".split(" "),
function(b,d,a,c,e,g,h,f,l,k,m,t,q,r,w,v,u,x,y){x=c("esri-featurelayer-webgl");var n=c("esri-mobile");b=b([h],{declaredClass:"esri.layers._OnDemandDrillMode",featureLayer:null,graphics:null,maxDrillLevel:x&&null!=x.maxDrillLevel?x.maxDrillLevel:n?1:2,maxRecordCountFactor:x&&null!=x.maxRecordCountFactor?x.maxRecordCountFactor:n?1:3,_graphicsVal:null,_reEvalGraphics:!1,_featureMap:null,_defaultTileSize:512,_quantizationFactor:1,_tileInfo:null,_tileInfoView:null,_tileFetchQueue:null,_tileStrategy:null,
_tileRequests:null,_wglRenderer:null,_wglView:null,_wglContainer:null,constructor:function(a){this._isTileFulfilled=this._isTileFulfilled.bind(this);this._graphicsVal=[];this._featureMap={};this.featureLayer=a},initialize:function(a){this.inherited(arguments);var b=new y(a.spatialReference.toJson());this._tileInfo=r.create({spatialReference:b,size:this._defaultTileSize});this._tileInfoView=new w(this._tileInfo);this._tileFetchQueue=new v({tileInfoView:this._tileInfoView,process:this._getFeatureSet.bind(this)});
this._tileStrategy=new u({cachePolicy:"purge",acquireTile:this._acquireTile.bind(this),releaseTile:this._releaseTile.bind(this),tileInfoView:this._tileInfoView});this._tileRequests=new Map},startup:function(){if(!this._started||this._isSuspendedAtStartup){this.inherited(arguments);var a=this.featureLayer;this._wglRenderer=a._div;this._wglView=this._wglRenderer._wglView;this._wglContainer=this._wglRenderer._wglContainer;this._wglView.initialize(this._tileInfoView);this._isSuspendedAtStartup=a.suspended;
this.start()}},propertyChangeHandler:function(a){this._init&&(2>a?this.start():console.log("FeatureLayer: layer in on-demand mode does not support time definitions. Layer id \x3d "+this.featureLayer.id+", Layer URL \x3d "+this.featureLayer.url))},destroy:function(){this._tileFetchQueue.clear();this._tileStrategy.destroy();this._tileRequests.clear();this.inherited(arguments)},update:function(a){this._tileFetchQueue.pause();this._tileFetchQueue.state=a.state;this._tileStrategy.update(a);this._tileFetchQueue.resume();
this._evalUpdateStatus()},suspend:function(){this._init&&this.stop()},resume:function(){this._init&&this.start()},refresh:function(){this.start()},hasAllFeatures:function(){var a=!1;this._tileRequests.forEach(function(b){b.hasPartialFeatures&&(a=!0)});return!a},hasUpdateError:function(){var a=!1;this._tileRequests.forEach(function(b){b.hasUpdateError&&(a=!0)});return a},start:function(){var a=this.featureLayer;!a.suspended&&a.isQueryable()&&(this._clearIIf(),this._tileFetchQueue.pause(),this._tileFetchQueue.clear(),
this._tileStrategy.clear(),this._wglRenderer.start())},stop:function(){this._wglRenderer.stop()},_evalUpdateStatus:function(){this._getCurrentTiles().every(this._isTileFulfilled)?this.featureLayer._fireUpdateEnd():this.featureLayer._fireUpdateStart()},_getCurrentTiles:function(){var a=[];this._tileStrategy.tileIndex.forEach(function(b,c,d){a.push(c)});return a},_isTileFulfilled:function(a){a=this._tileRequests.get(a);return!(!a||!a.isFulfilled)},_acquireTile:function(a){this.featureLayer._fireUpdateStart();
var b=this._wglView.acquireTile(a);a=this._tileFetchQueue.push(b.key).then(function(a){return this._wglRenderer._symbolProcessor.getTileData(b.key,a.featureSet).then(function(b){return{tileData:b.data,featureSet:a.featureSet,errors:a.errors}})}.bind(this)).then(function(a){b.setData(a.tileData,this._wglRenderer._hasVV,!1);this._addTile(b,a)}.bind(this)).otherwise(function(a){this._tileError(b);return t.reject(a)}.bind(this));this._tileRequests.set(b.key.id,{request:a,isFulfilled:!1,hasUpdateError:null,
hasPartialFeatures:null,featureSet:null,graphics:[]});return b},_releaseTile:function(a){this.featureLayer._fireUpdateStart();this._tileRequests.get(a.key.id)&&(this._removeTile(a),this._wglRenderer._scheduleUpdate())},_addTile:function(a,b){this._reEvalGraphics=!0;this._wglView.addChild(a);var c=this._createGraphics(b.featureSet);this._registerGraphics(c);var d=this._tileRequests.get(a.key.id);d&&(d.isFulfilled=!0,d.hasUpdateError=!!b.errors.length,d.hasPartialFeatures=d.hasUpdateError,d.featureSet=
b.featureSet,d.graphics=c)},_tileError:function(a){if(a=this._tileRequests.get(a.key.id))a.isFulfilled=!0,a.hasUpdateError=!0,a.hasPartialFeatures=!0,a.graphics=[];this._wglRenderer._scheduleUpdate()},_removeTile:function(a){var b=a.key.id,c=this._tileRequests.get(b);c.request.isFulfilled()||c.request.cancel();this._tileRequests["delete"](b);this._wglRenderer._cancelRedraw(b);this._reEvalGraphics=!0;this._wglView.releaseTile(a);this._unregisterGraphics(c.graphics)},_getFeatureSet:function(a){var b=
{hashes:new Set,drill:[],featureSet:{features:[],geometryType:this.featureLayer.geometryType,spatialReference:this.map.spatialReference.toJson(),transform:null},errors:[]},c=this.featureLayer._task,d=this._getResolutionParams(a),e=this._tileInfoView.getTileBounds([0,0,0,0],a),e=this._expandTileBounds(e,d),f=q.acquire();return this._drillQuery(b,f,c,e,d,null,a).then(function(a){q.release(f);this._calculateCentroid(a);return a}.bind(this)).otherwise(function(a){q.release(f);throw a;})},_getResolutionParams:function(a){this._tileInfo.updateTileInfo(a);
var b=this._tileInfo.lodAt(a.level);return{mode:"view",originPosition:"upperLeft",tolerance:this._quantizationFactor*b.resolution,extent:new f(a.extent[0],a.extent[1],a.extent[2],a.extent[3],this.map.spatialReference)}},_expandTileBounds:function(a,b){var c=this.featureLayer.geometryType,c=("esriGeometryPoint"===c||"esriGeometryMultipoint"===c||this._wglRenderer._returnCentroid?20:0)*b.tolerance;a[0]-=c;a[1]-=c;a[2]+=c;a[3]+=c;return a},_calculateCentroid:function(a){var b;if("esriGeometryPolygon"===
a.featureSet.geometryType&&this._wglRenderer._returnCentroid){b=0;var c=a.featureSet.spatialReference,d=a.featureSet.transform,e={geometry:{x:null,y:null}},f=[e];a.featureSet.features.forEach(function(a){if(!a.centroid){var h=a.geometry;h&&(h=m.createPolygon(h,c,d),h=h.getCentroid())&&(e.geometry.x=h.x,e.geometry.y=h.y,l.quantize(f,"esriGeometryPoint",d),a.centroid={x:e.geometry.x,y:e.geometry.y},b++)}})}return b},_drillQuery:function(a,b,c,d,e,f,h,k){k=null!=k?k:0;a.drill.push(d);return this._query(c,
d,e,f,h,k).then(function(l){this._appendFeatures(a.featureSet.features,b,l.features);l.transform&&(a.featureSet.transform=l.transform);if(l.exceededTransferLimit){if(k<this.maxDrillLevel){k++;l=(d[2]-d[0])/2;var m=(d[3]-d[1])/2,n=[d[0]+l,d[1]+m,d[2],d[3]],p=[d[0],d[1],d[2]-l,d[3]-m],q=[d[0]+l,d[1],d[2],d[3]-m];return g([this._drillQuery(a,b,c,[d[0],d[1]+m,d[2]-l,d[3]],e,f,h,k),this._drillQuery(a,b,c,n,e,f,h,k),this._drillQuery(a,b,c,p,e,f,h,k),this._drillQuery(a,b,c,q,e,f,h,k)]).then(function(){return a})}a.errors.push(Error("Max drill level reached! tileId: "+
h.id+", level: "+k))}return a}.bind(this)).otherwise(function(b){if(0<k)a.errors.push(b);else throw b;}.bind(this))},_appendFeatures:function(a,b,c){var d=a.length,e=c?c.length:0;a.length=d+e;var f=0,h,g,k,l=this.featureLayer.objectIdField;for(h=0;h<e;h++)g=c[h],k=g.attributes[l],b.has(k)||(a[d+f]=g,b.add(k),f++);a.length-=e-f},_query:function(a,b,c,d,e,h){e=this.featureLayer;d=new k;d.geometry=new f(b[0],b[1],b[2],b[3],this.map.spatialReference);d.outFields=e.getOutFields();d.where=e.getDefinitionExpression();
d.returnGeometry=!0;d.returnCentroid=this._wglRenderer._returnCentroid;d.timeExtent=e._getOffsettedTE(e._mapTimeExtent);e._ts&&(d._ts=Date.now());d.orderByFields=e.supportsAdvancedQueries?e.getOrderByFields():null;d.multipatchOption=e.multipatchOption;d.maxAllowableOffset="esriGeometryPolyline"===e.geometryType?c.tolerance:null;d.quantizationParameters=c;(b=e.advancedQueryCapabilities)&&b.supportsQueryWithResultType&&(d.resultType="tile");d.returnExceededLimitFeatures=h===this.maxDrillLevel;d.maxRecordCountFactor=
this.maxRecordCountFactor;return this._wrapInNewDeferred(a.rawExecute(d))},_wrapInNewDeferred:function(b){var c=new a(function(){b.isFulfilled()||b.cancel()});b.then(function(a){c.resolve(a)}).otherwise(function(a){c.reject(a)});return c.promise},_collectGraphics:function(){var a=this._featureMap,b=[],c;for(c in a)b.push(a[c]);return b},_createGraphics:function(a){return m.createGraphics(a)},_registerGraphics:function(a){var b=this.featureLayer.objectIdField;a.forEach(function(a){var c=a.attributes&&
a.attributes[b];this._registerFeature(c,a);this._incRefCount(c)}.bind(this))},_unregisterGraphics:function(a){var b=this.featureLayer.objectIdField;a.forEach(function(a){a=a.attributes&&a.attributes[b];this._decRefCount(a);this._unregisterFeature(a)}.bind(this))}});Object.defineProperty(b.prototype,"graphics",{get:function(){this._reEvalGraphics&&(this._reEvalGraphics=!1,this._graphicsVal=this._collectGraphics());return this._graphicsVal}});c("extend-esri")&&d.setObject("layers._OnDemandDrillMode",
b,e);return b})},"esri/layers/vectorTiles/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/_base/lang ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),function(b,d,a,c,e,g,h,f,l,
k,m,t,q,r){var w=f({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});return function(b){function d(a){a=b.call(this)||this;a.dpi=96;a.format=null;a.origin=null;a.minScale=0;a.maxScale=0;a.size=null;a.spatialReference=null;return a}a(d,b);f=d;d.create=function(a){void 0===a&&(a={size:256,spatialReference:g.SpatialReference.WebMercator});var b=a.resolutionFactor||
1,c=a.scales,d=a.size||256;a=a.spatialReference||g.SpatialReference.WebMercator;var e=t.getInfo(a),e=e?new g.Point(e.origin[0],e.origin[1],a):new g.Point(0,0,a),h=1/(39.37*m.getMetersPerUnitForSR(a)*96),k=[];if(c)for(var l=0;l<c.length;l++){var q=c[l],r=q*h;k.push({level:l,scale:q,resolution:r})}else for(q=t.isGeographic(a)?512/d*1.47748799285417E8:256/d*5.91657527591555E8,c=Math.ceil(24/b),k.push({level:0,scale:q,resolution:q*h}),l=1;l<c;l++)q/=Math.pow(2,b),r=q*h,k.push({level:l,scale:q,resolution:r});
return new f({dpi:96,lods:k,origin:e,size:d,spatialReference:a})};Object.defineProperty(d.prototype,"isWrappable",{get:function(){var a=this.spatialReference,b=this.origin;if(a&&b){var c=t.getInfo(a);return a.isWrappable&&Math.abs(c.origin[0]-b.x)<=c.dx}return!1},enumerable:!0,configurable:!0});d.prototype.readOrigin=function(a,b){return g.Point.fromJSON(e.mixin({spatialReference:b.spatialReference},a))};Object.defineProperty(d.prototype,"lods",{set:function(a){var b=this,c=0,d=0,e=[];this._levelToLOD=
{};a&&(c=-Infinity,d=Infinity,a.forEach(function(a){e.push(a.scale);c=a.scale>c?a.scale:c;d=a.scale<d?a.scale:d;b._levelToLOD[a.level]=a}));this._set("scales",e);this._set("minScale",c);this._set("maxScale",d);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});d.prototype.readSize=function(a,b){return[b.cols,b.rows]};d.prototype.writeSize=function(a,b){b.cols=a[0];b.rows=a[0]};d.prototype.zoomToScale=function(a){var b=this.scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-
1];var c=Math.round(a);return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])};d.prototype.scaleToZoom=function(a){for(var b=this.scales,c=b.length-1,d=0;d<c;d++){var e=b[d],f=b[d+1];if(e<=a)break;if(f===a)return d+1;if(e>a&&f<a)return d+1-(a-f)/(e-f)}return d};d.prototype.snapScale=function(a,b){void 0===b&&(b=.95);var c=this.scaleToZoom(a);return c%Math.floor(c)>=b?this.zoomToScale(Math.ceil(c)):this.zoomToScale(Math.floor(c))};d.prototype.tileAt=function(a,b,c,d){var e=this.lodAt(a);if(!e)return null;var f;
if("number"===typeof b)f=b,b=c;else{if(b.spatialReference.equals(this.spatialReference))f=b.x,b=b.y;else{d=q.project(b,this.spatialReference);if(!d)return null;f=d.x;b=d.y}d=c}c=e.resolution*this.size[0];e=e.resolution*this.size[1];d||(d={id:null,level:0,row:0,col:0,extent:[0,0,0,0]});d.level=a;d.row=Math.floor((this.origin.y-b)/e+.001);d.col=Math.floor((f-this.origin.x)/c+.001);this.updateTileInfo(d);return d};d.prototype.updateTileInfo=function(a){var b=this.lodAt(a.level),c=b.resolution*this.size[0],
b=b.resolution*this.size[1];a.id=a.level+"/"+a.row+"/"+a.col;a.extent||(a.extent=[0,0,0,0]);a.extent[0]=this.origin.x+a.col*c;a.extent[1]=this.origin.y-(a.row+1)*b;a.extent[2]=a.extent[0]+c;a.extent[3]=a.extent[1]+b};d.prototype.upsampleTile=function(a){var b=this._upsampleLevels[a.level];if(!b||-1===b.parentLevel)return!1;a.level=b.parentLevel;a.row=Math.floor(a.row/b.factor+.001);a.col=Math.floor(a.col/b.factor+.001);this.updateTileInfo(a);return!0};d.prototype.getTileBounds=function(a,b){var c=
this.lodAt(b.level).resolution,d=c*this.size[0],c=c*this.size[1];a[0]=this.origin.x+b.col*d;a[1]=this.origin.y-(b.row+1)*c;a[2]=a[0]+d;a[3]=a[1]+c;return a};d.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};d.prototype.clone=function(){return f.fromJSON(this.write({}))};d.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,c=0;c<a.length;c++){var d=a[c];this._upsampleLevels[d.level]={parentLevel:b?b.level:-1,factor:b?
b.resolution/d.resolution:0};b=d}};c([l.property({type:Number,json:{write:!0}})],d.prototype,"compressionQuality",void 0);c([l.property({type:Number,json:{write:!0}})],d.prototype,"dpi",void 0);c([l.property({type:String,json:{read:w.read,write:w.write}})],d.prototype,"format",void 0);c([l.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],d.prototype,"isWrappable",null);c([l.property({type:g.Point,json:{write:!0}})],d.prototype,"origin",void 0);c([l.reader("origin")],d.prototype,"readOrigin",
null);c([l.property({type:[r],value:null,json:{write:!0}})],d.prototype,"lods",null);c([l.property({readOnly:!0})],d.prototype,"minScale",void 0);c([l.property({readOnly:!0})],d.prototype,"maxScale",void 0);c([l.property({readOnly:!0})],d.prototype,"scales",void 0);c([l.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?[a,a]:[256,256]}})],d.prototype,"size",void 0);c([l.reader("size",["rows","cols"])],d.prototype,"readSize",null);c([l.writer("size",{cols:{type:k.Integer},rows:{type:k.Integer}})],
d.prototype,"writeSize",null);c([l.property({type:g.SpatialReference,json:{write:!0}})],d.prototype,"spatialReference",void 0);return d=f=c([l.subclass("esri.layers.support.TileInfo")],d);var f}(l.declared(h))})},"esri/layers/vectorTiles/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(b,d,a,c,e,
g,h){return function(b){function d(a){a=b.call(this,a)||this;a.level=0;a.levelValue=null;a.resolution=0;a.scale=0;return a}a(d,b);e=d;d.prototype.clone=function(){return new e({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};c([g.property({type:h.Integer,json:{write:!0}})],d.prototype,"level",void 0);c([g.property({type:String,json:{write:!0}})],d.prototype,"levelValue",void 0);c([g.property({type:Number,json:{write:!0}})],d.prototype,"resolution",void 0);
c([g.property({type:Number,json:{write:!0}})],d.prototype,"scale",void 0);return d=e=c([g.subclass("esri.layers.support.LOD")],d);var e}(g.declared(e))})},"esri/layers/vectorTiles/views/2d/tiling/TileInfoView":function(){define("require exports ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(b,d,a,c,e,g){var h=function(){function a(a,b,c,d,e,f,h,g){this.x=a;this.ymin=b;this.ymax=c;this.invM=d;this.leftAdjust=e;this.rightAdjust=f;this.leftBound=h;this.rightBound=g}a.create=function(b,
c){b[1]>c[1]&&(d=[c,b],b=d[0],c=d[1]);var d=b[0],e=b[1],f=c[0],h=c[1],g=f-d,k=h-e,k=0!==k?g/k:0,l=(Math.ceil(e)-e)*k,m=(Math.floor(e)-e)*k;return new a(d,Math.floor(e),Math.ceil(h),k,0>g?l:m,0>g?m:l,0>g?f:d,0>g?d:f);var d};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),f=[[0,0],[0,0],[0,0],[0,0]];return function(){function b(b,
c){var d=this;this.tileInfo=b;this.fullExtent=c;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var e=b.lods.slice();e.sort(function(a,b){return b.scale-a.scale});var f=this._lodInfos=e.map(function(d){return a.create(b,d,c)});e.forEach(function(a,b){d._infoByLevel[a.level]=f[b];d._infoByScale[a.scale]=f[b];d.scales[b]=a.scale},this);this._wrap=b.isWrappable}b.prototype.getTileBounds=function(a,b){var c=this._infoByLevel[b.level];return c?c.getTileBounds(a,b):a};b.prototype.getTileCoords=
function(a,b){var c=this._infoByLevel[b.level];return c?c.getTileCoords(a,b):a};b.prototype.getTileCoverage=function(a,b){void 0===b&&(b=192);var d=this.getClosestInfoForScale(a.scale),e=c.pool.acquire(d),k=this._wrap,l;l=Infinity;var m=-Infinity,u,x,y=e.spans;f[0][0]=f[0][1]=f[1][1]=f[3][0]=-b;f[1][0]=f[2][0]=a.size[0]+b;f[2][1]=f[3][1]=a.size[1]+b;for(var n=0;n<f.length;n++){var p=f[n];a.toMap(p,p);p[0]=d.getColumnForX(p[0]);p[1]=d.getRowForY(p[1])}for(var n=[],z=3,p=0;4>p;p++){if(f[p][1]!==f[z][1]){var A=
h.create(f[p],f[z]);l=Math.min(A.ymin,l);m=Math.max(A.ymax,m);void 0===n[A.ymin]&&(n[A.ymin]=[]);n[A.ymin].push(A)}z=p}if(null==l||null==m||100<m-l)return null;for(z=[];l<m;){null!=n[l]&&(z=z.concat(n[l]));u=Infinity;x=-Infinity;for(p=z.length-1;0<=p;p--)A=z[p],u=Math.min(u,A.getLeftCol()),x=Math.max(x,A.getRightCol());u=Math.floor(u);x=Math.floor(x);if(l>=d.first[1]&&l<=d.last[1])if(k)if(d.size[0]<d.worldSize[0])for(A=Math.floor(x/d.worldSize[0]),p=Math.floor(u/d.worldSize[0]);p<=A;p++)y.push(new g(l,
Math.max(d.getFirstColumnForWorld(p),u),Math.min(d.getLastColumnForWorld(p),x)));else y.push(new g(l,u,x));else u>d.last[0]||x<d.first[0]||(u=Math.max(u,d.first[0]),x=Math.min(x,d.last[0]),y.push(new g(l,u,x)));l+=1;for(p=z.length-1;0<=p;p--)A=z[p],A.ymax>=l?A.incrRow():z.splice(p,1)}return e};b.prototype.getTileIdAtParent=function(a,b){var c=e.pool.acquire(b),d=this._infoByLevel[c.level];if(a.resolution<d.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+a.resolution+
" is not a parent resolution of "+d.resolution);return a.resolution===d.resolution?c.id:e.getId(a.level,Math.floor(c.row*d.resolution/a.resolution+.01),Math.floor(c.col*d.resolution/a.resolution+.01),c.world)};b.prototype.getTileParentId=function(a){a=e.pool.acquire(a);var b=this._lodInfos.indexOf(this._infoByLevel[a.level])-1;if(0>b)return e.pool.release(a),null;b=this.getTileIdAtParent(this._lodInfos[b],a);e.pool.release(a);return b};b.prototype.getTileResolution=function(a){return(a=this._infoByLevel[a.level])?
a.resolution:-1};b.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?a.scale:-1};b.prototype.intersects=function(a,b){var c=e.pool.acquire(b),d=this._infoByLevel[c.level],f=a.lodInfo;if(f.resolution>d.resolution){var h=e.pool.acquire(this.getTileIdAtParent(f,c)),g=f.denormalizeCol(h.col,h.world),k=a.spans.some(function(a){return a.row===h.row&&a.colFrom<=g&&a.colTo>=g});e.pool.release(c);e.pool.release(h);return k}if(f.resolution<d.resolution){var l=a.spans.reduce(function(a,
b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]),k=l[0],m=l[1],n=l[2],l=l[3],p=d.denormalizeCol(c.col,c.world),z=f.getColumnForX(d.getXForColumn(p)),A=f.getRowForY(d.getYForRow(c.row)),p=f.getColumnForX(d.getXForColumn(p+1))-1,d=f.getRowForY(d.getYForRow(c.row+1))-1;e.pool.release(c);return!(z>l||p<n||A>m||d<k)}var B=f.denormalizeCol(c.col,c.world),k=a.spans.some(function(a){return a.row===
c.row&&a.colFrom<=B&&a.colTo>=B});e.pool.release(c);return k};b.prototype.getClosestInfoForScale=function(a){var b=this.scales;this._infoByScale[a]||(a=b.reduce(function(b,c,d,e){return Math.abs(c-a)<Math.abs(b-a)?c:b},b[0]));return this._infoByScale[a]};return b}()})},"esri/layers/vectorTiles/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(b,d,a,c){function e(a,b,c){a[0]=b;a[1]=c;return a}var g=new c("0/0/0/0");
return function(){function b(a,b,c,d,e,h,g,w,v,u,x,y){this.level=a;this.resolution=b;this.scale=c;this.origin=d;this.first=e;this.last=h;this.size=g;this.norm=w;this.worldStart=v;this.worldEnd=u;this.worldSize=x;this.wrap=y}b.create=function(c,d,h){var f=a.getInfo(c.spatialReference),g=[c.origin.x,c.origin.y],k=[c.size[0]*d.resolution,c.size[1]*d.resolution],l=[-Infinity,-Infinity],w=[Infinity,Infinity],v=[Infinity,Infinity];h&&(e(l,Math.max(0,Math.floor((h.xmin-g[0])/k[0])),Math.max(0,Math.floor((g[1]-
h.ymax)/k[1]))),e(w,Math.max(0,Math.floor((h.xmax-g[0])/k[0])),Math.max(0,Math.floor((g[1]-h.ymin)/k[1]))),e(v,w[0]-l[0]+1,w[1]-l[1]+1));var u;c.isWrappable?(c=[Math.ceil(Math.round(2*f.origin[1]/d.resolution)/c.size[0]),v[1]],f=[Math.floor((f.origin[0]-g[0])/k[0]),l[1]],h=[c[0]+f[0]-1,w[1]],u=!0):(f=l,h=w,c=v,u=!1);return new b(d.level,d.resolution,d.scale,g,l,w,v,k,f,h,c,u)};b.prototype.normalizeCol=function(a){if(!this.wrap)return a;var b=this.worldSize[0];return 0>a?b-1-Math.abs((a+1)%b):a%b};
b.prototype.denormalizeCol=function(a,b){return this.wrap?this.worldSize[0]*b+a:a};b.prototype.getWorldForColumn=function(a){return this.wrap?Math.floor(a/this.worldSize[0]):0};b.prototype.getFirstColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]};b.prototype.getLastColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]+this.size[0]-1};b.prototype.getColumnForX=function(a){return(a-this.origin[0])/this.norm[0]};b.prototype.getXForColumn=function(a){return this.origin[0]+
a*this.norm[0]};b.prototype.getRowForY=function(a){return(this.origin[1]-a)/this.norm[1]};b.prototype.getYForRow=function(a){return this.origin[1]-a*this.norm[1]};b.prototype.getTileBounds=function(a,b){g.set(b);var c=this.denormalizeCol(g.col,g.world),d=g.row,e=this.getXForColumn(c),f=this.getYForRow(d+1),c=this.getXForColumn(c+1),d=this.getYForRow(d);a[0]=e;a[1]=f;a[2]=c;a[3]=d;return a};b.prototype.getTileCoords=function(a,b){g.set(b);Array.isArray(a)?e(a,this.getXForColumn(this.denormalizeCol(g.col,
g.world)),this.getYForRow(g.row)):(a.x=this.getXForColumn(this.denormalizeCol(g.col,g.world)),a.y=this.getYForRow(g.row));return a};return b}()})},"esri/layers/vectorTiles/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(b,d,a,c,e){return function(){function b(b){this.lodInfo=b;this.spans=a.acquire()}b.prototype.release=function(){for(var b=0,c=this.spans;b<c.length;b++)e.pool.release(c[b]);a.release(this.spans)};
b.prototype.forEach=function(a,b){var c=this.spans,d=this.lodInfo,e=d.level;if(0!==c.length)for(var f=0;f<c.length;f++)for(var h=c[f],g=h.row,w=h.colTo,h=h.colFrom;h<=w;h++)a.call(b,e,g,d.normalizeCol(h),d.getWorldForColumn(h))};b.pool=new c(b,!0);return b}()})},"esri/layers/vectorTiles/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(b,d,a){return function(){function b(a,b,c){this.row=a;this.colFrom=b;this.colTo=c}b.pool=new a(b,!0);return b}()})},
"esri/layers/vectorTiles/views/2d/tiling/TileQueue":function(){define(["require","exports","../../../core/QueueProcessor"],function(b,d,a){function c(a,b){a.length=0;b.forEach(function(b){return a.push(b)});return a}var e=new Set,g=[],h=new Map;return function(){function b(b){var c=this;this.tileInfoView=null;this.tileInfoView=b.tileInfoView;this._queues=b.tileServers&&0<b.tileServers.length?b.tileServers.map(function(){return new a({concurrency:b.concurrency||6,process:b.process,peeker:function(a){return c._peek(a)}})}):
[new a({concurrency:b.concurrency||6,process:b.process,peeker:function(a){return c._peek(a)}})]}Object.defineProperty(b.prototype,"length",{get:function(){return this._queues.reduce(function(a,b){return a+b.length},0)},enumerable:!0,configurable:!0});b.prototype.clear=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].clear()};b.prototype.find=function(a,b){for(var c=0,d=this._queues;c<d.length;c++){var e=d[c].find(a);if(e)return e}};b.prototype.has=function(a){for(var b=0,c=this._queues;b<
c.length;b++)if(c[b].has(a))return!0;return!1};b.prototype.pause=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].pause()};b.prototype.push=function(a){return this._queues[a.row%this._queues.length].push(a)};b.prototype.reset=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].reset()};b.prototype.resume=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].resume()};b.prototype._peek=function(a){var b=this;if(!this.state)return a[0];var d=this.tileInfoView,f=Number.NEGATIVE_INFINITY,
l=Number.POSITIVE_INFINITY;a.forEach(function(a){var c=b.tileInfoView.getTileScale(a);h.has(c)||(h.set(c,[]),f=Math.max(c,f),l=Math.min(c,l));h.get(c).push(a);e.add(c)});var r=this.state.scale;h.has(r)||(c(g,e),g.sort(),r=g.reduce(function(a,b,c,d){return Math.abs(b-r)<Math.abs(a-r)?b:a},g[0]));r=Math.min(r,f);r=Math.max(r,l);a=h.get(r);var w=d.getClosestInfoForScale(r),v=w.getColumnForX(this.state.center[0]),u=w.getRowForY(this.state.center[1]);a.sort(function(a,b){var c=w.denormalizeCol(a.col,a.world),
d=w.denormalizeCol(b.col,b.world);return Math.sqrt((v-c)*(v-c)+(u-a.row)*(u-a.row))-Math.sqrt((v-d)*(v-d)+(u-b.row)*(u-b.row))});e.clear();h.clear();return a[0]};return b}()})},"esri/layers/vectorTiles/core/QueueProcessor":function(){define(["require","exports","dojo/Deferred","./Queue"],function(b,d,a,c){var e={};return function(){function b(a){this._apiPromises=new Map;this._resolvingPromises=new Map;this._isPaused=!1;this.concurrency=1;a.concurrency&&(this.concurrency=a.concurrency);this._queue=
new c(a.peeker?{peeker:a.peeker}:void 0);this.process=a.process}Object.defineProperty(b.prototype,"length",{get:function(){return this._resolvingPromises.size+this._queue.length},enumerable:!0,configurable:!0});b.prototype.clear=function(){this._queue.clear();var a=[];this._resolvingPromises.forEach(function(b){return a.push(b)});this._resolvingPromises.clear();a.forEach(function(a){return a.cancel()});a.length=0;this._apiPromises.forEach(function(b){return a.push(b)});this._apiPromises.clear();a.forEach(function(a){return a.cancel()})};
b.prototype.find=function(a,b){var c=this,d=void 0;this._apiPromises.forEach(function(e,f){a.call(b,f)&&(d=c._apiPromises.get(f).promise)});return d};b.prototype.has=function(a){return this._apiPromises.has(a)};b.prototype.pause=function(){this._isPaused=!0};b.prototype.push=function(b){var c=this;if(this._apiPromises.has(b))return this._apiPromises.get(b).promise;var d=new a(function(a){c._resolvingPromises.has(b)?c._resolvingPromises.get(b).cancel(a):(c._remove(b),c._scheduleNext())});this._add(b,
d);this._scheduleNext();return d.promise};b.prototype.reset=function(){var a=[];this._resolvingPromises.forEach(function(b){return a.push(b)});this._resolvingPromises.clear();a.forEach(function(a){return a.cancel(e)})};b.prototype.resume=function(){this._isPaused=!1;this._scheduleNext()};b.prototype._scheduleNext=function(){this._isPaused||this._next()};b.prototype._next=function(){this._resolvingPromises.size!==this.concurrency&&this._process(this._queue.pop())};b.prototype._process=function(a){var b=
this;if(null!=a){var c=this._apiPromises.get(a),d=this.process(a);d&&"function"===typeof d.then?(this._resolvingPromises.set(a,d),d.then(function(d){b._remove(a);b._scheduleNext();c.resolve(d)},function(d){d===e?b._process(a):(b._remove(a),b._scheduleNext(),c.reject(d))})):(c.resolve(d),this._remove(a));this._scheduleNext()}};b.prototype._add=function(a,b){this._apiPromises.set(a,b);this._queue.push(a)};b.prototype._remove=function(a){this._queue.remove(a);this._apiPromises.delete(a);this._resolvingPromises.delete(a)};
return b}()})},"esri/layers/vectorTiles/core/Queue":function(){define(["require","exports"],function(b,d){return function(){function a(a){this._items=[];this._itemSet=new Set;this._peeker=function(a){return a[0]};this._length=0;a&&a.peeker&&(this._peeker=a.peeker)}Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};a.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};
a.prototype.push=function(a){this.contains(a)||this._add(a)};a.prototype.contains=function(a){return 0<this._length&&this._itemSet.has(a)};a.prototype.pop=function(){if(0!==this._length){var a=this.peek();this._remove(a);return a}};a.prototype.remove=function(a){this.contains(a)&&this._remove(a)};a.prototype._add=function(a){this._items.push(a);this._itemSet.add(a);this._length++};a.prototype._remove=function(a){this._itemSet.delete(a);this._items.splice(this._items.indexOf(a),1);this._length--};
return a}()})},"esri/layers/vectorTiles/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./TileKey"],function(b,d,a,c){var e=new c(0,0,0,0),g=new Map,h=[],f=[];return function(){function a(a){this._previousResolution=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.tileIndex=new Map;this.tiles=[];this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;a.cachePolicy&&(this.cachePolicy=a.cachePolicy)}
a.prototype.destroy=function(){this.tileIndex.clear()};a.prototype.update=function(a){var b=this,c=this.tileIndex,d=this.tileInfoView.getTileCoverage(a.state);if(d){var k=d.spans,l=d.lodInfo,v=l.level,u=a.state.resolution,x=!a.stationary&&u>this._previousResolution;this._previousResolution=u;c.forEach(function(a){return a.visible=!0});this.tiles.length=0;g.clear();var y=0,n=0;if(0<k.length)for(var p=0;p<k.length;p++){a=k[p];for(var z=a.row,A=a.colTo,B=a.colFrom;B<=A;B++)y++,a=e.set(v,z,l.normalizeCol(B),
l.getWorldForColumn(B)).id,c.has(a)?(u=c.get(a),u.attached?(g.set(a,u),n++):u.attached||x||this._addParentTile(a,g)):(u=this.acquireTile(e),this.tileIndex.set(a,u),x||this._addParentTile(a,g))}var D=n===y;f.length=0;h.length=0;c.forEach(function(a,c){e.set(c);if(!g.has(c)){var k=b.tileInfoView.intersects(d,e);!k||!x&&D?"purge"===b.cachePolicy?h.push(c):(e.level>v||!k)&&h.push(c):a.attached?f.push(c):e.level>v&&h.push(c)}});for(k=0;k<f.length;k++)a=f[k],(u=c.get(a))&&u.attached&&g.set(a,u);for(k=0;k<
h.length;k++)a=h[k],u=c.get(a),this.releaseTile(u),c["delete"](a);g.forEach(function(a){return b.tiles.push(a)});c.forEach(function(a){g.has(a.key.id)||(a.visible=!1)});f.length=0;h.length=0;g.clear()}};a.prototype.clear=function(){var a=this,b=this.tileIndex;b.forEach(function(b){a.releaseTile(b)});b.clear()};a.prototype._addParentTile=function(a,b){for(var c=a,d=null;;){c=this.tileInfoView.getTileParentId(c);if(!c)break;if(this.tileIndex.has(c)&&(d=this.tileIndex.get(c))&&d.attached){b.has(d.key.id)||
b.set(d.key.id,d);break}}};return a}()})},"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/backgroundShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"backgroundVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_coord_range;\r\n    uniform mediump float u_depth;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"backgroundFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform lowp vec4 u_color;\r\n    void main() {\r\n      gl_FragColor \x3d u_color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/bitblitShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"bitblitVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_tex;\r\n\r\n    varying mediump vec2 v_uv;\r\n\r\n    void main(void) {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n      v_uv \x3d a_tex;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"bitblitFS"\x3e\r\n  \x3c![CDATA[\r\n    \tuniform lowp sampler2D u_tex;\r\n      uniform lowp float u_opacity;\r\n\r\n      varying mediump vec2 v_uv;\r\n\r\n      void main() {\r\n        lowp vec4 color \x3d texture2D(u_tex, v_uv);\r\n\r\n        // Note: output in pre-multiplied alpha for correct alpha compositing\r\n        gl_FragColor \x3d color *  u_opacity;\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/stencilShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"stencilVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"stencilFS"\x3e\r\n  \x3c![CDATA[\r\n    void main() {\r\n      gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/tileInfo.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"tileInfoVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_depth;\r\n    uniform mediump float u_coord_ratio;\r\n    uniform mediump vec2 u_delta; // in tile coordinates\r\n    uniform mediump vec2 u_dimensions; // in tile coordinates\r\n\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main() {\r\n      mediump vec2 offests \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\r\n\r\n      v_tex \x3d a_pos;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"tileInfoFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform mediump sampler2D u_texture;\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main(void) {\r\n      lowp vec4 color \x3d texture2D(u_texture, v_tex);\r\n      gl_FragColor \x3d 0.75 * color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR)|| defined(VV_OPACITY)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n\r\n    float getVVOpacity(float opacityValue) {\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue) {\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n      attribute vec4 a_color;\r\n      attribute vec4 a_tlbr;\r\n      attribute vec4 a_aux;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $fillVVUniformsVS\r\n      $fillVVFunctions\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump float u_zoomFactor;\r\n    uniform mediump vec2 u_mosaicSize;\r\n\r\n    varying mediump vec4 v_tlbr;\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n  #ifdef VV_OPACITY\r\n        v_opacity \x3d getVVOpacity(a_vv.y);\r\n  #else\r\n        v_opacity \x3d 1.0;\r\n  #endif\r\n\r\n    #ifdef VV_COLOR\r\n       v_color \x3d getVVColor(a_vv.x);\r\n  #else\r\n       v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n      v_id \x3d a_id;\r\n  #endif // ID\r\n\r\n  #ifdef PATTERN\r\n       // calculate the pattern matrix\r\n       mat3 patternMatrix \x3d mat3(1.0, 0.0, 0.0,\r\n                                 0.0, 1.0, 0.0,\r\n                                 0.0, 0.0, 1.0);\r\n       patternMatrix[0][0] \x3d 1.0 / (u_zoomFactor * a_aux.x);\r\n       patternMatrix[1][1] \x3d 1.0 / (u_zoomFactor * a_aux.y);\r\n\r\n       // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n       // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from\r\n       // tile coordinates to texture coordinates.\r\n       v_tileTextureCoord \x3d (patternMatrix * vec3(a_pos, 1.0)).xy;\r\n       v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n  #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n      uniform lowp float u_opacity;\r\n\r\n  #ifdef PATTERN\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_tlbr;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      void main()\r\n      {\r\n  #ifdef PATTERN\r\n         // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n         mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n         // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n         // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n         // we need to only sample from area that has our sprite in the mosaic.\r\n         mediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\r\n         // sample the sprite mosaic\r\n         lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n         gl_FragColor \x3d u_opacity * v_opacity * v_color * color;\r\n  #else\r\n        gl_FragColor \x3d u_opacity * v_opacity * v_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef HIGHLIGHT\r\n        gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n  #endif // HIGHLIGHT\r\n\r\n  #ifdef ID\r\n      //if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n      //  discard;\r\n      //}\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2floatFunc"\x3e\r\n    \x3c![CDATA[\r\n    float rgba2float(vec4 rgba) {\r\n      return dot(rgba,  vec4(1.0/16777216.0, 1.0/65535.0, 1.0/256.0, 1.0));\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue) {\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      interpolationRatio \x3d clamp(interpolationRatio, 0.0, 1.0);\r\n      return u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue) {\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue) {\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue) {\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\r\n  \x3csnippet name\x3d"iconVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    //const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n    const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n    const float C_OFFSET_PRECISION \x3d 1.0 / 64.0;\r\n\r\n    // per-vertex attributes (4 bytes)\r\n    attribute vec4 a_vertexOffsetAndTex;\r\n\r\n    // per quad (instance) attributes (20 bytes \x3d\x3d\x3e equivalent of 5 bytes per vertex)\r\n    attribute vec2 a_pos;\r\n    attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n    attribute vec4 a_color;\r\n    attribute vec4 a_outlineColor;\r\n    attribute vec4 a_sizeAndOutlineWidth;\r\n\r\n    // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n    // relative to the tile\'s upper left corner\r\n    // the extrusion vector.\r\n    uniform highp mat4 u_transformMatrix;\r\n    // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n    uniform highp mat4 u_extrudeMatrix;\r\n    // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n    uniform highp vec2 u_normalized_origin;\r\n\r\n    // the size of the mosaic given in pixels\r\n    uniform vec2 u_mosaicSize;\r\n\r\n    // the opacity of the layer given by the painter\r\n    uniform mediump float u_opacity;\r\n\r\n    // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n    varying mediump vec2 v_tex;\r\n    // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n    // opacity of the layer given by the painter\r\n    varying lowp float v_transparency;\r\n    // the of the icon given in pixels\r\n    varying mediump vec2 v_size;\r\n\r\n    // icon color. If is a picture-marker it is used to tint the texture color\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    attribute float a_heatmapWeight;\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n    $iconVVUniformsVS\r\n    $iconVVFunctions\r\n\r\n    void main()\r\n    {\r\n      vec2 a_offset \x3d a_vertexOffsetAndTex.xy;\r\n      vec2 a_tex \x3d a_vertexOffsetAndTex.zw;\r\n      vec2 a_size \x3d a_sizeAndOutlineWidth.xy;\r\n\r\n      // default values (we need them for the variations to come)\r\n      float a_angle \x3d 0.0;\r\n      float delta_z \x3d 0.0;\r\n      float depth \x3d 0.0;\r\n      v_transparency \x3d 1.0;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n      // vv size override the original symbol\'s size\r\n      float h \x3d getVVMinMaxSize(a_vv.x);\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n      float h \x3d u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n      float h \x3d getVVStopsSize(a_vv.x);\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n      float h \x3d getVVUnitValue(a_vv.x);\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n      // make sure to preserve the aspect ratio of the symbol\r\n      vec2 size \x3d vec2(h * a_size.x / a_size.y, h);\r\n      vec2 offset \x3d C_OFFSET_PRECISION * a_offset * size;\r\n      v_size \x3d size;\r\n  #else\r\n  #ifdef HEATMAP\r\n      // reconstruct the kernel size\r\n      a_size \x3d 9.0 * a_size + 1.0;\r\n  #endif // HEATMAP\r\n\r\n      vec2 offset \x3d C_OFFSET_PRECISION * a_offset * a_size;\r\n      v_size \x3d a_size;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef SDF\r\n    offset *\x3d 2.0;\r\n  #endif // SDF\r\n\r\n  #ifdef VV_ROTATION\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * getVVRotation(a_vv.w) * vec4(offset, delta_z, 0.0);\r\n  #else\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offset, delta_z, 0.0);\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_OPACITY\r\n      v_transparency \x3d getVVOpacity(a_vv.z);\r\n  #else\r\n      v_transparency \x3d u_opacity;\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y);\r\n  #else\r\n      v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n      // output the texture coordinates and the transparency\r\n      v_tex \x3d a_tex / u_mosaicSize;\r\n\r\n #ifdef SDF\r\n      v_outlineColor \x3d a_outlineColor;\r\n      v_outlineWidth \x3d a_sizeAndOutlineWidth.z;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n      v_id \x3d a_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    v_heatmapWeight \x3d a_heatmapWeight;\r\n #endif // HEATMAP\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconFS"\x3e\r\n   \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    uniform lowp sampler2D u_texture;\r\n\r\n    varying lowp vec2 v_tex;\r\n    varying lowp float v_transparency;\r\n    varying mediump vec2 v_size;\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n\r\n    // we need the conversion function from RGBA to float\r\n    $rgba2floatFunc\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    const float softEdgeRatio \x3d 1.0; // use blur here if needed\r\n\r\n    void main()\r\n    {\r\n #ifdef SDF\r\n      lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n      // calculate the distance from the edge [-0.5, 0.5]\r\n      float d \x3d 0.5 - rgba2float(texture2D(u_texture, v_tex));\r\n\r\n      // Work around loss of precision for \'d \x3d 0.0\'.\r\n      // \'0\' gets normalised to 0.5 * 256 \x3d 128 before float packing, but can only\r\n      // be stored in the texture as 128 / 255 \x3d 0.502.\r\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/7058#issuecomment-603110\r\n      const float diff \x3d (128.0/255.0 - 0.5);\r\n\r\n      // adjust all values, not just those close to 0, to avoid discontinuities in\r\n      // the outlines of other shapes e.g. circles\r\n      d \x3d d - diff;\r\n\r\n      // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n      float size \x3d max(v_size.x, v_size.y);\r\n      float dist \x3d d * size * softEdgeRatio;\r\n\r\n      // set the fragment\'s transparency according to the distance from the edge\r\n      fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n      // count for the outline\r\n      // therefore tint the entire icon area.\r\n      if (v_outlineWidth \x3e 0.25) {\r\n        lowp vec4 outlinePixelColor \x3d v_outlineColor;\r\n\r\n        // outlines can\'t be larger than the size of the symbol\r\n        float clampedOutlineSize \x3d min(v_outlineWidth, size);\r\n\r\n        outlinePixelColor *\x3d clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\r\n\r\n        // finally combine the outline and the fill colors (outline draws on top of fill)\r\n        gl_FragColor \x3d v_transparency * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\r\n      }\r\n      else {\r\n        gl_FragColor \x3d v_transparency * fillPixelColor;\r\n      }\r\n #else // not an SDF\r\n      lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n\r\n #ifdef HEATMAP\r\n      texColor.r *\x3d v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n      gl_FragColor \x3d v_transparency * texColor;\r\n #endif // SDF\r\n\r\n #ifdef HIGHLIGHT\r\n      gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n #endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n #endif // ID\r\n    }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"thinLineParams"\x3e\r\n     \x3c![CDATA[\r\n    float thinLineHalfWidth \x3d 1.0; // meaning that a 2 pixels line width is considered a thin line\r\n    float thinLineWidthFactor \x3d 1.1;\r\n     ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY)\r\n    attribute vec3 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue) {\r\n      float f \x3d (sizeValue - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(mix(u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w, f), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue) {\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue) {\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue) {\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n     precision mediump float;\r\n\r\n     attribute vec2 a_pos;\r\n     attribute vec4 a_id;\r\n     attribute vec4 a_color;\r\n     attribute vec4 a_offsetAndNormal;\r\n     attribute vec2 a_accumulatedDistanceAndHalfWidth;\r\n     attribute vec4 a_tlbr;\r\n     attribute vec4 a_segmentDirection;\r\n\r\n     // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n     // relative to the tile\'s upper left corner\r\n     // the extrusion vector.\r\n     uniform highp mat4 u_transformMatrix;\r\n     // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n     uniform highp mat4 u_extrudeMatrix;\r\n     // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n     uniform highp vec2 u_normalized_origin;\r\n     uniform lowp float u_opacity; // the layer\'s opacity\r\n     uniform mediump float u_zoomFactor;\r\n     uniform mediump float u_antialiasing;\r\n\r\n     // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n     varying mediump vec2 v_normal;\r\n     varying mediump float v_lineHalfWidth;\r\n     varying lowp vec4 v_color;\r\n     varying lowp float v_transparency;\r\n\r\n     const float scale \x3d 1.0 / 31.0;\r\n#ifdef SDF\r\n     const float widthFactor \x3d 2.0;\r\n#else\r\n     const float widthFactor \x3d 1.0;\r\n#endif\r\n\r\n\r\n#ifdef PATTERN\r\n     uniform mediump vec2 u_mosaicSize;\r\n\r\n     varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n     varying mediump vec2 v_patternSize;\r\n#endif // PATTERN\r\n\r\n// we need to accumulated distance only if it is a pattern or an SDF line\r\n#if defined(PATTERN) || defined(SDF)\r\n     varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n     // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n     $lineVVUniformsVS\r\n     $lineVVFunctions\r\n\r\n     void main()\r\n     {\r\n     // size VV block\r\n#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_SIZE_MIN_MAX_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVMinMaxSize(a_vv.x);\r\n#endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n#ifdef VV_SIZE_SCALE_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * u_vvSizeScaleStopsValue;\r\n#endif // VV_SIZE_SCALE_STOPS\r\n\r\n#ifdef VV_SIZE_FIELD_STOPS\r\n        mediump float lineHalfWidth \x3d 0.5 * getVVStopsSize(a_vv.x);\r\n#endif // VV_SIZE_FIELD_STOPS\r\n\r\n#ifdef VV_SIZE_UNIT_VALUE\r\n  mediump float lineHalfWidth \x3d 0.5 * getVVUnitValue(a_vv.x);\r\n#endif // VV_SIZE_UNIT_VALUE\r\n\r\n#else // no VV\r\n       mediump float lineHalfWidth \x3d a_accumulatedDistanceAndHalfWidth.y * scale;\r\n#endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_OPACITY\r\n      v_transparency \x3d u_opacity * getVVOpacity(a_vv.z);\r\n#else\r\n    v_transparency \x3d u_opacity;\r\n#endif // VV_OPACITY\r\n\r\n #ifdef VV_COLOR\r\n    v_color \x3d getVVColor(a_vv.y);\r\n#else\r\n    v_color \x3d a_color;\r\n#endif // VV_COLOR\r\n\r\n       // make sure to clip the vertices in case that the width of the line is 0 (or negative)\r\n       float z \x3d 2.0 * step(lineHalfWidth, 0.0);\r\n\r\n       // add an antialiasing distance. We use 0.2 rather than 0.5 in order to match the SVG renderer\r\n       // also limit the total line width to 1.3 pixels. Below this value lines don\'t look good compared to the SVG renderer\r\n       lineHalfWidth \x3d max(lineHalfWidth, 0.45) + 0.2 * u_antialiasing;\r\n\r\n       // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n       $thinLineParams\r\n       // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n       // in practice, a thin line is a line who\'s half width vary from 0.45px to the value of thinLineHalfWidth, as the value\r\n       // is claped in line 221 above\r\n       mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n       v_lineHalfWidth \x3d lineHalfWidth;\r\n\r\n       // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n       // sake of using less attribute memory, we need to scale it back to the original range of ~ [0, 1])\r\n       // in a case of a thin line we move each vertex twice as far\r\n       mediump vec2 dist \x3d thinLineFactor * widthFactor * lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n       // transform the vertex\r\n       gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, z, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n       v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n       v_accumulatedDistance \x3d a_accumulatedDistanceAndHalfWidth.x + dot(scale * a_segmentDirection.xy, dist / u_zoomFactor);\r\n#endif // PATTERN || SDF\r\n\r\n#ifdef PATTERN\r\n      v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n      v_patternSize \x3d vec2(a_tlbr.z - a_tlbr.x, a_tlbr.w - a_tlbr.y);\r\n#endif // PATTERN\r\n\r\n#ifdef ID\r\n      v_id \x3d a_id;\r\n#endif // ID\r\n     }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n       precision lowp float;\r\n\r\n       uniform lowp float u_blur;\r\n       uniform mediump float u_antialiasing;\r\n\r\n       varying mediump vec2 v_normal;\r\n       varying mediump float v_lineHalfWidth;\r\n       varying lowp vec4 v_color;\r\n       varying lowp float v_transparency;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n      uniform sampler2D u_texture;\r\n      uniform mediump float u_zoomFactor;\r\n\r\n      varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n      varying mediump vec2 v_patternSize;\r\n      varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef SDF\r\n      const float sdfPatternHalfWidth \x3d 15.5; // YF: assumed that the width will be set to 31\r\n     const float widthFactor \x3d 2.0;\r\n\r\n      float rgba2float(vec4 rgba) {\r\n        return dot(rgba,  vec4(1.0/16777216.0, 1.0/65535.0, 1.0/256.0, 1.0));\r\n      }\r\n#endif // SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n       void main()\r\n       {\r\n         // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n         $thinLineParams\r\n\r\n         // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n         mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(v_lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n         // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n         // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n         // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n         mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n         // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n         // when it is a thin line then use a slightly shallower slope in order to add more feathering\r\n         lowp float alpha \x3d clamp(thinLineFactor * (v_lineHalfWidth - fragDist) / (u_blur + thinLineFactor - 1.0), 0.0, 1.0);\r\n\r\n#if defined(SDF)\r\n         mediump float lineHalfWidth \x3d widthFactor * v_lineHalfWidth;\r\n         mediump float lineWidthRatio \x3d lineHalfWidth / sdfPatternHalfWidth;\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * lineHalfWidth) / (lineWidthRatio * v_patternSize.x), 1.0);\r\n         mediump float relativeTexY \x3d 0.5 + 0.5 * v_normal.y;\r\n\r\n          // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // calculate the distance from the edge [-0.5, 0.5]\r\n         mediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\r\n\r\n         // the distance is a proportional to the line width\r\n         float dist \x3d d * lineHalfWidth;\r\n\r\n         lowp vec4 fillPixelColor \x3d v_transparency * alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\r\n        gl_FragColor \x3d fillPixelColor;\r\n#elif defined(PATTERN)\r\n         // we need to calculate the relative portion of the line texture along the line given the accumulated distance along the line\r\n         // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * v_lineHalfWidth) / v_patternSize.x, 1.0);\r\n\r\n         // in order to calculate the texture coordinates prependicular to the line (Y axis), we use the interpolated normal values\r\n         // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n         // texture value shpould be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n         // (TL) ---------------------------      --\x3e left edge of line. Interpolatedf normal is 1.0\r\n         //              | -\x3e line-width / 2\r\n         //      - - - - - - - - - - - - - -\r\n         //              | -\x3e line-width / 2\r\n         //      ---------------------------- (BR)--\x3e right edge of line. Interpolatedf normal is -1.0\r\n\r\n         mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / v_patternSize.y);\r\n\r\n         // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // get the color from the texture\r\n         lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n         gl_FragColor \x3d v_transparency * alpha * v_color * color;\r\n#else // solid line (no texture, no pattern)\r\n         // output the fragment color\r\n         gl_FragColor \x3d v_transparency * alpha * v_color;\r\n#endif // SDF\r\n\r\n#ifdef HIGHLIGHT\r\n         gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n#endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n         if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n           discard;\r\n         }\r\n         gl_FragColor \x3d v_id;\r\n #endif // ID\r\n       }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n\x3csnippet name\x3d"textVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue) {\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue) {\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue) {\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue) {\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      attribute vec2 a_pos;           // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_id;            // 4 (4 x unsigned byte)\r\n      attribute vec4 a_color;         // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset; // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texFontSize; // 4 (4 x unsigned byte) texture coordinatesm and font size\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 32.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $textVVUniformsVS\r\n      $textVVFunctions\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n        // vv size override the original symbol\'s size\r\n        vec2 size \x3d vec2(getVVMinMaxSize(a_vv.x));\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n        vec2 size \x3d vec2(u_vvSizeScaleStopsValue);\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n        vec2 size \x3d vec2(getVVStopsSize(a_vv.x));\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n        vec2 size \x3d vec2(getVVUnitValue(a_vv.x));\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n        float fontSize \x3d size.x;\r\n  #else // this generic case, no VV\r\n        float fontSize \x3d a_texFontSize.z;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        //gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n    #ifdef VV_ROTATION\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * getVVRotation(a_vv.w) * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #else\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #endif // VV_ROTATION\r\n\r\n        v_tex \x3d a_texFontSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.105 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texFontSize.w / fontScale / maxSdfDistance;\r\n\r\n    #ifdef VV_OPACITY\r\n        v_transparency \x3d getVVOpacity(a_vv.z);\r\n    #else\r\n        v_transparency \x3d u_opacity;\r\n    #endif // VV_OPACITY\r\n\r\n    #ifdef VV_COLOR\r\n       // we don\'t want to override the halo color\r\n       v_color \x3d halo * a_color + (1.0 - halo) * getVVColor(a_vv.y);\r\n    #else\r\n        v_color \x3d a_color;\r\n    #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n        v_id \x3d a_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n  #ifdef ID\r\n      varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float alpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n  #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Highlight generation and rendering shaders.\r\n\r\n  These shader sources are loaded by hlShaderSnippets.ts which in turn\r\n  is used by HighlightRenderer to instantiate the programs needed for\r\n  generating and rendering the highlights.\r\n\r\n  These shaders are intended to be used with full screen quads.\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3c!--\r\n    Vertex shader: texturedVS\r\n\r\n    Identity vertex shader that outputs an untransformed 2-D vertex\r\n    and passes its texture coordinates unchanged to the interpolator.\r\n  --\x3e\r\n  \x3csnippet name\x3d"texturedVS"\x3e\r\n    \x3c![CDATA[\r\n    // Vertex position.\r\n    attribute mediump vec2 a_position;\r\n\r\n    // Texture coordinates.\r\n    attribute mediump vec2 a_texcoord;\r\n\r\n    // Texture coordinates to be interpolated.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    void main(void) {\r\n      // Pass the position unchanged.\r\n      gl_Position \x3d vec4(a_position, 0.0, 1.0);\r\n\r\n      // Pass the texture coordinates unchanged.\r\n      v_texcoord \x3d a_texcoord;\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: blurFS\r\n\r\n    A gaussian blur shader. It blurs the alpha channel of its input\r\n    according to 4 different sigma and stores the results into the\r\n    four channel of the target framebuffer.\r\n\r\n    It is intended to be called twice; the first time to perform an\r\n    horizontal blur, and a second time to perform a vertical blur.\r\n\r\n    This shader is used to turn the highlight mask into a highlight\r\n    map. The highlight map is an approximation of the signed distance\r\n    field of the mask.\r\n  --\x3e\r\n  \x3csnippet name\x3d"blurFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // Blur direction information. There are two possible\r\n    // configurations that the host code can use.\r\n    //  - [1, 0, 1/WIDTH, 0] Used when blurring horizontally. In this\r\n    //    case u_direction[0] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[2] \x3d 1/WIDTH is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    //  - [0, 1, 0, 1/HEIGHT] Used when blurring vertically. In this\r\n    //    case u_direction[1] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[3] \x3d 1/HEIGHT is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    uniform mediump vec4 u_direction;\r\n\r\n    // Source to destination channel selection matrix.\r\n    uniform mediump mat4 u_channelSelector;\r\n\r\n    // The highlight map is obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // This is the highlight mask if we have not blurred horizontally yet, otherwise\r\n    // it is the horizontally blurred highlight map and blurring it one more time\r\n    // vertically will complete the process.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The gaussian kernel. Note that it lacks the normalization constant, because\r\n    // we want to store it unnormalized in the highlight map (i.e. having a peak\r\n    // value of 1). Note also that we are using the SIMD (single instruction, multiple\r\n    // data) capabilities of the GPU to compute four different gaussian kernels, one\r\n    // for each sigma.\r\n    mediump vec4 gauss(mediump vec2 dir) {\r\n      return exp(-dot(dir, dir) / (2.0 * u_sigmas * u_sigmas));\r\n    }\r\n\r\n    mediump vec4 selectChannel(mediump vec4 sample) {\r\n      return u_channelSelector * sample;\r\n    }\r\n\r\n    // Sample the input texture and accumulated its gaussian weighted value and the\r\n    // total weight.\r\n    void accumGauss(mediump float i, inout mediump vec4 tot, inout mediump vec4 weight) {\r\n      // Computes the gaussian weights, one for each sigma.\r\n      // Note that u_direction.xy is [1, 0] when blurring horizontally and [0, 1] when blurring vertically.\r\n      mediump vec4 w \x3d gauss(i * u_direction.xy);\r\n\r\n      // Accumumates the values.\r\n      // Note that u_direction.xy is [1/WIDTH, 0] when blurring horizontally and [0, 1/HEIGHT] when blurring vertically.\r\n      tot +\x3d selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw)) * w;\r\n\r\n      // Accumulates the weights.\r\n      weight +\x3d w;\r\n    }\r\n\r\n    void main(void) {\r\n      // Initialize accumulated values and weights to zero.\r\n      mediump vec4 tot \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n      mediump vec4 weight \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n\r\n      // Accumulates enough samples. These will be taken\r\n      // horizontally or vertically depending on the value\r\n      // of u_direction.\r\n      accumGauss(-5.0, tot, weight);\r\n      accumGauss(-4.0, tot, weight);\r\n      accumGauss(-3.0, tot, weight);\r\n      accumGauss(-2.0, tot, weight);\r\n      accumGauss(-1.0, tot, weight);\r\n      accumGauss(0.0, tot, weight);\r\n      accumGauss(1.0, tot, weight);\r\n      accumGauss(2.0, tot, weight);\r\n      accumGauss(3.0, tot, weight);\r\n      accumGauss(4.0, tot, weight);\r\n      accumGauss(5.0, tot, weight);\r\n\r\n      // Compute blurred values.\r\n      mediump vec4 rgba \x3d tot / weight;\r\n\r\n      // Return the values. Note that each channel will contain\r\n      // the result of a different blur operation, one for each\r\n      // of the four chosen sigma.\r\n      gl_FragColor \x3d vec4(rgba);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: highlightFS\r\n\r\n    Takes as input the highlight map, estimated the signed distance field,\r\n    and shades the fragments according to their estimated distance from the\r\n    edge of the highlighted feature.\r\n\r\n    A shade texture is used to turn distance values into colors; the shade\r\n    texture is basically a color gradient and is recomputed on the host\r\n    every time that the user alters the highlight options.\r\n  --\x3e\r\n  \x3csnippet name\x3d"highlightFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // The highlight map. Each channel is a blurred\r\n    // version of the alpha channel of the highlight mask.\r\n    //  - Channel 0 (red) corresponds to a gaussian blur with sigma \x3d u_sigmas[0];\r\n    //  - Channel 1 (green) corresponds to a gaussian blur with sigma \x3d u_sigmas[1];\r\n    //  - Channel 2 (blue) corresponds to a gaussian blur with sigma \x3d u_sigmas[2];\r\n    //  - Channel 3 (alpha) corresponds to a gaussian blur with sigma \x3d u_sigmas[3];\r\n    // As of today, only channel 3 is used for distance estimation.\r\n    // But the availability of different amounts of blur leaves the\r\n    // door open to multi-scale approaches.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The highlight map was obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // A 1-D texture used to shade the highlight.\r\n    uniform sampler2D u_shade;\r\n\r\n    // The 1-D shade texture is spreaded between u_minMaxDistance[0] and u_minMaxDistance[1].\r\n    uniform mediump vec2 u_minMaxDistance;\r\n\r\n    // Signed distance estimation.\r\n    mediump float estimateDistance() {\r\n      // Use the largest sigma and the corresponding distance value stored in the\r\n      // last channel of the highlight map.\r\n      mediump float sigma \x3d u_sigmas[3];\r\n      mediump float y \x3d texture2D(u_texture, v_texcoord)[3];\r\n\r\n      // Estimates the distance by linearization and local inversion around\r\n      // the inflection point. The inflection point is in x \x3d 0.\r\n      const mediump float y0 \x3d 0.5;                           // Value of the convolution at the inflection point.\r\n      mediump float m0 \x3d 1.0 / (sqrt(2.0 * 3.1415) * sigma);  // Slope of the convolution at the inflection point.\r\n      mediump float d \x3d (y - y0) / m0;                        // Inversion of a local linearization.\r\n\r\n      // Return the estimated distance.\r\n      return d;\r\n    }\r\n\r\n    // Shading based on estimated distance.\r\n    mediump vec4 shade(mediump float d) {\r\n      // Maps the sampled distance from the [A, D] range (see HighlightRenderer::setHighlightOptions) to [0, 1].\r\n      mediump float mappedDistance \x3d (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\r\n\r\n      // Force to [0, 1]; it should not be necessary because the shade texture uses the CLAMP address mode, so\r\n      // this should happen anyway internally to the sampler, but in practice it is needed to avoid weird\r\n      // banding artifacts.\r\n      // We don\'t really know if we need this or not.\r\n      mappedDistance \x3d clamp(mappedDistance, 0.0, 1.0);\r\n\r\n      // Sample the 1-D shade texture on its center line (i.e. on t\x3d0.5).\r\n      return texture2D(u_shade, vec2(mappedDistance, 0.5));\r\n    }\r\n\r\n    void main(void) {\r\n      // Estimate the distance.\r\n      mediump float d \x3d estimateDistance();\r\n\r\n      // Shade the distance.\r\n      gl_FragColor \x3d shade(d);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/heatmapShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"heatmapVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_tex;\r\n\r\n    uniform mediump vec2 u_minmax;\r\n\r\n    varying mediump vec2 v_uv;\r\n    varying mediump float v_slope;\r\n\r\n    void main(void) {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n      v_uv \x3d a_tex;\r\n      v_slope \x3d 1.0 / (u_minmax.y - u_minmax.x);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"heatmapFS"\x3e\r\n  \x3c![CDATA[\r\n    \tprecision mediump float;\r\n\r\n      uniform lowp sampler2D u_texture;\r\n      uniform lowp float u_opacity;\r\n      uniform mediump vec2 u_minmax;\r\n      uniform lowp sampler2D u_gradient;\r\n\r\n      varying mediump vec2 v_uv;\r\n      varying mediump float v_slope;\r\n\r\n      vec4 getColor(float intensity) {\r\n        float normalizedIntensity \x3d clamp((intensity - u_minmax.x) * v_slope, 0.0, 1.0);\r\n\r\n        return texture2D(u_gradient, vec2(0.5, normalizedIntensity));\r\n      }\r\n\r\n      void main() {\r\n      // sample the intnsity value\r\n        lowp vec4 color \x3d texture2D(u_texture, v_uv);\r\n\r\n        // interpolate the color from the ramp using the intensity value\r\n        gl_FragColor \x3d getColor(color.r) *  u_opacity;\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"*now":function(b){b(['dojo/i18n!*preload*esri/layers/support/nls/webglDeps*["ar","az","ca","cs","da","de-de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ro","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},"*noref":1}});define("esri/layers/support/webglDeps",["./WebGLRenderer","../OnDemandDrillMode"],function(b,d){return{WebGLRenderer:b,OnDemandDrillMode:d}});