// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.24/esri/copyright.txt for details.
//>>built
define("esri/dijit/RasterFunctionEditor/RFxFeatureSelect","dojo/_base/declare dojo/has ../../kernel dojo/_base/lang dojo/_base/array dojo/store/Memory dojo/store/Observable dojo/data/ObjectStore dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ./utils ../analysis/utils dojo/i18n!../../nls/jsapi".split(" "),function(b,e,f,c,g,n,p,q,h,k,l,r,d,m){b=b("RFxFeatureSelect",[h,k,l],{templateString:"\x3cdiv\x3e\x3cdiv data-dojo-type\x3d'dijit/form/Select' data-dojo-attach-point\x3d '_layerSelect'\x3e\x3c/div\x3e\x3c/div\x3e",
geometryTypes:{point:"esriGeometryPoint"},value:null,showBrowseLayers:!0,constructor:function(a){this.inherited(arguments);this._i18n=m.widgets.rasterFunctionEditor},postCreate:function(){this.inherited(arguments);this._populateLayerSelect()},_populateLayerSelect:function(){var a=[],b=this.geometryType?this._i18n.rfxFeatureSelect.addPointLayer:this._i18n.rfxFeatureSelect.addFeatureLayer;g.forEach(this.inputLayers,function(b,c){this.geometryType?b.geometryType===this.geometryTypes[this.geometryType]&&
a.push({value:c+1,label:b.name}):a.push({value:c+1,label:b.name})},this);this._layerSelect.addOption(a);this._layerChange();d.addReadyToUseLayerOption(this,[this._layerSelect]);this.own(this._layerSelect.on("change",c.hitch(this,this._handleFeatureLayerChange)));setTimeout(c.hitch(this,function(){this._layerSelect.updateOption({value:"browselayers",label:b,selected:!1})}),1E3);this.on("add-ready-to-use-layer",c.hitch(this,function(a){this.emit("add-layer",a)}))},_handleFeatureLayerChange:function(a){"browselayers"===
a?(this.geometryType&&(this._browseLyrsdlg.browseItems.plugIn.geometryTypes=[this.geometryTypes[this.geometryType]]),this._browseLyrsdlg.show()):this._layerChange()},_handleBrowseItemsSelect:function(a){a&&a.selection&&(this.inputLayers.push(a.selection.selectedLayer),d.addAnalysisReadyLayer({item:a.selection,layers:this.inputLayers,layersSelect:this._layerSelect,posIncrement:1,browseDialog:a.dialog||this._browsedlg,widget:this}))},_layerChange:function(){var a=this._layerSelect.value;a&&(this.value=
{url:this.inputLayers[a-1].url})}});e("extend-esri")&&c.setObject("dijit.RasterFunctionEditor.RFxFeatureSelect",b,f);return b});