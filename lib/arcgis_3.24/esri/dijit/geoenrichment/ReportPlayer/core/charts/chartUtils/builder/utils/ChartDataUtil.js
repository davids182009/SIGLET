// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.24/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/chartUtils/builder/utils/ChartDataUtil",["../../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer","esri/dijit/geoenrichment/utils/ObjectUtil","../../ChartTypes"],function(f,m,n){var c={formatNumber:function(a,b,e,d){a=m.formatNumber(a||0,{places:b.dataLabelsDecimals||0,preserveTrailingZeroes:!0});e&&(a+="%");return a},undefinedToDefault:function(a,b){return void 0===a?b:a}},g=[1E3,1100,1200,150,70,900,110,300,80,200,1700],
p=[1E3,-300,700,-150,70,100,-200,900,110,300,80,200,1700],q=[1,.7,1.2,.5,1.1,1.3,.3,2,.4],r=[.91,.92,.9,1.2,1.2,1.3];c.CHART_DATA_SMOOTH=[1145,1134,1159,1275,1404,1408,1337,1149,1074,1040,1065,1078,964,798,531,360,254,258];c.getPreviewValue=function(a,b,e,d,h,c,t,l,k,u,v,w,x){t.dynamicReportInfo?(d=u?w.getFieldValueAt(a.fieldInfo.name,v):f.getFieldDataValue(a.fieldInfo,t.dynamicReportInfo.fieldData,l),d=m.parseNumber(d),isNaN(d)&&console.log("Can't render chart value for field \x3d\x3e "+(a.fieldInfo?
a.fieldInfo.name:"missing field"))):(k=k||(x?p:g),d=k[b%k.length],d*=q[e%q.length]*(0===e?1:r[b%r.length]),a=a.fieldInfo&&a.fieldInfo.statefulName&&a.fieldInfo.statefulName.charAt(0),b=d,"p"===a&&(b=Number((b/25).toFixed(1))),"i"===a&&(b=Number((b/7).toFixed(1))),d=b,h===n.GAUGE&&"p"!==a&&c.gaugeRangeMax&&(h=c.gaugeRangeMin||0,d=.4*(c.gaugeRangeMax-h)+h));return d};c.getCaptionValue=function(a,b){return a.captionFieldInfo?b.dynamicReportInfo?f.getFieldDataValue(a.captionFieldInfo,b.dynamicReportInfo.fieldData):
f.renderFieldInfoInTableCell(a.captionFieldInfo):""};c.allowNegativeValuesInPreview=function(a,b){return n.supportsNegativeValues(a)&&!b.isStacked&&!b.renderColumnBarsInOppositeDirections};c.getChartData=function(a,b,e,d){e=(e||(d?p:g)).slice();e.length=Math.min(e.length,b);var c=-Infinity;e.forEach(function(a){c=Math.max(c,a)});var f=1.1*a.max/c;return e=e.map(function(a){return a*f})};var l=g;c.setPreviewChartData=function(a){g=a||l};return c});