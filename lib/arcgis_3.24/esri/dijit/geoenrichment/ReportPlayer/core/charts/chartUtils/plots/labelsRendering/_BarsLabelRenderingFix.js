// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.24/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/chartUtils/plots/labelsRendering/_BarsLabelRenderingFix",["dojo/_base/declare","./LabelsUtil","./LabelOverlapFixer"],function(e,k,l){return e(null,{_labelBoxes:null,resetEvents:function(){this.inherited(arguments);this._labelBoxes=[]},createLabel:function(b,d,c,a,f,m){function g(){var g=k.getLabelInfo(h,d,a);h._renderOutside(g,b,d,c,a,f,m)}function e(){var f=k.getLabelInfo(h,d,a);if(!(f.box.h>c.height)){var e=f.box.w+2*h.opt.labelOffset;e>
c.width?h.chart.plotArea.width-c.width>e&&g():h._renderInside(f,b,d,c,a)}}var h=this;this.opt.labels&&"outside"===this.opt.labelStyle?g():this.opt.labels&&"inside"===this.opt.labelStyle?e():this.inherited(arguments)},_renderOutside:function(b,d,c,a,f,e,g){c=c[c.valueProp];this._labelBoxes.push({x:"right"===this.opt.labelHorizontalAlign&&"outside"===this.opt.labelStyle?0<c?e.width-g.r-b.box.w:g.l+2:0<c?a.x+a.width+this.opt.labelOffset:a.x-this.opt.labelOffset-b.box.w,y:a.y+b.box.h/b.numRows+(a.height-
b.box.h)/2-2,w:b.box.w,h:b.box.h,group:d,text:b.text})},_renderInside:function(b,d,c,a,f){c=a.y+b.box.h/b.numRows+(a.height-b.box.h)/2-2;switch(this.opt.labelHorizontalAlign){case "left":a=a.x+this.opt.labelOffset;break;case "right":a=a.x+a.width-b.box.w-this.opt.labelOffset;break;default:a=a.x+a.width/2-b.box.w/2}this._labelBoxes.push({x:a,y:c,w:b.box.w,h:b.box.h,group:d,text:b.text})},_renderLabels:function(b,d,c,a){l.fixLabelsOverlap(this._labelBoxes,d,c,this._getFixLabelsParams(),a);this._labelBoxes.forEach(function(a){a.hidden||
this.renderLabel(a.group,a.x,a.y,a.text,b,!0,"left")},this)},_getFixLabelsParams:function(){return{allowXShift:!0,allowYShift:!0,xGap:3,yGap:3,xTolerance:0,yTolerance:0}}})});