// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.24/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/parsers/infographic/StaticInfographicParser",["dojo/_base/lang","../../../ConversionUtil","esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes"],function(u,e,b){return{portalToEditor:function(c,g){function k(a){return g.parsers.getParser("section").parseTable(a,g)}var r=c.tags.slice(),l,n=[],p,q;(function(){1.1<=g.revisionVersion?r.forEach(function(a){switch(a.attributes.type){case b.INFOGRAPHIC_HEADER:l=
a.tags[0];break;case b.INFOGRAPHIC_VARIABLE:n.push(a);break;case b.INFOGRAPHIC_BACKGROUND:p=a.tags;break;case b.INFOGRAPHIC_FOREGROUND:q=a.tags}}):n=r.filter(function(a){return"infographicHeader"===a.attributes.type?(l=a,!1):!0})})();var m,t={type:c.attributes.type,isDefault:c.attributes.isDefault,style:{width:e.ptToPx(c.attributes.width),height:e.ptToPx(c.attributes.height),minWidth:e.ptToPx(c.attributes.minWidth)||void 0,minHeight:e.ptToPx(c.attributes.minHeight)||void 0,backgroundColor:c.attributes.backgroundColor},
background:p?p.map(k):null,header:l&&k(l),variableTables:n.map(function(a){var c={style:e.ptToPxObj({left:a.attributes.left,top:a.attributes.top,width:a.attributes.width,height:a.attributes.height})},h;a.tags.forEach(function(a){if("dataDrillingPanels"===a.name)h=a;else{var b=a.attributes.type,d=k(a),f=d.data.data[0],e=d.data.columns[0].field;a={isContrastColor:a.attributes.isContrastColor,isHighlighted:a.attributes.isHighlighted,style:u.mixin({width:d.data.columns[0].style.width,height:f.style.height,
left:d.style.left,top:d.style.spaceBefore},f.style.fields[e])};delete a.style.overrideStyle;"shape"===b&&(a.shapeJson=f.fieldInfos[e].shapeJson);"image"===b?a.imageJson=f.fieldInfos[e].imageJson:"variable"===b?a.fieldInfo=f.fieldInfos[e]:"description"===b&&(a.text=f[e]);c[b]=a}});if(h&&h.tags&&h.tags.length){a=function(a){m=m||{};m[c.variable.fieldInfo.templateName]=a};var d=h.tags[0];if(d.attributes&&d.attributes.isStandard)a("standard");else{var b=d.tags&&d.tags[0];b&&"section"===b.name&&a({states:d.attributes&&
d.attributes.states,sectionJson:g.parsers.getParser("section").parseSection(b,g)})}}return c}),foreground:q?q.map(k):null};t.dataDrilling=m;return t}}});