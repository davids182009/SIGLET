// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.24/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/dataProvider/_ServerSerializationSupport","dojo/_base/declare dojo/when esri/graphic esri/geometry/Polygon ./supportClasses/ReportDataProcessor ./supportClasses/tasks/parsers/DataXMLParser ../core/supportClasses/ReportTemplateTypes ../core/supportClasses/templateJsonUtils/TemplateJsonSerializer ../core/conversion/PortalToEditorConverter".split(" "),function(f,g,h,l,m,n,p,q,r){return f(null,{_reportDataFromServerData:function(c){function f(a){a={metadata:{},
areaData:[],errors:[]};var b=e.filter(function(a){return"data.xml"===a.name})[0],d=/.*\.png/i,c={};e.forEach(function(a){d.test(a.name)&&(c[a.name]=a.data)});b={areaData:n.parse(b.data,function(a,b){return c[b]||b})};m.applyRunReportAndGetDataResults(b,{fieldData:a});return a}function t(a){if(c.studyAreas)return c.studyAreas.map(function(a,b){return{name:"Area "+(b+1),feature:new h(a)}});for(var b=[],d=0;d<a;d++)b.push({name:"Area "+(d+1),feature:new h(new l)});return b}var u=this,e;if(Array.isArray(c.files))e=
c.files;else{e=[];for(var k in c.files)e.push({name:k,data:c.files[k]})}return g(function(){var a={isGraphicReport:!0,portalJson:{files:e}};return g(r.provideEditorJson(a),function(){a.templateJson=q.deserialize(a.templateJson);delete a.portalJson;return a})}(),function(a){var b=f(a),d=t(b.areaData.length);return{isClassic:!1,reportType:p.STANDARD,reportTitle:"",templateJson:a.templateJson,reportObject:a,fieldData:b,analysisAreas:d,infographicOptions:u._infographicOptionsProvider.getInfographicOptions({geoenrichmentUrl:"",
countryID:"",reportID:"",analysisAreas:d}),attachmentsStore:null,config:c.config||{}}})}})});